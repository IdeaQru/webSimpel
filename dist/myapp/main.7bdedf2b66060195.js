(self.webpackChunkmyapp=self.webpackChunkmyapp||[]).push([[792],{504:(Dp,Ap,It)=>{"use strict";function Ye(i){return"function"==typeof i}function mi(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Sa=mi(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Di(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class tn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(Ye(n))try{n()}catch(o){t=o instanceof Sa?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{Ca(o)}catch(s){t=t??[],s instanceof Sa?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Sa(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Ca(t);else{if(t instanceof tn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Di(e,t)}remove(t){const{_finalizers:e}=this;e&&Di(e,t),t instanceof tn&&t._removeParent(this)}}tn.EMPTY=(()=>{const i=new tn;return i.closed=!0,i})();const ri=tn.EMPTY;function Oh(i){return i instanceof tn||i&&"closed"in i&&Ye(i.remove)&&Ye(i.add)&&Ye(i.unsubscribe)}function Ca(i){Ye(i)?i():i.unsubscribe()}const Ai={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},pr={setTimeout(i,t,...e){const{delegate:n}=pr;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=pr;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ud(i){pr.setTimeout(()=>{const{onUnhandledError:t}=Ai;if(!t)throw i;t(i)})}function Bo(){}const Ui=hd("C",void 0,void 0);function hd(i,t,e){return{kind:i,value:t,error:e}}let Rn=null;function Ea(i){if(Ai.useDeprecatedSynchronousErrorHandling){const t=!Rn;if(t&&(Rn={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=Rn;if(Rn=null,e)throw n}}else i()}class kl extends tn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Oh(t)&&t.add(this)):this.destination=Uo}static create(t,e,n){return new Ta(t,e,n)}next(t){this.isStopped?Fh(function t0(i){return hd("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Fh(function Ip(i){return hd("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Fh(Ui,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rp=Function.prototype.bind;function md(i,t){return Rp.call(i,t)}class Lh{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){kn(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){kn(n)}else kn(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){kn(e)}}}class Ta extends kl{constructor(t,e,n){let r;if(super(),Ye(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let o;this&&Ai.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&md(t.next,o),error:t.error&&md(t.error,o),complete:t.complete&&md(t.complete,o)}):r=t}this.destination=new Lh(r)}}function kn(i){Ai.useDeprecatedSynchronousErrorHandling?function fd(i){Ai.useDeprecatedSynchronousErrorHandling&&Rn&&(Rn.errorThrown=!0,Rn.error=i)}(i):ud(i)}function Fh(i,t){const{onStoppedNotification:e}=Ai;e&&pr.setTimeout(()=>e(i,t))}const Uo={closed:!0,next:Bo,error:function kr(i){throw i},complete:Bo},Nh="function"==typeof Symbol&&Symbol.observable||"@@observable";function an(i){return i}function Ae(i){return 0===i.length?an:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let Mi=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const o=function ir(i){return i&&i instanceof kl||function Wi(i){return i&&Ye(i.next)&&Ye(i.error)&&Ye(i.complete)}(i)&&Oh(i)}(e)?e:new Ta(e,n,r);return Ea(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Me(n))((r,o)=>{const s=new Ta({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Nh](){return this}pipe(...e){return Ae(e)(this)}toPromise(e){return new(e=Me(e))((n,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>n(o))})}}return i.create=t=>new i(t),i})();function Me(i){var t;return null!==(t=i??Ai.Promise)&&void 0!==t?t:Promise}const nr=mi(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Wt=(()=>{class i extends Mi{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new pi(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new nr}next(e){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:o}=this;return n||r?ri:(this.currentObservers=null,o.push(e),new tn(()=>{this.currentObservers=null,Di(o,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:o}=this;n?e.error(r):o&&e.complete()}asObservable(){const e=new Mi;return e.source=this,e}}return i.create=(t,e)=>new pi(t,e),i})();class pi extends Wt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:ri}}function ti(i){return Ye(i?.lift)}function gi(i){return t=>{if(ti(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function hi(i,t,e,n,r){return new kp(i,t,e,n,r)}class kp extends kl{constructor(t,e,n,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Ee(i,t){return gi((e,n)=>{let r=0;e.subscribe(hi(n,o=>{n.next(i.call(t,o,r++))}))})}function zo(i){return this instanceof zo?(this.v=i,this):new zo(i)}function gd(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function Nl(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(d){o({value:d,done:a})},s)}(a,l,(s=i[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Gh=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function _d(i){return Ye(i?.then)}function jp(i){return Ye(i[Nh])}function $p(i){return Symbol.asyncIterator&&Ye(i?.[Symbol.asyncIterator])}function qp(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Zr=function f0(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function re(i){return Ye(i?.[Zr])}function Wh(i){return function Up(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(g){return function(_){return Promise.resolve(_).then(g,f)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(g,_){n[g]&&(r[g]=function(b){return new Promise(function(y,v){o.push([g,b,y,v])>1||l(g,b)})},_&&(r[g]=_(r[g])))}function l(g,_){try{!function d(g){g.value instanceof zo?Promise.resolve(g.value.v).then(h,f):m(o[0][2],g)}(n[g](_))}catch(b){m(o[0][3],b)}}function h(g){l("next",g)}function f(g){l("throw",g)}function m(g,_){g(_),o.shift(),o.length&&l(o[0][0],o[0][1])}}(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield zo(e.read());if(r)return yield zo(void 0);yield yield zo(n)}}finally{e.releaseLock()}})}function jh(i){return Ye(i?.getReader)}function Bn(i){if(i instanceof Mi)return i;if(null!=i){if(jp(i))return function Zp(i){return new Mi(t=>{const e=i[Nh]();if(Ye(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Gh(i))return function $h(i){return new Mi(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(_d(i))return function Xp(i){return new Mi(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,ud)})}(i);if($p(i))return qh(i);if(re(i))return function Da(i){return new Mi(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(jh(i))return function m0(i){return qh(Wh(i))}(i)}throw qp(i)}function qh(i){return new Mi(t=>{(function p0(i,t){var e,n,r,o;return function zh(i,t,e,n){return new(e||(e=Promise))(function(o,s){function a(h){try{d(n.next(h))}catch(f){s(f)}}function l(h){try{d(n.throw(h))}catch(f){s(f)}}function d(h){h.done?o(h.value):function r(o){return o instanceof e?o:new e(function(s){s(o)})}(h.value).then(a,l)}d((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=gd(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function Vo(i,t,e,n=0,r=!1){const o=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(o),!r)return o}function gn(i,t,e=1/0){return Ye(t)?gn((n,r)=>Ee((o,s)=>t(n,o,r,s))(Bn(i(n,r))),e):("number"==typeof t&&(e=t),gi((n,r)=>function g0(i,t,e,n,r,o,s,a){const l=[];let d=0,h=0,f=!1;const m=()=>{f&&!l.length&&!d&&t.complete()},g=b=>d<n?_(b):l.push(b),_=b=>{o&&t.next(b),d++;let y=!1;Bn(e(b,h++)).subscribe(hi(t,v=>{r?.(v),o?g(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(d--;l.length&&d<n;){const v=l.shift();s?Vo(t,s,()=>_(v)):_(v)}m()}catch(v){t.error(v)}}))};return i.subscribe(hi(t,g,()=>{f=!0,m()})),()=>{a?.()}}(n,r,i,e)))}function Aa(i=1/0){return gn(an,i)}const rr=new Mi(i=>i.complete());function Yp(i){return i&&Ye(i.schedule)}function Zh(i){return i[i.length-1]}function Kp(i){return Ye(Zh(i))?i.pop():void 0}function ks(i){return Yp(Zh(i))?i.pop():void 0}function Xh(i,t=0){return gi((e,n)=>{e.subscribe(hi(n,r=>Vo(n,i,()=>n.next(r),t),()=>Vo(n,i,()=>n.complete(),t),r=>Vo(n,i,()=>n.error(r),t)))})}function Yh(i,t=0){return gi((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function Ps(i,t){if(!i)throw new Error("Iterable cannot be null");return new Mi(e=>{Vo(e,t,()=>{const n=i[Symbol.asyncIterator]();Vo(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Jt(i,t){return t?function Kh(i,t){if(null!=i){if(jp(i))return function Ul(i,t){return Bn(i).pipe(Yh(t),Xh(t))}(i,t);if(Gh(i))return function ji(i,t){return new Mi(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(_d(i))return function si(i,t){return Bn(i).pipe(Yh(t),Xh(t))}(i,t);if($p(i))return Ps(i,t);if(re(i))return function vd(i,t){return new Mi(e=>{let n;return Vo(e,t,()=>{n=i[Zr](),Vo(e,t,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(s){return void e.error(s)}o?e.complete():e.next(r)},0,!0)}),()=>Ye(n?.return)&&n.return()})}(i,t);if(jh(i))return function Ia(i,t){return Ps(Wh(i),t)}(i,t)}throw qp(i)}(i,t):Bn(i)}function Ii(...i){const t=ks(i),e=function Bl(i,t){return"number"==typeof Zh(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?Bn(n[0]):Aa(e)(Jt(n,t)):rr}class _n extends Wt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}function jt(...i){return Jt(i,ks(i))}function Zn(i={}){const{connector:t=(()=>new Wt),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return o=>{let s,a,l,d=0,h=!1,f=!1;const m=()=>{a?.unsubscribe(),a=void 0},g=()=>{m(),s=l=void 0,h=f=!1},_=()=>{const b=s;g(),b?.unsubscribe()};return gi((b,y)=>{d++,!f&&!h&&m();const v=l=l??t();y.add(()=>{d--,0===d&&!f&&!h&&(a=Qh(_,r))}),v.subscribe(y),!s&&d>0&&(s=new Ta({next:w=>v.next(w),error:w=>{f=!0,m(),a=Qh(g,e,w),v.error(w)},complete:()=>{h=!0,m(),a=Qh(g,n),v.complete()}}),Bn(b).subscribe(s))})(o)}}function Qh(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Ta({next:()=>{n.unsubscribe(),i()}});return Bn(t(...e)).subscribe(n)}function or(i,t){return gi((e,n)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&n.complete();e.subscribe(hi(n,l=>{r?.unsubscribe();let d=0;const h=o++;Bn(i(l,h)).subscribe(r=hi(n,f=>n.next(t?t(l,f,h,d++):f),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function rs(i,t=an){return i=i??ln,gi((e,n)=>{let r,o=!0;e.subscribe(hi(n,s=>{const a=t(s);(o||!i(r,a))&&(o=!1,r=a,n.next(s))}))})}function ln(i,t){return i===t}function ei(i){for(let t in i)if(i[t]===ei)return t;throw Error("Could not find renamed property on target object.")}function os(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function $i(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map($i).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function zl(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const Vl=ei({__forward_ref__:ei});function _i(i){return i.__forward_ref__=_i,i.toString=function(){return $i(this())},i}function ve(i){return Ra(i)?i():i}function Ra(i){return"function"==typeof i&&i.hasOwnProperty(Vl)&&i.__forward_ref__===_i}function Hl(i){return i&&!!i.\u0275providers}const Gl="https://g.co/ng/security#xss";class nt extends Error{constructor(t,e){super(function ka(i,t){return`NG0${Math.abs(i)}${t?": "+t:""}`}(t,e)),this.code=t}}function Se(i){return"string"==typeof i?i:null==i?"":String(i)}function Wl(i,t){throw new nt(-201,!1)}function gr(i,t){null==i&&function Rt(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function bt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Te(i){return{providers:i.providers||[],imports:i.imports||[]}}function bd(i){return ng(i,xd)||ng(i,rg)}function ng(i,t){return i.hasOwnProperty(t)?i[t]:null}function Oa(i){return i&&(i.hasOwnProperty(Pr)||i.hasOwnProperty(og))?i[Pr]:null}const xd=ei({\u0275prov:ei}),Pr=ei({\u0275inj:ei}),rg=ei({ngInjectableDef:ei}),og=ei({ngInjectorDef:ei});var De=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(De||{});let wd;function zn(i){const t=wd;return wd=i,t}function sg(i,t,e){const n=bd(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&De.Optional?null:void 0!==t?t:void Wl($i(i))}const Ri=globalThis;class at{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=bt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Fs={},jl="__NG_DI_FLAG__",Cd="ngTempTokenPath",ag=/\n/gm,Or="__source";let Kr;function Vn(i){const t=Kr;return Kr=i,t}function A0(i,t=De.Default){if(void 0===Kr)throw new nt(-203,!1);return null===Kr?sg(i,void 0,t):Kr.get(i,t&De.Optional?null:void 0,t)}function Y(i,t=De.Default){return(function tf(){return wd}()||A0)(ve(i),t)}function wt(i,t=De.Default){return Y(i,$l(t))}function $l(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Fa(i){const t=[];for(let e=0;e<i.length;e++){const n=ve(i[e]);if(Array.isArray(n)){if(0===n.length)throw new nt(900,!1);let r,o=De.Default;for(let s=0;s<n.length;s++){const a=n[s],l=ss(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(Y(r,o))}else t.push(Y(n))}return t}function ql(i,t){return i[jl]=t,i.prototype[jl]=t,i}function ss(i){return i[jl]}function Qr(i){return{toString:i}.toString()}var Td=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(Td||{}),cn=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(cn||{});const So={},qe=[],Dd=ei({\u0275cmp:ei}),Jr=ei({\u0275dir:ei}),Na=ei({\u0275pipe:ei}),sf=ei({\u0275mod:ei}),to=ei({\u0275fac:ei}),as=ei({__NG_ELEMENT_ID__:ei}),Ad=ei({__NG_ENV_ID__:ei});function Zl(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const o=t.length;if(r+o===n||i.charCodeAt(r+o)<=32)return r}e=r+1}}function ls(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const o=e[n++],s=e[n++],a=e[n++];i.setAttribute(t,s,a,o)}else{const o=r,s=e[++n];Id(o)?i.setProperty(t,o,s):i.setAttribute(t,o,s),n++}}return n}function Xl(i){return 3===i||4===i||6===i}function Id(i){return 64===i.charCodeAt(0)}function Ba(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||cg(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function cg(i,t,e,n,r){let o=0,s=i.length;if(-1===t)s=-1;else for(;o<i.length;){const a=i[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<i.length;){const a=i[o];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[o+1]=r));if(n===i[o+1])return void(i[o+2]=r)}o++,null!==n&&o++,null!==r&&o++}-1!==s&&(i.splice(s,0,t),o=s+1),i.splice(o++,0,e),null!==n&&i.splice(o++,0,n),null!==r&&i.splice(o++,0,r)}const Yl="ng-template";function R0(i,t,e){let n=0,r=!0;for(;n<i.length;){let o=i[n++];if("string"==typeof o&&r){const s=i[n++];if(e&&"class"===o&&-1!==Zl(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;n<i.length&&"string"==typeof(o=i[n++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(r=!1)}}return!1}function af(i){return 4===i.type&&i.value!==Yl}function k0(i,t,e){return t===(4!==i.type||e?i.value:Yl)}function dg(i,t,e){let n=4;const r=i.attrs||[],o=function Rd(i){for(let t=0;t<i.length;t++)if(Xl(i[t]))return t;return i.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&n){if(n=2|1&n,""!==l&&!k0(i,l,e)||""===l&&1===t.length){if(eo(n))return!1;s=!0}}else{const d=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!R0(i.attrs,d,e)){if(eo(n))return!1;s=!0}continue}const f=Co(8&n?"class":l,r,af(i),e);if(-1===f){if(eo(n))return!1;s=!0;continue}if(""!==d){let m;m=f>o?"":r[f+1].toLowerCase();const g=8&n?m:null;if(g&&-1!==Zl(g,d,0)||2&n&&d!==m){if(eo(n))return!1;s=!0}}}}else{if(!s&&!eo(n)&&!eo(l))return!1;if(s&&eo(l))continue;s=!1,n=l|1&n}}return eo(n)||s}function eo(i){return 0==(1&i)}function Co(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let o=!1;for(;r<t.length;){const s=t[r];if(s===i)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function O0(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function Kl(i,t,e=!1){for(let n=0;n<t.length;n++)if(dg(i,t[n],e))return!0;return!1}function ug(i,t){t:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue t;return!0}}return!1}function hg(i,t){return i?":not("+t.trim()+")":t}function Ql(i){let t=i[0],e=1,n=2,r="",o=!1;for(;e<i.length;){let s=i[e];if("string"==typeof s)if(2&n){const a=i[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+s:4&n&&(r+=" "+s);else""!==r&&!eo(s)&&(t+=hg(o,r),r=""),n=s,o=o||!eo(n);e++}return""!==r&&(t+=hg(o,r)),t}function Ke(i){return Qr(()=>{const t=lf(i),e={...t,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Td.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||cn.Emulated,styles:i.styles||qe,_:null,schemas:i.schemas||null,tView:null,id:""};cf(e);const n=i.dependencies;return e.directiveDefs=Jl(n,!1),e.pipeDefs=Jl(n,!0),e.id=function N0(i){let t=0;const e=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(e),e})}function F0(i){return Ge(i)||xn(i)}function Ho(i){return null!==i}function Oe(i){return Qr(()=>({type:i.type,bootstrap:i.bootstrap||qe,declarations:i.declarations||qe,imports:i.imports||qe,exports:i.exports||qe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function za(i,t){if(null==i)return So;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=n,t&&(t[r]=o)}return e}function dt(i){return Qr(()=>{const t=lf(i);return cf(t),t})}function Ge(i){return i[Dd]||null}function xn(i){return i[Jr]||null}function Hn(i){return i[Na]||null}function sr(i,t){const e=i[sf]||null;if(!e&&!0===t)throw new Error(`Type ${$i(i)} does not have '\u0275mod' property.`);return e}function lf(i){const t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:i.inputs||So,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||qe,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:za(i.inputs,t),outputs:za(i.outputs)}}function cf(i){i.features?.forEach(t=>t(i))}function Jl(i,t){if(!i)return null;const e=t?Hn:F0;return()=>("function"==typeof i?i():i).map(n=>e(n)).filter(Ho)}const qi=0,Pt=1,Ie=2,c=3,u=4,p=5,x=6,M=7,E=8,V=9,X=10,W=11,ut=12,Ft=13,ue=14,ee=15,vn=16,Zi=17,nn=18,wn=19,Ns=20,cs=21,Go=22,tc=23,Ha=24,Ze=25,en=1,ec=2,Eo=7,Ga=9,Mn=11;function Lr(i){return Array.isArray(i)&&"object"==typeof i[en]}function _r(i){return Array.isArray(i)&&!0===i[en]}function U0(i){return 0!=(4&i.flags)}function ic(i){return i.componentOffset>-1}function gg(i){return 1==(1&i.flags)}function Wo(i){return!!i.template}function z0(i){return 0!=(512&i[Ie])}function nc(i,t){return i.hasOwnProperty(to)?i[to]:null}let Yn=null,_g=!1;function To(i){const t=Yn;return Yn=i,t}const kD={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function OD(i){if(!df(i)||i.dirty){if(!i.producerMustRecompute(i)&&!ND(i))return void(i.dirty=!1);i.producerRecomputeValue(i),i.dirty=!1}}function FD(i){i.dirty=!0,function LD(i){if(void 0===i.liveConsumerNode)return;const t=_g;_g=!0;try{for(const e of i.liveConsumerNode)e.dirty||FD(e)}finally{_g=t}}(i),i.consumerMarkedDirty?.(i)}function H0(i){return i&&(i.nextProducerIndex=0),To(i)}function G0(i,t){if(To(t),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(df(i))for(let e=i.nextProducerIndex;e<i.producerNode.length;e++)vg(i.producerNode[e],i.producerIndexOfThis[e]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function ND(i){Pd(i);for(let t=0;t<i.producerNode.length;t++){const e=i.producerNode[t],n=i.producerLastReadVersion[t];if(n!==e.version||(OD(e),n!==e.version))return!0}return!1}function BD(i){if(Pd(i),df(i))for(let t=0;t<i.producerNode.length;t++)vg(i.producerNode[t],i.producerIndexOfThis[t]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function vg(i,t){if(function zD(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),Pd(i),1===i.liveConsumerNode.length)for(let n=0;n<i.producerNode.length;n++)vg(i.producerNode[n],i.producerIndexOfThis[n]);const e=i.liveConsumerNode.length-1;if(i.liveConsumerNode[t]=i.liveConsumerNode[e],i.liveConsumerIndexOfThis[t]=i.liveConsumerIndexOfThis[e],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,t<i.liveConsumerNode.length){const n=i.liveConsumerIndexOfThis[t],r=i.liveConsumerNode[t];Pd(r),r.producerIndexOfThis[n]=t}}function df(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function Pd(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let VD=null;const jD=()=>{},Kz=(()=>({...kD,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule(i.ref)},hasRun:!1,cleanupFn:jD}))();class Qz{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Gn(){return $D}function $D(i){return i.type.prototype.ngOnChanges&&(i.setInput=tV),Jz}function Jz(){const i=ZD(this),t=i?.current;if(t){const e=i.previous;if(e===So)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function tV(i,t,e,n){const r=this.declaredInputs[e],o=ZD(i)||function eV(i,t){return i[qD]=t}(i,{previous:So,current:null}),s=o.current||(o.current={}),a=o.previous,l=a[r];s[r]=new Qz(l&&l.currentValue,t,a===So),i[n]=t}Gn.ngInherit=!0;const qD="__ngSimpleChanges__";function ZD(i){return i[qD]||null}const ds=function(i,t,e){};function zi(i){for(;Array.isArray(i);)i=i[qi];return i}function yg(i,t){return zi(t[i])}function Fr(i,t){return zi(t[i.index])}function KD(i,t){return i.data[t]}function io(i,t){const e=t[i];return Lr(e)?e:e[qi]}function ja(i,t){return null==t?null:i[t]}function QD(i){i[Zi]=0}function aV(i){1024&i[Ie]||(i[Ie]|=1024,tA(i,1))}function JD(i){1024&i[Ie]&&(i[Ie]&=-1025,tA(i,-1))}function tA(i,t){let e=i[c];if(null===e)return;e[p]+=t;let n=e;for(e=e[c];null!==e&&(1===t&&1===n[p]||-1===t&&0===n[p]);)e[p]+=t,n=e,e=e[c]}const be={lFrame:uA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nA(){return be.bindingsEnabled}function Ld(){return null!==be.skipHydrationRootTNode}function ft(){return be.lFrame.lView}function ai(){return be.lFrame.tView}function bg(i){return be.lFrame.contextLView=i,i[E]}function xg(i){return be.lFrame.contextLView=null,i}function Kn(){let i=rA();for(;null!==i&&64===i.type;)i=i.parent;return i}function rA(){return be.lFrame.currentTNode}function us(i,t){const e=be.lFrame;e.currentTNode=i,e.isParent=t}function Z0(){return be.lFrame.isParent}function X0(){be.lFrame.isParent=!1}function Fd(){return be.lFrame.bindingIndex++}function yV(i,t){const e=be.lFrame;e.bindingIndex=e.bindingRootIndex=i,Y0(t)}function Y0(i){be.lFrame.currentDirectiveIndex=i}function lA(){return be.lFrame.currentQueryIndex}function Q0(i){be.lFrame.currentQueryIndex=i}function xV(i){const t=i[Pt];return 2===t.type?t.declTNode:1===t.type?i[x]:null}function cA(i,t,e){if(e&De.SkipSelf){let r=t,o=i;for(;!(r=r.parent,null!==r||e&De.Host||(r=xV(o),null===r||(o=o[ue],10&r.type))););if(null===r)return!1;t=r,i=o}const n=be.lFrame=dA();return n.currentTNode=t,n.lView=i,!0}function J0(i){const t=dA(),e=i[Pt];be.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function dA(){const i=be.lFrame,t=null===i?null:i.child;return null===t?uA(i):t}function uA(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function hA(){const i=be.lFrame;return be.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const fA=hA;function tx(){const i=hA();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yr(){return be.lFrame.selectedIndex}function rc(i){be.lFrame.selectedIndex=i}function rn(){const i=be.lFrame;return KD(i.tView,i.selectedIndex)}let _A=!0;function wg(){return _A}function $a(i){_A=i}function Mg(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const o=i.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:h}=o;s&&(i.contentHooks??=[]).push(-e,s),a&&((i.contentHooks??=[]).push(e,a),(i.contentCheckHooks??=[]).push(e,a)),l&&(i.viewHooks??=[]).push(-e,l),d&&((i.viewHooks??=[]).push(e,d),(i.viewCheckHooks??=[]).push(e,d)),null!=h&&(i.destroyHooks??=[]).push(e,h)}}function Sg(i,t,e){vA(i,t,3,e)}function Cg(i,t,e,n){(3&i[Ie])===e&&vA(i,t,e,n)}function ex(i,t){let e=i[Ie];(3&e)===t&&(e&=8191,e+=1,i[Ie]=e)}function vA(i,t,e,n){const o=n??-1,s=t.length-1;let a=0;for(let l=void 0!==n?65535&i[Zi]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[Zi]+=65536),(a<o||-1==o)&&(TV(i,e,t,l),i[Zi]=(4294901760&i[Zi])+l+2),l++}function yA(i,t){ds(4,i,t);const e=To(null);try{t.call(i)}finally{To(e),ds(5,i,t)}}function TV(i,t,e,n){const r=e[n]<0,o=e[n+1],a=i[r?-e[n]:e[n]];r?i[Ie]>>13<i[Zi]>>16&&(3&i[Ie])===t&&(i[Ie]+=8192,yA(a,o)):yA(a,o)}const Nd=-1;class hf{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function nx(i){return i!==Nd}function ff(i){return 32767&i}function mf(i,t){let e=function RV(i){return i>>16}(i),n=t;for(;e>0;)n=n[ue],e--;return n}let rx=!0;function Eg(i){const t=rx;return rx=i,t}const bA=255,xA=5;let kV=0;const hs={};function Tg(i,t){const e=wA(i,t);if(-1!==e)return e;const n=t[Pt];n.firstCreatePass&&(i.injectorIndex=t.length,ox(n.data,i),ox(t,null),ox(n.blueprint,null));const r=Dg(i,t),o=i.injectorIndex;if(nx(r)){const s=ff(r),a=mf(r,t),l=a[Pt].data;for(let d=0;d<8;d++)t[o+d]=a[s+d]|l[s+d]}return t[o+8]=r,o}function ox(i,t){i.push(0,0,0,0,0,0,0,0,t)}function wA(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Dg(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=AA(r),null===n)return Nd;if(e++,r=r[ue],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return Nd}function sx(i,t,e){!function PV(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(as)&&(n=e[as]),null==n&&(n=e[as]=kV++);const r=n&bA;t.data[i+(r>>xA)]|=1<<r}(i,t,e)}function MA(i,t,e){if(e&De.Optional||void 0!==i)return i;Wl()}function SA(i,t,e,n){if(e&De.Optional&&void 0===n&&(n=null),!(e&(De.Self|De.Host))){const r=i[V],o=zn(void 0);try{return r?r.get(t,n,e&De.Optional):sg(t,n,e&De.Optional)}finally{zn(o)}}return MA(n,0,e)}function CA(i,t,e,n=De.Default,r){if(null!==i){if(2048&t[Ie]&&!(n&De.Self)){const s=function UV(i,t,e,n,r){let o=i,s=t;for(;null!==o&&null!==s&&2048&s[Ie]&&!(512&s[Ie]);){const a=EA(o,s,e,n|De.Self,hs);if(a!==hs)return a;let l=o.parent;if(!l){const d=s[Ns];if(d){const h=d.get(e,hs,n);if(h!==hs)return h}l=AA(s),s=s[ue]}o=l}return r}(i,t,e,n,hs);if(s!==hs)return s}const o=EA(i,t,e,n,hs);if(o!==hs)return o}return SA(t,e,n,r)}function EA(i,t,e,n,r){const o=function FV(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(as)?i[as]:void 0;return"number"==typeof t?t>=0?t&bA:BV:t}(e);if("function"==typeof o){if(!cA(t,i,n))return n&De.Host?MA(r,0,n):SA(t,e,n,r);try{let s;if(s=o(n),null!=s||n&De.Optional)return s;Wl()}finally{fA()}}else if("number"==typeof o){let s=null,a=wA(i,t),l=Nd,d=n&De.Host?t[ee][x]:null;for((-1===a||n&De.SkipSelf)&&(l=-1===a?Dg(i,t):t[a+8],l!==Nd&&DA(n,!1)?(s=t[Pt],a=ff(l),t=mf(l,t)):a=-1);-1!==a;){const h=t[Pt];if(TA(o,a,h.data)){const f=LV(a,t,e,s,n,d);if(f!==hs)return f}l=t[a+8],l!==Nd&&DA(n,t[Pt].data[a+8]===d)&&TA(o,a,t)?(s=h,a=ff(l),t=mf(l,t)):a=-1}}return r}function LV(i,t,e,n,r,o){const s=t[Pt],a=s.data[i+8],h=Ag(a,s,e,null==n?ic(a)&&rx:n!=s&&0!=(3&a.type),r&De.Host&&o===a);return null!==h?oc(t,s,h,a):hs}function Ag(i,t,e,n,r){const o=i.providerIndexes,s=t.data,a=1048575&o,l=i.directiveStart,h=o>>20,m=r?a+h:i.directiveEnd;for(let g=n?a:a+h;g<m;g++){const _=s[g];if(g<l&&e===_||g>=l&&_.type===e)return g}if(r){const g=s[l];if(g&&Wo(g)&&g.type===e)return l}return null}function oc(i,t,e,n){let r=i[e];const o=t.data;if(function DV(i){return i instanceof hf}(r)){const s=r;s.resolving&&function wo(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new nt(-200,`Circular dependency in DI detected for ${i}${e}`)}(function Lt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Se(i)}(o[e]));const a=Eg(s.canSeeViewProviders);s.resolving=!0;const d=s.injectImpl?zn(s.injectImpl):null;cA(i,n,De.Default);try{r=i[e]=s.factory(void 0,o,i,n),t.firstCreatePass&&e>=n.directiveStart&&function EV(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(n){const s=$D(t);(e.preOrderHooks??=[]).push(i,s),(e.preOrderCheckHooks??=[]).push(i,s)}r&&(e.preOrderHooks??=[]).push(0-i,r),o&&((e.preOrderHooks??=[]).push(i,o),(e.preOrderCheckHooks??=[]).push(i,o))}(e,o[e],t)}finally{null!==d&&zn(d),Eg(a),s.resolving=!1,fA()}}return r}function TA(i,t,e){return!!(e[t+(i>>xA)]&1<<i)}function DA(i,t){return!(i&De.Self||i&De.Host&&t)}class br{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return CA(this._tNode,this._lView,t,$l(n),e)}}function BV(){return new br(Kn(),ft())}function oi(i){return Qr(()=>{const t=i.prototype.constructor,e=t[to]||ax(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const o=r[to]||ax(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function ax(i){return Ra(i)?()=>{const t=ax(ve(i));return t&&t()}:nc(i)}function AA(i){const t=i[Pt],e=t.type;return 2===e?t.declTNode:1===e?i[x]:null}function Bd(i){return function OV(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const o=e[r];if(Xl(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(o===t)return e[r+1];r+=2}}}return null}(Kn(),i)}const zd="__parameters__";function Hd(i,t,e){return Qr(()=>{const n=function lx(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...o){if(this instanceof r)return n.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,d,h){const f=l.hasOwnProperty(zd)?l[zd]:Object.defineProperty(l,zd,{value:[]})[zd];for(;f.length<=h;)f.push(null);return(f[h]=f[h]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}function Wd(i,t){i.forEach(e=>Array.isArray(e)?Wd(e,t):t(e))}function RA(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Ig(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function _f(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function no(i,t,e){let n=jd(i,t);return n>=0?i[1|n]=e:(n=~n,function $V(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function cx(i,t){const e=jd(i,t);if(e>=0)return i[1|e]}function jd(i,t){return function kA(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const o=n+(r-n>>1),s=i[o<<e];if(t===s)return o<<e;s>t?r=o:n=o+1}return~(r<<e)}(i,t,1)}const sc=ql(Hd("Optional"),8),vf=ql(Hd("SkipSelf"),4);function Fg(i){return 128==(128&i.flags)}var qa=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(qa||{});const fH=/^>|^->|<!--|-->|--!>|<!-$/g,mH=/(<|>)/g,pH="\u200b$1\u200b";const mx=new Map;let gH=0;const gx="__ngContext__";function ar(i,t){Lr(t)?(i[gx]=t[wn],function vH(i){mx.set(i[wn],i)}(t)):i[gx]=t}let _x;function vx(i,t){return _x(i,t)}function xf(i){const t=i[c];return _r(t)?t[c]:t}function QA(i){return t1(i[ut])}function JA(i){return t1(i[u])}function t1(i){for(;null!==i&&!_r(i);)i=i[u];return i}function Zd(i,t,e,n,r){if(null!=n){let o,s=!1;_r(n)?o=n:Lr(n)&&(s=!0,n=n[qi]);const a=zi(n);0===i&&null!==e?null==r?o1(t,e,a):ac(t,e,a,r||null,!0):1===i&&null!==e?ac(t,e,a,r||null,!0):2===i?function Gg(i,t,e){const n=Vg(i,t);n&&function NH(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,a,s):3===i&&t.destroyNode(a),null!=o&&function zH(i,t,e,n,r){const o=e[Eo];o!==zi(e)&&Zd(t,i,n,o,r);for(let a=Mn;a<e.length;a++){const l=e[a];Mf(l[Pt],l,i,t,n,o)}}(t,i,o,e,r)}}function yx(i,t){return i.createComment(function WA(i){return i.replace(fH,t=>t.replace(mH,pH))}(t))}function Ug(i,t,e){return i.createElement(t,e)}function n1(i,t){const e=i[Ga],n=e.indexOf(t);JD(t),e.splice(n,1)}function zg(i,t){if(i.length<=Mn)return;const e=Mn+t,n=i[e];if(n){const r=n[vn];null!==r&&r!==i&&n1(r,n),t>0&&(i[e-1][u]=n[u]);const o=Ig(i,Mn+t);!function AH(i,t){Mf(i,t,t[W],2,null,null),t[qi]=null,t[x]=null}(n[Pt],n);const s=o[nn];null!==s&&s.detachView(o[Pt]),n[c]=null,n[u]=null,n[Ie]&=-129}return n}function bx(i,t){if(!(256&t[Ie])){const e=t[W];t[tc]&&BD(t[tc]),t[Ha]&&BD(t[Ha]),e.destroyNode&&Mf(i,t,e,3,null,null),function kH(i){let t=i[ut];if(!t)return xx(i[Pt],i);for(;t;){let e=null;if(Lr(t))e=t[ut];else{const n=t[Mn];n&&(e=n)}if(!e){for(;t&&!t[u]&&t!==i;)Lr(t)&&xx(t[Pt],t),t=t[c];null===t&&(t=i),Lr(t)&&xx(t[Pt],t),e=t&&t[u]}t=e}}(t)}}function xx(i,t){if(!(256&t[Ie])){t[Ie]&=-129,t[Ie]|=256,function FH(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof hf)){const o=e[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];ds(4,a,l);try{l.call(a)}finally{ds(5,a,l)}}else{ds(4,r,o);try{o.call(r)}finally{ds(5,r,o)}}}}}(i,t),function LH(i,t){const e=i.cleanup,n=t[M];if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+3];s>=0?n[s]():n[-s].unsubscribe(),o+=2}else e[o].call(n[e[o+1]]);null!==n&&(t[M]=null);const r=t[cs];if(null!==r){t[cs]=null;for(let o=0;o<r.length;o++)(0,r[o])()}}(i,t),1===t[Pt].type&&t[W].destroy();const e=t[vn];if(null!==e&&_r(t[c])){e!==t[c]&&n1(e,t);const n=t[nn];null!==n&&n.detachView(i)}!function yH(i){mx.delete(i[wn])}(t)}}function wx(i,t,e){return function r1(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[qi];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:o}=i.data[n.directiveStart+r];if(o===cn.None||o===cn.Emulated)return null}return Fr(n,e)}}(i,t.parent,e)}function ac(i,t,e,n,r){i.insertBefore(t,e,n,r)}function o1(i,t,e){i.appendChild(t,e)}function s1(i,t,e,n,r){null!==n?ac(i,t,e,n,r):o1(i,t,e)}function Vg(i,t){return i.parentNode(t)}function a1(i,t,e){return c1(i,t,e)}let Mx,Wg,Tx,jg,c1=function l1(i,t,e){return 40&i.type?Fr(i,e):null};function Hg(i,t,e,n){const r=wx(i,n,t),o=t[W],a=a1(n.parent||t[x],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)s1(o,r,e[l],a,!1);else s1(o,r,e,a,!1);void 0!==Mx&&Mx(o,n,t,e,r)}function wf(i,t){if(null!==t){const e=t.type;if(3&e)return Fr(t,i);if(4&e)return Sx(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return wf(i,n);{const r=i[t.index];return _r(r)?Sx(-1,r):zi(r)}}if(32&e)return vx(t,i)()||zi(i[t.index]);{const n=u1(i,t);return null!==n?Array.isArray(n)?n[0]:wf(xf(i[ee]),n):wf(i,t.next)}}return null}function u1(i,t){return null!==t?i[ee][x].projection[t.projection]:null}function Sx(i,t){const e=Mn+i+1;if(e<t.length){const n=t[e],r=n[Pt].firstChild;if(null!==r)return wf(n,r)}return t[Eo]}function Cx(i,t,e,n,r,o,s){for(;null!=e;){const a=n[e.index],l=e.type;if(s&&0===t&&(a&&ar(zi(a),n),e.flags|=2),32!=(32&e.flags))if(8&l)Cx(i,t,e.child,n,r,o,!1),Zd(t,i,r,a,o);else if(32&l){const d=vx(e,n);let h;for(;h=d();)Zd(t,i,r,h,o);Zd(t,i,r,a,o)}else 16&l?f1(i,t,n,e,r,o):Zd(t,i,r,a,o);e=s?e.projectionNext:e.next}}function Mf(i,t,e,n,r,o){Cx(e,n,i.firstChild,t,r,o,!1)}function f1(i,t,e,n,r,o){const s=e[ee],l=s[x].projection[n.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++)Zd(t,i,r,l[d],o);else{let d=l;const h=s[c];Fg(n)&&(d.flags|=128),Cx(i,t,d,h,r,o,!0)}}function m1(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function p1(i,t,e){const{mergedAttrs:n,classes:r,styles:o}=e;null!==n&&ls(i,t,n),null!==r&&m1(i,t,r),null!==o&&function HH(i,t,e){i.setAttribute(t,"style",e)}(i,t,o)}function Xd(i){return function Ex(){if(void 0===Wg&&(Wg=null,Ri.trustedTypes))try{Wg=Ri.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Wg}()?.createHTML(i)||i}function v1(i){return function Dx(){if(void 0===jg&&(jg=null,Ri.trustedTypes))try{jg=Ri.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return jg}()?.createScriptURL(i)||i}class lc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gl})`}}class qH extends lc{getTypeName(){return"HTML"}}class ZH extends lc{getTypeName(){return"Style"}}class XH extends lc{getTypeName(){return"Script"}}class YH extends lc{getTypeName(){return"URL"}}class KH extends lc{getTypeName(){return"ResourceURL"}}function ro(i){return i instanceof lc?i.changingThisBreaksApplicationSecurity:i}function fs(i,t){const e=function QH(i){return i instanceof lc&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Gl})`)}return e===t}class o4{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Xd(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class s4{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Xd(t),e}}const l4=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $g(i){return(i=String(i)).match(l4)?i:"unsafe:"+i}function Vs(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Sf(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const b1=Vs("area,br,col,hr,img,wbr"),x1=Vs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),w1=Vs("rp,rt"),Ax=Sf(b1,Sf(x1,Vs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Sf(w1,Vs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Sf(w1,x1)),Ix=Vs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),M1=Sf(Ix,Vs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),c4=Vs("script,style,template");class d4{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Ax.hasOwnProperty(e))return this.sanitizedSomething=!0,!c4.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const o=n.item(r),s=o.name,a=s.toLowerCase();if(!M1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Ix[a]&&(l=$g(l)),this.buf.push(" ",s,'="',S1(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Ax.hasOwnProperty(e)&&!b1.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(S1(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const u4=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h4=/([^\#-~ |!])/g;function S1(i){return i.replace(/&/g,"&amp;").replace(u4,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(h4,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let qg;function C1(i,t){let e=null;try{qg=qg||function y1(i){const t=new s4(i);return function a4(){try{return!!(new window.DOMParser).parseFromString(Xd(""),"text/html")}catch{return!1}}()?new o4(t):t}(i);let n=t?String(t):"";e=qg.getInertBodyElement(n);let r=5,o=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=e.innerHTML,e=qg.getInertBodyElement(n)}while(n!==o);return Xd((new d4).sanitizeChildren(Rx(e)||e))}finally{if(e){const n=Rx(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Rx(i){return"content"in i&&function f4(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Qn=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Qn||{});function E1(i){const t=Cf();return t?t.sanitize(Qn.URL,i)||"":fs(i,"URL")?ro(i):$g(Se(i))}function T1(i){const t=Cf();if(t)return v1(t.sanitize(Qn.RESOURCE_URL,i)||"");if(fs(i,"ResourceURL"))return v1(ro(i));throw new nt(904,!1)}function Cf(){const i=ft();return i&&i[X].sanitizer}const Ef=new at("ENVIRONMENT_INITIALIZER"),A1=new at("INJECTOR",-1),I1=new at("INJECTOR_DEF_TYPES");class kx{get(t,e=Fs){if(e===Fs){const n=new Error(`NullInjectorError: No provider for ${$i(t)}!`);throw n.name="NullInjectorError",n}return e}}function b4(...i){return{\u0275providers:R1(0,i),\u0275fromNgModule:!0}}function R1(i,...t){const e=[],n=new Set;let r;const o=s=>{e.push(s)};return Wd(t,s=>{const a=s;Zg(a,o,[],n)&&(r||=[],r.push(a))}),void 0!==r&&k1(r,o),e}function k1(i,t){for(let e=0;e<i.length;e++){const{ngModule:n,providers:r}=i[e];Ox(r,o=>{t(o,n)})}}function Zg(i,t,e,n){if(!(i=ve(i)))return!1;let r=null,o=Oa(i);const s=!o&&Ge(i);if(o||s){if(s&&!s.standalone)return!1;r=i}else{const l=i.ngModule;if(o=Oa(l),!o)return!1;r=l}const a=n.has(r);if(s){if(a)return!1;if(n.add(r),s.dependencies){const l="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const d of l)Zg(d,t,e,n)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let d;n.add(r);try{Wd(o.imports,h=>{Zg(h,t,e,n)&&(d||=[],d.push(h))})}finally{}void 0!==d&&k1(d,t)}if(!a){const d=nc(r)||(()=>new r);t({provide:r,useFactory:d,deps:qe},r),t({provide:I1,useValue:r,multi:!0},r),t({provide:Ef,useValue:()=>Y(r),multi:!0},r)}const l=o.providers;if(null!=l&&!a){const d=i;Ox(l,h=>{t(h,d)})}}}return r!==i&&void 0!==i.providers}function Ox(i,t){for(let e of i)Hl(e)&&(e=e.\u0275providers),Array.isArray(e)?Ox(e,t):t(e)}const x4=ei({provide:String,useValue:ei});function Lx(i){return null!==i&&"object"==typeof i&&x4 in i}function cc(i){return"function"==typeof i}const Fx=new at("Set Injector scope."),Xg={},M4={};let Nx;function Yg(){return void 0===Nx&&(Nx=new kx),Nx}class oo{}class Kd extends oo{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ux(t,s=>this.processProvider(s)),this.records.set(A1,Qd(void 0,this)),r.has("environment")&&this.records.set(oo,Qd(void 0,this));const o=this.records.get(Fx);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(I1.multi,qe,De.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const e of t)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const e=Vn(this),n=zn(void 0);try{return t()}finally{Vn(e),zn(n)}}get(t,e=Fs,n=De.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Ad))return t[Ad](this);n=$l(n);const o=Vn(this),s=zn(void 0);try{if(!(n&De.SkipSelf)){let l=this.records.get(t);if(void 0===l){const d=function D4(i){return"function"==typeof i||"object"==typeof i&&i instanceof at}(t)&&bd(t);l=d&&this.injectableDefInScope(d)?Qd(Bx(t),Xg):null,this.records.set(t,l)}if(null!=l)return this.hydrate(t,l)}return(n&De.Self?Yg():this.parent).get(t,e=n&De.Optional&&e===Fs?null:e)}catch(a){if("NullInjectorError"===a.name){if((a[Cd]=a[Cd]||[]).unshift($i(t)),o)throw a;return function Ed(i,t,e,n){const r=i[Cd];throw t[Or]&&r.unshift(t[Or]),i.message=function I0(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=$i(t);if(Array.isArray(t))r=t.map($i).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):$i(a)))}r=`{${o.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(ag,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[Cd]=null,i}(a,t,"R3InjectorError",this.source)}throw a}finally{zn(s),Vn(o)}}resolveInjectorInitializers(){const t=Vn(this),e=zn(void 0);try{const r=this.get(Ef.multi,qe,De.Self);for(const o of r)o()}finally{Vn(t),zn(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push($i(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new nt(205,!1)}processProvider(t){let e=cc(t=ve(t))?t:ve(t&&t.provide);const n=function C4(i){return Lx(i)?Qd(void 0,i.useValue):Qd(L1(i),Xg)}(t);if(cc(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Qd(void 0,Xg,!0),r.factory=()=>Fa(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Xg&&(e.value=M4,e.value=e.factory()),"object"==typeof e.value&&e.value&&function T4(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=ve(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){const e=this._onDestroyHooks.indexOf(t);-1!==e&&this._onDestroyHooks.splice(e,1)}}function Bx(i){const t=bd(i),e=null!==t?t.factory:nc(i);if(null!==e)return e;if(i instanceof at)throw new nt(204,!1);if(i instanceof Function)return function S4(i){const t=i.length;if(t>0)throw _f(t,"?"),new nt(204,!1);const e=function w0(i){return i&&(i[xd]||i[rg])||null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new nt(204,!1)}function L1(i,t,e){let n;if(cc(i)){const r=ve(i);return nc(r)||Bx(r)}if(Lx(i))n=()=>ve(i.useValue);else if(function O1(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Fa(i.deps||[]));else if(function P1(i){return!(!i||!i.useExisting)}(i))n=()=>Y(ve(i.useExisting));else{const r=ve(i&&(i.useClass||i.provide));if(!function E4(i){return!!i.deps}(i))return nc(r)||Bx(r);n=()=>new r(...Fa(i.deps))}return n}function Qd(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Ux(i,t){for(const e of i)Array.isArray(e)?Ux(e,t):e&&Hl(e)?Ux(e.\u0275providers,t):t(e)}const Kg=new at("AppId",{providedIn:"root",factory:()=>A4}),A4="ng",F1=new at("Platform Initializer"),Za=new at("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Ao=new at("AnimationModuleType"),zx=new at("CSP nonce",{providedIn:"root",factory:()=>function Yd(){if(void 0!==Tx)return Tx;if(typeof document<"u")return document;throw new nt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let N1=(i,t,e)=>null;function Zx(i,t,e=!1){return N1(i,t,e)}class U4{}class z1{}class V4{resolveComponentFactory(t){throw function z4(i){const t=Error(`No component factory found for ${$i(i)}.`);return t.ngComponent=i,t}(t)}}let eu=(()=>{class i{static{this.NULL=new V4}}return i})();function H4(){return iu(Kn(),ft())}function iu(i,t){return new Re(Fr(i,t))}let Re=(()=>{class i{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=H4}}return i})();function G4(i){return i instanceof Re?i.nativeElement:i}class Af{}let ms=(()=>{class i{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function W4(){const i=ft(),e=io(Kn().index,i);return(Lr(e)?e:i)[W]}()}}return i})(),j4=(()=>{class i{static{this.\u0275prov=bt({token:i,providedIn:"root",factory:()=>null})}}return i})();class dc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const $4=new dc("16.2.12"),Kx={};function j1(i,t=null,e=null,n){const r=$1(i,t,e,n);return r.resolveInjectorInitializers(),r}function $1(i,t=null,e=null,n,r=new Set){const o=[e||qe,b4(i)];return n=n||("object"==typeof i?void 0:$i(i)),new Kd(o,t||Yg(),n||null,r)}let Sn=(()=>{class i{static{this.THROW_IF_NOT_FOUND=Fs}static{this.NULL=new kx}static create(e,n){if(Array.isArray(e))return j1({name:""},n,e,"");{const r=e.name??"";return j1({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=bt({token:i,providedIn:"any",factory:()=>Y(A1)})}static{this.__NG_ELEMENT_ID__=-1}}return i})();function Jx(i){return i.ngOriginalError}class Io{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Jx(t);for(;e&&Jx(e);)e=Jx(e);return e||null}}function tw(i){return t=>{setTimeout(i,void 0,t)}}const Si=class t5 extends Wt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,o=e||(()=>null),s=n;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=tw(o),r&&(r=tw(r)),s&&(s=tw(s)));const a=super.subscribe({next:r,error:o,complete:s});return t instanceof tn&&t.add(a),a}};function Z1(...i){}class oe{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Si(!1),this.onMicrotaskEmpty=new Si(!1),this.onStable=new Si(!1),this.onError=new Si(!1),typeof Zone>"u")throw new nt(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function e5(){const i="function"==typeof Ri.requestAnimationFrame;let t=Ri[i?"requestAnimationFrame":"setTimeout"],e=Ri[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function o5(i){const t=()=>{!function r5(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ri,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,iw(i),i.isCheckStableRunning=!0,ew(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),iw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,o,s,a)=>{if(function a5(i){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0].data?.__ignore_ng_zone__}(a))return e.invokeTask(r,o,s,a);try{return X1(i),e.invokeTask(r,o,s,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||i.shouldCoalesceRunChangeDetection)&&t(),Y1(i)}},onInvoke:(e,n,r,o,s,a,l)=>{try{return X1(i),e.invoke(r,o,s,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),Y1(i)}},onHasTask:(e,n,r,o)=>{e.hasTask(r,o),n===r&&("microTask"==o.change?(i._hasPendingMicrotasks=o.microTask,iw(i),ew(i)):"macroTask"==o.change&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,n,r,o)=>(e.handleError(r,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!oe.isInAngularZone())throw new nt(909,!1)}static assertNotInAngularZone(){if(oe.isInAngularZone())throw new nt(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,n5,Z1,Z1);try{return o.runTask(s,e,n)}finally{o.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const n5={};function ew(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function iw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function X1(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Y1(i){i._nesting--,ew(i)}class s5{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Si,this.onMicrotaskEmpty=new Si,this.onStable=new Si,this.onError=new Si}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const K1=new at("",{providedIn:"root",factory:Q1});function Q1(){const i=wt(oe);let t=!0;return Ii(new Mi(r=>{t=i.isStable&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks,i.runOutsideAngular(()=>{r.next(t),r.complete()})}),new Mi(r=>{let o;i.runOutsideAngular(()=>{o=i.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!i.hasPendingMacrotasks&&!i.hasPendingMicrotasks&&(t=!0,r.next(!0))})})});const s=i.onUnstable.subscribe(()=>{oe.assertInAngularZone(),t&&(t=!1,i.runOutsideAngular(()=>{r.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(Zn()))}function Hs(i){return i instanceof Function?i():i}let nw=(()=>{class i{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=bt({token:i,providedIn:"root",factory:()=>new i})}}return i})();function If(i){for(;i;){i[Ie]|=64;const t=xf(i);if(z0(i)&&!t)return i;i=t}return null}const nI=new at("",{providedIn:"root",factory:()=>!1});let o_=null;function aI(i,t){return i[t]??dI()}function lI(i,t){const e=dI();e.producerNode?.length&&(i[t]=o_,e.lView=i,o_=cI())}const _5={...kD,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{If(i.lView)},lView:null};function cI(){return Object.create(_5)}function dI(){return o_??=cI(),o_}const Le={};function ye(i){uI(ai(),ft(),yr()+i,!1)}function uI(i,t,e,n){if(!n)if(3==(3&t[Ie])){const o=i.preOrderCheckHooks;null!==o&&Sg(t,o,e)}else{const o=i.preOrderHooks;null!==o&&Cg(t,o,0,e)}rc(e)}function U(i,t=De.Default){const e=ft();return null===e?Y(i,t):CA(Kn(),e,ve(i),t)}function s_(){throw new Error("invalid")}function a_(i,t,e,n,r,o,s,a,l,d,h){const f=t.blueprint.slice();return f[qi]=r,f[Ie]=140|n,(null!==d||i&&2048&i[Ie])&&(f[Ie]|=2048),QD(f),f[c]=f[ue]=i,f[E]=e,f[X]=s||i&&i[X],f[W]=a||i&&i[W],f[V]=l||i&&i[V]||null,f[x]=o,f[wn]=function _H(){return gH++}(),f[Go]=h,f[Ns]=d,f[ee]=2==t.type?i[ee]:f,f}function ou(i,t,e,n,r){let o=i.data[t];if(null===o)o=function rw(i,t,e,n,r){const o=rA(),s=Z0(),l=i.data[t]=function C5(i,t,e,n,r,o){let s=t?t.injectorIndex:-1,a=0;return Ld()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l,l.prev=o)),l}(i,t,e,n,r),function vV(){return be.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=e,o.value=n,o.attrs=r;const s=function uf(){const i=be.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return us(o,!0),o}function Rf(i,t,e,n){if(0===e)return-1;const r=t.length;for(let o=0;o<e;o++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function hI(i,t,e,n,r){const o=aI(t,tc),s=yr(),a=2&n;try{rc(-1),a&&t.length>Ze&&uI(i,t,Ze,!1),ds(a?2:0,r);const d=a?o:null,h=H0(d);try{null!==d&&(d.dirty=!1),e(n,r)}finally{G0(d,h)}}finally{a&&null===t[tc]&&lI(t,tc),rc(s),ds(a?3:1,r)}}function ow(i,t,e){if(U0(t)){const n=To(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=i.data[s];a.contentQueries&&a.contentQueries(1,e[s],s)}}finally{To(n)}}}function sw(i,t,e){nA()&&(function k5(i,t,e,n){const r=e.directiveStart,o=e.directiveEnd;ic(e)&&function U5(i,t,e){const n=Fr(t,i),r=fI(e);let s=16;e.signals?s=4096:e.onPush&&(s=64);const a=l_(i,a_(i,r,null,s,n,t,null,i[X].rendererFactory.createRenderer(n,e),null,null,null));i[t.index]=a}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||Tg(e,t),ar(n,t);const s=e.initialInputs;for(let a=r;a<o;a++){const l=i.data[a],d=oc(t,i,a,e);ar(d,t),null!==s&&z5(0,a-r,d,l,0,s),Wo(l)&&(io(e.index,t)[E]=oc(t,i,a,e))}}(i,t,e,Fr(e,t)),64==(64&e.flags)&&vI(i,t,e))}function aw(i,t,e=Fr){const n=t.localNames;if(null!==n){let r=t.index+1;for(let o=0;o<n.length;o+=2){const s=n[o+1],a=-1===s?e(t,i):i[s];i[r++]=a}}}function fI(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=lw(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):t}function lw(i,t,e,n,r,o,s,a,l,d,h){const f=Ze+n,m=f+r,g=function y5(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Le);return e}(f,m),_="function"==typeof d?d():d;return g[Pt]={type:i,blueprint:g,template:e,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1,ssrId:h}}let mI=i=>null;function pI(i,t,e,n){for(let r in i)if(i.hasOwnProperty(r)){e=null===e?{}:e;const o=i[r];null===n?gI(e,t,r,o):n.hasOwnProperty(r)&&gI(e,t,n[r],o)}return e}function gI(i,t,e,n){i.hasOwnProperty(e)?i[e].push(t,n):i[e]=[t,n]}function so(i,t,e,n,r,o,s,a){const l=Fr(t,e);let h,d=t.inputs;!a&&null!=d&&(h=d[n])?(fw(i,e,h,n,r),ic(t)&&function D5(i,t){const e=io(t,i);16&e[Ie]||(e[Ie]|=64)}(e,t.index)):3&t.type&&(n=function T5(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=s?s(r,t.value||"",n):r,o.setProperty(l,n,r))}function cw(i,t,e,n){if(nA()){const r=null===n?null:{"":-1},o=function O5(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let o=0;o<e.length;o++){const s=e[o];if(Kl(t,s.selectors,!1))if(n||(n=[]),Wo(s))if(null!==s.findHostDirectiveDefs){const a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),n.unshift(...a,s),dw(i,t,a.length)}else n.unshift(s),dw(i,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,n,r),n.push(s)}return null===n?null:[n,r]}(i,e);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&_I(i,t,e,s,r,a),r&&function L5(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const o=e[t[r+1]];if(null==o)throw new nt(-301,!1);n.push(t[r],o)}}}(e,n,r)}e.mergedAttrs=Ba(e.mergedAttrs,e.attrs)}function _I(i,t,e,n,r,o){for(let d=0;d<n.length;d++)sx(Tg(e,t),i,n[d].type);!function N5(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let d=0;d<n.length;d++){const h=n[d];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,l=Rf(i,t,n.length,null);for(let d=0;d<n.length;d++){const h=n[d];e.mergedAttrs=Ba(e.mergedAttrs,h.hostAttrs),B5(i,e,t,l,h),F5(l,h,r),null!==h.contentQueries&&(e.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(e.flags|=64);const f=h.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((i.preOrderHooks??=[]).push(e.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(e.index),a=!0),l++}!function E5(i,t,e){const r=t.directiveEnd,o=i.data,s=t.attrs,a=[];let l=null,d=null;for(let h=t.directiveStart;h<r;h++){const f=o[h],m=e?e.get(f):null,_=m?m.outputs:null;l=pI(f.inputs,h,l,m?m.inputs:null),d=pI(f.outputs,h,d,_);const b=null===l||null===s||af(t)?null:V5(l,h,s);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=d}(i,e,o)}function vI(i,t,e){const n=e.directiveStart,r=e.directiveEnd,o=e.index,s=function bV(){return be.lFrame.currentDirectiveIndex}();try{rc(o);for(let a=n;a<r;a++){const l=i.data[a],d=t[a];Y0(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&P5(l,d)}}finally{rc(-1),Y0(s)}}function P5(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function dw(i,t,e){t.componentOffset=e,(i.components??=[]).push(t.index)}function F5(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Wo(t)&&(e[""]=i)}}function B5(i,t,e,n,r){i.data[n]=r;const o=r.factory||(r.factory=nc(r.type)),s=new hf(o,Wo(r),U);i.blueprint[n]=s,e[n]=s,function I5(i,t,e,n,r){const o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;null===s&&(s=i.hostBindingOpCodes=[]);const a=~t.index;(function R5(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(s)!=a&&s.push(a),s.push(e,n,o)}}(i,t,n,Rf(i,e,r.hostVars,Le),r)}function ps(i,t,e,n,r,o){const s=Fr(i,t);!function uw(i,t,e,n,r,o,s){if(null==o)i.removeAttribute(t,r,e);else{const a=null==s?Se(o):s(o,n||"",r);i.setAttribute(t,r,a,e)}}(t[W],s,o,i.value,e,n,r)}function z5(i,t,e,n,r,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)yI(n,e,s[a++],s[a++],s[a++])}function yI(i,t,e,n,r){const o=To(null);try{const s=i.inputTransforms;null!==s&&s.hasOwnProperty(n)&&(r=s[n].call(t,r)),null!==i.setInput?i.setInput(t,r,e,n):t[n]=r}finally{To(o)}}function V5(i,t,e){let n=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;if(i.hasOwnProperty(o)){null===n&&(n=[]);const s=i[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){n.push(o,s[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function bI(i,t,e,n){return[i,!0,!1,t,null,0,n,e,null,null,null]}function xI(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const o=e[n+1];if(-1!==o){const s=i.data[o];Q0(e[n]),s.contentQueries(2,t[o],o)}}}function l_(i,t){return i[ut]?i[Ft][u]=t:i[ut]=t,i[Ft]=t,t}function hw(i,t,e){Q0(0);const n=To(null);try{t(i,e)}finally{To(n)}}function wI(i){return i[M]||(i[M]=[])}function MI(i){return i.cleanup||(i.cleanup=[])}function CI(i,t){const e=i[V],n=e?e.get(Io,null):null;n&&n.handleError(t)}function fw(i,t,e,n,r){for(let o=0;o<e.length;){const s=e[o++],a=e[o++];yI(i.data[s],t[s],n,a,r)}}function H5(i,t){const e=io(t,i),n=e[Pt];!function G5(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])}(n,e);const r=e[qi];null!==r&&null===e[Go]&&(e[Go]=Zx(r,e[V])),mw(n,e,e[E])}function mw(i,t,e){J0(t);try{const n=i.viewQuery;null!==n&&hw(1,n,e);const r=i.template;null!==r&&hI(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&xI(i,t),i.staticViewQueries&&hw(2,i.viewQuery,e);const o=i.components;null!==o&&function W5(i,t){for(let e=0;e<t.length;e++)H5(i,t[e])}(t,o)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[Ie]&=-5,tx()}}let EI=(()=>{class i{constructor(){this.all=new Set,this.queue=new Map}create(e,n,r){const o=typeof Zone>"u"?null:Zone.current,s=function Yz(i,t,e){const n=Object.create(Kz);e&&(n.consumerAllowSignalWrites=!0),n.fn=i,n.schedule=t;const r=s=>{n.cleanupFn=s};return n.ref={notify:()=>FD(n),run:()=>{if(n.dirty=!1,n.hasRun&&!ND(n))return;n.hasRun=!0;const s=H0(n);try{n.cleanupFn(),n.cleanupFn=jD,n.fn(r)}finally{G0(n,s)}},cleanup:()=>n.cleanupFn()},n.ref}(e,d=>{this.all.has(d)&&this.queue.set(d,o)},r);let a;this.all.add(s),s.notify();const l=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=n?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[e,n]of this.queue)this.queue.delete(e),n?n.run(()=>e.run()):e.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=bt({token:i,providedIn:"root",factory:()=>new i})}}return i})();function c_(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=zl(r,a):2==o&&(n=zl(n,a+": "+t[++s]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function kf(i,t,e,n,r=!1){for(;null!==e;){const o=t[e.index];null!==o&&n.push(zi(o)),_r(o)&&TI(o,n);const s=e.type;if(8&s)kf(i,t,e.child,n);else if(32&s){const a=vx(e,t);let l;for(;l=a();)n.push(l)}else if(16&s){const a=u1(t,e);if(Array.isArray(a))n.push(...a);else{const l=xf(t[ee]);kf(l[Pt],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}function TI(i,t){for(let e=Mn;e<i.length;e++){const n=i[e],r=n[Pt].firstChild;null!==r&&kf(n[Pt],n,r,t)}i[Eo]!==i[qi]&&t.push(i[Eo])}function d_(i,t,e,n=!0){const r=t[X],o=r.rendererFactory,s=r.afterRenderEventManager;o.begin?.(),s?.begin();try{DI(i,t,i.template,e)}catch(l){throw n&&CI(t,l),l}finally{o.end?.(),r.effectManager?.flush(),s?.end()}}function DI(i,t,e,n){const r=t[Ie];if(256!=(256&r)){t[X].effectManager?.flush(),J0(t);try{QD(t),function sA(i){return be.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&hI(i,t,e,2,n);const s=3==(3&r);if(s){const d=i.preOrderCheckHooks;null!==d&&Sg(t,d,null)}else{const d=i.preOrderHooks;null!==d&&Cg(t,d,0,null),ex(t,0)}if(function q5(i){for(let t=QA(i);null!==t;t=JA(t)){if(!t[ec])continue;const e=t[Ga];for(let n=0;n<e.length;n++){aV(e[n])}}}(t),AI(t,2),null!==i.contentQueries&&xI(i,t),s){const d=i.contentCheckHooks;null!==d&&Sg(t,d)}else{const d=i.contentHooks;null!==d&&Cg(t,d,1),ex(t,1)}!function v5(i,t){const e=i.hostBindingOpCodes;if(null===e)return;const n=aI(t,Ha);try{for(let r=0;r<e.length;r++){const o=e[r];if(o<0)rc(~o);else{const s=o,a=e[++r],l=e[++r];yV(a,s),n.dirty=!1;const d=H0(n);try{l(2,t[s])}finally{G0(n,d)}}}}finally{null===t[Ha]&&lI(t,Ha),rc(-1)}}(i,t);const a=i.components;null!==a&&RI(t,a,0);const l=i.viewQuery;if(null!==l&&hw(2,l,n),s){const d=i.viewCheckHooks;null!==d&&Sg(t,d)}else{const d=i.viewHooks;null!==d&&Cg(t,d,2),ex(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[Ie]&=-73,JD(t)}finally{tx()}}}function AI(i,t){for(let e=QA(i);null!==e;e=JA(e))for(let n=Mn;n<e.length;n++)II(e[n],t)}function Z5(i,t,e){II(io(t,i),e)}function II(i,t){if(!function oV(i){return 128==(128&i[Ie])}(i))return;const e=i[Pt],n=i[Ie];if(80&n&&0===t||1024&n||2===t)DI(e,i,e.template,i[E]);else if(i[p]>0){AI(i,1);const r=e.components;null!==r&&RI(i,r,1)}}function RI(i,t,e){for(let n=0;n<t.length;n++)Z5(i,t[n],e)}class Pf{get rootNodes(){const t=this._lView,e=t[Pt];return kf(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[E]}set context(t){this._lView[E]=t}get destroyed(){return 256==(256&this._lView[Ie])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[c];if(_r(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(zg(t,n),Ig(e,n))}this._attachedToViewContainer=!1}bx(this._lView[Pt],this._lView)}onDestroy(t){!function eA(i,t){if(256==(256&i[Ie]))throw new nt(911,!1);null===i[cs]&&(i[cs]=[]),i[cs].push(t)}(this._lView,t)}markForCheck(){If(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ie]&=-129}reattach(){this._lView[Ie]|=128}detectChanges(){d_(this._lView[Pt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new nt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function RH(i,t){Mf(i,t,t[W],2,null,null)}(this._lView[Pt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new nt(902,!1);this._appRef=t}}class X5 extends Pf{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;d_(t[Pt],t,t[E],!1)}checkNoChanges(){}get context(){return null}}class kI extends eu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ge(t);return new Of(e,this.ngModule)}}function PI(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class K5{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=$l(n);const r=this.injector.get(t,Kx,n);return r!==Kx||e===Kx?r:this.parentInjector.get(t,e,n)}}class Of extends z1{get inputs(){const t=this.componentDef,e=t.inputTransforms,n=PI(t.inputs);if(null!==e)for(const r of n)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return n}get outputs(){return PI(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function L0(i){return i.map(Ql).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let o=(r=r||this.ngModule)instanceof oo?r:r?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new K5(t,o):t,a=s.get(Af,null);if(null===a)throw new nt(407,!1);const f={rendererFactory:a,sanitizer:s.get(j4,null),effectManager:s.get(EI,null),afterRenderEventManager:s.get(nw,null)},m=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=n?function b5(i,t,e,n){const o=n.get(nI,!1)||e===cn.ShadowDom,s=i.selectRootElement(t,o);return function x5(i){mI(i)}(s),s}(m,n,this.componentDef.encapsulation,s):Ug(m,g,function Y5(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(g)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let w=null;null!==_&&(w=Zx(_,s,!0));const S=lw(0,null,null,1,0,null,null,null,null,null,null),C=a_(null,S,null,v,null,null,f,m,s,null,w);let F,k;J0(C);try{const P=this.componentDef;let B,I=null;P.findHostDirectiveDefs?(B=[],I=new Map,P.findHostDirectiveDefs(P,B,I),B.push(P)):B=[P];const T=function J5(i,t){const e=i[Pt],n=Ze;return i[n]=t,ou(e,n,2,"#host",null)}(C,_),H=function tG(i,t,e,n,r,o,s){const a=r[Pt];!function eG(i,t,e,n){for(const r of i)t.mergedAttrs=Ba(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(c_(t,t.mergedAttrs,!0),null!==e&&p1(n,e,t))}(n,i,t,s);let l=null;null!==t&&(l=Zx(t,r[V]));const d=o.rendererFactory.createRenderer(t,e);let h=16;e.signals?h=4096:e.onPush&&(h=64);const f=a_(r,fI(e),null,h,r[i.index],i,o,d,null,null,l);return a.firstCreatePass&&dw(a,i,n.length-1),l_(r,f),r[i.index]=f}(T,_,P,B,C,f,m);k=KD(S,Ze),_&&function nG(i,t,e,n){if(n)ls(i,e,["ng-version",$4.full]);else{const{attrs:r,classes:o}=function Ua(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let o=i[n];if("string"==typeof o)2===r?""!==o&&t.push(o,i[++n]):8===r&&e.push(o);else{if(!eo(r))break;r=o}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&ls(i,e,r),o&&o.length>0&&m1(i,e,o.join(" "))}}(m,P,_,n),void 0!==e&&function rG(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const o=e[r];n.push(null!=o?Array.from(o):null)}}(k,this.ngContentSelectors,e),F=function iG(i,t,e,n,r,o){const s=Kn(),a=r[Pt],l=Fr(s,r);_I(a,r,s,e,null,n);for(let h=0;h<e.length;h++)ar(oc(r,a,s.directiveStart+h,s),r);vI(a,r,s),l&&ar(l,r);const d=oc(r,a,s.directiveStart+s.componentOffset,s);if(i[E]=r[E]=d,null!==o)for(const h of o)h(d,t);return ow(a,s,i),d}(H,P,B,I,C,[oG]),mw(S,C,null)}finally{tx()}return new Q5(this.componentType,F,iu(k,C),C,k)}}class Q5 extends U4{constructor(t,e,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new X5(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;const o=this._rootLView;fw(o[Pt],o,r,t,e),this.previousInputValues.set(t,e),If(io(this._tNode.index,o))}}get injector(){return new br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function oG(){const i=Kn();Mg(ft()[Pt],i)}function Zt(i){let t=function OI(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Wo(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new nt(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const s=i;s.inputs=u_(i.inputs),s.inputTransforms=u_(i.inputTransforms),s.declaredInputs=u_(i.declaredInputs),s.outputs=u_(i.outputs);const a=r.hostBindings;a&&cG(i,a);const l=r.viewQuery,d=r.contentQueries;if(l&&aG(i,l),d&&lG(i,d),os(i.inputs,r.inputs),os(i.declaredInputs,r.declaredInputs),os(i.outputs,r.outputs),null!==r.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),os(s.inputTransforms,r.inputTransforms)),Wo(r)&&r.data.animation){const h=i.data;h.animation=(h.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(i),a===Zt&&(e=!1)}}t=Object.getPrototypeOf(t)}!function sG(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Ba(r.hostAttrs,e=Ba(e,r.hostAttrs))}}(n)}function u_(i){return i===So?{}:i===qe?[]:i}function aG(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function lG(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,o)=>{t(n,r,o),e(n,r,o)}:t}function cG(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}function BI(i){const t=i.inputConfig,e={};for(const n in t)if(t.hasOwnProperty(n)){const r=t[n];Array.isArray(r)&&r[2]&&(e[n]=r[2])}i.inputTransforms=e}function h_(i){return!!function pw(i){return null!==i&&("function"==typeof i||"object"==typeof i)}(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function lr(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function on(i,t,e,n){const r=ft();return lr(r,Fd(),t)&&(ai(),ps(rn(),r,i,t,e,n)),on}function me(i,t,e,n,r,o,s,a){const l=ft(),d=ai(),h=i+Ze,f=d.firstCreatePass?function OG(i,t,e,n,r,o,s,a,l){const d=t.consts,h=ou(t,i,4,s||null,ja(d,a));cw(t,e,h,ja(d,l)),Mg(t,h);const f=h.tView=lw(2,h,n,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,d,null);return null!==t.queries&&(t.queries.template(t,h),f.queries=t.queries.embeddedTView(h)),h}(h,d,l,t,e,n,r,o,s):d.data[h];us(f,!1);const m=KI(d,l,f,i);wg()&&Hg(d,l,m,f),ar(m,l),l_(l,l[h]=bI(m,l,m,f)),gg(f)&&sw(d,l,f),null!=s&&aw(l,f,a)}let KI=function QI(i,t,e,n){return $a(!0),t[W].createComment("")};function Ws(i){return function Od(i,t){return i[t]}(function _V(){return be.lFrame.contextLView}(),Ze+i)}function ge(i,t,e){const n=ft();return lr(n,Fd(),t)&&so(ai(),rn(),n,i,t,n[W],e,!1),ge}function xw(i,t,e,n,r){const s=r?"class":"style";fw(i,e,t.inputs[s],s,n)}function xt(i,t,e,n){const r=ft(),o=ai(),s=Ze+i,a=r[W],l=o.firstCreatePass?function BG(i,t,e,n,r,o){const s=t.consts,l=ou(t,i,2,n,ja(s,r));return cw(t,e,l,ja(s,o)),null!==l.attrs&&c_(l,l.attrs,!1),null!==l.mergedAttrs&&c_(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(s,o,r,t,e,n):o.data[s],d=JI(o,r,l,a,t,i);r[s]=d;const h=gg(l);return us(l,!0),p1(a,d,l),32!=(32&l.flags)&&wg()&&Hg(o,r,d,l),0===function cV(){return be.lFrame.elementDepthCount}()&&ar(d,r),function dV(){be.lFrame.elementDepthCount++}(),h&&(sw(o,r,l),ow(o,l,r)),null!==n&&aw(r,l),xt}function St(){let i=Kn();Z0()?X0():(i=i.parent,us(i,!1));const t=i;(function hV(i){return be.skipHydrationRootTNode===i})(t)&&function gV(){be.skipHydrationRootTNode=null}(),function uV(){be.lFrame.elementDepthCount--}();const e=ai();return e.firstCreatePass&&(Mg(e,i),U0(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function AV(i){return 0!=(8&i.flags)}(t)&&xw(e,t,ft(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function IV(i){return 0!=(16&i.flags)}(t)&&xw(e,t,ft(),t.stylesWithoutHost,!1),St}function vi(i,t,e,n){return xt(i,t,e,n),St(),vi}let JI=(i,t,e,n,r,o)=>($a(!0),Ug(n,r,function gA(){return be.lFrame.currentNamespace}()));function Xa(i,t,e){const n=ft(),r=ai(),o=i+Ze,s=r.firstCreatePass?function VG(i,t,e,n,r){const o=t.consts,s=ja(o,n),a=ou(t,i,8,"ng-container",s);return null!==s&&c_(a,s,!0),cw(t,e,a,ja(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,n,t,e):r.data[o];us(s,!0);const a=tR(r,n,s,i);return n[o]=a,wg()&&Hg(r,n,a,s),ar(a,n),gg(s)&&(sw(r,n,s),ow(r,s,n)),null!=e&&aw(n,s),Xa}function Ya(){let i=Kn();const t=ai();return Z0()?X0():(i=i.parent,us(i,!1)),t.firstCreatePass&&(Mg(t,i),U0(i)&&t.queries.elementEnd(i)),Ya}function _s(i,t,e){return Xa(i,t,e),Ya(),_s}let tR=(i,t,e,n)=>($a(!0),yx(t[W],""));function ww(){return ft()}function Uf(i){return!!i&&"function"==typeof i.then}function eR(i){return!!i&&"function"==typeof i.subscribe}function Ci(i,t,e,n){const r=ft(),o=ai(),s=Kn();return function nR(i,t,e,n,r,o,s){const a=gg(n),d=i.firstCreatePass&&MI(i),h=t[E],f=wI(t);let m=!0;if(3&n.type||s){const b=Fr(n,t),y=s?s(b):b,v=f.length,w=s?C=>s(zi(C[n.index])):n.index;let S=null;if(!s&&a&&(S=function WG(i,t,e,n){const r=i.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===e&&r[o+1]===n){const a=t[M],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(i,t,r,n.index)),null!==S)(S.__ngLastListenerFn__||S).__ngNextListenerFn__=o,S.__ngLastListenerFn__=o,m=!1;else{o=oR(n,t,h,o,!1);const C=e.listen(y,r,o);f.push(o,C),d&&d.push(r,w,v,v+1)}}else o=oR(n,t,h,o,!1);const g=n.outputs;let _;if(m&&null!==g&&(_=g[r])){const b=_.length;if(b)for(let y=0;y<b;y+=2){const F=t[_[y]][_[y+1]].subscribe(o),k=f.length;f.push(o,F),d&&d.push(r,n.index,k,-(k+1))}}}(o,r,r[W],s,i,t,n),Ci}function rR(i,t,e,n){try{return ds(6,t,e),!1!==e(n)}catch(r){return CI(i,r),!1}finally{ds(7,t,e)}}function oR(i,t,e,n,r){return function o(s){if(s===Function)return n;If(i.componentOffset>-1?io(i.index,t):t);let l=rR(t,e,n,s),d=o.__ngNextListenerFn__;for(;d;)l=rR(t,e,d,s)&&l,d=d.__ngNextListenerFn__;return r&&!1===l&&s.preventDefault(),l}}function Xi(i=1){return function wV(i){return(be.lFrame.contextLView=function MV(i,t){for(;i>0;)t=t[ue],i--;return t}(i,be.lFrame.contextLView))[E]}(i)}function jG(i,t){let e=null;const n=function P0(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===n?Kl(i,o,!0):ug(n,o))return r}else e=r}return e}function ao(i){const t=ft()[ee][x];if(!t.projection){const n=t.projection=_f(i?i.length:1,null),r=n.slice();let o=t.child;for(;null!==o;){const s=i?jG(o,i):0;null!==s&&(r[s]?r[s].projectionNext=o:n[s]=o,r[s]=o),o=o.next}}}function ui(i,t=0,e){const n=ft(),r=ai(),o=ou(r,Ze+i,16,null,e||null);null===o.projection&&(o.projection=t),X0(),(!n[Go]||Ld())&&32!=(32&o.flags)&&function UH(i,t,e){f1(t[W],0,t,e,wx(i,e,t),a1(e.parent||t[x],e,t))}(r,n,o)}function __(i,t){return i<<17|t<<2}function Ka(i){return i>>17&32767}function Sw(i){return 2|i}function hc(i){return(131068&i)>>2}function Cw(i,t){return-131069&i|t<<2}function Ew(i){return 1|i}function pR(i,t,e,n,r){const o=i[e+1],s=null===t;let a=n?Ka(o):hc(o),l=!1;for(;0!==a&&(!1===l||s);){const h=i[a+1];KG(i[a],t)&&(l=!0,i[a+1]=n?Ew(h):Sw(h)),a=n?Ka(h):hc(h)}l&&(i[e+1]=n?Sw(o):Ew(o))}function KG(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&jd(i,t)>=0}function yi(i,t){return function jo(i,t,e,n){const r=ft(),o=ai(),s=function zs(i){const t=be.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}(2);o.firstUpdatePass&&function MR(i,t,e,n){const r=i.data;if(null===r[e+1]){const o=r[yr()],s=function wR(i,t){return t>=i.expandoStartIndex}(i,e);(function TR(i,t){return 0!=(i.flags&(t?8:16))})(o,n)&&null===t&&!s&&(t=!1),t=function a8(i,t,e,n){const r=function K0(i){const t=be.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}(i);let o=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=zf(e=Tw(null,i,t,e,n),t.attrs,n),o=null);else{const s=t.directiveStylingLast;if(-1===s||i[s]!==r)if(e=Tw(r,i,t,e,n),null===o){let l=function l8(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==hc(n))return i[Ka(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=Tw(null,i,t,l[1],n),l=zf(l,t.attrs,n),function c8(i,t,e,n){i[Ka(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else o=function d8(i,t,e){let n;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)n=zf(n,i[o].hostAttrs,e);return zf(n,t.attrs,e)}(i,t,n)}return void 0!==o&&(n?t.residualClasses=o:t.residualStyles=o),e}(r,o,t,n),function XG(i,t,e,n,r,o){let s=o?t.classBindings:t.styleBindings,a=Ka(s),l=hc(s);i[n]=e;let h,d=!1;if(Array.isArray(e)?(h=e[1],(null===h||jd(e,h)>0)&&(d=!0)):h=e,r)if(0!==l){const m=Ka(i[a+1]);i[n+1]=__(m,a),0!==m&&(i[m+1]=Cw(i[m+1],n)),i[a+1]=function qG(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=__(a,0),0!==a&&(i[a+1]=Cw(i[a+1],n)),a=n;else i[n+1]=__(l,0),0===a?a=n:i[l+1]=Cw(i[l+1],n),l=n;d&&(i[n+1]=Sw(i[n+1])),pR(i,h,n,!0),pR(i,h,n,!1),function YG(i,t,e,n,r){const o=r?i.residualClasses:i.residualStyles;null!=o&&"string"==typeof t&&jd(o,t)>=0&&(e[n+1]=Ew(e[n+1]))}(t,h,i,n,o),s=__(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,e,s,n)}}(o,i,s,n),t!==Le&&lr(r,s,t)&&function CR(i,t,e,n,r,o,s,a){if(!(3&t.type))return;const l=i.data,d=l[a+1],h=function ZG(i){return 1==(1&i)}(d)?ER(l,t,e,r,hc(d),s):void 0;v_(h)||(v_(o)||function $G(i){return 2==(2&i)}(d)&&(o=ER(l,null,e,r,a,s)),function VH(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let o=-1===n.indexOf("-")?void 0:qa.DashCase;null==r?i.removeStyle(e,n,o):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=qa.Important),i.setStyle(e,n,r,o))}}(n,s,yg(yr(),e),r,o))}(o,o.data[yr()],r,r[W],i,r[s+1]=function m8(i,t){return null==i||""===i||("string"==typeof t?i+=t:"object"==typeof i&&(i=$i(ro(i)))),i}(t,e),n,s)}(i,t,null,!0),yi}function Tw(i,t,e,n,r){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],n=zf(n,o.hostAttrs,r),o!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function zf(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),no(i,s,!!e||t[++o]))}return void 0===i?null:i}function ER(i,t,e,n,r,o){const s=null===t;let a;for(;r>0;){const l=i[r],d=Array.isArray(l),h=d?l[1]:l,f=null===h;let m=e[r+1];m===Le&&(m=f?qe:void 0);let g=f?cx(m,n):h===n?m:void 0;if(d&&!v_(g)&&(g=cx(l,n)),v_(g)&&(a=g,s))return a;const _=i[r+1];r=s?Ka(_):hc(_)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=cx(l,n))}return a}function v_(i){return void 0!==i}function pe(i,t=""){const e=ft(),n=ai(),r=i+Ze,o=n.firstCreatePass?ou(n,r,1,t,null):n.data[r],s=DR(n,e,o,t,i);e[r]=s,wg()&&Hg(n,e,s,o),us(o,!1)}let DR=(i,t,e,n,r)=>($a(!0),function Bg(i,t){return i.createText(t)}(t[W],n));function Vf(i){return Qa("",i,""),Vf}function Qa(i,t,e){const n=ft(),r=function au(i,t,e,n){return lr(i,Fd(),e)?t+Se(e)+n:Le}(n,i,t,e);return r!==Le&&function Gs(i,t,e){const n=yg(t,i);!function e1(i,t,e){i.setValue(t,e)}(i[W],n,e)}(n,yr(),r),Qa}function _u(i,t,e){const n=ft();return lr(n,Fd(),t)&&so(ai(),rn(),n,i,t,n[W],e,!0),_u}const yu="en-US";let XR=yu;function Iw(i,t,e,n,r){if(i=ve(i),Array.isArray(i))for(let o=0;o<i.length;o++)Iw(i[o],t,e,n,r);else{const o=ai(),s=ft(),a=Kn();let l=cc(i)?i:ve(i.provide);const d=L1(i),h=1048575&a.providerIndexes,f=a.directiveStart,m=a.providerIndexes>>20;if(cc(i)||!i.multi){const g=new hf(d,r,U),_=kw(l,t,r?h:h+m,f);-1===_?(sx(Tg(a,s),o,l),Rw(o,i,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(g),s.push(g)):(e[_]=g,s[_]=g)}else{const g=kw(l,t,h+m,f),_=kw(l,t,h,h+m),y=_>=0&&e[_];if(r&&!y||!r&&!(g>=0&&e[g])){sx(Tg(a,s),o,l);const v=function LW(i,t,e,n,r){const o=new hf(i,e,U);return o.multi=[],o.index=t,o.componentProviders=0,bk(o,r,n&&!e),o}(r?OW:PW,e.length,r,n,d);!r&&y&&(e[_].providerFactory=v),Rw(o,i,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(v),s.push(v)}else Rw(o,i,g>-1?g:_,bk(e[r?_:g],d,!r&&n));!r&&n&&y&&e[_].componentProviders++}}}function Rw(i,t,e,n){const r=cc(t),o=function w4(i){return!!i.useClass}(t);if(r||o){const l=(o?ve(t.useClass):t).prototype.ngOnDestroy;if(l){const d=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const h=d.indexOf(e);-1===h?d.push(e,[n,l]):d[h+1].push(n,l)}else d.push(e,l)}}}function bk(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function kw(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function PW(i,t,e,n){return Pw(this.multi,[])}function OW(i,t,e,n){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=oc(e,e[Pt],this.providerFactory.index,n);o=a.slice(0,s),Pw(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Pw(r,o);return o}function Pw(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function ke(i,t=[]){return e=>{e.providersResolver=(n,r)=>function kW(i,t,e){const n=ai();if(n.firstCreatePass){const r=Wo(i);Iw(e,n.data,n.blueprint,r,!0),Iw(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class mc{}class xk{}class Ow extends mc{constructor(t,e,n){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kI(this);const r=sr(t);this._bootstrapComponents=Hs(r.bootstrap),this._r3Injector=$1(t,e,[{provide:mc,useValue:this},{provide:eu,useValue:this.componentFactoryResolver},...n],$i(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Lw extends xk{constructor(t){super(),this.moduleType=t}create(t){return new Ow(this.moduleType,t,[])}}class wk extends mc{constructor(t){super(),this.componentFactoryResolver=new kI(this),this.instance=null;const e=new Kd([...t.providers,{provide:mc,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],t.parent||Yg(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Fw(i,t,e=null){return new wk({providers:i,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}let BW=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){const n=R1(0,e.type),r=n.length>0?Fw([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=bt({token:i,providedIn:"environment",factory:()=>new i(Y(oo))})}}return i})();function Mk(i){i.getStandaloneInjector=t=>t.get(BW).getOrCreateStandaloneInjector(i)}function dj(){return this._results[Symbol.iterator]()}class Xf{get changes(){return this._changes||(this._changes=new Si)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Xf.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=dj)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=function Do(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function WV(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],o=t[n];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function hj(i,t,e,n=!0){const r=t[Pt];if(function PH(i,t,e,n){const r=Mn+n,o=e.length;n>0&&(e[r-1][u]=t),n<o-Mn?(t[u]=e[r],RA(e,Mn+n,t)):(e.push(t),t[u]=null),t[c]=e;const s=t[vn];null!==s&&e!==s&&function OH(i,t){const e=i[Ga];t[ee]!==t[c][c][ee]&&(i[ec]=!0),null===e?i[Ga]=[t]:e.push(t)}(s,t);const a=t[nn];null!==a&&a.insertView(i),t[Ie]|=128}(r,t,i,e),n){const o=Sx(e,i),s=t[W],a=Vg(s,i[Eo]);null!==a&&function IH(i,t,e,n,r,o){n[qi]=r,n[x]=t,Mf(i,n,e,1,r,o)}(r,i[x],s,t,a,o)}}let Wn=(()=>{class i{static{this.__NG_ELEMENT_ID__=pj}}return i})();const fj=Wn,mj=class extends fj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){const r=function uj(i,t,e,n){const r=t.tView,a=a_(i,r,e,4096&i[Ie]?4096:16,null,t,null,null,null,n?.injector??null,n?.hydrationInfo??null);a[vn]=i[t.index];const d=i[nn];return null!==d&&(a[nn]=d.createEmbeddedView(r)),mw(r,a,e),a}(this._declarationLView,this._declarationTContainer,t,{injector:e,hydrationInfo:n});return new Pf(r)}};function pj(){return M_(Kn(),ft())}function M_(i,t){return 4&i.type?new mj(t,i,iu(i,t)):null}let Jn=(()=>{class i{static{this.__NG_ELEMENT_ID__=xj}}return i})();function xj(){return Vk(Kn(),ft())}const wj=Jn,Uk=class extends wj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return iu(this._hostTNode,this._hostLView)}get injector(){return new br(this._hostTNode,this._hostLView)}get parentInjector(){const t=Dg(this._hostTNode,this._hostLView);if(nx(t)){const e=mf(t,this._hostLView),n=ff(t);return new br(e[Pt].data[n+8],e)}return new br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=zk(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(t,e,n){let r,o;"number"==typeof n?r=n:null!=n&&(r=n.index,o=n.injector);const a=t.createEmbeddedViewImpl(e||{},o,null);return this.insertImpl(a,r,false),a}createComponent(t,e,n,r,o){const s=t&&!function gf(i){return"function"==typeof i}(t);let a;if(s)a=e;else{const b=e||{};a=b.index,n=b.injector,r=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}const l=s?t:new Of(Ge(t)),d=n||this.parentInjector;if(!o&&null==l.ngModule){const y=(s?d:this.parentInjector).get(oo,null);y&&(o=y)}Ge(l.componentType??{});const g=l.create(d,r,null,o);return this.insertImpl(g.hostView,a,false),g}insert(t,e){return this.insertImpl(t,e,!1)}insertImpl(t,e,n){const r=t._lView;if(function sV(i){return _r(i[c])}(r)){const l=this.indexOf(t);if(-1!==l)this.detach(l);else{const d=r[c],h=new Uk(d,d[x],d[c]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),a=this._lContainer;return hj(a,r,s,!n),t.attachToViewContainerRef(),RA(Bw(a),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=zk(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=zg(this._lContainer,e);n&&(Ig(Bw(this._lContainer),e),bx(n[Pt],n))}detach(t){const e=this._adjustIndex(t,-1),n=zg(this._lContainer,e);return n&&null!=Ig(Bw(this._lContainer),e)?new Pf(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function zk(i){return i[8]}function Bw(i){return i[8]||(i[8]=[])}function Vk(i,t){let e;const n=t[i.index];return _r(n)?e=n:(e=bI(n,t,null,i),t[i.index]=e,l_(t,e)),Hk(e,t,i,n),new Uk(e,i,t)}let Hk=function Gk(i,t,e,n){if(i[Eo])return;let r;r=8&e.type?zi(n):function Mj(i,t){const e=i[W],n=e.createComment(""),r=Fr(t,i);return ac(e,Vg(e,r),n,function BH(i,t){return i.nextSibling(t)}(e,r),!1),n}(t,e),i[Eo]=r};class Uw{constructor(t){this.queryList=t,this.matches=null}clone(){return new Uw(this.queryList)}setDirty(){this.queryList.setDirty()}}class zw{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let o=0;o<n;o++){const s=e.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new zw(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Zk(t,e).matches&&this.queries[e].setDirty()}}class Wk{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Vw{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,o=this.getByIndex(n).embeddedTView(t,r);o&&(o.indexInDeclarationView=n,null!==e?e.push(o):e=[o])}return null!==e?new Vw(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Hw{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Hw(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const o=n[r];this.matchTNodeWithReadOption(t,e,Ej(e,o)),this.matchTNodeWithReadOption(t,e,Ag(e,t,o,!1,!1))}else n===Wn?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ag(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Re||r===Jn||r===Wn&&4&e.type)this.addMatch(e.index,-2);else{const o=Ag(e,t,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ej(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function Dj(i,t,e,n){return-1===e?function Tj(i,t){return 11&i.type?iu(i,t):4&i.type?M_(i,t):null}(t,i):-2===e?function Aj(i,t,e){return e===Re?iu(t,i):e===Wn?M_(t,i):e===Jn?Vk(t,i):void 0}(i,t,n):oc(i,i[Pt],e,t)}function jk(i,t,e,n){const r=t[nn].queries[n];if(null===r.matches){const o=i.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const d=s[l];a.push(d<0?null:Dj(t,o[d],s[l+1],e.metadata.read))}r.matches=a}return r.matches}function Gw(i,t,e,n){const r=i.queries.getByIndex(e),o=r.matches;if(null!==o){const s=jk(i,t,r,e);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)n.push(s[a/2]);else{const d=o[a+1],h=t[-l];for(let f=Mn;f<h.length;f++){const m=h[f];m[vn]===m[c]&&Gw(m[Pt],m,d,n)}if(null!==h[Ga]){const f=h[Ga];for(let m=0;m<f.length;m++){const g=f[m];Gw(g[Pt],g,d,n)}}}}}return n}function Qe(i){const t=ft(),e=ai(),n=lA();Q0(n+1);const r=Zk(e,n);if(i.dirty&&function rV(i){return 4==(4&i[Ie])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const o=r.crossesNgTemplate?Gw(e,t,n,[]):jk(e,t,r,n);i.reset(o,G4),i.notifyOnChanges()}return!0}return!1}function tr(i,t,e){const n=ai();n.firstCreatePass&&(qk(n,new Wk(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),$k(n,ft(),t)}function dn(i,t,e,n){const r=ai();if(r.firstCreatePass){const o=Kn();qk(r,new Wk(t,e,n),o.index),function Rj(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}$k(r,ft(),e)}function Je(){return function Ij(i,t){return i[nn].queries[t].queryList}(ft(),lA())}function $k(i,t,e){const n=new Xf(4==(4&e));(function S5(i,t,e,n){const r=wI(t);r.push(e),i.firstCreatePass&&MI(i).push(n,r.length-1)})(i,t,n,n.destroy),null===t[nn]&&(t[nn]=new zw),t[nn].queries.push(new Uw(n))}function qk(i,t,e){null===i.queries&&(i.queries=new Vw),i.queries.track(new Hw(t,e))}function Zk(i,t){return i.queries.getByIndex(t)}function Yf(i,t){return M_(i,t)}const Xw=new at("Application Initializer");let Yw=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=wt(Xw,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const e=[];for(const r of this.appInits){const o=r();if(Uf(o))e.push(o);else if(eR(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}const n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),uP=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();const bs=new at("LocaleId",{providedIn:"root",factory:()=>wt(bs,De.Optional|De.SkipSelf)||function Qj(){return typeof $localize<"u"&&$localize.locale||yu}()});let E_=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _n(!1)}add(){this.hasPendingTasks.next(!0);const e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class e6{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let hP=(()=>{class i{compileModuleSync(e){return new Lw(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),o=Hs(sr(e).declarations).reduce((s,a)=>{const l=Ge(a);return l&&s.push(new Of(l)),s},[]);return new e6(n,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const gP=new at(""),D_=new at("");let eM,Jw=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,eM||(function M6(i){eM=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}static{this.\u0275fac=function(n){return new(n||i)(Y(oe),Y(tM),Y(D_))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),tM=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return eM?.findTestabilityInTree(this,e,n)??null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})(),Ja=null;const _P=new at("AllowMultipleToken"),iM=new at("PlatformDestroyListeners"),nM=new at("appBootstrapListener");class yP{constructor(t,e){this.name=t,this.token=e}}function xP(i,t,e=[]){const n=`Platform: ${t}`,r=new at(n);return(o=[])=>{let s=rM();if(!s||s.injector.get(_P,!1)){const a=[...e,...o,{provide:r,useValue:!0}];i?i(a):function E6(i){if(Ja&&!Ja.get(_P,!1))throw new nt(400,!1);(function vP(){!function jz(i){VD=i}(()=>{throw new nt(600,!1)})})(),Ja=i;const t=i.get(MP);(function bP(i){i.get(F1,null)?.forEach(e=>e())})(i)}(function wP(i=[],t){return Sn.create({name:t,providers:[{provide:Fx,useValue:"platform"},{provide:iM,useValue:new Set([()=>Ja=null])},...i]})}(a,n))}return function D6(i){const t=rM();if(!t)throw new nt(401,!1);return t}()}}function rM(){return Ja?.get(MP)??null}let MP=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function A6(i="zone.js",t){return"noop"===i?new s5:"zone.js"===i?new oe(t):i}(n?.ngZone,function SP(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing}));return r.run(()=>{const o=function NW(i,t,e){return new Ow(i,t,e)}(e.moduleType,this.injector,function AP(i){return[{provide:oe,useFactory:i},{provide:Ef,multi:!0,useFactory:()=>{const t=wt(R6,{optional:!0});return()=>t.initialize()}},{provide:DP,useFactory:I6},{provide:K1,useFactory:Q1}]}(()=>r)),s=o.injector.get(Io,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{s.handleError(l)}});o.onDestroy(()=>{A_(this._modules,o),a.unsubscribe()})}),function CP(i,t,e){try{const n=e();return Uf(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(s,r,()=>{const a=o.injector.get(Yw);return a.runInitializers(),a.donePromise.then(()=>(function YR(i){gr(i,"Expected localeId to be defined"),"string"==typeof i&&(XR=i.toLowerCase().replace(/_/g,"-"))}(o.injector.get(bs,yu)||yu),this._moduleDoBootstrap(o),o))})})}bootstrapModule(e,n=[]){const r=EP({},n);return function S6(i,t,e){const n=new Lw(e);return Promise.resolve(n)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const n=e.injector.get(tl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new nt(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new nt(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(iM,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(n){return new(n||i)(Y(Sn))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();function EP(i,t){return Array.isArray(t)?t.reduce(EP,i):{...i,...t}}let tl=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=wt(DP),this.zoneIsStable=wt(K1),this.componentTypes=[],this.components=[],this.isStable=wt(E_).hasPendingTasks.pipe(or(e=>e?jt(!1):this.zoneIsStable),rs(),Zn()),this._injector=wt(oo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){const r=e instanceof z1;if(!this._injector.get(Yw).done)throw!r&&function Va(i){const t=Ge(i)||xn(i)||Hn(i);return null!==t&&t.standalone}(e),new nt(405,!1);let s;s=r?e:this._injector.get(eu).resolveComponentFactory(e),this.componentTypes.push(s.componentType);const a=function C6(i){return i.isBoundToModule}(s)?void 0:this._injector.get(mc),d=s.create(Sn.NULL,[],n||s.selector,a),h=d.location.nativeElement,f=d.injector.get(gP,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),A_(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new nt(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this.internalErrorHandler(e)}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;A_(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(nM,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>A_(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new nt(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function A_(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const DP=new at("",{providedIn:"root",factory:()=>wt(Io).handleError.bind(void 0)});function I6(){const i=wt(oe),t=wt(Io);return e=>i.runOutsideAngular(()=>t.handleError(e))}let R6=(()=>{class i{constructor(){this.zone=wt(oe),this.applicationRef=wt(tl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();let pc=(()=>{class i{static{this.__NG_ELEMENT_ID__=P6}}return i})();function P6(i){return function O6(i,t,e){if(ic(i)&&!e){const n=io(i.index,t);return new Pf(n,n)}return 47&i.type?new Pf(t[ee],t):null}(Kn(),ft(),16==(16&i))}class OP{constructor(){}supports(t){return h_(t)}create(t){return new U6(t)}}const B6=(i,t)=>t;class U6{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||B6}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,o=null;for(;e||n;){const s=!n||e&&e.currentIndex<FP(n,r,o)?e:n,a=FP(s,r,o),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{o||(o=[]);const d=a-r,h=l-r;if(d!=h){for(let m=0;m<d;m++){const g=m<o.length?o[m]:o[m]=0,_=g+m;h<=_&&_<d&&(o[m]=g+1)}o[s.previousIndex]=h-d}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!h_(t))throw new nt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),n=!0),e=e._next}else r=0,function gG(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Symbol.iterator]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{s=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new z6(e,n),o,r),t}_verifyReinsertion(t,e,n,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new LP),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new LP),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class z6{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class V6{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class LP{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new V6,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FP(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}function BP(){return new js([new OP])}let js=(()=>{class i{static{this.\u0275prov=bt({token:i,providedIn:"root",factory:BP})}constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||BP()),deps:[[i,new vf,new sc]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new nt(901,!1)}}return i})();const $6=xP(null,"core",[]);let q6=(()=>{class i{constructor(e){}static{this.\u0275fac=function(n){return new(n||i)(Y(tl))}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();function wu(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let dM=null;function el(){return dM}class a${}const Ne=new at("DocumentToken");let uM=(()=>{class i{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return wt(c$)},providedIn:"platform"})}}return i})();const l$=new at("Location Initialized");let c$=(()=>{class i extends uM{constructor(){super(),this._doc=wt(Ne),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return el().getBaseHref(this._doc)}onPopState(e){const n=el().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=el().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return new i},providedIn:"platform"})}}return i})();function hM(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function ZP(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function $s(i){return i&&"?"!==i[0]?"?"+i:i}let _c=(()=>{class i{historyGo(e){throw new Error("Not implemented")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return wt(YP)},providedIn:"root"})}}return i})();const XP=new at("appBaseHref");let YP=(()=>{class i extends _c{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??wt(Ne).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return hM(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+$s(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,o){const s=this.prepareExternalUrl(r+$s(o));this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,o){const s=this.prepareExternalUrl(r+$s(o));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||i)(Y(uM),Y(XP,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),d$=(()=>{class i extends _c{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=hM(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,o){let s=this.prepareExternalUrl(r+$s(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,o){let s=this.prepareExternalUrl(r+$s(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||i)(Y(uM),Y(XP,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),tm=(()=>{class i{constructor(e){this._subject=new Si,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function f$(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(ZP(KP(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+$s(n))}normalize(e){return i.stripTrailingSlash(function h$(i,t){if(!i||!t.startsWith(i))return t;const e=t.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,KP(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$s(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+$s(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}static{this.normalizeQueryParams=$s}static{this.joinWithSlash=hM}static{this.stripTrailingSlash=ZP}static{this.\u0275fac=function(n){return new(n||i)(Y(_c))}}static{this.\u0275prov=bt({token:i,factory:function(){return function u$(){return new tm(Y(_c))}()},providedIn:"root"})}}return i})();function KP(i){return i.replace(/\/index.html$/,"")}function sO(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,o]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}class J${constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cO=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,o,s)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new J$(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)n.remove(null===o?void 0:o);else if(null!==o){const a=n.get(o);n.move(a,s),dO(a,r)}});for(let r=0,o=n.length;r<o;r++){const a=n.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{dO(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Wn),U(js))}}static{this.\u0275dir=dt({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return i})();function dO(i,t){i.context.$implicit=t.item}let nm=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new tq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){uO("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){uO("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Wn))}}static{this.\u0275dir=dt({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return i})();class tq{constructor(){this.$implicit=null,this.ngIf=null}}function uO(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${$i(t)}'.`)}class MM{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let G_=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const n of this._defaultViews)n.enforceState(e)}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}}return i})(),hO=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new MM(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Wn),U(G_,9))}}static{this.\u0275dir=dt({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}}return i})(),SM=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:o,ngTemplateOutletInjector:s}=this;this._viewRef=n.createEmbeddedView(r,o,s?{injector:s}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static{this.\u0275fac=function(n){return new(n||i)(U(Jn))}}static{this.\u0275dir=dt({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Gn]})}}return i})(),vc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();const pO="browser";function gO(i){return"server"===i}let Iq=(()=>{class i{static{this.\u0275prov=bt({token:i,providedIn:"root",factory:()=>new Rq(Y(Ne),window)})}}return i})();class Rq{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function kq(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&"function"==typeof i.body.attachShadow){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const o=r.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class _O{}class e9 extends a${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class AM extends e9{static makeCurrent(){!function s$(i){dM||(dM=i)}(new AM)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function i9(){return om=om||document.querySelector("base"),om?om.getAttribute("href"):null}();return null==e?null:function n9(i){$_=$_||document.createElement("a"),$_.setAttribute("href",i);const t=$_.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){om=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return sO(document.cookie,t)}}let $_,om=null,o9=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const IM=new at("EventManagerPlugins");let wO=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new nt(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)(Y(IM),Y(oe))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();class MO{constructor(t){this._doc=t}}const RM="ng-app-id";let SO=(()=>{class i{constructor(e,n,r,o={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gO(o),this.resetHostNodes()}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){const e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(const n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){const e=this.doc.head?.querySelectorAll(`style[${RM}="${this.appId}"]`);if(e?.length){const n=new Map;return e.forEach(r=>{null!=r.textContent&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){const r=this.styleRef;if(r.has(e)){const o=r.get(e);return o.usage+=n,o.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){const r=this.styleNodesInDOM,o=r?.get(n);if(o?.parentNode===e)return r.delete(n),o.removeAttribute(RM),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=n,this.platformIsServer&&s.setAttribute(RM,this.appId),s}}addStyleToHost(e,n){const r=this.getStyleElement(e,n);e.appendChild(r);const o=this.styleRef,s=o.get(n)?.elements;s?s.push(r):o.set(n,{elements:[r],usage:1})}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(Kg),Y(zx,8),Y(Za))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const kM={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PM=/%COMP%/g,c9=new at("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function EO(i,t){return t.map(e=>e.replace(PM,i))}let OM=(()=>{class i{constructor(e,n,r,o,s,a,l,d=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=gO(a),this.defaultRenderer=new LM(e,s,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===cn.ShadowDom&&(n={...n,encapsulation:cn.Emulated});const r=this.getOrCreateRenderer(e,n);return r instanceof DO?r.applyToHost(e):r instanceof FM&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let o=r.get(n.id);if(!o){const s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(n.encapsulation){case cn.Emulated:o=new DO(l,d,n,this.appId,h,s,a,f);break;case cn.ShadowDom:return new f9(l,d,e,n,s,a,this.nonce,f);default:o=new FM(l,d,n,h,s,a,f)}r.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(Y(wO),Y(SO),Y(Kg),Y(c9),Y(Ne),Y(Za),Y(oe),Y(zx))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();class LM{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(kM[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(TO(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(TO(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?this.doc.querySelector(t):t;if(!n)throw new nt(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const o=kM[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=kM[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(qa.DashCase|qa.Important)?t.style.setProperty(e,n,r&qa.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&qa.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){if("string"==typeof t&&!(t=el().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if("__ngUnwrap__"===e)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))&&e.preventDefault()}}}function TO(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class f9 extends LM{constructor(t,e,n,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=EO(r.id,r.styles);for(const h of d){const f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FM extends LM{constructor(t,e,n,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=l?EO(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class DO extends FM{constructor(t,e,n,r,o,s,a,l){const d=r+"-"+n.id;super(t,e,n,o,s,a,l,d),this.contentAttr=function d9(i){return"_ngcontent-%COMP%".replace(PM,i)}(d),this.hostAttr=function u9(i){return"_nghost-%COMP%".replace(PM,i)}(d)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let m9=(()=>{class i extends MO{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const AO=["alt","control","meta","shift"],p9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},g9={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let _9=(()=>{class i extends MO{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const o=i.parseEventName(n),s=i.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>el().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const o=i._normalizeKey(n.pop());let s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),AO.forEach(d=>{const h=n.indexOf(d);h>-1&&(n.splice(h,1),s+=d+".")}),s+=o,0!=n.length||0===o.length)return null;const l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(e,n){let r=p9[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(r=e.code,o="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),AO.forEach(s=>{s!==r&&(0,g9[s])(e)&&(o+=s+".")}),o+=r,o===n)}static eventCallback(e,n,r){return o=>{i.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const x9=xP($6,"browser",[{provide:Za,useValue:pO},{provide:F1,useValue:function v9(){AM.makeCurrent()},multi:!0},{provide:Ne,useFactory:function b9(){return function $H(i){Tx=i}(document),document},deps:[]}]),w9=new at(""),kO=[{provide:D_,useClass:class r9{addToWindow(t){Ri.getAngularTestability=(n,r=!0)=>{const o=t.findTestabilityInTree(n,r);if(null==o)throw new nt(5103,!1);return o},Ri.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ri.getAllAngularRootElements=()=>t.getAllRootElements(),Ri.frameworkStabilizers||(Ri.frameworkStabilizers=[]),Ri.frameworkStabilizers.push(n=>{const r=Ri.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&n(s)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?el().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:gP,useClass:Jw,deps:[oe,tM,D_]},{provide:Jw,useClass:Jw,deps:[oe,tM,D_]}],PO=[{provide:Fx,useValue:"root"},{provide:Io,useFactory:function y9(){return new Io},deps:[]},{provide:IM,useClass:m9,multi:!0,deps:[Ne,oe,Za]},{provide:IM,useClass:_9,multi:!0,deps:[Ne]},OM,SO,wO,{provide:Af,useExisting:OM},{provide:_O,useClass:o9,deps:[]},[]];let OO=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Kg,useValue:e.appId}]}}static{this.\u0275fac=function(n){return new(n||i)(Y(w9,12))}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[...PO,...kO],imports:[vc,q6]})}}return i})(),LO=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:function(n){let r=null;return r=n?new n:function S9(){return new LO(Y(Ne))}(),r},providedIn:"root"})}}return i})();typeof window<"u"&&window;let BM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(n){let r=null;return r=n?new(n||i):Y(BO),r},providedIn:"root"})}}return i})(),BO=(()=>{class i extends BM{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Qn.NONE:return n;case Qn.HTML:return fs(n,"HTML")?ro(n):C1(this._doc,String(n)).toString();case Qn.STYLE:return fs(n,"Style")?ro(n):n;case Qn.SCRIPT:if(fs(n,"Script"))return ro(n);throw new nt(5200,!1);case Qn.URL:return fs(n,"URL")?ro(n):$g(String(n));case Qn.RESOURCE_URL:if(fs(n,"ResourceURL"))return ro(n);throw new nt(5201,!1);default:throw new nt(5202,!1)}}bypassSecurityTrustHtml(e){return function JH(i){return new qH(i)}(e)}bypassSecurityTrustStyle(e){return function t4(i){return new ZH(i)}(e)}bypassSecurityTrustScript(e){return function e4(i){return new XH(i)}(e)}bypassSecurityTrustUrl(e){return function n4(i){return new YH(i)}(e)}bypassSecurityTrustResourceUrl(e){return function r4(i){return new KH(i)}(e)}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:function(n){let r=null;return r=n?new n:function D9(i){return new BO(i.get(Ne))}(Y(Sn)),r},providedIn:"root"})}}return i})();function UM(i){return!!i&&(i instanceof Mi||Ye(i.lift)&&Ye(i.subscribe))}const{isArray:A9}=Array,{getPrototypeOf:I9,prototype:R9,keys:k9}=Object;function zO(i){if(1===i.length){const t=i[0];if(A9(t))return{args:t,keys:null};if(function P9(i){return i&&"object"==typeof i&&I9(i)===R9}(t)){const e=k9(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:O9}=Array;function zM(i){return Ee(t=>function L9(i,t){return O9(t)?i(...t):i(t)}(i,t))}function VO(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function yc(...i){const t=ks(i),e=Kp(i),{args:n,keys:r}=zO(i);if(0===n.length)return Jt([],t);const o=new Mi(function F9(i,t,e=an){return n=>{HO(t,()=>{const{length:r}=i,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)HO(t,()=>{const d=Jt(i[l],t);let h=!1;d.subscribe(hi(n,f=>{o[l]=f,h||(h=!0,a--),a||n.next(e(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}(n,t,r?s=>VO(r,s):an));return e?o.pipe(zM(e)):o}function HO(i,t,e){i?Vo(e,i,t):t()}const q_=mi(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function Z_(...i){return function N9(){return Aa(1)}()(Jt(i,ks(i)))}function X_(i){return new Mi(t=>{Bn(i()).subscribe(t)})}function Su(i,t){const e=Ye(i)?i:()=>i,n=r=>r.error(e());return new Mi(t?r=>t.schedule(n,0,r):n)}function VM(){return gi((i,t)=>{let e=null;i._refCount++;const n=hi(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class HM extends Mi{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,ti(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new tn;const e=this.getSubject();t.add(this.source.subscribe(hi(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=tn.EMPTY)}return t}refCount(){return VM()(this)}}function Sr(i){return i<=0?()=>rr:gi((t,e)=>{let n=0;t.subscribe(hi(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Y_(...i){const t=ks(i);return gi((e,n)=>{(t?Z_(i,e,t):Z_(i,e)).subscribe(n)})}function jn(i,t){return gi((e,n)=>{let r=0;e.subscribe(hi(n,o=>i.call(t,o,r++)&&n.next(o)))})}function K_(i){return gi((t,e)=>{let n=!1;t.subscribe(hi(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function GO(i=B9){return gi((t,e)=>{let n=!1;t.subscribe(hi(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function B9(){return new q_}function bc(i,t){const e=arguments.length>=2;return n=>n.pipe(i?jn((r,o)=>i(r,o,n)):an,Sr(1),e?K_(t):GO(()=>new q_))}function Cu(i,t){return Ye(t)?gn(i,t,1):gn(i,1)}function En(i,t,e){const n=Ye(i)||t||e?{next:i,error:t,complete:e}:i;return n?gi((r,o)=>{var s;null===(s=n.subscribe)||void 0===s||s.call(n);let a=!0;r.subscribe(hi(o,l=>{var d;null===(d=n.next)||void 0===d||d.call(n,l),o.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),o.complete()},l=>{var d;a=!1,null===(d=n.error)||void 0===d||d.call(n,l),o.error(l)},()=>{var l,d;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(d=n.finalize)||void 0===d||d.call(n)}))}):an}function nl(i){return gi((t,e)=>{let o,n=null,r=!1;n=t.subscribe(hi(e,void 0,void 0,s=>{o=Bn(i(s,nl(i)(t))),n?(n.unsubscribe(),n=null,o.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(e))})}function GM(i){return i<=0?()=>rr:gi((t,e)=>{let n=[];t.subscribe(hi(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function Eu(i){return gi((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}function Cr(i){return gi((t,e)=>{Bn(i).subscribe(hi(e,()=>e.complete(),Bo)),!e.closed&&t.subscribe(e)})}const Be="primary",sm=Symbol("RouteTitle");class G9{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Tu(i){return new G9(i)}function W9(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let o=0;o<n.length;o++){const s=n[o],a=i[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function xs(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!WO(i[r],t[r]))return!1;return!0}function WO(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,o)=>n[o]===r)}return i===t}function jO(i){return i.length>0?i[i.length-1]:null}function rl(i){return UM(i)?i:Uf(i)?Jt(Promise.resolve(i)):jt(i)}const $9={exact:function ZO(i,t,e){if(!xc(i.segments,t.segments)||!Q_(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!ZO(i.children[n],t.children[n],e))return!1;return!0},subset:XO},$O={exact:function q9(i,t){return xs(i,t)},subset:function Z9(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>WO(i[e],t[e]))},ignored:()=>!0};function qO(i,t,e){return $9[e.paths](i.root,t.root,e.matrixParams)&&$O[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function XO(i,t,e){return YO(i,t,t.segments,e)}function YO(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!xc(r,e)||t.hasChildren()||!Q_(r,e,n))}if(i.segments.length===e.length){if(!xc(i.segments,e)||!Q_(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!XO(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),o=e.slice(i.segments.length);return!!(xc(i.segments,r)&&Q_(i.segments,r,n)&&i.children[Be])&&YO(i.children[Be],t,o,n)}}function Q_(i,t,e){return t.every((n,r)=>$O[e](i[r].parameters,n.parameters))}class Du{constructor(t=new ki([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tu(this.queryParams)),this._queryParamMap}toString(){return K9.serialize(this)}}class ki{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return J_(this)}}class am{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Tu(this.parameters)),this._parameterMap}toString(){return JO(this)}}function xc(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let lm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return new WM},providedIn:"root"})}}return i})();class WM{parse(t){const e=new lZ(t);return new Du(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${cm(t.root,!0)}`,n=function tZ(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${tv(e)}=${tv(r)}`).join("&"):`${tv(e)}=${tv(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function Q9(i){return encodeURI(i)}(t.fragment)}`:""}`}}const K9=new WM;function J_(i){return i.segments.map(t=>JO(t)).join("/")}function cm(i,t){if(!i.hasChildren())return J_(i);if(t){const e=i.children[Be]?cm(i.children[Be],!1):"",n=[];return Object.entries(i.children).forEach(([r,o])=>{r!==Be&&n.push(`${r}:${cm(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function Y9(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===Be&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==Be&&(e=e.concat(t(r,n)))}),e}(i,(n,r)=>r===Be?[cm(i.children[Be],!1)]:[`${r}:${cm(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Be]?`${J_(i)}/${e[0]}`:`${J_(i)}/(${e.join("//")})`}}function KO(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tv(i){return KO(i).replace(/%3B/gi,";")}function jM(i){return KO(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ev(i){return decodeURIComponent(i)}function QO(i){return ev(i.replace(/\+/g,"%20"))}function JO(i){return`${jM(i.path)}${function J9(i){return Object.keys(i).map(t=>`;${jM(t)}=${jM(i[t])}`).join("")}(i.parameters)}`}const eZ=/^[^\/()?;#]+/;function $M(i){const t=i.match(eZ);return t?t[0]:""}const iZ=/^[^\/()?;=#]+/,rZ=/^[^=?&#]+/,sZ=/^[^&#]+/;class lZ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ki([],{}):new ki([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[Be]=new ki(t,e)),n}parseSegment(){const t=$M(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new nt(4009,!1);return this.capture(t),new am(ev(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=function nZ(i){const t=i.match(iZ);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=$M(this.remaining);r&&(n=r,this.capture(n))}t[ev(e)]=ev(n)}parseQueryParam(t){const e=function oZ(i){const t=i.match(rZ);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const s=function aZ(i){const t=i.match(sZ);return t?t[0]:""}(this.remaining);s&&(n=s,this.capture(n))}const r=QO(e),o=QO(n);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=$M(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new nt(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Be);const s=this.parseChildren();e[o]=1===Object.keys(s).length?s[Be]:new ki([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new nt(4011,!1)}}function tL(i){return i.segments.length>0?new ki([],{[Be]:i}):i}function eL(i){const t={};for(const n of Object.keys(i.children)){const o=eL(i.children[n]);if(n===Be&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}return function cZ(i){if(1===i.numberOfChildren&&i.children[Be]){const t=i.children[Be];return new ki(i.segments.concat(t.segments),t.children)}return i}(new ki(i.segments,t))}function wc(i){return i instanceof Du}function iL(i){let t;const r=tL(function e(o){const s={};for(const l of o.children){const d=e(l);s[l.outlet]=d}const a=new ki(o.url,s);return o===i&&(t=a),a}(i.root));return t??r}function nL(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(0===t.length)return qM(r,r,r,e,n);const o=function uZ(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new oL(!0,0,i);let t=0,e=!1;const n=i.reduce((r,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([l,d])=>{a[l]="string"==typeof d?d.split("/"):d}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return"string"!=typeof o?[...r,o]:0===s?(o.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,o]},[]);return new oL(e,t,n)}(t);if(o.toRoot())return qM(r,r,new ki([],{}),e,n);const s=function hZ(i,t,e){if(i.isAbsolute)return new nv(t,!0,0);if(!e)return new nv(t,!1,NaN);if(null===e.parent)return new nv(e,!0,0);const n=iv(i.commands[0])?0:1;return function fZ(i,t,e){let n=i,r=t,o=e;for(;o>r;){if(o-=r,n=n.parent,!n)throw new nt(4005,!1);r=n.segments.length}return new nv(n,!1,r-o)}(e,e.segments.length-1+n,i.numberOfDoubleDots)}(o,r,i),a=s.processChildren?um(s.segmentGroup,s.index,o.commands):sL(s.segmentGroup,s.index,o.commands);return qM(r,s.segmentGroup,a,e,n)}function iv(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function dm(i){return"object"==typeof i&&null!=i&&i.outlets}function qM(i,t,e,n,r){let s,o={};n&&Object.entries(n).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`}),s=i===t?e:rL(i,t,e);const a=tL(eL(s));return new Du(a,o,r)}function rL(i,t,e){const n={};return Object.entries(i.children).forEach(([r,o])=>{n[r]=o===t?e:rL(o,t,e)}),new ki(i.segments,n)}class oL{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&iv(n[0]))throw new nt(4003,!1);const r=n.find(dm);if(r&&r!==jO(n))throw new nt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nv{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function sL(i,t,e){if(i||(i=new ki([],{})),0===i.segments.length&&i.hasChildren())return um(i,t,e);const n=function pZ(i,t,e){let n=0,r=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return o;const s=i.segments[r],a=e[n];if(dm(a))break;const l=`${a}`,d=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&d&&"object"==typeof d&&void 0===d.outlets){if(!lL(l,d,s))return o;n+=2}else{if(!lL(l,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const o=new ki(i.segments.slice(0,n.pathIndex),{});return o.children[Be]=new ki(i.segments.slice(n.pathIndex),i.children),um(o,0,r)}return n.match&&0===r.length?new ki(i.segments,{}):n.match&&!i.hasChildren()?ZM(i,t,e):n.match?um(i,0,r):ZM(i,t,e)}function um(i,t,e){if(0===e.length)return new ki(i.segments,{});{const n=function mZ(i){return dm(i[0])?i[0].outlets:{[Be]:i}}(e),r={};if(Object.keys(n).some(o=>o!==Be)&&i.children[Be]&&1===i.numberOfChildren&&0===i.children[Be].segments.length){const o=um(i.children[Be],t,e);return new ki(i.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=sL(i.children[o],t,s))}),Object.entries(i.children).forEach(([o,s])=>{void 0===n[o]&&(r[o]=s)}),new ki(i.segments,r)}}function ZM(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const o=e[r];if(dm(o)){const l=gZ(o.outlets);return new ki(n,l)}if(0===r&&iv(e[0])){n.push(new am(i.segments[t].path,aL(e[0]))),r++;continue}const s=dm(o)?o.outlets[Be]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&iv(a)?(n.push(new am(s,aL(a))),r+=2):(n.push(new am(s,{})),r++)}return new ki(n,{})}function gZ(i){const t={};return Object.entries(i).forEach(([e,n])=>{"string"==typeof n&&(n=[n]),null!==n&&(t[e]=ZM(new ki([],{}),0,n))}),t}function aL(i){const t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function lL(i,t,e){return i==e.path&&xs(t,e.parameters)}const hm="imperative";class ws{constructor(t,e){this.id=t,this.url=e}}class rv extends ws{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ol extends ws{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fm extends ws{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Au extends ws{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=16}}class ov extends ws{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cL extends ws{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _Z extends ws{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vZ extends ws{constructor(t,e,n,r,o){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class yZ extends ws{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bZ extends ws{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xZ{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wZ{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MZ{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SZ{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CZ{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EZ{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dL{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class XM{}class YM{constructor(t){this.url=t}}class TZ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new mm,this.attachRef=null}}let mm=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new TZ,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class uL{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=KM(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=KM(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=QM(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return QM(t,this._root).map(e=>e.value)}}function KM(i,t){if(i===t.value)return t;for(const e of t.children){const n=KM(i,e);if(n)return n}return null}function QM(i,t){if(i===t.value)return[t];for(const e of t.children){const n=QM(i,e);if(n.length)return n.unshift(t),n}return[]}class Xs{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Iu(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class hL extends uL{constructor(t,e){super(t),this.snapshot=e,JM(this,t)}toString(){return this.snapshot.toString()}}function fL(i,t){const e=function DZ(i,t){const s=new sv([],{},{},"",{},Be,t,null,{});return new pL("",new Xs(s,[]))}(0,t),n=new _n([new am("",{})]),r=new _n({}),o=new _n({}),s=new _n({}),a=new _n(""),l=new Ru(n,r,s,a,o,Be,t,e.root);return l.snapshot=e.root,new hL(new Xs(l,[]),e)}class Ru{constructor(t,e,n,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ee(d=>d[sm]))??jt(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ee(t=>Tu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ee(t=>Tu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mL(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],o=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(o.component)break;n--}}return function AZ(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class sv{get title(){return this.data?.[sm]}constructor(t,e,n,r,o,s,a,l,d){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Tu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Tu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class pL extends uL{constructor(t,e){super(e),this.url=t,JM(this,e)}toString(){return gL(this._root)}}function JM(i,t){t.value._routerState=i,t.children.forEach(e=>JM(i,e))}function gL(i){const t=i.children.length>0?` { ${i.children.map(gL).join(", ")} } `:"";return`${i.value}${t}`}function tS(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,xs(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),xs(t.params,e.params)||i.paramsSubject.next(e.params),function j9(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!xs(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.urlSubject.next(e.url),xs(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function eS(i,t){const e=xs(i.params,t.params)&&function X9(i,t){return xc(i,t)&&i.every((e,n)=>xs(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||eS(i.parent,t.parent))}let iS=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=Be,this.activateEvents=new Si,this.deactivateEvents=new Si,this.attachEvents=new Si,this.detachEvents=new Si,this.parentContexts=wt(mm),this.location=wt(Jn),this.changeDetector=wt(pc),this.environmentInjector=wt(oo),this.inputBinder=wt(av,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new nt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new nt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new nt(4012,!1);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new nt(4013,!1);this._activatedRoute=e;const r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new IZ(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Gn]})}}return i})();class IZ{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Ru?this.route:t===mm?this.childContexts:this.parent.get(t,e)}}const av=new at("");let _L=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){const{activatedRoute:n}=e,r=yc([n.queryParams,n.params,n.data]).pipe(or(([o,s,a],l)=>(a={...o,...s,...a},0===l?jt(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||null===n.component)return void this.unsubscribeFromRouteData(e);const s=function o$(i){const t=Ge(i);if(!t)return null;const e=new Of(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(n.component);if(s)for(const{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(e)});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function pm(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function kZ(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return pm(i,n,r);return pm(i,n)})}(i,t,e);return new Xs(n,r)}{if(i.shouldAttach(t.value)){const o=i.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>pm(i,a)),s}}const n=function PZ(i){return new Ru(new _n(i.url),new _n(i.params),new _n(i.queryParams),new _n(i.fragment),new _n(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(o=>pm(i,o));return new Xs(n,r)}}const nS="ngNavigationCancelingError";function vL(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=wc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=yL(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function yL(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[nS]=!0,n.cancellationCode=t,e&&(n.url=e),n}function bL(i){return i&&i[nS]}let xL=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["ng-component"]],standalone:!0,features:[Mk],decls:1,vars:0,template:function(n,r){1&n&&vi(0,"router-outlet")},dependencies:[iS],encapsulation:2})}}return i})();function rS(i){const t=i.children&&i.children.map(rS),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Be&&(e.component=xL),e}function Xo(i){return i.outlet||Be}function gm(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class VZ{constructor(t,e,n,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),tS(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Iu(e);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,e,n){const r=t.value,o=e?e.value:null;if(r===o)if(r.component){const s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=Iu(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);if(n&&n.outlet){const s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=Iu(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){const r=Iu(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new EZ(o.value.snapshot))}),t.children.length&&this.forwardEvent(new SZ(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,o=e?e.value:null;if(tS(r),r===o)if(r.component){const s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),tS(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=gm(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}}class wL{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class lv{constructor(t,e){this.component=t,this.route=e}}function HZ(i,t,e){const n=i._root;return _m(n,t?t._root:null,e,[n.value])}function ku(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function ig(i){return null!==bd(i)}(i)?t.get(i):i:n}function _m(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=Iu(t);return i.children.forEach(s=>{(function WZ(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const o=i.value,s=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const l=function jZ(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!xc(i.url,t.url);case"pathParamsOrQueryParamsChange":return!xc(i.url,t.url)||!xs(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eS(i,t)||!xs(i.queryParams,t.queryParams);default:return!eS(i,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new wL(n)):(o.data=s.data,o._resolvedData=s._resolvedData),_m(i,t,o.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new lv(a.outlet.component,s))}else s&&vm(t,a,r),r.canActivateChecks.push(new wL(n)),_m(i,null,o.component?a?a.children:null:e,n,r)})(s,o[s.value.outlet],e,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>vm(a,e.getContext(s),r)),r}function vm(i,t,e){const n=Iu(i),r=i.value;Object.entries(n).forEach(([o,s])=>{vm(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new lv(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function ym(i){return"function"==typeof i}function ML(i){return i instanceof q_||"EmptyError"===i?.name}const cv=Symbol("INITIAL_VALUE");function Pu(){return or(i=>yc(i.map(t=>t.pipe(Sr(1),Y_(cv)))).pipe(Ee(t=>{for(const e of t)if(!0!==e){if(e===cv)return cv;if(!1===e||e instanceof Du)return e}return!0}),jn(t=>t!==cv),Sr(1)))}function SL(i){return function Pl(...i){return Ae(i)}(En(t=>{if(wc(t))throw vL(0,t)}),Ee(t=>!0===t))}class dv{constructor(t){this.segmentGroup=t||null}}class CL{constructor(t){this.urlTree=t}}function Ou(i){return Su(new dv(i))}function EL(i){return Su(new CL(i))}class h7{constructor(t,e){this.urlSerializer=t,this.urlTree=e}noMatchError(t){return new nt(4002,!1)}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return jt(n);if(r.numberOfChildren>1||!r.children[Be])return Su(new nt(4e3,!1));r=r.children[Be]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const o=this.createSegmentGroup(t,e.root,n,r);return new Du(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Object.entries(t).forEach(([r,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);n[r]=e[a]}else n[r]=o}),n}createSegmentGroup(t,e,n,r){const o=this.createSegments(t,e.segments,n,r);let s={};return Object.entries(e.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,n,r)}),new ki(o,s)}createSegments(t,e,n,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new nt(4001,!1);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}const oS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function f7(i,t,e,n,r){const o=sS(i,t,e);return o.matched?(n=function LZ(i,t){return i.providers&&!i._injector&&(i._injector=Fw(i.providers,t,`Route: ${i.path}`)),i._injector??t}(t,n),function c7(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?jt(r.map(s=>{const a=ku(s,i);return rl(function KZ(i){return i&&ym(i.canMatch)}(a)?a.canMatch(t,e):i.runInContext(()=>a(t,e)))})).pipe(Pu(),SL()):jt(!0)}(n,t,e).pipe(Ee(s=>!0===s?o:{...oS}))):jt(o)}function sS(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...oS}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||W9)(e,i,t);if(!r)return{...oS};const o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});const s=r.consumed.length>0?{...o,...r.consumed[r.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function TL(i,t,e,n){return e.length>0&&function g7(i,t,e){return e.some(n=>uv(i,t,n)&&Xo(n)!==Be)}(i,e,n)?{segmentGroup:new ki(t,p7(n,new ki(e,i.children))),slicedSegments:[]}:0===e.length&&function _7(i,t,e){return e.some(n=>uv(i,t,n))}(i,e,n)?{segmentGroup:new ki(i.segments,m7(i,0,e,n,i.children)),slicedSegments:e}:{segmentGroup:new ki(i.segments,i.children),slicedSegments:e}}function m7(i,t,e,n,r){const o={};for(const s of n)if(uv(i,e,s)&&!r[Xo(s)]){const a=new ki([],{});o[Xo(s)]=a}return{...r,...o}}function p7(i,t){const e={};e[Be]=t;for(const n of i)if(""===n.path&&Xo(n)!==Be){const r=new ki([],{});e[Xo(n)]=r}return e}function uv(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}class x7{constructor(t,e,n,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new h7(this.urlSerializer,this.urlTree)}noMatchError(t){return new nt(4002,!1)}recognize(){const t=TL(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Be).pipe(nl(e=>{if(e instanceof CL)return this.allowRedirects=!1,this.urlTree=e.urlTree,this.match(e.urlTree);throw e instanceof dv?this.noMatchError(e):e}),Ee(e=>{const n=new sv([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Be,this.rootComponentType,null,{}),r=new Xs(n,e),o=new pL("",r),s=function dZ(i,t,e=null,n=null){return nL(iL(i),t,e,n)}(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Be).pipe(nl(n=>{throw n instanceof dv?this.noMatchError(n):n}))}inheritParamsAndData(t){const e=t.value,n=mL(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r,!0)}processChildren(t,e,n){const r=[];for(const o of Object.keys(n.children))"primary"===o?r.unshift(o):r.push(o);return Jt(r).pipe(Cu(o=>{const s=n.children[o],a=function UZ(i,t){const e=i.filter(n=>Xo(n)===t);return e.push(...i.filter(n=>Xo(n)!==t)),e}(e,o);return this.processSegmentGroup(t,a,s,o)}),function z9(i,t){return gi(function U9(i,t,e,n,r){return(o,s)=>{let a=e,l=t,d=0;o.subscribe(hi(s,h=>{const f=d++;l=a?i(l,h,f):(a=!0,h),n&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}(i,t,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),K_(null),function V9(i,t){const e=arguments.length>=2;return n=>n.pipe(i?jn((r,o)=>i(r,o,n)):an,GM(1),e?K_(t):GO(()=>new q_))}(),gn(o=>{if(null===o)return Ou(n);const s=DL(o);return function w7(i){i.sort((t,e)=>t.value.outlet===Be?-1:e.value.outlet===Be?1:t.value.outlet.localeCompare(e.value.outlet))}(s),jt(s)}))}processSegment(t,e,n,r,o,s){return Jt(e).pipe(Cu(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,n,r,o,s).pipe(nl(l=>{if(l instanceof dv)return jt(null);throw l}))),bc(a=>!!a),nl(a=>{if(ML(a))return function y7(i,t,e){return 0===t.length&&!i.children[e]}(n,r,o)?jt([]):Ou(n);throw a}))}processSegmentAgainstRoute(t,e,n,r,o,s,a){return function v7(i,t,e,n){return!!(Xo(i)===n||n!==Be&&uv(t,e,i))&&("**"===i.path||sS(t,i,e).matched)}(n,r,o,s)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,r,n,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,o,s):Ou(r):Ou(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,o,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const o=this.applyRedirects.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?EL(o):this.applyRedirects.lineralizeSegments(n,o).pipe(gn(s=>{const a=new ki(s,{});return this.processSegment(t,e,a,s,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,o,s){const{matched:a,consumedSegments:l,remainingSegments:d,positionalParamSegments:h}=sS(e,r,o);if(!a)return Ou(e);const f=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,h);return r.redirectTo.startsWith("/")?EL(f):this.applyRedirects.lineralizeSegments(r,f).pipe(gn(m=>this.processSegment(t,n,e,m.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,o,s){let a;if("**"===n.path){const l=r.length>0?jO(r).parameters:{};a=jt({snapshot:new sv(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AL(n),Xo(n),n.component??n._loadedComponent??null,n,IL(n)),consumedSegments:[],remainingSegments:[]}),e.children={}}else a=f7(e,n,r,t).pipe(Ee(({matched:l,consumedSegments:d,remainingSegments:h,parameters:f})=>l?{snapshot:new sv(d,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,AL(n),Xo(n),n.component??n._loadedComponent??null,n,IL(n)),consumedSegments:d,remainingSegments:h}:null));return a.pipe(or(l=>null===l?Ou(e):this.getChildConfig(t=n._injector??t,n,r).pipe(or(({routes:d})=>{const h=n._loadedInjector??t,{snapshot:f,consumedSegments:m,remainingSegments:g}=l,{segmentGroup:_,slicedSegments:b}=TL(e,m,g,d);if(0===b.length&&_.hasChildren())return this.processChildren(h,d,_).pipe(Ee(v=>null===v?null:[new Xs(f,v)]));if(0===d.length&&0===b.length)return jt([new Xs(f,[])]);const y=Xo(n)===o;return this.processSegment(h,d,_,b,y?Be:o,!0).pipe(Ee(v=>[new Xs(f,v)]))}))))}getChildConfig(t,e,n){return e.children?jt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?jt({routes:e._loadedRoutes,injector:e._loadedInjector}):function l7(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?jt(!0):jt(r.map(s=>{const a=ku(s,i);return rl(function qZ(i){return i&&ym(i.canLoad)}(a)?a.canLoad(t,e):i.runInContext(()=>a(t,e)))})).pipe(Pu(),SL())}(t,e,n).pipe(gn(r=>r?this.configLoader.loadChildren(t,e).pipe(En(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):function u7(i){return Su(yL(!1,3))}())):jt({routes:[],injector:t})}}function M7(i){const t=i.value.routeConfig;return t&&""===t.path}function DL(i){const t=[],e=new Set;for(const n of i){if(!M7(n)){t.push(n);continue}const r=t.find(o=>n.value.routeConfig===o.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=DL(n.children);t.push(new Xs(n.value,r))}return t.filter(n=>!e.has(n))}function AL(i){return i.data||{}}function IL(i){return i.resolve||{}}function RL(i){return"string"==typeof i.title||null===i.title}function aS(i){return or(t=>{const e=i(t);return e?Jt(e).pipe(Ee(()=>t)):jt(t)})}const Lu=new at("ROUTES");let lS=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=wt(hP)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return jt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=rl(e.loadComponent()).pipe(Ee(kL),En(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Eu(()=>{this.componentLoaders.delete(e)})),r=new HM(n,()=>new Wt).pipe(VM());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return jt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const o=function I7(i,t,e,n){return rl(i.loadChildren()).pipe(Ee(kL),gn(r=>r instanceof xk||Array.isArray(r)?jt(r):Jt(t.compileModuleAsync(r))),Ee(r=>{n&&n(i);let o,s,a=!1;return Array.isArray(r)?(s=r,!0):(o=r.create(e).injector,s=o.get(Lu,[],{optional:!0,self:!0}).flat()),{routes:s.map(rS),injector:o}}))}(n,this.compiler,e,this.onLoadEndListener).pipe(Eu(()=>{this.childrenLoaders.delete(n)})),s=new HM(o,()=>new Wt).pipe(VM());return this.childrenLoaders.set(n,s),s}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function kL(i){return function R7(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let hv=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Wt,this.transitionAbortSubject=new Wt,this.configLoader=wt(lS),this.environmentInjector=wt(oo),this.urlSerializer=wt(lm),this.rootContexts=wt(mm),this.inputBindingEnabled=null!==wt(av,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>jt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new wZ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new xZ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e,n,r){return this.transitions=new _n({id:0,currentUrlTree:n,currentRawUrl:n,currentBrowserUrl:n,extractedUrl:e.urlHandlingStrategy.extract(n),urlAfterRedirects:e.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hm,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(jn(o=>0!==o.id),Ee(o=>({...o,extractedUrl:e.urlHandlingStrategy.extract(o.rawUrl)})),or(o=>{this.currentTransition=o;let s=!1,a=!1;return jt(o).pipe(En(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),or(l=>{const d=l.currentBrowserUrl.toString(),h=!e.navigated||l.extractedUrl.toString()!==d||d!==l.currentUrlTree.toString();if(!h&&"reload"!==(l.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const m="";return this.events.next(new Au(l.id,this.urlSerializer.serialize(l.rawUrl),m,0)),l.resolve(null),rr}if(e.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return jt(l).pipe(or(m=>{const g=this.transitions?.getValue();return this.events.next(new rv(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),g!==this.transitions?.getValue()?rr:Promise.resolve(m)}),function S7(i,t,e,n,r,o){return gn(s=>function b7(i,t,e,n,r,o,s="emptyOnly"){return new x7(i,t,e,n,r,s,o).recognize()}(i,t,e,n,s.extractedUrl,r,o).pipe(Ee(({state:a,tree:l})=>({...s,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),En(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const g=new cL(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(h&&e.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:m,extractedUrl:g,source:_,restoredState:b,extras:y}=l,v=new rv(m,this.urlSerializer.serialize(g),_,b);this.events.next(v);const w=fL(0,this.rootComponentType).snapshot;return this.currentTransition=o={...l,targetSnapshot:w,urlAfterRedirects:g,extras:{...y,skipLocationChange:!1,replaceUrl:!1}},jt(o)}{const m="";return this.events.next(new Au(l.id,this.urlSerializer.serialize(l.extractedUrl),m,1)),l.resolve(null),rr}}),En(l=>{const d=new _Z(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Ee(l=>(this.currentTransition=o={...l,guards:HZ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},o)),function JZ(i,t){return gn(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return 0===s.length&&0===o.length?jt({...e,guardsResult:!0}):function t7(i,t,e,n){return Jt(i).pipe(gn(r=>function a7(i,t,e,n,r){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?jt(o.map(a=>{const l=gm(t)??r,d=ku(a,l);return rl(function YZ(i){return i&&ym(i.canDeactivate)}(d)?d.canDeactivate(i,t,e,n):l.runInContext(()=>d(i,t,e,n))).pipe(bc())})).pipe(Pu()):jt(!0)}(r.component,r.route,e,t,n)),bc(r=>!0!==r,!0))}(s,n,r,i).pipe(gn(a=>a&&function $Z(i){return"boolean"==typeof i}(a)?function e7(i,t,e,n){return Jt(t).pipe(Cu(r=>Z_(function r7(i,t){return null!==i&&t&&t(new MZ(i)),jt(!0)}(r.route.parent,n),function n7(i,t){return null!==i&&t&&t(new CZ(i)),jt(!0)}(r.route,n),function s7(i,t,e){const n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function GZ(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(s)).filter(s=>null!==s).map(s=>X_(()=>jt(s.guards.map(l=>{const d=gm(s.node)??e,h=ku(l,d);return rl(function XZ(i){return i&&ym(i.canActivateChild)}(h)?h.canActivateChild(n,i):d.runInContext(()=>h(n,i))).pipe(bc())})).pipe(Pu())));return jt(o).pipe(Pu())}(i,r.path,e),function o7(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return jt(!0);const r=n.map(o=>X_(()=>{const s=gm(t)??e,a=ku(o,s);return rl(function ZZ(i){return i&&ym(i.canActivate)}(a)?a.canActivate(t,i):s.runInContext(()=>a(t,i))).pipe(bc())}));return jt(r).pipe(Pu())}(i,r.route,e))),bc(r=>!0!==r,!0))}(n,o,i,t):jt(a)),Ee(a=>({...e,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),En(l=>{if(o.guardsResult=l.guardsResult,wc(l.guardsResult))throw vL(0,l.guardsResult);const d=new vZ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),jn(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),aS(l=>{if(l.guards.canActivateChecks.length)return jt(l).pipe(En(d=>{const h=new yZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),or(d=>{let h=!1;return jt(d).pipe(function C7(i,t){return gn(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return jt(e);let o=0;return Jt(r).pipe(Cu(s=>function E7(i,t,e,n){const r=i.routeConfig,o=i._resolve;return void 0!==r?.title&&!RL(r)&&(o[sm]=r.title),function T7(i,t,e,n){const r=function D7(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return jt({});const o={};return Jt(r).pipe(gn(s=>function A7(i,t,e,n){const r=gm(t)??n,o=ku(i,r);return rl(o.resolve?o.resolve(t,e):r.runInContext(()=>o(t,e)))}(i[s],t,e,n).pipe(bc(),En(a=>{o[s]=a}))),GM(1),function H9(i){return Ee(()=>i)}(o),nl(s=>ML(s)?rr:Su(s)))}(o,i,t,n).pipe(Ee(s=>(i._resolvedData=s,i.data=mL(i,e).resolve,r&&RL(r)&&(i.data[sm]=r.title),null)))}(s.route,n,i,t)),En(()=>o++),GM(1),gn(s=>o===r.length?jt(e):rr))})}(e.paramsInheritanceStrategy,this.environmentInjector),En({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",2)}}))}),En(d=>{const h=new bZ(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),aS(l=>{const d=h=>{const f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(En(m=>{h.component=m}),Ee(()=>{})));for(const m of h.children)f.push(...d(m));return f};return yc(d(l.targetSnapshot.root)).pipe(K_(),Sr(1))}),aS(()=>this.afterPreactivation()),Ee(l=>{const d=function RZ(i,t,e){const n=pm(i,t._root,e?e._root:void 0);return new hL(n,t)}(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o={...l,targetRouterState:d},o}),En(()=>{this.events.next(new XM)}),((i,t,e,n)=>Ee(r=>(new VZ(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)))(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Sr(1),En({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ol(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),e.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Cr(this.transitionAbortSubject.pipe(En(l=>{throw l}))),Eu(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),nl(l=>{if(a=!0,bL(l))this.events.next(new fm(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),function OZ(i){return bL(i)&&wc(i.url)}(l)?this.events.next(new YM(l.url)):o.resolve(!1);else{this.events.next(new ov(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(l))}catch(d){o.reject(d)}}return rr}))}))}cancelNavigationTransition(e,n,r){const o=new fm(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(o),e.resolve(!1)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function PL(i){return i!==hm}let OL=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(o=>o.outlet===Be);return n}getResolvedTitleForRoute(e){return e.data[sm]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return wt(k7)},providedIn:"root"})}}return i})(),k7=(()=>{class i extends OL{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(Y(LO))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),P7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return wt(L7)},providedIn:"root"})}}return i})();class O7{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let L7=(()=>{class i extends O7{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const fv=new at("",{providedIn:"root",factory:()=>({})});let F7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:function(){return wt(N7)},providedIn:"root"})}}return i})(),N7=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var bm=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(bm||{});function LL(i,t){i.events.pipe(jn(e=>e instanceof ol||e instanceof fm||e instanceof ov||e instanceof Au),Ee(e=>e instanceof ol||e instanceof Au?bm.COMPLETE:e instanceof fm&&(0===e.code||1===e.code)?bm.REDIRECTING:bm.FAILED),jn(e=>e!==bm.REDIRECTING),Sr(1)).subscribe(()=>{t()})}function B7(i){throw i}function U7(i,t,e){return t.parse("/")}const z7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},V7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let co=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=wt(uP),this.isNgZoneEnabled=!1,this._events=new Wt,this.options=wt(fv,{optional:!0})||{},this.pendingTasks=wt(E_),this.errorHandler=this.options.errorHandler||B7,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||U7,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=wt(F7),this.routeReuseStrategy=wt(P7),this.titleStrategy=wt(OL),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=wt(Lu,{optional:!0})?.flat()??[],this.navigationTransitions=wt(hv),this.urlSerializer=wt(lm),this.location=wt(tm),this.componentInputBindingEnabled=!!wt(av,{optional:!0}),this.eventsSubscription=new tn,this.isNgZoneEnabled=wt(oe)instanceof oe&&oe.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Du,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=fL(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const e=this.navigationTransitions.events.subscribe(n=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(FL(n)&&this._events.next(n));if(n instanceof rv)PL(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(n instanceof Au)this.rawUrlTree=r.rawUrl;else if(n instanceof cL){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(o,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(n instanceof XM)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(n instanceof fm)0!==n.code&&1!==n.code&&(this.navigated=!0),(3===n.code||2===n.code)&&this.restoreHistory(r);else if(n instanceof YM){const o=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),s={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||PL(r.source)};this.scheduleNavigation(o,hm,null,s,{resolve:r.resolve,reject:r.reject,promise:r.promise})}n instanceof ov&&this.restoreHistory(r,!0),n instanceof ol&&(this.navigated=!0),FL(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),hm,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,r){const o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(o.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(rS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){const{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=n,d=l?this.currentUrlTree.fragment:s;let f,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{f=iL(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof e[0]||!e[0].startsWith("/"))&&(e=[]),f=this.currentUrlTree.root}return nL(f,e,h,d??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=wc(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,hm,null,n)}navigate(e,n={skipLocationChange:!1}){return function H7(i){for(let t=0;t<i.length;t++)if(null==i[t])throw new nt(4008,!1)}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...z7}:!1===n?{...V7}:n,wc(e))return qO(this.currentUrlTree,e,r);const o=this.parseUrl(e);return qO(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const o=e[r];return null!=o&&(n[r]=o),n},{})}scheduleNavigation(e,n,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,d;s?(a=s.resolve,l=s.reject,d=s.promise):d=new Promise((f,m)=>{a=f,l=m});const h=this.pendingTasks.add();return LL(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:e,extras:o,resolve:a,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(f=>Promise.reject(f))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const s={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",s)}else{const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId+1)};this.location.go(r,"",o)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function FL(i){return!(i instanceof XM||i instanceof YM)}let mv=(()=>{class i{constructor(e,n,r,o,s,a){this.router=e,this.route=n,this.tabIndexAttribute=r,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Wt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=e.events.subscribe(d=>{d instanceof ol&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,n,r,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==e||n||r||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const e=null===this.href?null:function D1(i,t,e){return function y4(i,t){return"src"===t&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===t&&("base"===i||"link"===i)?T1:E1}(t,e)(i)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",e)}applyAttributeValue(e,n){const r=this.renderer,o=this.el.nativeElement;null!==n?r.setAttribute(o,e,n):r.removeAttribute(o,e)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||i)(U(co),U(Ru),Bd("tabindex"),U(ms),U(Re),U(_c))}}static{this.\u0275dir=dt({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,r){1&n&&Ci("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&n&&on("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",wu],skipLocationChange:["skipLocationChange","skipLocationChange",wu],replaceUrl:["replaceUrl","replaceUrl",wu],routerLink:"routerLink"},standalone:!0,features:[BI,Gn]})}}return i})();class NL{}let j7=(()=>{class i{constructor(e,n,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(jn(e=>e instanceof ol),Cu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const o of n){o.providers&&!o._injector&&(o._injector=Fw(o.providers,e,`Route: ${o.path}`));const s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Jt(r).pipe(Aa())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):jt(null);const o=r.pipe(gn(s=>null===s?jt(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));return n.loadComponent&&!n._loadedComponent?Jt([o,this.loader.loadComponent(n)]).pipe(Aa()):o})}static{this.\u0275fac=function(n){return new(n||i)(Y(co),Y(hP),Y(oo),Y(NL),Y(lS))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const cS=new at("");let BL=(()=>{class i{constructor(e,n,r,o,s={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof rv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ol?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Au&&0===e.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof dL&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dL(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){s_()}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function Ys(i,t){return{\u0275kind:i,\u0275providers:t}}function zL(){const i=wt(Sn);return t=>{const e=i.get(tl);if(t!==e.components[0])return;const n=i.get(co),r=i.get(VL);1===i.get(dS)&&n.initialNavigation(),i.get(HL,null,De.Optional)?.setUpPreloading(),i.get(cS,null,De.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const VL=new at("",{factory:()=>new Wt}),dS=new at("",{providedIn:"root",factory:()=>1}),HL=new at("");function X7(i){return Ys(0,[{provide:HL,useExisting:j7},{provide:NL,useExisting:i}])}const GL=new at("ROUTER_FORROOT_GUARD"),K7=[tm,{provide:lm,useClass:WM},co,mm,{provide:Ru,useFactory:function UL(i){return i.routerState.root},deps:[co]},lS,[]];function Q7(){return new yP("Router",co)}let WL=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[K7,[],{provide:Lu,multi:!0,useValue:e},{provide:GL,useFactory:iX,deps:[[co,new sc,new vf]]},{provide:fv,useValue:n||{}},n?.useHash?{provide:_c,useClass:d$}:{provide:_c,useClass:YP},{provide:cS,useFactory:()=>{const i=wt(Iq),t=wt(oe),e=wt(fv),n=wt(hv),r=wt(lm);return e.scrollOffset&&i.setOffset(e.scrollOffset),new BL(r,n,i,t,e)}},n?.preloadingStrategy?X7(n.preloadingStrategy).\u0275providers:[],{provide:yP,multi:!0,useFactory:Q7},n?.initialNavigation?nX(n):[],n?.bindToComponentInputs?Ys(8,[_L,{provide:av,useExisting:_L}]).\u0275providers:[],[{provide:jL,useFactory:zL},{provide:nM,multi:!0,useExisting:jL}]]}}static forChild(e){return{ngModule:i,providers:[{provide:Lu,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||i)(Y(GL,8))}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();function iX(i){return"guarded"}function nX(i){return["disabled"===i.initialNavigation?Ys(3,[{provide:Xw,multi:!0,useFactory:()=>{const t=wt(co);return()=>{t.setUpLocationChangeListener()}}},{provide:dS,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Ys(2,[{provide:dS,useValue:0},{provide:Xw,multi:!0,deps:[Sn],useFactory:t=>{const e=t.get(l$,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=t.get(co),o=t.get(VL);LL(r,()=>{n(!0)}),t.get(hv).afterPreactivation=()=>(n(!0),o.closed?jt(void 0):o),r.initialNavigation()}))}}]).\u0275providers:[]]}const jL=new at("");let oX=(()=>{class i{constructor(e){this.router=e}navigateTomaps(){this.router.navigate(["/maps"])}static{this.\u0275fac=function(n){return new(n||i)(U(co))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-dashboard"]],decls:36,vars:0,consts:[[1,"landing-page"],[1,"header"],[1,"app-name"],[1,"tagline"],[1,"hero"],[1,"hero-content"],[1,"cta-button",3,"click"],[1,"features"],[1,"feature-list"],[1,"feature-item"],[1,"footer"]],template:function(n,r){1&n&&(xt(0,"div",0)(1,"header",1)(2,"h1",2),pe(3,"Simple Tracker App"),St(),xt(4,"p",3),pe(5,"Effortlessly Track Your Data Without a Database"),St()(),xt(6,"section",4)(7,"div",5)(8,"h2"),pe(9,"Real-Time Tracking Made Simple"),St(),xt(10,"p"),pe(11," Monitor devices, visualize movement in 3D, and download reports with just a click. "),St(),xt(12,"button",6),Ci("click",function(){return r.navigateTomaps()}),pe(13,"Get Started"),St()()(),xt(14,"section",7)(15,"h2"),pe(16,"Why Choose Simple Tracker App?"),St(),xt(17,"div",8)(18,"div",9)(19,"h3"),pe(20,"Real-Time Visualization"),St(),xt(21,"p"),pe(22,"View device movements live on a map with 3D visualization."),St()(),xt(23,"div",9)(24,"h3"),pe(25,"Easy to Use"),St(),xt(26,"p"),pe(27,"No database required. Start tracking in seconds."),St()(),xt(28,"div",9)(29,"h3"),pe(30,"Downloadable Reports"),St(),xt(31,"p"),pe(32,"Export all your tracking data as CSV files effortlessly."),St()()()(),xt(33,"footer",10)(34,"p"),pe(35,"\xa9 2024 Simple Tracker App. All rights reserved."),St()()())},styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Arial,sans-serif;background-color:#f9f9f9;color:#333}.landing-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.header[_ngcontent-%COMP%]{text-align:center;background:#007bff;color:#fff;padding:20px 0}.app-name[_ngcontent-%COMP%]{font-size:2.5rem;margin:0}.tagline[_ngcontent-%COMP%]{font-size:1.2rem;margin:10px 0 0}.hero[_ngcontent-%COMP%]{text-align:center;margin:40px 0}.hero-content[_ngcontent-%COMP%]{max-width:600px}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:20px}.cta-button[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:1rem;cursor:pointer}.cta-button[_ngcontent-%COMP%]:hover{background:#0056b3}.features[_ngcontent-%COMP%]{padding:20px;background:#fff;width:100%;max-width:800px;margin:20px 0;border-radius:10px;box-shadow:0 2px 10px #0000001a}.features[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.feature-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-around;gap:20px}.feature-item[_ngcontent-%COMP%]{width:250px;text-align:center}.feature-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:10px}.feature-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#555}.footer[_ngcontent-%COMP%]{background:#007bff;color:#fff;padding:10px;text-align:center;width:100%}"]})}}return i})();var Ks=It(244);class pv{}class gv{}class Ms{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?"string"==typeof t?this.lazyInit=()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),o=r.toLowerCase(),s=e.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Ms?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Ms;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Ms?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}setHeaderEntries(t,e){const n=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class aX{encodeKey(t){return $L(t)}encodeValue(t){return $L(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const cX=/%(\d[a-f0-9])/gi,dX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $L(i){return encodeURIComponent(i).replace(cX,(t,e)=>dX[e]??t)}function _v(i){return`${i}`}class sl{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new aX,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lX(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(_v):[_v(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new sl({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(_v(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(_v(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class uX{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qL(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function ZL(i){return typeof Blob<"u"&&i instanceof Blob}function XL(i){return typeof FormData<"u"&&i instanceof FormData}class xm{constructor(t,e,n,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function hX(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Ms),this.context||(this.context=new uX),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new sl,this.urlWithParams=e}serializeBody(){return null===this.body?null:qL(this.body)||ZL(this.body)||XL(this.body)||function fX(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof sl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||XL(this.body)?null:ZL(this.body)?this.body.type||null:qL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof sl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,s=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,d=t.params||this.params;const h=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((f,m)=>f.set(m,t.setHeaders[m]),l)),t.setParams&&(d=Object.keys(t.setParams).reduce((f,m)=>f.set(m,t.setParams[m]),d)),new xm(e,n,o,{params:d,headers:l,context:h,reportProgress:a,responseType:r,withCredentials:s})}}var Fu=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Fu||{});class uS{constructor(t,e=200,n="OK"){this.headers=t.headers||new Ms,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class hS extends uS{constructor(t={}){super(t),this.type=Fu.ResponseHeader}clone(t={}){return new hS({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Nu extends uS{constructor(t={}){super(t),this.type=Fu.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Nu({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class YL extends uS{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function fS(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let Mc=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let o;if(e instanceof xm)o=e;else{let l,d;l=r.headers instanceof Ms?r.headers:new Ms(r.headers),r.params&&(d=r.params instanceof sl?r.params:new sl({fromObject:r.params})),o=new xm(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=jt(o).pipe(Cu(l=>this.handler.handle(l)));if(e instanceof xm||"events"===r.observe)return s;const a=s.pipe(jn(l=>l instanceof Nu));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Ee(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ee(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ee(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ee(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new sl).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,fS(r,n))}post(e,n,r={}){return this.request("POST",e,fS(r,n))}put(e,n,r={}){return this.request("PUT",e,fS(r,n))}static{this.\u0275fac=function(n){return new(n||i)(Y(pv))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function JL(i,t){return t(i)}function pX(i,t){return(e,n)=>t.intercept(e,{handle:r=>i(r,n)})}const _X=new at(""),wm=new at(""),tF=new at("");function vX(){let i=null;return(t,e)=>{null===i&&(i=(wt(_X,{optional:!0})??[]).reduceRight(pX,JL));const n=wt(E_),r=n.add();return i(t,e).pipe(Eu(()=>n.remove(r)))}}let eF=(()=>{class i extends pv{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=wt(E_)}handle(e){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(wm),...this.injector.get(tF,[])]));this.chain=r.reduceRight((o,s)=>function gX(i,t,e){return(n,r)=>e.runInContext(()=>t(n,o=>i(o,r)))}(o,s,this.injector),JL)}const n=this.pendingTasks.add();return this.chain(e,r=>this.backend.handle(r)).pipe(Eu(()=>this.pendingTasks.remove(n)))}static{this.\u0275fac=function(n){return new(n||i)(Y(gv),Y(oo))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const wX=/^\)\]\}',?\n/;let nF=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new nt(-2800,!1);const n=this.xhrFactory;return(n.\u0275loadImpl?Jt(n.\u0275loadImpl()):jt(null)).pipe(or(()=>new Mi(o=>{const s=n.build();if(s.open(e.method,e.urlWithParams),e.withCredentials&&(s.withCredentials=!0),e.headers.forEach((b,y)=>s.setRequestHeader(b,y.join(","))),e.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const b=e.detectContentTypeHeader();null!==b&&s.setRequestHeader("Content-Type",b)}if(e.responseType){const b=e.responseType.toLowerCase();s.responseType="json"!==b?b:"text"}const a=e.serializeBody();let l=null;const d=()=>{if(null!==l)return l;const b=s.statusText||"OK",y=new Ms(s.getAllResponseHeaders()),v=function MX(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(s)||e.url;return l=new hS({headers:y,status:s.status,statusText:b,url:v}),l},h=()=>{let{headers:b,status:y,statusText:v,url:w}=d(),S=null;204!==y&&(S=typeof s.response>"u"?s.responseText:s.response),0===y&&(y=S?200:0);let C=y>=200&&y<300;if("json"===e.responseType&&"string"==typeof S){const F=S;S=S.replace(wX,"");try{S=""!==S?JSON.parse(S):null}catch(k){S=F,C&&(C=!1,S={error:k,text:S})}}C?(o.next(new Nu({body:S,headers:b,status:y,statusText:v,url:w||void 0})),o.complete()):o.error(new YL({error:S,headers:b,status:y,statusText:v,url:w||void 0}))},f=b=>{const{url:y}=d(),v=new YL({error:b,status:s.status||0,statusText:s.statusText||"Unknown Error",url:y||void 0});o.error(v)};let m=!1;const g=b=>{m||(o.next(d()),m=!0);let y={type:Fu.DownloadProgress,loaded:b.loaded};b.lengthComputable&&(y.total=b.total),"text"===e.responseType&&s.responseText&&(y.partialText=s.responseText),o.next(y)},_=b=>{let y={type:Fu.UploadProgress,loaded:b.loaded};b.lengthComputable&&(y.total=b.total),o.next(y)};return s.addEventListener("load",h),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),e.reportProgress&&(s.addEventListener("progress",g),null!==a&&s.upload&&s.upload.addEventListener("progress",_)),s.send(a),o.next({type:Fu.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",h),s.removeEventListener("timeout",f),e.reportProgress&&(s.removeEventListener("progress",g),null!==a&&s.upload&&s.upload.removeEventListener("progress",_)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(n){return new(n||i)(Y(_O))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();const mS=new at("XSRF_ENABLED"),rF=new at("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),oF=new at("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class sF{}let EX=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=sO(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(Za),Y(rF))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function TX(i,t){const e=i.url.toLowerCase();if(!wt(mS)||"GET"===i.method||"HEAD"===i.method||e.startsWith("http://")||e.startsWith("https://"))return t(i);const n=wt(sF).getToken(),r=wt(oF);return null!=n&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),t(i)}var al=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(al||{});function Sc(i,t){return{\u0275kind:i,\u0275providers:t}}function DX(...i){const t=[Mc,nF,eF,{provide:pv,useExisting:eF},{provide:gv,useExisting:nF},{provide:wm,useValue:TX,multi:!0},{provide:mS,useValue:!0},{provide:sF,useClass:EX}];for(const e of i)t.push(...e.\u0275providers);return function Px(i){return{\u0275providers:i}}(t)}const aF=new at("LEGACY_INTERCEPTOR_FN");let IX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[DX(Sc(al.LegacyInterceptors,[{provide:aF,useFactory:vX},{provide:wm,useExisting:aF,multi:!0}]))]})}}return i})(),lF=(()=>{class i{constructor(e){this.http=e,this.markers=new Map,this.isTracking=!1,this.trackingPoints=[],this.apiUrl="http://localhost:3018/api/position"}initMap(){this.map=Ks.map("map",{center:[-7.2756,112.7976],zoom:13}),Ks.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(this.map),this.addTrackingButton()}addLegend(){if(!this.map)return;const e=new Ks.Control({position:"bottomleft"});e.onAdd=()=>{const n=Ks.DomUtil.create("div","legend");return n.innerHTML='\n        <h4>Live Data</h4>\n        <p><b>Speed:</b> <span id="legend-speed">N/A</span> km/h</p>\n        <p><b>Course:</b> <span id="legend-course">N/A</span>\xb0</p>\n        <p><b>Altitude:</b> <span id="legend-altitude">N/A</span> m</p>\n        <p><b>Depth:</b> <span id="legend-depth">N/A</span> m</p>\n      \n      ',n.style.backgroundColor="white",n.style.padding="10px",n.style.border="1px solid black",n.style.borderRadius="5px",n},e.addTo(this.map)}addTrackingButton(){const e=document.getElementById("tracking-button");e&&e.addEventListener("click",()=>{this.isTracking=!this.isTracking,e.textContent=this.isTracking?"Stop Tracking":"Start Tracking",this.isTracking?this.trackingPolyline=Ks.polyline([],{color:"blue",weight:3}).addTo(this.map):(this.downloadTrackingData(),this.resetTrackingData())})}fetchData(e,n){this.http.get(this.apiUrl).subscribe(r=>{"all"!==e&&(r=r.filter(o=>o.deviceId===e)),n(r)})}updateMarkers(e){this.map&&e.forEach(n=>{const{latitude:r,longitude:o,timestamp:s,deviceId:a}=n,l=`\n        <div style="font-size: 14px; line-height: 1.5;">\n          <b>Device ID:</b> ${a}<br>\n          <b>Timestamp:</b> ${s}<br>\n          <b>Coordinates:</b> (${r.toFixed(4)}, ${o.toFixed(4)})\n        </div>\n      `;if(this.markers.has(a)){const d=this.markers.get(a);d.setLatLng([r,o]),d.setPopupContent(l)}else{const d=Ks.marker([r,o]).addTo(this.map);d.bindPopup(l),this.markers.set(a,d)}this.isTracking&&(this.trackingPoints.push(n),this.trackingPolyline&&this.trackingPolyline.setLatLngs(this.trackingPoints.map(d=>Ks.latLng(d.latitude,d.longitude)))),this.updateLegend(n)})}downloadTrackingData(){const e=Object.keys(this.trackingPoints[0]).join(","),n=this.trackingPoints.map(l=>Object.values(l).map(d=>`"${d}"`).join(",")).join("\n"),o=new Blob([`${e}\n${n}`],{type:"text/csv"}),s=window.URL.createObjectURL(o),a=document.createElement("a");a.href=s,a.download="tracking-data.csv",a.click(),window.URL.revokeObjectURL(s)}resetTrackingData(){this.trackingPoints=[],this.trackingPolyline&&this.trackingPolyline.remove()}updateLegend(e){["speed","course","altitude","depth","roll","pitch","yaw"].forEach(r=>{const o=document.getElementById(`legend-${r}`);o&&(o.textContent=void 0!==e[r]?e[r]:"N/A")})}resetMarkers(){this.markers.forEach(e=>e.remove()),this.markers.clear()}static{this.\u0275fac=function(n){return new(n||i)(Y(Mc))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function cF(i,t,e,n,r,o,s){try{var a=i[o](s),l=a.value}catch(d){return void e(d)}a.done?t(l):Promise.resolve(l).then(n,r)}function Bu(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function s(l){cF(o,n,r,s,a,"next",l)}function a(l){cF(o,n,r,s,a,"throw",l)}s(void 0)})}}const uF=1,BX=2,Qs=3,yv=0,nY=1,rY=2,dl=0,oY=1,sY=2,aY=3,lY=4,cY=5,dY=6,uY=7,ul=301,Ec=302,Mm=306,Yo=1001,cr=1003,$n=1006,ta=1008,ea=1009,_F=1010,vF=1011,Cm=1012,ES=1013,hl=1014,uo=1015,Em=1016,TS=1017,DS=1018,Vu=1020,yF=35902,bF=1021,xF=1022,Vr=1023,wF=1024,MF=1025,Hu=1026,Gu=1027,AS=1028,Cv=1029,SF=1030,IS=1031,RS=1033,Ev=33776,Tv=33777,Dv=33778,Av=33779,kS=35840,PS=35841,OS=35842,LS=35843,FS=36196,NS=37492,BS=37496,US=37808,zS=37809,VS=37810,HS=37811,GS=37812,WS=37813,jS=37814,$S=37815,qS=37816,ZS=37817,XS=37818,YS=37819,KS=37820,QS=37821,Iv=36492,JS=36494,tC=36495,CF=36283,eC=36284,iC=36285,nC=36286,ho="srgb",$u="srgb-linear",Pv="linear",Oi="srgb",qu=7680,AF="300 es",ia=2e3;class na{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const o=r.indexOf(e);-1!==o&&r.splice(o,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}}const dr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Dc=Math.PI/180,Zu=180/Math.PI;function fo(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(dr[255&i]+dr[i>>8&255]+dr[i>>16&255]+dr[i>>24&255]+"-"+dr[255&t]+dr[t>>8&255]+"-"+dr[t>>16&15|64]+dr[t>>24&255]+"-"+dr[63&e|128]+dr[e>>8&255]+"-"+dr[e>>16&255]+dr[e>>24&255]+dr[255&n]+dr[n>>8&255]+dr[n>>16&255]+dr[n>>24&255]).toLowerCase()}function hn(i,t,e){return Math.max(t,Math.min(e,i))}function aC(i,t){return(i%t+t)%t}function Tm(i,t,e){return(1-e)*i+e*t}function Er(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Ue(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const lC_degToRad=function FY(i){return i*Dc};class gt{constructor(t=0,e=0){gt.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(hn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*n-s*r+t.x,this.y=o*r+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ze{constructor(t,e,n,r,o,s,a,l,d){ze.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,o,s,a,l,d)}set(t,e,n,r,o,s,a,l,d){const h=this.elements;return h[0]=t,h[1]=r,h[2]=a,h[3]=e,h[4]=o,h[5]=l,h[6]=n,h[7]=s,h[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,o=this.elements,s=n[0],a=n[3],l=n[6],d=n[1],h=n[4],f=n[7],m=n[2],g=n[5],_=n[8],b=r[0],y=r[3],v=r[6],w=r[1],S=r[4],C=r[7],F=r[2],k=r[5],P=r[8];return o[0]=s*b+a*w+l*F,o[3]=s*y+a*S+l*k,o[6]=s*v+a*C+l*P,o[1]=d*b+h*w+f*F,o[4]=d*y+h*S+f*k,o[7]=d*v+h*C+f*P,o[2]=m*b+g*w+_*F,o[5]=m*y+g*S+_*k,o[8]=m*v+g*C+_*P,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],d=t[7],h=t[8];return e*s*h-e*a*d-n*o*h+n*a*l+r*o*d-r*s*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],d=t[7],h=t[8],f=h*s-a*d,m=a*l-h*o,g=d*o-s*l,_=e*f+n*m+r*g;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const b=1/_;return t[0]=f*b,t[1]=(r*d-h*n)*b,t[2]=(a*n-r*s)*b,t[3]=m*b,t[4]=(h*e-r*l)*b,t[5]=(r*o-a*e)*b,t[6]=g*b,t[7]=(n*l-d*e)*b,t[8]=(s*e-n*o)*b,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,o,s,a){const l=Math.cos(o),d=Math.sin(o);return this.set(n*l,n*d,-n*(l*s+d*a)+s+t,-r*d,r*l,-r*(-d*s+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(cC.makeScale(t,e)),this}rotate(t){return this.premultiply(cC.makeRotation(-t)),this}translate(t,e){return this.premultiply(cC.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const cC=new ze;function RF(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function Dm(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function GY(){const i=Dm("canvas");return i.style.display="block",i}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const kF={};function Am(i){i in kF||(kF[i]=!0,console.warn(i))}const li={enabled:!0,workingColorSpace:$u,spaces:{},convert:function(i,t,e){return!1===this.enabled||t===e||!t||!e||(this.spaces[t].transfer===Oi&&(i.r=ra(i.r),i.g=ra(i.g),i.b=ra(i.b)),this.spaces[t].primaries!==this.spaces[e].primaries&&(i.applyMatrix3(this.spaces[t].toXYZ),i.applyMatrix3(this.spaces[e].fromXYZ)),this.spaces[e].transfer===Oi&&(i.r=Yu(i.r),i.g=Yu(i.g),i.b=Yu(i.b))),i},fromWorkingColorSpace:function(i,t){return this.convert(i,this.workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return""===i?Pv:this.spaces[i].transfer},getLuminanceCoefficients:function(i,t=this.workingColorSpace){return i.fromArray(this.spaces[t].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,t,e){return i.copy(this.spaces[t].toXYZ).multiply(this.spaces[e].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace}};function ra(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function Yu(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}const PF=[.64,.33,.3,.6,.15,.06],OF=[.2126,.7152,.0722],LF=[.3127,.329],FF=(new ze).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),NF=(new ze).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);let Ku;li.define({[$u]:{primaries:PF,whitePoint:LF,transfer:Pv,toXYZ:FF,fromXYZ:NF,luminanceCoefficients:OF,workingColorSpaceConfig:{unpackColorSpace:ho},outputColorSpaceConfig:{drawingBufferColorSpace:ho}},[ho]:{primaries:PF,whitePoint:LF,transfer:Oi,toXYZ:FF,fromXYZ:NF,luminanceCoefficients:OF,outputColorSpaceConfig:{drawingBufferColorSpace:ho}}});class qY{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Ku&&(Ku=Dm("canvas")),Ku.width=t.width,Ku.height=t.height;const n=Ku.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Ku}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Dm("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=255*ra(o[s]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*ra(e[n]/255)):ra(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let ZY=0;class Qu{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:ZY++}),this.uuid=fo(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)o.push(dC(r[s].isDataTexture?r[s].image:r[s]))}else o=dC(r);n.url=o}return e||(t.images[this.uuid]=n),n}}function dC(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?qY.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let XY=0,Hr=(()=>{class i extends na{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=Yo,o=Yo,s=$n,a=ta,l=Vr,d=ea,h=i.DEFAULT_ANISOTROPY,f=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:XY++}),this.uuid=fo(),this.name="",this.source=new Qu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=h,this.format=l,this.internalFormat=null,this.type=d,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ze,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case Yo:e.x=e.x<0?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case Yo:e.y=e.y<0?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class fi{constructor(t=0,e=0,n=0,r=1){fi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*n+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*n+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*n+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,o;const l=t.elements,d=l[0],h=l[4],f=l[8],m=l[1],g=l[5],_=l[9],b=l[2],y=l[6],v=l[10];if(Math.abs(h-m)<.01&&Math.abs(f-b)<.01&&Math.abs(_-y)<.01){if(Math.abs(h+m)<.1&&Math.abs(f+b)<.1&&Math.abs(_+y)<.1&&Math.abs(d+g+v-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const S=(d+1)/2,C=(g+1)/2,F=(v+1)/2,k=(h+m)/4,P=(f+b)/4,B=(_+y)/4;return S>C&&S>F?S<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(S),r=k/n,o=P/n):C>F?C<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(C),n=k/r,o=B/r):F<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(F),n=P/o,r=B/o),this.set(n,r,o,e),this}let w=Math.sqrt((y-_)*(y-_)+(f-b)*(f-b)+(m-h)*(m-h));return Math.abs(w)<.001&&(w=1),this.x=(y-_)/w,this.y=(f-b)/w,this.z=(m-h)/w,this.w=Math.acos((d+g+v-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class YY extends na{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new fi(0,0,t,e),this.scissorTest=!1,this.viewport=new fi(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:$n,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const o=new Hr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);o.flipY=!1,o.generateMipmaps=n.generateMipmaps,o.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new Qu(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ss extends YY{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class uC extends Hr{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=cr,this.minFilter=cr,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class BF extends Hr{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=cr,this.minFilter=cr,this.wrapR=Yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mo{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,o,s,a){let l=n[r+0],d=n[r+1],h=n[r+2],f=n[r+3];const m=o[s+0],g=o[s+1],_=o[s+2],b=o[s+3];if(0===a)return t[e+0]=l,t[e+1]=d,t[e+2]=h,void(t[e+3]=f);if(1===a)return t[e+0]=m,t[e+1]=g,t[e+2]=_,void(t[e+3]=b);if(f!==b||l!==m||d!==g||h!==_){let y=1-a;const v=l*m+d*g+h*_+f*b,w=v>=0?1:-1,S=1-v*v;if(S>Number.EPSILON){const F=Math.sqrt(S),k=Math.atan2(F,v*w);y=Math.sin(y*k)/F,a=Math.sin(a*k)/F}const C=a*w;if(l=l*y+m*C,d=d*y+g*C,h=h*y+_*C,f=f*y+b*C,y===1-a){const F=1/Math.sqrt(l*l+d*d+h*h+f*f);l*=F,d*=F,h*=F,f*=F}}t[e]=l,t[e+1]=d,t[e+2]=h,t[e+3]=f}static multiplyQuaternionsFlat(t,e,n,r,o,s){const a=n[r],l=n[r+1],d=n[r+2],h=n[r+3],f=o[s],m=o[s+1],g=o[s+2],_=o[s+3];return t[e]=a*_+h*f+l*g-d*m,t[e+1]=l*_+h*m+d*f-a*g,t[e+2]=d*_+h*g+a*m-l*f,t[e+3]=h*_-a*f-l*m-d*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,d=a(n/2),h=a(r/2),f=a(o/2),m=l(n/2),g=l(r/2),_=l(o/2);switch(s){case"XYZ":this._x=m*h*f+d*g*_,this._y=d*g*f-m*h*_,this._z=d*h*_+m*g*f,this._w=d*h*f-m*g*_;break;case"YXZ":this._x=m*h*f+d*g*_,this._y=d*g*f-m*h*_,this._z=d*h*_-m*g*f,this._w=d*h*f+m*g*_;break;case"ZXY":this._x=m*h*f-d*g*_,this._y=d*g*f+m*h*_,this._z=d*h*_+m*g*f,this._w=d*h*f-m*g*_;break;case"ZYX":this._x=m*h*f-d*g*_,this._y=d*g*f+m*h*_,this._z=d*h*_-m*g*f,this._w=d*h*f+m*g*_;break;case"YZX":this._x=m*h*f+d*g*_,this._y=d*g*f+m*h*_,this._z=d*h*_-m*g*f,this._w=d*h*f-m*g*_;break;case"XZY":this._x=m*h*f-d*g*_,this._y=d*g*f-m*h*_,this._z=d*h*_+m*g*f,this._w=d*h*f+m*g*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],o=e[8],s=e[1],a=e[5],l=e[9],d=e[2],h=e[6],f=e[10],m=n+a+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(h-l)*g,this._y=(o-d)*g,this._z=(s-r)*g}else if(n>a&&n>f){const g=2*Math.sqrt(1+n-a-f);this._w=(h-l)/g,this._x=.25*g,this._y=(r+s)/g,this._z=(o+d)/g}else if(a>f){const g=2*Math.sqrt(1+a-n-f);this._w=(o-d)/g,this._x=(r+s)/g,this._y=.25*g,this._z=(l+h)/g}else{const g=2*Math.sqrt(1+f-n-a);this._w=(s-r)/g,this._x=(o+d)/g,this._y=(l+h)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(hn(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,o=t._z,s=t._w,a=e._x,l=e._y,d=e._z,h=e._w;return this._x=n*h+s*a+r*d-o*l,this._y=r*h+s*l+o*a-n*d,this._z=o*h+s*d+n*l-r*a,this._w=s*h-n*a-r*l-o*d,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,o=this._z,s=this._w;let a=s*t._w+n*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-e;return this._w=g*s+e*this._w,this._x=g*n+e*this._x,this._y=g*r+e*this._y,this._z=g*o+e*this._z,this.normalize(),this}const d=Math.sqrt(l),h=Math.atan2(d,a),f=Math.sin((1-e)*h)/d,m=Math.sin(e*h)/d;return this._w=s*f+this._w*m,this._x=n*f+this._x*m,this._y=r*f+this._y*m,this._z=o*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(t=0,e=0,n=0){N.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(UF.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(UF.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*s,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,o=t.x,s=t.y,a=t.z,l=t.w,d=2*(s*r-a*n),h=2*(a*e-o*r),f=2*(o*n-s*e);return this.x=e+l*d+s*f-a*h,this.y=n+l*h+a*d-o*f,this.z=r+l*f+o*h-s*d,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,o=t.z,s=e.x,a=e.y,l=e.z;return this.x=r*l-o*a,this.y=o*s-n*l,this.z=n*a-r*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return hC.copy(this).projectOnVector(t),this.sub(hC)}reflect(t){return this.sub(hC.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(hn(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hC=new N,UF=new mo;class Gr{constructor(t=new N(1/0,1/0,1/0),e=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Ko.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Ko.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Ko.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const o=n.getAttribute("position");if(!0===e&&void 0!==o&&!0!==t.isInstancedMesh)for(let s=0,a=o.count;s<a;s++)!0===t.isMesh?t.getVertexPosition(s,Ko):Ko.fromBufferAttribute(o,s),Ko.applyMatrix4(t.matrixWorld),this.expandByPoint(Ko);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Fv.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Fv.copy(n.boundingBox)),Fv.applyMatrix4(t.matrixWorld),this.union(Fv)}const r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ko),Ko.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Im),Nv.subVectors(this.max,Im),Ju.subVectors(t.a,Im),th.subVectors(t.b,Im),eh.subVectors(t.c,Im),ml.subVectors(th,Ju),pl.subVectors(eh,th),Ac.subVectors(Ju,eh);let e=[0,-ml.z,ml.y,0,-pl.z,pl.y,0,-Ac.z,Ac.y,ml.z,0,-ml.x,pl.z,0,-pl.x,Ac.z,0,-Ac.x,-ml.y,ml.x,0,-pl.y,pl.x,0,-Ac.y,Ac.x,0];return!(!fC(e,Ju,th,eh,Nv)||(e=[1,0,0,0,1,0,0,0,1],!fC(e,Ju,th,eh,Nv)))&&(Bv.crossVectors(ml,pl),e=[Bv.x,Bv.y,Bv.z],fC(e,Ju,th,eh,Nv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ko).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Ko).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(oa)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const oa=[new N,new N,new N,new N,new N,new N,new N,new N],Ko=new N,Fv=new Gr,Ju=new N,th=new N,eh=new N,ml=new N,pl=new N,Ac=new N,Im=new N,Nv=new N,Bv=new N,Ic=new N;function fC(i,t,e,n,r){for(let o=0,s=i.length-3;o<=s;o+=3){Ic.fromArray(i,o);const a=r.x*Math.abs(Ic.x)+r.y*Math.abs(Ic.y)+r.z*Math.abs(Ic.z),l=t.dot(Ic),d=e.dot(Ic),h=n.dot(Ic);if(Math.max(-Math.max(l,d,h),Math.min(l,d,h))>a)return!1}return!0}const KY=new Gr,Rm=new N,mC=new N;class Tr{constructor(t=new N,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):KY.setFromPoints(t).getCenter(n);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Rm.subVectors(t,this.center);const e=Rm.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(Rm,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(mC.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Rm.copy(t.center).add(mC)),this.expandByPoint(Rm.copy(t.center).sub(mC))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const sa=new N,pC=new N,Uv=new N,gl=new N,gC=new N,zv=new N,_C=new N;class km{constructor(t=new N,e=new N(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,sa)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=sa.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(sa.copy(this.origin).addScaledVector(this.direction,e),sa.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){pC.copy(t).add(e).multiplyScalar(.5),Uv.copy(e).sub(t).normalize(),gl.copy(this.origin).sub(pC);const o=.5*t.distanceTo(e),s=-this.direction.dot(Uv),a=gl.dot(this.direction),l=-gl.dot(Uv),d=gl.lengthSq(),h=Math.abs(1-s*s);let f,m,g,_;if(h>0)if(f=s*l-a,m=s*a-l,_=o*h,f>=0)if(m>=-_)if(m<=_){const b=1/h;f*=b,m*=b,g=f*(f+s*m+2*a)+m*(s*f+m+2*l)+d}else m=o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+d;else m=-o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+d;else m<=-_?(f=Math.max(0,-(-s*o+a)),m=f>0?-o:Math.min(Math.max(-o,-l),o),g=-f*f+m*(m+2*l)+d):m<=_?(f=0,m=Math.min(Math.max(-o,-l),o),g=m*(m+2*l)+d):(f=Math.max(0,-(s*o+a)),m=f>0?o:Math.min(Math.max(-o,-l),o),g=-f*f+m*(m+2*l)+d);else m=s>0?-o:o,f=Math.max(0,-(s*m+a)),g=-f*f+m*(m+2*l)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(pC).addScaledVector(Uv,m),g}intersectSphere(t,e){sa.subVectors(t.center,this.origin);const n=sa.dot(this.direction),r=sa.dot(sa)-n*n,o=t.radius*t.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=n-s,l=n+s;return l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,o,s,a,l;const d=1/this.direction.x,h=1/this.direction.y,f=1/this.direction.z,m=this.origin;return d>=0?(n=(t.min.x-m.x)*d,r=(t.max.x-m.x)*d):(n=(t.max.x-m.x)*d,r=(t.min.x-m.x)*d),h>=0?(o=(t.min.y-m.y)*h,s=(t.max.y-m.y)*h):(o=(t.max.y-m.y)*h,s=(t.min.y-m.y)*h),n>s||o>r||((o>n||isNaN(n))&&(n=o),(s<r||isNaN(r))&&(r=s),f>=0?(a=(t.min.z-m.z)*f,l=(t.max.z-m.z)*f):(a=(t.max.z-m.z)*f,l=(t.min.z-m.z)*f),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,sa)}intersectTriangle(t,e,n,r,o){gC.subVectors(e,t),zv.subVectors(n,t),_C.crossVectors(gC,zv);let a,s=this.direction.dot(_C);if(s>0){if(r)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}gl.subVectors(this.origin,t);const l=a*this.direction.dot(zv.crossVectors(gl,zv));if(l<0)return null;const d=a*this.direction.dot(gC.cross(gl));if(d<0||l+d>s)return null;const h=-a*gl.dot(_C);return h<0?null:this.at(h/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ce{constructor(t,e,n,r,o,s,a,l,d,h,f,m,g,_,b,y){Ce.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,o,s,a,l,d,h,f,m,g,_,b,y)}set(t,e,n,r,o,s,a,l,d,h,f,m,g,_,b,y){const v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=o,v[5]=s,v[9]=a,v[13]=l,v[2]=d,v[6]=h,v[10]=f,v[14]=m,v[3]=g,v[7]=_,v[11]=b,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ce).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/ih.setFromMatrixColumn(t,0).length(),o=1/ih.setFromMatrixColumn(t,1).length(),s=1/ih.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,o=t.z,s=Math.cos(n),a=Math.sin(n),l=Math.cos(r),d=Math.sin(r),h=Math.cos(o),f=Math.sin(o);if("XYZ"===t.order){const m=s*h,g=s*f,_=a*h,b=a*f;e[0]=l*h,e[4]=-l*f,e[8]=d,e[1]=g+_*d,e[5]=m-b*d,e[9]=-a*l,e[2]=b-m*d,e[6]=_+g*d,e[10]=s*l}else if("YXZ"===t.order){const m=l*h,g=l*f,_=d*h,b=d*f;e[0]=m+b*a,e[4]=_*a-g,e[8]=s*d,e[1]=s*f,e[5]=s*h,e[9]=-a,e[2]=g*a-_,e[6]=b+m*a,e[10]=s*l}else if("ZXY"===t.order){const m=l*h,g=l*f,_=d*h,b=d*f;e[0]=m-b*a,e[4]=-s*f,e[8]=_+g*a,e[1]=g+_*a,e[5]=s*h,e[9]=b-m*a,e[2]=-s*d,e[6]=a,e[10]=s*l}else if("ZYX"===t.order){const m=s*h,g=s*f,_=a*h,b=a*f;e[0]=l*h,e[4]=_*d-g,e[8]=m*d+b,e[1]=l*f,e[5]=b*d+m,e[9]=g*d-_,e[2]=-d,e[6]=a*l,e[10]=s*l}else if("YZX"===t.order){const m=s*l,g=s*d,_=a*l,b=a*d;e[0]=l*h,e[4]=b-m*f,e[8]=_*f+g,e[1]=f,e[5]=s*h,e[9]=-a*h,e[2]=-d*h,e[6]=g*f+_,e[10]=m-b*f}else if("XZY"===t.order){const m=s*l,g=s*d,_=a*l,b=a*d;e[0]=l*h,e[4]=-f,e[8]=d*h,e[1]=m*f+b,e[5]=s*h,e[9]=g*f-_,e[2]=_*f-g,e[6]=a*h,e[10]=b*f+m}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(QY,t,JY)}lookAt(t,e,n){const r=this.elements;return po.subVectors(t,e),0===po.lengthSq()&&(po.z=1),po.normalize(),_l.crossVectors(n,po),0===_l.lengthSq()&&(1===Math.abs(n.z)?po.x+=1e-4:po.z+=1e-4,po.normalize(),_l.crossVectors(n,po)),_l.normalize(),Vv.crossVectors(po,_l),r[0]=_l.x,r[4]=Vv.x,r[8]=po.x,r[1]=_l.y,r[5]=Vv.y,r[9]=po.y,r[2]=_l.z,r[6]=Vv.z,r[10]=po.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,o=this.elements,s=n[0],a=n[4],l=n[8],d=n[12],h=n[1],f=n[5],m=n[9],g=n[13],_=n[2],b=n[6],y=n[10],v=n[14],w=n[3],S=n[7],C=n[11],F=n[15],k=r[0],P=r[4],B=r[8],I=r[12],T=r[1],H=r[5],et=r[9],K=r[13],ot=r[2],mt=r[6],G=r[10],it=r[14],q=r[3],ht=r[7],Et=r[11],Nt=r[15];return o[0]=s*k+a*T+l*ot+d*q,o[4]=s*P+a*H+l*mt+d*ht,o[8]=s*B+a*et+l*G+d*Et,o[12]=s*I+a*K+l*it+d*Nt,o[1]=h*k+f*T+m*ot+g*q,o[5]=h*P+f*H+m*mt+g*ht,o[9]=h*B+f*et+m*G+g*Et,o[13]=h*I+f*K+m*it+g*Nt,o[2]=_*k+b*T+y*ot+v*q,o[6]=_*P+b*H+y*mt+v*ht,o[10]=_*B+b*et+y*G+v*Et,o[14]=_*I+b*K+y*it+v*Nt,o[3]=w*k+S*T+C*ot+F*q,o[7]=w*P+S*H+C*mt+F*ht,o[11]=w*B+S*et+C*G+F*Et,o[15]=w*I+S*K+C*it+F*Nt,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],s=t[1],a=t[5],l=t[9],d=t[13],h=t[2],f=t[6],m=t[10],g=t[14];return t[3]*(+o*l*f-r*d*f-o*a*m+n*d*m+r*a*g-n*l*g)+t[7]*(+e*l*g-e*d*m+o*s*m-r*s*g+r*d*h-o*l*h)+t[11]*(+e*d*f-e*a*g-o*s*f+n*s*g+o*a*h-n*d*h)+t[15]*(-r*a*h-e*l*f+e*a*m+r*s*f-n*s*m+n*l*h)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],d=t[7],h=t[8],f=t[9],m=t[10],g=t[11],_=t[12],b=t[13],y=t[14],v=t[15],w=f*y*d-b*m*d+b*l*g-a*y*g-f*l*v+a*m*v,S=_*m*d-h*y*d-_*l*g+s*y*g+h*l*v-s*m*v,C=h*b*d-_*f*d+_*a*g-s*b*g-h*a*v+s*f*v,F=_*f*l-h*b*l-_*a*m+s*b*m+h*a*y-s*f*y,k=e*w+n*S+r*C+o*F;if(0===k)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/k;return t[0]=w*P,t[1]=(b*m*o-f*y*o-b*r*g+n*y*g+f*r*v-n*m*v)*P,t[2]=(a*y*o-b*l*o+b*r*d-n*y*d-a*r*v+n*l*v)*P,t[3]=(f*l*o-a*m*o-f*r*d+n*m*d+a*r*g-n*l*g)*P,t[4]=S*P,t[5]=(h*y*o-_*m*o+_*r*g-e*y*g-h*r*v+e*m*v)*P,t[6]=(_*l*o-s*y*o-_*r*d+e*y*d+s*r*v-e*l*v)*P,t[7]=(s*m*o-h*l*o+h*r*d-e*m*d-s*r*g+e*l*g)*P,t[8]=C*P,t[9]=(_*f*o-h*b*o-_*n*g+e*b*g+h*n*v-e*f*v)*P,t[10]=(s*b*o-_*a*o+_*n*d-e*b*d-s*n*v+e*a*v)*P,t[11]=(h*a*o-s*f*o-h*n*d+e*f*d+s*n*g-e*a*g)*P,t[12]=F*P,t[13]=(h*b*r-_*f*r+_*n*m-e*b*m-h*n*y+e*f*y)*P,t[14]=(_*a*r-s*b*r-_*n*l+e*b*l+s*n*y-e*a*y)*P,t[15]=(s*f*r-h*a*r+h*n*l-e*f*l-s*n*m+e*a*m)*P,this}scale(t){const e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),o=1-n,s=t.x,a=t.y,l=t.z,d=o*s,h=o*a;return this.set(d*s+n,d*a-r*l,d*l+r*a,0,d*a+r*l,h*a+n,h*l-r*s,0,d*l-r*a,h*l+r*s,o*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,o,s){return this.set(1,n,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,o=e._x,s=e._y,a=e._z,l=e._w,d=o+o,h=s+s,f=a+a,m=o*d,g=o*h,_=o*f,b=s*h,y=s*f,v=a*f,w=l*d,S=l*h,C=l*f,F=n.x,k=n.y,P=n.z;return r[0]=(1-(b+v))*F,r[1]=(g+C)*F,r[2]=(_-S)*F,r[3]=0,r[4]=(g-C)*k,r[5]=(1-(m+v))*k,r[6]=(y+w)*k,r[7]=0,r[8]=(_+S)*P,r[9]=(y-w)*P,r[10]=(1-(m+b))*P,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let o=ih.set(r[0],r[1],r[2]).length();const s=ih.set(r[4],r[5],r[6]).length(),a=ih.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],Qo.copy(this);const d=1/o,h=1/s,f=1/a;return Qo.elements[0]*=d,Qo.elements[1]*=d,Qo.elements[2]*=d,Qo.elements[4]*=h,Qo.elements[5]*=h,Qo.elements[6]*=h,Qo.elements[8]*=f,Qo.elements[9]*=f,Qo.elements[10]*=f,e.setFromRotationMatrix(Qo),n.x=o,n.y=s,n.z=a,this}makePerspective(t,e,n,r,o,s,a=ia){const l=this.elements,d=2*o/(e-t),h=2*o/(n-r),f=(e+t)/(e-t),m=(n+r)/(n-r);let g,_;if(a===ia)g=-(s+o)/(s-o),_=-2*s*o/(s-o);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);g=-s/(s-o),_=-s*o/(s-o)}return l[0]=d,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=h,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,o,s,a=ia){const l=this.elements,d=1/(e-t),h=1/(n-r),f=1/(s-o),m=(e+t)*d,g=(n+r)*h;let _,b;if(a===ia)_=(s+o)*f,b=-2*f;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);_=o*f,b=-1*f}return l[0]=2*d,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*h,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=b,l[14]=-_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const ih=new N,Qo=new Ce,QY=new N(0,0,0),JY=new N(1,1,1),_l=new N,Vv=new N,po=new N,zF=new Ce,VF=new mo;let aa=(()=>{class i{constructor(e=0,n=0,r=0,o=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const o=e.elements,s=o[0],a=o[4],l=o[8],d=o[1],h=o[5],f=o[9],m=o[2],g=o[6],_=o[10];switch(n){case"XYZ":this._y=Math.asin(hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(g,h),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(d,h)):(this._y=Math.atan2(-m,s),this._z=0);break;case"ZXY":this._x=Math.asin(hn(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(-m,_),this._z=Math.atan2(-a,h)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-hn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(g,_),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-a,h));break;case"YZX":this._z=Math.asin(hn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-m,s)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-hn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(g,h),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return zF.makeRotationFromQuaternion(e),this.setFromRotationMatrix(zF,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return VF.setFromEuler(this),this.setFromQuaternion(VF,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class vC{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let tK=0;const HF=new N,nh=new mo,la=new Ce,Hv=new N,Pm=new N,eK=new N,iK=new mo,GF=new N(1,0,0),WF=new N(0,1,0),jF=new N(0,0,1),$F={type:"added"},nK={type:"removed"},rh={type:"childadded",child:null},yC={type:"childremoved",child:null};let Yi=(()=>{class i extends na{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tK++}),this.uuid=fo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const e=new N,n=new aa,r=new mo,o=new N(1,1,1);n._onChange(function s(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Ce},normalMatrix:{value:new ze}}),this.matrix=new Ce,this.matrixWorld=new Ce,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new vC,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return nh.setFromAxisAngle(e,n),this.quaternion.multiply(nh),this}rotateOnWorldAxis(e,n){return nh.setFromAxisAngle(e,n),this.quaternion.premultiply(nh),this}rotateX(e){return this.rotateOnAxis(GF,e)}rotateY(e){return this.rotateOnAxis(WF,e)}rotateZ(e){return this.rotateOnAxis(jF,e)}translateOnAxis(e,n){return HF.copy(e).applyQuaternion(this.quaternion),this.position.add(HF.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(GF,e)}translateY(e){return this.translateOnAxis(WF,e)}translateZ(e){return this.translateOnAxis(jF,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Hv.copy(e):Hv.set(e,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),Pm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(Pm,Hv,this.up):la.lookAt(Hv,Pm,this.up),this.quaternion.setFromRotationMatrix(la),o&&(la.extractRotation(o.matrixWorld),nh.setFromRotationMatrix(la),this.quaternion.premultiply(nh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent($F),rh.child=e,this.dispatchEvent(rh),rh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(nK),yC.child=e,this.dispatchEvent(yC),yC.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),la.multiply(e.parent.matrixWorld)),e.applyMatrix4(la),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent($F),rh.child=e,this.dispatchEvent(rh),rh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const a=this.children[r].getObjectByProperty(e,n);if(void 0!==a)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pm,e,eK),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Pm,iK,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===n){const o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};function s(l,d){return void 0===l[d.uuid]&&(l[d.uuid]=d.toJSON(e)),d.uuid}if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(o.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),null!==this.boundingBox&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const d=l.shapes;if(Array.isArray(d))for(let h=0,f=d.length;h<f;h++)s(e.shapes,d[h]);else s(e.shapes,d)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let d=0,h=this.material.length;d<h;d++)l.push(s(e.materials,this.material[d]));o.material=l}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let l=0;l<this.animations.length;l++)o.animations.push(s(e.animations,this.animations[l]))}if(n){const l=a(e.geometries),d=a(e.materials),h=a(e.textures),f=a(e.images),m=a(e.shapes),g=a(e.skeletons),_=a(e.animations),b=a(e.nodes);l.length>0&&(r.geometries=l),d.length>0&&(r.materials=d),h.length>0&&(r.textures=h),f.length>0&&(r.images=f),m.length>0&&(r.shapes=m),g.length>0&&(r.skeletons=g),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=o,r;function a(l){const d=[];for(const h in l){const f=l[h];delete f.metadata,d.push(f)}return d}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DEFAULT_UP=new N(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const Jo=new N,ca=new N,bC=new N,da=new N,oh=new N,sh=new N,qF=new N,xC=new N,wC=new N,MC=new N,SC=new fi,CC=new fi,EC=new fi;class go{constructor(t=new N,e=new N,n=new N){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Jo.subVectors(t,e),r.cross(Jo);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,n,r,o){Jo.subVectors(r,e),ca.subVectors(n,e),bC.subVectors(t,e);const s=Jo.dot(Jo),a=Jo.dot(ca),l=Jo.dot(bC),d=ca.dot(ca),h=ca.dot(bC),f=s*d-a*a;if(0===f)return o.set(0,0,0),null;const m=1/f,g=(d*l-a*h)*m,_=(s*h-a*l)*m;return o.set(1-g-_,_,g)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,da)&&da.x>=0&&da.y>=0&&da.x+da.y<=1}static getInterpolation(t,e,n,r,o,s,a,l){return null===this.getBarycoord(t,e,n,r,da)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(o,da.x),l.addScaledVector(s,da.y),l.addScaledVector(a,da.z),l)}static getInterpolatedAttribute(t,e,n,r,o,s){return SC.setScalar(0),CC.setScalar(0),EC.setScalar(0),SC.fromBufferAttribute(t,e),CC.fromBufferAttribute(t,n),EC.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(SC,o.x),s.addScaledVector(CC,o.y),s.addScaledVector(EC,o.z),s}static isFrontFacing(t,e,n,r){return Jo.subVectors(n,e),ca.subVectors(t,e),Jo.cross(ca).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Jo.subVectors(this.c,this.b),ca.subVectors(this.a,this.b),.5*Jo.cross(ca).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return go.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return go.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,o){return go.getInterpolation(t,this.a,this.b,this.c,e,n,r,o)}containsPoint(t){return go.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return go.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,o=this.c;let s,a;oh.subVectors(r,n),sh.subVectors(o,n),xC.subVectors(t,n);const l=oh.dot(xC),d=sh.dot(xC);if(l<=0&&d<=0)return e.copy(n);wC.subVectors(t,r);const h=oh.dot(wC),f=sh.dot(wC);if(h>=0&&f<=h)return e.copy(r);const m=l*f-h*d;if(m<=0&&l>=0&&h<=0)return s=l/(l-h),e.copy(n).addScaledVector(oh,s);MC.subVectors(t,o);const g=oh.dot(MC),_=sh.dot(MC);if(_>=0&&g<=_)return e.copy(o);const b=g*d-l*_;if(b<=0&&d>=0&&_<=0)return a=d/(d-_),e.copy(n).addScaledVector(sh,a);const y=h*_-g*f;if(y<=0&&f-h>=0&&g-_>=0)return qF.subVectors(o,r),a=(f-h)/(f-h+(g-_)),e.copy(r).addScaledVector(qF,a);const v=1/(y+b+m);return s=b*v,a=m*v,e.copy(n).addScaledVector(oh,s).addScaledVector(sh,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const ZF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vl={h:0,s:0,l:0},Gv={h:0,s:0,l:0};function TC(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}class Gt{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=ho){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,li.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=li.workingColorSpace){return this.r=t,this.g=e,this.b=n,li.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=li.workingColorSpace){if(t=aC(t,1),e=hn(e,0,1),n=hn(n,0,1),0===e)this.r=this.g=this.b=n;else{const o=n<=.5?n*(1+e):n+e-n*e,s=2*n-o;this.r=TC(s,o,t+1/3),this.g=TC(s,o,t),this.b=TC(s,o,t-1/3)}return li.toWorkingColorSpace(this,r),this}setStyle(t,e=ho){function n(o){void 0!==o&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const o=r[1],s=o.length;if(3===s)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(6===s)return this.setHex(parseInt(o,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=ho){const n=ZF[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ra(t.r),this.g=ra(t.g),this.b=ra(t.b),this}copyLinearToSRGB(t){return this.r=Yu(t.r),this.g=Yu(t.g),this.b=Yu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=ho){return li.fromWorkingColorSpace(ur.copy(this),t),65536*Math.round(hn(255*ur.r,0,255))+256*Math.round(hn(255*ur.g,0,255))+Math.round(hn(255*ur.b,0,255))}getHexString(t=ho){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=li.workingColorSpace){li.fromWorkingColorSpace(ur.copy(this),e);const n=ur.r,r=ur.g,o=ur.b,s=Math.max(n,r,o),a=Math.min(n,r,o);let l,d;const h=(a+s)/2;if(a===s)l=0,d=0;else{const f=s-a;switch(d=h<=.5?f/(s+a):f/(2-s-a),s){case n:l=(r-o)/f+(r<o?6:0);break;case r:l=(o-n)/f+2;break;case o:l=(n-r)/f+4}l/=6}return t.h=l,t.s=d,t.l=h,t}getRGB(t,e=li.workingColorSpace){return li.fromWorkingColorSpace(ur.copy(this),e),t.r=ur.r,t.g=ur.g,t.b=ur.b,t}getStyle(t=ho){li.fromWorkingColorSpace(ur.copy(this),t);const e=ur.r,n=ur.g,r=ur.b;return t!==ho?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(vl),this.setHSL(vl.h+t,vl.s+e,vl.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(vl),t.getHSL(Gv);const n=Tm(vl.h,Gv.h,e),r=Tm(vl.s,Gv.s,e),o=Tm(vl.l,Gv.l,e);return this.setHSL(n,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*n+o[6]*r,this.g=o[1]*e+o[4]*n+o[7]*r,this.b=o[2]*e+o[5]*n+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ur=new Gt;Gt.NAMES=ZF;let rK=0;class Dr extends na{static get type(){return"Material"}get type(){return this.constructor.type}set type(t){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rK++}),this.uuid=fo(),this.name="",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Gt(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=qu,this.stencilZFail=qu,this.stencilZPass=qu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),100!==this.blendEquation&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==qu&&(n.stencilFail=this.stencilFail),this.stencilZFail!==qu&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==qu&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const o=r(t.textures),s=r(t.images);o.length>0&&(n.textures=o),s.length>0&&(n.images=s)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=e[o].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class yl extends Dr{static get type(){return"MeshBasicMaterial"}constructor(t){super(),this.isMeshBasicMaterial=!0,this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new aa,this.combine=yv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Tn=new N,Wv=new gt;class Bi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this.updateRanges=[],this.gpuType=uo,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Wv.fromBufferAttribute(this,e),Wv.applyMatrix3(t),this.setXY(e,Wv.x,Wv.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Tn.fromBufferAttribute(this,e),Tn.applyMatrix3(t),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Tn.fromBufferAttribute(this,e),Tn.applyMatrix4(t),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Tn.fromBufferAttribute(this,e),Tn.applyNormalMatrix(t),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Tn.fromBufferAttribute(this,e),Tn.transformDirection(t),this.setXYZ(e,Tn.x,Tn.y,Tn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=Er(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Ue(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=Er(e,this.array)),e}setX(t,e){return this.normalized&&(e=Ue(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=Er(e,this.array)),e}setY(t,e){return this.normalized&&(e=Ue(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=Er(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Ue(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=Er(e,this.array)),e}setW(t,e){return this.normalized&&(e=Ue(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Ue(e,this.array),n=Ue(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Ue(e,this.array),n=Ue(n,this.array),r=Ue(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=Ue(e,this.array),n=Ue(n,this.array),r=Ue(r,this.array),o=Ue(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class XF extends Bi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class YF extends Bi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ie extends Bi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let sK=0;const Oo=new Ce,DC=new Yi,ah=new N,_o=new Gr,Lm=new Gr,qn=new N;class We extends na{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:sK++}),this.uuid=fo(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(RF(t)?YF:XF)(t,1):t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const o=(new ze).getNormalMatrix(t);n.applyNormalMatrix(o),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Oo.makeRotationFromQuaternion(t),this.applyMatrix4(Oo),this}rotateX(t){return Oo.makeRotationX(t),this.applyMatrix4(Oo),this}rotateY(t){return Oo.makeRotationY(t),this.applyMatrix4(Oo),this}rotateZ(t){return Oo.makeRotationZ(t),this.applyMatrix4(Oo),this}translate(t,e,n){return Oo.makeTranslation(t,e,n),this.applyMatrix4(Oo),this}scale(t,e,n){return Oo.makeScale(t,e,n),this.applyMatrix4(Oo),this}lookAt(t){return DC.lookAt(t),DC.updateMatrix(),this.applyMatrix4(DC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ah).negate(),this.translate(ah.x,ah.y,ah.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const n=[];for(let r=0,o=t.length;r<o;r++){const s=t[r];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new ie(n,3))}else{for(let n=0,r=e.count;n<r;n++){const o=t[n];e.setXYZ(n,o.x,o.y,o.z||0)}t.length>e.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Gr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)_o.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(qn.addVectors(this.boundingBox.min,_o.min),this.boundingBox.expandByPoint(qn),qn.addVectors(this.boundingBox.max,_o.max),this.boundingBox.expandByPoint(qn)):(this.boundingBox.expandByPoint(_o.min),this.boundingBox.expandByPoint(_o.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Tr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new N,1/0);if(t){const n=this.boundingSphere.center;if(_o.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++)Lm.setFromBufferAttribute(e[o]),this.morphTargetsRelative?(qn.addVectors(_o.min,Lm.min),_o.expandByPoint(qn),qn.addVectors(_o.max,Lm.max),_o.expandByPoint(qn)):(_o.expandByPoint(Lm.min),_o.expandByPoint(Lm.max));_o.getCenter(n);let r=0;for(let o=0,s=t.count;o<s;o++)qn.fromBufferAttribute(t,o),r=Math.max(r,n.distanceToSquared(qn));if(e)for(let o=0,s=e.length;o<s;o++){const a=e[o],l=this.morphTargetsRelative;for(let d=0,h=a.count;d<h;d++)qn.fromBufferAttribute(a,d),l&&(ah.fromBufferAttribute(t,d),qn.add(ah)),r=Math.max(r,n.distanceToSquared(qn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,o=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Bi(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<n.count;B++)a[B]=new N,l[B]=new N;const d=new N,h=new N,f=new N,m=new gt,g=new gt,_=new gt,b=new N,y=new N;function v(B,I,T){d.fromBufferAttribute(n,B),h.fromBufferAttribute(n,I),f.fromBufferAttribute(n,T),m.fromBufferAttribute(o,B),g.fromBufferAttribute(o,I),_.fromBufferAttribute(o,T),h.sub(d),f.sub(d),g.sub(m),_.sub(m);const H=1/(g.x*_.y-_.x*g.y);isFinite(H)&&(b.copy(h).multiplyScalar(_.y).addScaledVector(f,-g.y).multiplyScalar(H),y.copy(f).multiplyScalar(g.x).addScaledVector(h,-_.x).multiplyScalar(H),a[B].add(b),a[I].add(b),a[T].add(b),l[B].add(y),l[I].add(y),l[T].add(y))}let w=this.groups;0===w.length&&(w=[{start:0,count:t.count}]);for(let B=0,I=w.length;B<I;++B){const T=w[B],H=T.start;for(let K=H,ot=H+T.count;K<ot;K+=3)v(t.getX(K+0),t.getX(K+1),t.getX(K+2))}const S=new N,C=new N,F=new N,k=new N;function P(B){F.fromBufferAttribute(r,B),k.copy(F);const I=a[B];S.copy(I),S.sub(F.multiplyScalar(F.dot(I))).normalize(),C.crossVectors(k,I);const H=C.dot(l[B])<0?-1:1;s.setXYZW(B,S.x,S.y,S.z,H)}for(let B=0,I=w.length;B<I;++B){const T=w[B],H=T.start;for(let K=H,ot=H+T.count;K<ot;K+=3)P(t.getX(K+0)),P(t.getX(K+1)),P(t.getX(K+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Bi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let m=0,g=n.count;m<g;m++)n.setXYZ(m,0,0,0);const r=new N,o=new N,s=new N,a=new N,l=new N,d=new N,h=new N,f=new N;if(t)for(let m=0,g=t.count;m<g;m+=3){const _=t.getX(m+0),b=t.getX(m+1),y=t.getX(m+2);r.fromBufferAttribute(e,_),o.fromBufferAttribute(e,b),s.fromBufferAttribute(e,y),h.subVectors(s,o),f.subVectors(r,o),h.cross(f),a.fromBufferAttribute(n,_),l.fromBufferAttribute(n,b),d.fromBufferAttribute(n,y),a.add(h),l.add(h),d.add(h),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(y,d.x,d.y,d.z)}else for(let m=0,g=e.count;m<g;m+=3)r.fromBufferAttribute(e,m+0),o.fromBufferAttribute(e,m+1),s.fromBufferAttribute(e,m+2),h.subVectors(s,o),f.subVectors(r,o),h.cross(f),n.setXYZ(m+0,h.x,h.y,h.z),n.setXYZ(m+1,h.x,h.y,h.z),n.setXYZ(m+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)qn.fromBufferAttribute(t,e),qn.normalize(),t.setXYZ(e,qn.x,qn.y,qn.z)}toNonIndexed(){function t(a,l){const d=a.array,h=a.itemSize,f=a.normalized,m=new d.constructor(l.length*h);let g=0,_=0;for(let b=0,y=l.length;b<y;b++){g=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*h;for(let v=0;v<h;v++)m[_++]=d[g++]}return new Bi(m,h,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new We,n=this.index.array,r=this.attributes;for(const a in r){const d=t(r[a],n);e.setAttribute(a,d)}const o=this.morphAttributes;for(const a in o){const l=[],d=o[a];for(let h=0,f=d.length;h<f;h++){const g=t(d[h],n);l.push(g)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const d=s[a];e.addGroup(d.start,d.count,d.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const d in l)void 0!==l[d]&&(t[d]=l[d]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let o=!1;for(const l in this.morphAttributes){const d=this.morphAttributes[l],h=[];for(let f=0,m=d.length;f<m;f++)h.push(d[f].toJSON(t.data));h.length>0&&(r[l]=h,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const d in r)this.setAttribute(d,r[d].clone(e));const o=t.morphAttributes;for(const d in o){const h=[],f=o[d];for(let m=0,g=f.length;m<g;m++)h.push(f[m].clone(e));this.morphAttributes[d]=h}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let d=0,h=s.length;d<h;d++){const f=s[d];this.addGroup(f.start,f.count,f.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KF=new Ce,Rc=new km,jv=new Tr,QF=new N,$v=new N,qv=new N,Zv=new N,AC=new N,Xv=new N,JF=new N,Yv=new N;class Dn extends Yi{constructor(t=new We,e=new yl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){const a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){const n=this.geometry,o=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(n.attributes.position,t);const a=this.morphTargetInfluences;if(o&&a){Xv.set(0,0,0);for(let l=0,d=o.length;l<d;l++){const h=a[l];0!==h&&(AC.fromBufferAttribute(o[l],t),Xv.addScaledVector(s?AC:AC.sub(e),h))}e.add(Xv)}return e}raycast(t,e){const n=this.geometry,o=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),jv.copy(n.boundingSphere),jv.applyMatrix4(o),Rc.copy(t.ray).recast(t.near),(!1!==jv.containsPoint(Rc.origin)||!(null===Rc.intersectSphere(jv,QF)||Rc.origin.distanceToSquared(QF)>(t.far-t.near)**2))&&(KF.copy(o).invert(),Rc.copy(t.ray).applyMatrix4(KF),(null===n.boundingBox||!1!==Rc.intersectsBox(n.boundingBox))&&this._computeIntersections(t,e,Rc)))}_computeIntersections(t,e,n){let r;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,d=o.attributes.uv,h=o.attributes.uv1,f=o.attributes.normal,m=o.groups,g=o.drawRange;if(null!==a)if(Array.isArray(s))for(let _=0,b=m.length;_<b;_++){const y=m[_],v=s[y.materialIndex];for(let C=Math.max(y.start,g.start),F=Math.min(a.count,Math.min(y.start+y.count,g.start+g.count));C<F;C+=3)r=Kv(this,v,t,n,d,h,f,a.getX(C),a.getX(C+1),a.getX(C+2)),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,e.push(r))}else for(let y=Math.max(0,g.start),v=Math.min(a.count,g.start+g.count);y<v;y+=3)r=Kv(this,s,t,n,d,h,f,a.getX(y),a.getX(y+1),a.getX(y+2)),r&&(r.faceIndex=Math.floor(y/3),e.push(r));else if(void 0!==l)if(Array.isArray(s))for(let _=0,b=m.length;_<b;_++){const y=m[_],v=s[y.materialIndex];for(let C=Math.max(y.start,g.start),F=Math.min(l.count,Math.min(y.start+y.count,g.start+g.count));C<F;C+=3)r=Kv(this,v,t,n,d,h,f,C,C+1,C+2),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=y.materialIndex,e.push(r))}else for(let y=Math.max(0,g.start),v=Math.min(l.count,g.start+g.count);y<v;y+=3)r=Kv(this,s,t,n,d,h,f,y,y+1,y+2),r&&(r.faceIndex=Math.floor(y/3),e.push(r))}}function Kv(i,t,e,n,r,o,s,a,l,d){i.getVertexPosition(a,$v),i.getVertexPosition(l,qv),i.getVertexPosition(d,Zv);const h=function aK(i,t,e,n,r,o,s,a){let l;if(l=1===t.side?n.intersectTriangle(s,o,r,!0,a):n.intersectTriangle(r,o,s,0===t.side,a),null===l)return null;Yv.copy(a),Yv.applyMatrix4(i.matrixWorld);const d=e.ray.origin.distanceTo(Yv);return d<e.near||d>e.far?null:{distance:d,point:Yv.clone(),object:i}}(i,t,e,n,$v,qv,Zv,JF);if(h){const f=new N;go.getBarycoord(JF,$v,qv,Zv,f),r&&(h.uv=go.getInterpolatedAttribute(r,a,l,d,f,new gt)),o&&(h.uv1=go.getInterpolatedAttribute(o,a,l,d,f,new gt)),s&&(h.normal=go.getInterpolatedAttribute(s,a,l,d,f,new N),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));const m={a,b:l,c:d,normal:new N,materialIndex:0};go.getNormal($v,qv,Zv,m.normal),h.face=m,h.barycoord=f}return h}class lh extends We{constructor(t=1,e=1,n=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],d=[],h=[],f=[];let m=0,g=0;function _(b,y,v,w,S,C,F,k,P,B,I){const T=C/P,H=F/B,et=C/2,K=F/2,ot=k/2,mt=P+1,G=B+1;let it=0,q=0;const ht=new N;for(let Et=0;Et<G;Et++){const Nt=Et*H-K;for(let he=0;he<mt;he++)ht[b]=(he*T-et)*w,ht[y]=Nt*S,ht[v]=ot,d.push(ht.x,ht.y,ht.z),ht[b]=0,ht[y]=0,ht[v]=k>0?1:-1,h.push(ht.x,ht.y,ht.z),f.push(he/P),f.push(1-Et/B),it+=1}for(let Et=0;Et<B;Et++)for(let Nt=0;Nt<P;Nt++){const Xe=m+Nt+mt*(Et+1),rt=m+(Nt+1)+mt*(Et+1),Tt=m+(Nt+1)+mt*Et;l.push(m+Nt+mt*Et,Xe,Tt),l.push(Xe,rt,Tt),q+=6}a.addGroup(g,q,I),g+=q,m+=it}_("z","y","x",-1,-1,n,e,t,s,o,0),_("z","y","x",1,-1,n,e,-t,s,o,1),_("x","z","y",1,1,t,n,e,r,s,2),_("x","z","y",1,-1,t,n,-e,r,s,3),_("x","y","z",1,-1,t,e,n,r,o,4),_("x","y","z",-1,-1,t,e,-n,r,o,5),this.setIndex(l),this.setAttribute("position",new ie(d,3)),this.setAttribute("normal",new ie(h,3)),this.setAttribute("uv",new ie(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lh(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function ch(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():t[e][n]=Array.isArray(r)?r.slice():r}}return t}function Ar(i){const t={};for(let e=0;e<i.length;e++){const n=ch(i[e]);for(const r in n)t[r]=n[r]}return t}function tN(i){const t=i.getRenderTarget();return null===t?i.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:li.workingColorSpace}const cK={clone:ch,merge:Ar};class Cs extends Dr{static get type(){return"ShaderMaterial"}constructor(t){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ch(t.uniforms),this.uniformsGroups=function lK(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const s=this.uniforms[r].value;e.uniforms[r]=s&&s.isTexture?{type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?{type:"c",value:s.getHex()}:s&&s.isVector2?{type:"v2",value:s.toArray()}:s&&s.isVector3?{type:"v3",value:s.toArray()}:s&&s.isVector4?{type:"v4",value:s.toArray()}:s&&s.isMatrix3?{type:"m3",value:s.toArray()}:s&&s.isMatrix4?{type:"m4",value:s.toArray()}:{value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class IC extends Yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ce,this.projectionMatrix=new Ce,this.projectionMatrixInverse=new Ce,this.coordinateSystem=ia}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const bl=new N,eN=new gt,iN=new gt;class er extends IC{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Zu*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Dc*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*Zu*Math.atan(Math.tan(.5*Dc*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){bl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(bl.x,bl.y).multiplyScalar(-t/bl.z),bl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(bl.x,bl.y).multiplyScalar(-t/bl.z)}getViewSize(t,e){return this.getViewBounds(t,eN,iN),e.subVectors(iN,eN)}setViewOffset(t,e,n,r,o,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Dc*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const l=s.fullWidth,d=s.fullHeight;o+=s.offsetX*r/l,e-=s.offsetY*n/d,r*=s.width/l,n*=s.height/d}const a=this.filmOffset;0!==a&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class hK extends Yi{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new er(-90,1,t,e);r.layers=this.layers,this.add(r);const o=new er(-90,1,t,e);o.layers=this.layers,this.add(o);const s=new er(-90,1,t,e);s.layers=this.layers,this.add(s);const a=new er(-90,1,t,e);a.layers=this.layers,this.add(a);const l=new er(-90,1,t,e);l.layers=this.layers,this.add(l);const d=new er(-90,1,t,e);d.layers=this.layers,this.add(d)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,o,s,a,l]=e;for(const d of e)this.remove(d);if(t===ia)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const d of e)this.add(d),d.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[o,s,a,l,d,h]=this.children,f=t.getRenderTarget(),m=t.getActiveCubeFace(),g=t.getActiveMipmapLevel(),_=t.xr.enabled;t.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,o),t.setRenderTarget(n,1,r),t.render(e,s),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,l),t.setRenderTarget(n,4,r),t.render(e,d),n.texture.generateMipmaps=b,t.setRenderTarget(n,5,r),t.render(e,h),t.setRenderTarget(f,m,g),t.xr.enabled=_,n.texture.needsPMREMUpdate=!0}}class Qv extends Hr{constructor(t,e,n,r,o,s,a,l,d,h){super(t=void 0!==t?t:[],e=void 0!==e?e:ul,n,r,o,s,a,l,d,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class fK extends Ss{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new Qv([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:$n}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new lh(5,5,5),o=new Cs({name:"CubemapFromEquirect",uniforms:ch(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});o.uniforms.tEquirect.value=e;const s=new Dn(r,o),a=e.minFilter;return e.minFilter===ta&&(e.minFilter=$n),new hK(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e,n,r){const o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,r);t.setRenderTarget(o)}}const RC=new N,mK=new N,pK=new ze;class kc{constructor(t=new N(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=RC.subVectors(n,e).cross(mK.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(RC),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(n,o)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||pK.getNormalMatrix(t),r=this.coplanarPoint(RC).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Pc=new Tr,Jv=new N;class ty{constructor(t=new kc,e=new kc,n=new kc,r=new kc,o=new kc,s=new kc){this.planes=[t,e,n,r,o,s]}set(t,e,n,r,o,s){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=ia){const n=this.planes,r=t.elements,o=r[0],s=r[1],a=r[2],l=r[3],d=r[4],h=r[5],f=r[6],m=r[7],g=r[8],_=r[9],b=r[10],y=r[11],v=r[12],w=r[13],S=r[14],C=r[15];if(n[0].setComponents(l-o,m-d,y-g,C-v).normalize(),n[1].setComponents(l+o,m+d,y+g,C+v).normalize(),n[2].setComponents(l+s,m+h,y+_,C+w).normalize(),n[3].setComponents(l-s,m-h,y-_,C-w).normalize(),n[4].setComponents(l-a,m-f,y-b,C-S).normalize(),e===ia)n[5].setComponents(l+a,m+f,y+b,C+S).normalize();else{if(2001!==e)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,f,b,S).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Pc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Pc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Pc)}intersectsSprite(t){return Pc.center.set(0,0,0),Pc.radius=.7071067811865476,Pc.applyMatrix4(t.matrixWorld),this.intersectsSphere(Pc)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(Jv.x=r.normal.x>0?t.max.x:t.min.x,Jv.y=r.normal.y>0?t.max.y:t.min.y,Jv.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Jv)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function nN(){let i=null,t=!1,e=null,n=null;function r(o,s){e(o,s),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){i=o}}}function gK(i){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function o(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(i.deleteBuffer(l.buffer),t.delete(a))},update:function s(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const h=t.get(a);return void((!h||h.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const d=t.get(a);if(void 0===d)t.set(a,function e(a,l){const d=a.array,h=a.usage,f=d.byteLength,m=i.createBuffer();let g;if(i.bindBuffer(l,m),i.bufferData(l,d,h),a.onUploadCallback(),d instanceof Float32Array)g=i.FLOAT;else if(d instanceof Uint16Array)g=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=i.SHORT;else if(d instanceof Uint32Array)g=i.UNSIGNED_INT;else if(d instanceof Int32Array)g=i.INT;else if(d instanceof Int8Array)g=i.BYTE;else if(d instanceof Uint8Array)g=i.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);g=i.UNSIGNED_BYTE}return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:a.version,size:f}}(a,l));else if(d.version<a.version){if(d.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,d){const h=l.array,f=l.updateRanges;if(i.bindBuffer(d,a),0===f.length)i.bufferSubData(d,0,h);else{f.sort((g,_)=>g.start-_.start);let m=0;for(let g=1;g<f.length;g++){const _=f[m],b=f[g];b.start<=_.start+_.count+1?_.count=Math.max(_.count,b.start+b.count-_.start):(++m,f[m]=b)}f.length=m+1;for(let g=0,_=f.length;g<_;g++){const b=f[g];i.bufferSubData(d,b.start*h.BYTES_PER_ELEMENT,h,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()})(d.buffer,a,l),d.version=a.version}}}}class Fm extends We{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const o=t/2,s=e/2,a=Math.floor(n),l=Math.floor(r),d=a+1,h=l+1,f=t/a,m=e/l,g=[],_=[],b=[],y=[];for(let v=0;v<h;v++){const w=v*m-s;for(let S=0;S<d;S++)_.push(S*f-o,-w,0),b.push(0,0,1),y.push(S/a),y.push(1-v/l)}for(let v=0;v<l;v++)for(let w=0;w<a;w++){const C=w+d*(v+1),F=w+1+d*(v+1),k=w+1+d*v;g.push(w+d*v,C,k),g.push(C,F,k)}this.setIndex(g),this.setAttribute("position",new ie(_,3)),this.setAttribute("normal",new ie(b,3)),this.setAttribute("uv",new ie(y,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Fm(t.width,t.height,t.widthSegments,t.heightSegments)}}const je={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ot={common:{diffuse:{value:new Gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ze},alphaMap:{value:null},alphaMapTransform:{value:new ze},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ze}},envmap:{envMap:{value:null},envMapRotation:{value:new ze},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ze}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ze}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ze},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ze},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ze},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ze}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ze}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ze}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ze},alphaTest:{value:0},uvTransform:{value:new ze}},sprite:{diffuse:{value:new Gt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ze},alphaMap:{value:null},alphaMapTransform:{value:new ze},alphaTest:{value:0}}},Es={basic:{uniforms:Ar([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.fog]),vertexShader:je.meshbasic_vert,fragmentShader:je.meshbasic_frag},lambert:{uniforms:Ar([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Gt(0)}}]),vertexShader:je.meshlambert_vert,fragmentShader:je.meshlambert_frag},phong:{uniforms:Ar([Ot.common,Ot.specularmap,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,Ot.lights,{emissive:{value:new Gt(0)},specular:{value:new Gt(1118481)},shininess:{value:30}}]),vertexShader:je.meshphong_vert,fragmentShader:je.meshphong_frag},standard:{uniforms:Ar([Ot.common,Ot.envmap,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.roughnessmap,Ot.metalnessmap,Ot.fog,Ot.lights,{emissive:{value:new Gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:je.meshphysical_vert,fragmentShader:je.meshphysical_frag},toon:{uniforms:Ar([Ot.common,Ot.aomap,Ot.lightmap,Ot.emissivemap,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.gradientmap,Ot.fog,Ot.lights,{emissive:{value:new Gt(0)}}]),vertexShader:je.meshtoon_vert,fragmentShader:je.meshtoon_frag},matcap:{uniforms:Ar([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,Ot.fog,{matcap:{value:null}}]),vertexShader:je.meshmatcap_vert,fragmentShader:je.meshmatcap_frag},points:{uniforms:Ar([Ot.points,Ot.fog]),vertexShader:je.points_vert,fragmentShader:je.points_frag},dashed:{uniforms:Ar([Ot.common,Ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:je.linedashed_vert,fragmentShader:je.linedashed_frag},depth:{uniforms:Ar([Ot.common,Ot.displacementmap]),vertexShader:je.depth_vert,fragmentShader:je.depth_frag},normal:{uniforms:Ar([Ot.common,Ot.bumpmap,Ot.normalmap,Ot.displacementmap,{opacity:{value:1}}]),vertexShader:je.meshnormal_vert,fragmentShader:je.meshnormal_frag},sprite:{uniforms:Ar([Ot.sprite,Ot.fog]),vertexShader:je.sprite_vert,fragmentShader:je.sprite_frag},background:{uniforms:{uvTransform:{value:new ze},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:je.background_vert,fragmentShader:je.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ze}},vertexShader:je.backgroundCube_vert,fragmentShader:je.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:je.cube_vert,fragmentShader:je.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:je.equirect_vert,fragmentShader:je.equirect_frag},distanceRGBA:{uniforms:Ar([Ot.common,Ot.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:je.distanceRGBA_vert,fragmentShader:je.distanceRGBA_frag},shadow:{uniforms:Ar([Ot.lights,Ot.fog,{color:{value:new Gt(0)},opacity:{value:1}}]),vertexShader:je.shadow_vert,fragmentShader:je.shadow_frag}};Es.physical={uniforms:Ar([Es.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ze},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ze},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ze},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ze},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ze},sheen:{value:0},sheenColor:{value:new Gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ze},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ze},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ze},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ze},attenuationDistance:{value:0},attenuationColor:{value:new Gt(0)},specularColor:{value:new Gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ze},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ze},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ze}}]),vertexShader:je.meshphysical_vert,fragmentShader:je.meshphysical_frag};const ey={r:0,b:0,g:0},Oc=new aa,gJ=new Ce;function _J(i,t,e,n,r,o,s){const a=new Gt(0);let d,h,l=!0===o?0:1,f=null,m=0,g=null;function _(w){let S=!0===w.isScene?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?e:t).get(S)),S}function v(w,S){w.getRGB(ey,tN(i)),n.buffers.color.setClear(ey.r,ey.g,ey.b,S,s)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,v(a,l)},render:function b(w){let S=!1;const C=_(w);null===C?v(a,l):C&&C.isColor&&(v(C,1),S=!0);const F=i.xr.getEnvironmentBlendMode();"additive"===F?n.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===F&&n.buffers.color.setClear(0,0,0,0,s),(i.autoClear||S)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))},addToRenderList:function y(w,S){const C=_(S);C&&(C.isCubeTexture||C.mapping===Mm)?(void 0===h&&(h=new Dn(new lh(1,1,1),new Cs({name:"BackgroundCubeMaterial",uniforms:ch(Es.backgroundCube.uniforms),vertexShader:Es.backgroundCube.vertexShader,fragmentShader:Es.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(F,k,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),Oc.copy(S.backgroundRotation),Oc.x*=-1,Oc.y*=-1,Oc.z*=-1,C.isCubeTexture&&!1===C.isRenderTargetTexture&&(Oc.y*=-1,Oc.z*=-1),h.material.uniforms.envMap.value=C,h.material.uniforms.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,h.material.uniforms.backgroundRotation.value.setFromMatrix4(gJ.makeRotationFromEuler(Oc)),h.material.toneMapped=li.getTransfer(C.colorSpace)!==Oi,(f!==C||m!==C.version||g!==i.toneMapping)&&(h.material.needsUpdate=!0,f=C,m=C.version,g=i.toneMapping),h.layers.enableAll(),w.unshift(h,h.geometry,h.material,0,0,null)):C&&C.isTexture&&(void 0===d&&(d=new Dn(new Fm(2,2),new Cs({name:"BackgroundMaterial",uniforms:ch(Es.background.uniforms),vertexShader:Es.background.vertexShader,fragmentShader:Es.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=C,d.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,d.material.toneMapped=li.getTransfer(C.colorSpace)!==Oi,!0===C.matrixAutoUpdate&&C.updateMatrix(),d.material.uniforms.uvTransform.value.copy(C.matrix),(f!==C||m!==C.version||g!==i.toneMapping)&&(d.material.needsUpdate=!0,f=C,m=C.version,g=i.toneMapping),d.layers.enableAll(),w.unshift(d,d.geometry,d.material,0,0,null))}}}function vJ(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=m(null);let o=r,s=!1;function d(T){return i.bindVertexArray(T)}function h(T){return i.deleteVertexArray(T)}function m(T){const H=[],et=[],K=[];for(let ot=0;ot<e;ot++)H[ot]=0,et[ot]=0,K[ot]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:et,attributeDivisors:K,object:T,attributes:{},index:null}}function b(){const T=o.newAttributes;for(let H=0,et=T.length;H<et;H++)T[H]=0}function y(T){v(T,0)}function v(T,H){const K=o.enabledAttributes,ot=o.attributeDivisors;o.newAttributes[T]=1,0===K[T]&&(i.enableVertexAttribArray(T),K[T]=1),ot[T]!==H&&(i.vertexAttribDivisor(T,H),ot[T]=H)}function w(){const T=o.newAttributes,H=o.enabledAttributes;for(let et=0,K=H.length;et<K;et++)H[et]!==T[et]&&(i.disableVertexAttribArray(et),H[et]=0)}function S(T,H,et,K,ot,mt,G){!0===G?i.vertexAttribIPointer(T,H,et,ot,mt):i.vertexAttribPointer(T,H,et,K,ot,mt)}function B(){I(),s=!0,o!==r&&(o=r,d(o.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(T,H,et,K,ot){let mt=!1;const G=function f(T,H,et){const K=!0===et.wireframe;let ot=n[T.id];void 0===ot&&(ot={},n[T.id]=ot);let mt=ot[H.id];void 0===mt&&(mt={},ot[H.id]=mt);let G=mt[K];return void 0===G&&(G=m(function l(){return i.createVertexArray()}()),mt[K]=G),G}(K,et,H);o!==G&&(o=G,d(o.object)),mt=function g(T,H,et,K){const ot=o.attributes,mt=H.attributes;let G=0;const it=et.getAttributes();for(const q in it)if(it[q].location>=0){const Et=ot[q];let Nt=mt[q];if(void 0===Nt&&("instanceMatrix"===q&&T.instanceMatrix&&(Nt=T.instanceMatrix),"instanceColor"===q&&T.instanceColor&&(Nt=T.instanceColor)),void 0===Et||Et.attribute!==Nt||Nt&&Et.data!==Nt.data)return!0;G++}return o.attributesNum!==G||o.index!==K}(T,K,et,ot),mt&&function _(T,H,et,K){const ot={},mt=H.attributes;let G=0;const it=et.getAttributes();for(const q in it)if(it[q].location>=0){let Et=mt[q];void 0===Et&&("instanceMatrix"===q&&T.instanceMatrix&&(Et=T.instanceMatrix),"instanceColor"===q&&T.instanceColor&&(Et=T.instanceColor));const Nt={};Nt.attribute=Et,Et&&Et.data&&(Nt.data=Et.data),ot[q]=Nt,G++}o.attributes=ot,o.attributesNum=G,o.index=K}(T,K,et,ot),null!==ot&&t.update(ot,i.ELEMENT_ARRAY_BUFFER),(mt||s)&&(s=!1,function C(T,H,et,K){b();const ot=K.attributes,mt=et.getAttributes(),G=H.defaultAttributeValues;for(const it in mt){const q=mt[it];if(q.location>=0){let ht=ot[it];if(void 0===ht&&("instanceMatrix"===it&&T.instanceMatrix&&(ht=T.instanceMatrix),"instanceColor"===it&&T.instanceColor&&(ht=T.instanceColor)),void 0!==ht){const Et=ht.normalized,Nt=ht.itemSize,he=t.get(ht);if(void 0===he)continue;const Xe=he.buffer,rt=he.type,Tt=he.bytesPerElement,Yt=rt===i.INT||rt===i.UNSIGNED_INT||ht.gpuType===ES;if(ht.isInterleavedBufferAttribute){const yt=ht.data,te=yt.stride,se=ht.offset;if(yt.isInstancedInterleavedBuffer){for(let _e=0;_e<q.locationSize;_e++)v(q.location+_e,yt.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=yt.meshPerAttribute*yt.count)}else for(let _e=0;_e<q.locationSize;_e++)y(q.location+_e);i.bindBuffer(i.ARRAY_BUFFER,Xe);for(let _e=0;_e<q.locationSize;_e++)S(q.location+_e,Nt/q.locationSize,rt,Et,te*Tt,(se+Nt/q.locationSize*_e)*Tt,Yt)}else{if(ht.isInstancedBufferAttribute){for(let yt=0;yt<q.locationSize;yt++)v(q.location+yt,ht.meshPerAttribute);!0!==T.isInstancedMesh&&void 0===K._maxInstanceCount&&(K._maxInstanceCount=ht.meshPerAttribute*ht.count)}else for(let yt=0;yt<q.locationSize;yt++)y(q.location+yt);i.bindBuffer(i.ARRAY_BUFFER,Xe);for(let yt=0;yt<q.locationSize;yt++)S(q.location+yt,Nt/q.locationSize,rt,Et,Nt*Tt,Nt/q.locationSize*yt*Tt,Yt)}}else if(void 0!==G){const Et=G[it];if(void 0!==Et)switch(Et.length){case 2:i.vertexAttrib2fv(q.location,Et);break;case 3:i.vertexAttrib3fv(q.location,Et);break;case 4:i.vertexAttrib4fv(q.location,Et);break;default:i.vertexAttrib1fv(q.location,Et)}}}}w()}(T,H,et,K),null!==ot&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ot).buffer))},reset:B,resetDefaultState:I,dispose:function F(){B();for(const T in n){const H=n[T];for(const et in H){const K=H[et];for(const ot in K)h(K[ot].object),delete K[ot];delete H[et]}delete n[T]}},releaseStatesOfGeometry:function k(T){if(void 0===n[T.id])return;const H=n[T.id];for(const et in H){const K=H[et];for(const ot in K)h(K[ot].object),delete K[ot];delete H[et]}delete n[T.id]},releaseStatesOfProgram:function P(T){for(const H in n){const et=n[H];if(void 0===et[T.id])continue;const K=et[T.id];for(const ot in K)h(K[ot].object),delete K[ot];delete et[T.id]}},initAttributes:b,enableAttribute:y,disableUnusedAttributes:w}}function yJ(i,t,e){let n;function s(d,h,f){0!==f&&(i.drawArraysInstanced(n,d,h,f),e.update(h,n,f))}this.setMode=function r(d){n=d},this.render=function o(d,h){i.drawArrays(n,d,h),e.update(h,n,1)},this.renderInstances=s,this.renderMultiDraw=function a(d,h,f){if(0===f)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,d,0,h,0,f);let g=0;for(let _=0;_<f;_++)g+=h[_];e.update(g,n,1)},this.renderMultiDrawInstances=function l(d,h,f,m){if(0===f)return;const g=t.get("WEBGL_multi_draw");if(null===g)for(let _=0;_<d.length;_++)s(d[_],h[_],m[_]);else{g.multiDrawArraysInstancedWEBGL(n,d,0,h,0,m,0,f);let _=0;for(let b=0;b<f;b++)_+=h[b]*m[b];e.update(_,n,1)}}}function bJ(i,t,e,n){let r;function l(P){if("highp"===P){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return"mediump"===P&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let d=void 0!==e.precision?e.precision:"highp";const h=l(d);h!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",h,"instead."),d=h);const f=!0===e.logarithmicDepthBuffer,m=!0===e.reverseDepthBuffer&&t.has("EXT_clip_control"),g=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function o(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const P=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function s(P){return!(P!==Vr&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(P){const B=P===Em&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(P!==ea&&n.convert(P)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==uo&&!B)},precision:d,logarithmicDepthBuffer:f,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:_,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:_>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function xJ(i){const t=this;let e=null,n=0,r=!1,o=!1;const s=new kc,a=new ze,l={value:null,needsUpdate:!1};function h(f,m,g,_){const b=null!==f?f.length:0;let y=null;if(0!==b){if(y=l.value,!0!==_||null===y){const v=g+4*b,w=m.matrixWorldInverse;a.getNormalMatrix(w),(null===y||y.length<v)&&(y=new Float32Array(v));for(let S=0,C=g;S!==b;++S,C+=4)s.copy(f[S]).applyMatrix4(w,a),s.normal.toArray(y,C),y[C+3]=s.constant}l.value=y,l.needsUpdate=!0}return t.numPlanes=b,t.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=0!==f.length||m||0!==n||r;return r=m,n=f.length,g},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(f,m){e=h(f,m,0)},this.setState=function(f,m,g){const _=f.clippingPlanes,b=f.clipIntersection,y=f.clipShadows,v=i.get(f);if(!r||null===_||0===_.length||o&&!y)o?h(null):function d(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}();else{const w=o?0:n,S=4*w;let C=v.clippingState||null;l.value=C,C=h(_,m,S,g);for(let F=0;F!==S;++F)C[F]=e[F];v.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=w}}}function wJ(i){let t=new WeakMap;function e(s,a){return 303===a?s.mapping=ul:304===a&&(s.mapping=Ec),s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(s){if(s&&s.isTexture){const a=s.mapping;if(303===a||304===a){if(t.has(s))return e(t.get(s).texture,s.mapping);{const l=s.image;if(l&&l.height>0){const d=new fK(l.height);return d.fromEquirectangularTexture(i,s),t.set(s,d),s.addEventListener("dispose",r),e(d.texture,s.mapping)}return null}}}return s},dispose:function o(){t=new WeakMap}}}class kC extends IC{constructor(t=-1,e=1,n=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,o,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let o=n-t,s=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=d*this.view.offsetX,s=o+d*this.view.width,a-=h*this.view.offsetY,l=a-h*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const rN=[.125,.215,.35,.446,.526,.582],PC=new kC,oN=new Gt;let OC=null,LC=0,FC=0,NC=!1;const Fc=(1+Math.sqrt(5))/2,fh=1/Fc,sN=[new N(-Fc,fh,0),new N(Fc,fh,0),new N(-fh,0,Fc),new N(fh,0,Fc),new N(0,Fc,-fh),new N(0,Fc,fh),new N(-1,1,-1),new N(1,1,-1),new N(-1,1,1),new N(1,1,1)];class aN{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){OC=this._renderer.getRenderTarget(),LC=this._renderer.getActiveCubeFace(),FC=this._renderer.getActiveMipmapLevel(),NC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=dN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=cN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(OC,LC,FC),this._renderer.xr.enabled=NC,t.scissorTest=!1,iy(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===ul||t.mapping===Ec?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),OC=this._renderer.getRenderTarget(),LC=this._renderer.getActiveCubeFace(),FC=this._renderer.getActiveMipmapLevel(),NC=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:$n,minFilter:$n,generateMipmaps:!1,type:Em,format:Vr,colorSpace:$u,depthBuffer:!1},r=lN(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=lN(t,e,n);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function MJ(i){const t=[],e=[],n=[];let r=i;const o=i-4+1+rN.length;for(let s=0;s<o;s++){const a=Math.pow(2,r);e.push(a);let l=1/a;s>i-4?l=rN[s-i+4-1]:0===s&&(l=0),n.push(l);const d=1/(a-2),h=-d,f=1+d,m=[h,h,f,h,f,f,h,h,f,f,h,f],g=6,_=6,b=3,y=2,v=1,w=new Float32Array(b*_*g),S=new Float32Array(y*_*g),C=new Float32Array(v*_*g);for(let k=0;k<g;k++){const P=k%3*2/3-1,B=k>2?0:-1;w.set([P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0],b*_*k),S.set(m,y*_*k),C.set([k,k,k,k,k,k],v*_*k)}const F=new We;F.setAttribute("position",new Bi(w,b)),F.setAttribute("uv",new Bi(S,y)),F.setAttribute("faceIndex",new Bi(C,v)),t.push(F),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(o)),this._blurMaterial=function SJ(i,t,e){const n=new Float32Array(20),r=new N(0,1,0);return new Cs({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,t,e)}return r}_compileMaterial(t){const e=new Dn(this._lodPlanes[0],t);this._renderer.compile(e,PC)}_sceneToCubeUV(t,e,n,r){const a=new er(90,1,e,n),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,m=h.toneMapping;h.getClearColor(oN),h.toneMapping=dl,h.autoClear=!1;const g=new yl({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new Dn(new lh,g);let b=!1;const y=t.background;y?y.isColor&&(g.color.copy(y),t.background=null,b=!0):(g.color.copy(oN),b=!0);for(let v=0;v<6;v++){const w=v%3;0===w?(a.up.set(0,l[v],0),a.lookAt(d[v],0,0)):1===w?(a.up.set(0,0,l[v]),a.lookAt(0,d[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,d[v]));const S=this._cubeSize;iy(r,w*S,v>2?S:0,S,S),h.setRenderTarget(r),b&&h.render(_,a),h.render(t,a)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=m,h.autoClear=f,t.background=y}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===ul||t.mapping===Ec;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=dN()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=cN());const o=r?this._cubemapMaterial:this._equirectMaterial,s=new Dn(this._lodPlanes[0],o);o.uniforms.envMap.value=t;const l=this._cubeSize;iy(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(s,PC)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let o=1;o<r;o++){const s=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]);this._blur(t,o-1,o,s,sN[(r-o-1)%sN.length])}e.autoClear=n}_blur(t,e,n,r,o){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,r,"latitudinal",o),this._halfBlur(s,t,n,n,r,"longitudinal",o)}_halfBlur(t,e,n,r,o,s,a){const l=this._renderer,d=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new Dn(this._lodPlanes[r],d),m=d.uniforms,g=this._sizeLods[n]-1,_=isFinite(o)?Math.PI/(2*g):2*Math.PI/39,b=o/_,y=isFinite(o)?1+Math.floor(3*b):20;y>20&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const v=[];let w=0;for(let P=0;P<20;++P){const B=P/b,I=Math.exp(-B*B/2);v.push(I),0===P?w+=I:P<y&&(w+=2*I)}for(let P=0;P<v.length;P++)v[P]=v[P]/w;m.envMap.value=t.texture,m.samples.value=y,m.weights.value=v,m.latitudinal.value="latitudinal"===s,a&&(m.poleAxis.value=a);const{_lodMax:S}=this;m.dTheta.value=_,m.mipInt.value=S-n;const C=this._sizeLods[r];iy(e,3*C*(r>S-4?r-S+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(e),l.render(f,PC)}}function lN(i,t,e){const n=new Ss(i,t,e);return n.texture.mapping=Mm,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function iy(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function cN(){return new Cs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function dN(){return new Cs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function CJ(i){let t=new WeakMap,e=null;function o(a){const l=a.target;l.removeEventListener("dispose",o);const d=t.get(l);void 0!==d&&(t.delete(l),d.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,d=303===l||304===l,h=l===ul||l===Ec;if(d||h){let f=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==f?f.texture.pmremVersion:0))return null===e&&(e=new aN(i)),f=d?e.fromEquirectangular(a,f):e.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,t.set(a,f),f.texture;if(void 0!==f)return f.texture;{const g=a.image;return d&&g&&g.height>0||h&&g&&function r(a){let l=0;for(let h=0;h<6;h++)void 0!==a[h]&&l++;return 6===l}(g)?(null===e&&(e=new aN(i)),f=d?e.fromEquirectangular(a):e.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,t.set(a,f),a.addEventListener("dispose",o),f.texture):null}}}return a},dispose:function s(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function EJ(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const r=e(n);return null===r&&Am("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function TJ(i,t,e,n){const r={},o=new WeakMap;function s(f){const m=f.target;null!==m.index&&t.remove(m.index);for(const _ in m.attributes)t.remove(m.attributes[_]);for(const _ in m.morphAttributes){const b=m.morphAttributes[_];for(let y=0,v=b.length;y<v;y++)t.remove(b[y])}m.removeEventListener("dispose",s),delete r[m.id];const g=o.get(m);g&&(t.remove(g),o.delete(m)),n.releaseStatesOfGeometry(m),!0===m.isInstancedBufferGeometry&&delete m._maxInstanceCount,e.memory.geometries--}function d(f){const m=[],g=f.index,_=f.attributes.position;let b=0;if(null!==g){const w=g.array;b=g.version;for(let S=0,C=w.length;S<C;S+=3){const F=w[S+0],k=w[S+1],P=w[S+2];m.push(F,k,k,P,P,F)}}else{if(void 0===_)return;b=_.version;for(let S=0,C=_.array.length/3-1;S<C;S+=3){const F=S+0,k=S+1,P=S+2;m.push(F,k,k,P,P,F)}}const y=new(RF(m)?YF:XF)(m,1);y.version=b;const v=o.get(f);v&&t.remove(v),o.set(f,y)}return{get:function a(f,m){return!0===r[m.id]||(m.addEventListener("dispose",s),r[m.id]=!0,e.memory.geometries++),m},update:function l(f){const m=f.attributes;for(const _ in m)t.update(m[_],i.ARRAY_BUFFER);const g=f.morphAttributes;for(const _ in g){const b=g[_];for(let y=0,v=b.length;y<v;y++)t.update(b[y],i.ARRAY_BUFFER)}},getWireframeAttribute:function h(f){const m=o.get(f);if(m){const g=f.index;null!==g&&m.version<g.version&&d(f)}else d(f);return o.get(f)}}}function DJ(i,t,e){let n,o,s;function d(m,g,_){0!==_&&(i.drawElementsInstanced(n,g,o,m*s,_),e.update(g,n,_))}this.setMode=function r(m){n=m},this.setIndex=function a(m){o=m.type,s=m.bytesPerElement},this.render=function l(m,g){i.drawElements(n,g,o,m*s),e.update(g,n,1)},this.renderInstances=d,this.renderMultiDraw=function h(m,g,_){if(0===_)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,g,0,o,m,0,_);let y=0;for(let v=0;v<_;v++)y+=g[v];e.update(y,n,1)},this.renderMultiDrawInstances=function f(m,g,_,b){if(0===_)return;const y=t.get("WEBGL_multi_draw");if(null===y)for(let v=0;v<m.length;v++)d(m[v]/s,g[v],b[v]);else{y.multiDrawElementsInstancedWEBGL(n,g,0,o,m,0,b,0,_);let v=0;for(let w=0;w<_;w++)v+=g[w]*b[w];e.update(v,n,1)}}}function AJ(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(o,s,a){switch(e.calls++,s){case i.TRIANGLES:e.triangles+=a*(o/3);break;case i.LINES:e.lines+=a*(o/2);break;case i.LINE_STRIP:e.lines+=a*(o-1);break;case i.LINE_LOOP:e.lines+=a*o;break;case i.POINTS:e.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s)}}}}function IJ(i,t,e){const n=new WeakMap,r=new fi;return{update:function o(s,a,l){const d=s.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=void 0!==h?h.length:0;let m=n.get(a);if(void 0===m||m.count!==f){let I=function(){P.dispose(),n.delete(a),a.removeEventListener("dispose",I)};void 0!==m&&m.texture.dispose();const g=void 0!==a.morphAttributes.position,_=void 0!==a.morphAttributes.normal,b=void 0!==a.morphAttributes.color,y=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===_&&(S=2),!0===b&&(S=3);let C=a.attributes.position.count*S,F=1;C>t.maxTextureSize&&(F=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);const k=new Float32Array(C*F*4*f),P=new uC(k,C,F,f);P.type=uo,P.needsUpdate=!0;const B=4*S;for(let T=0;T<f;T++){const H=y[T],et=v[T],K=w[T],ot=C*F*4*T;for(let mt=0;mt<H.count;mt++){const G=mt*B;!0===g&&(r.fromBufferAttribute(H,mt),k[ot+G+0]=r.x,k[ot+G+1]=r.y,k[ot+G+2]=r.z,k[ot+G+3]=0),!0===_&&(r.fromBufferAttribute(et,mt),k[ot+G+4]=r.x,k[ot+G+5]=r.y,k[ot+G+6]=r.z,k[ot+G+7]=0),!0===b&&(r.fromBufferAttribute(K,mt),k[ot+G+8]=r.x,k[ot+G+9]=r.y,k[ot+G+10]=r.z,k[ot+G+11]=4===K.itemSize?r.w:1)}}m={count:f,texture:P,size:new gt(C,F)},n.set(a,m),a.addEventListener("dispose",I)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)l.getUniforms().setValue(i,"morphTexture",s.morphTexture,e);else{let g=0;for(let b=0;b<d.length;b++)g+=d[b];const _=a.morphTargetsRelative?1:1-g;l.getUniforms().setValue(i,"morphTargetBaseInfluence",_),l.getUniforms().setValue(i,"morphTargetInfluences",d)}l.getUniforms().setValue(i,"morphTargetsTexture",m.texture,e),l.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}}}function RJ(i,t,e,n){let r=new WeakMap;function a(l){const d=l.target;d.removeEventListener("dispose",a),e.remove(d.instanceMatrix),null!==d.instanceColor&&e.remove(d.instanceColor)}return{update:function o(l){const d=n.render.frame,f=t.get(l,l.geometry);if(r.get(f)!==d&&(t.update(f),r.set(f,d)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==d&&(e.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&e.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,d))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==d&&(m.update(),r.set(m,d))}return f},dispose:function s(){r=new WeakMap}}}class uN extends Hr{constructor(t,e,n,r,o,s,a,l,d,h=Hu){if(h!==Hu&&h!==Gu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===Hu&&(n=hl),void 0===n&&h===Gu&&(n=Vu),super(null,r,o,s,a,l,h,n,d),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:cr,this.minFilter=void 0!==l?l:cr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const hN=new Hr,fN=new uN(1,1),mN=new uC,pN=new BF,gN=new Qv,_N=[],vN=[],yN=new Float32Array(16),bN=new Float32Array(9),xN=new Float32Array(4);function mh(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let o=_N[r];if(void 0===o&&(o=new Float32Array(r),_N[r]=o),0!==t){n.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,i[s].toArray(o,a)}return o}function Fn(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Nn(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function ny(i,t){let e=vN[t];void 0===e&&(e=new Int32Array(t),vN[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function kJ(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function PJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Fn(e,t))return;i.uniform2fv(this.addr,t),Nn(e,t)}}function OJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Fn(e,t))return;i.uniform3fv(this.addr,t),Nn(e,t)}}function LJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Fn(e,t))return;i.uniform4fv(this.addr,t),Nn(e,t)}}function FJ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Fn(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Nn(e,t)}else{if(Fn(e,n))return;xN.set(n),i.uniformMatrix2fv(this.addr,!1,xN),Nn(e,n)}}function NJ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Fn(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Nn(e,t)}else{if(Fn(e,n))return;bN.set(n),i.uniformMatrix3fv(this.addr,!1,bN),Nn(e,n)}}function BJ(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Fn(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Nn(e,t)}else{if(Fn(e,n))return;yN.set(n),i.uniformMatrix4fv(this.addr,!1,yN),Nn(e,n)}}function UJ(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function zJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Fn(e,t))return;i.uniform2iv(this.addr,t),Nn(e,t)}}function VJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Fn(e,t))return;i.uniform3iv(this.addr,t),Nn(e,t)}}function HJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Fn(e,t))return;i.uniform4iv(this.addr,t),Nn(e,t)}}function GJ(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function WJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Fn(e,t))return;i.uniform2uiv(this.addr,t),Nn(e,t)}}function jJ(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Fn(e,t))return;i.uniform3uiv(this.addr,t),Nn(e,t)}}function $J(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Fn(e,t))return;i.uniform4uiv(this.addr,t),Nn(e,t)}}function qJ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();let o;n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),this.type===i.SAMPLER_2D_SHADOW?(fN.compareFunction=515,o=fN):o=hN,e.setTexture2D(t||o,r)}function ZJ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||pN,r)}function XJ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||gN,r)}function YJ(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||mN,r)}function QJ(i,t){i.uniform1fv(this.addr,t)}function JJ(i,t){const e=mh(t,this.size,2);i.uniform2fv(this.addr,e)}function ttt(i,t){const e=mh(t,this.size,3);i.uniform3fv(this.addr,e)}function ett(i,t){const e=mh(t,this.size,4);i.uniform4fv(this.addr,e)}function itt(i,t){const e=mh(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function ntt(i,t){const e=mh(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function rtt(i,t){const e=mh(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function ott(i,t){i.uniform1iv(this.addr,t)}function stt(i,t){i.uniform2iv(this.addr,t)}function att(i,t){i.uniform3iv(this.addr,t)}function ltt(i,t){i.uniform4iv(this.addr,t)}function ctt(i,t){i.uniform1uiv(this.addr,t)}function dtt(i,t){i.uniform2uiv(this.addr,t)}function utt(i,t){i.uniform3uiv(this.addr,t)}function htt(i,t){i.uniform4uiv(this.addr,t)}function ftt(i,t,e){const n=this.cache,r=t.length,o=ny(e,r);Fn(n,o)||(i.uniform1iv(this.addr,o),Nn(n,o));for(let s=0;s!==r;++s)e.setTexture2D(t[s]||hN,o[s])}function mtt(i,t,e){const n=this.cache,r=t.length,o=ny(e,r);Fn(n,o)||(i.uniform1iv(this.addr,o),Nn(n,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||pN,o[s])}function ptt(i,t,e){const n=this.cache,r=t.length,o=ny(e,r);Fn(n,o)||(i.uniform1iv(this.addr,o),Nn(n,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||gN,o[s])}function gtt(i,t,e){const n=this.cache,r=t.length,o=ny(e,r);Fn(n,o)||(i.uniform1iv(this.addr,o),Nn(n,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||mN,o[s])}class vtt{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function KJ(i){switch(i){case 5126:return kJ;case 35664:return PJ;case 35665:return OJ;case 35666:return LJ;case 35674:return FJ;case 35675:return NJ;case 35676:return BJ;case 5124:case 35670:return UJ;case 35667:case 35671:return zJ;case 35668:case 35672:return VJ;case 35669:case 35673:return HJ;case 5125:return GJ;case 36294:return WJ;case 36295:return jJ;case 36296:return $J;case 35678:case 36198:case 36298:case 36306:case 35682:return qJ;case 35679:case 36299:case 36307:return ZJ;case 35680:case 36300:case 36308:case 36293:return XJ;case 36289:case 36303:case 36311:case 36292:return YJ}}(e.type)}}class ytt{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function _tt(i){switch(i){case 5126:return QJ;case 35664:return JJ;case 35665:return ttt;case 35666:return ett;case 35674:return itt;case 35675:return ntt;case 35676:return rtt;case 5124:case 35670:return ott;case 35667:case 35671:return stt;case 35668:case 35672:return att;case 35669:case 35673:return ltt;case 5125:return ctt;case 36294:return dtt;case 36295:return utt;case 36296:return htt;case 35678:case 36198:case 36298:case 36306:case 35682:return ftt;case 35679:case 36299:case 36307:return mtt;case 35680:case 36300:case 36308:case 36293:return ptt;case 36289:case 36303:case 36311:case 36292:return gtt}}(e.type)}}class btt{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let o=0,s=r.length;o!==s;++o){const a=r[o];a.setValue(t,e[a.id],n)}}}const UC=/(\w+)(\])?(\[|\.)?/g;function wN(i,t){i.seq.push(t),i.map[t.id]=t}function xtt(i,t,e){const n=i.name,r=n.length;for(UC.lastIndex=0;;){const o=UC.exec(n);let a=o[1];const d=o[3];if("]"===o[2]&&(a|=0),void 0===d||"["===d&&UC.lastIndex+2===r){wN(e,void 0===d?new vtt(a,i,t):new ytt(a,i,t));break}{let f=e.map[a];void 0===f&&(f=new btt(a),wN(e,f)),e=f}}}class ry{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const o=t.getActiveUniform(e,r);xtt(o,t.getUniformLocation(e,o.name),this)}}setValue(t,e,n,r){const o=this.map[e];void 0!==o&&o.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let o=0,s=e.length;o!==s;++o){const a=e[o],l=n[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,o=t.length;r!==o;++r){const s=t[r];s.id in e&&n.push(s)}return n}}function MN(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const wtt=37297;let Mtt=0;const SN=new ze;function CN(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const o=/ERROR: 0:(\d+)/.exec(r);if(o){const s=parseInt(o[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function Stt(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){const a=s+1;n.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return n.join("\n")}(i.getShaderSource(t),s)}return r}function Ett(i,t){const e=function Ctt(i){li._getMatrix(SN,li.workingColorSpace,i);const t=`mat3( ${SN.elements.map(e=>e.toFixed(4))} )`;switch(li.getTransfer(i)){case Pv:return[t,"LinearTransferOETF"];case Oi:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}(t);return[`vec4 ${i}( vec4 value ) {`,`\treturn ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join("\n")}function Ttt(i,t){let e;switch(t){case oY:e="Linear";break;case sY:e="Reinhard";break;case aY:e="Cineon";break;case lY:e="ACESFilmic";break;case dY:e="AgX";break;case uY:e="Neutral";break;case cY:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const oy=new N;function Nm(i){return""!==i}function EN(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function TN(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const ktt=/^[ \t]*#include +<([\w\d./]+)>/gm;function zC(i){return i.replace(ktt,Ott)}const Ptt=new Map;function Ott(i,t){let e=je[t];if(void 0===e){const n=Ptt.get(t);if(void 0===n)throw new Error("Can not resolve #include <"+t+">");e=je[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n)}return zC(e)}const Ltt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function DN(i){return i.replace(Ltt,Ftt)}function Ftt(i,t,e,n){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function AN(i){let t=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function Htt(i,t,e,n){const r=i.getContext(),o=e.defines;let s=e.vertexShader,a=e.fragmentShader;const l=function Ntt(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===uF?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===BX?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Qs&&(t="SHADOWMAP_TYPE_VSM"),t}(e),d=function Btt(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case ul:case Ec:t="ENVMAP_TYPE_CUBE";break;case Mm:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),h=function Utt(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===Ec&&(t="ENVMAP_MODE_REFRACTION"),t}(e),f=function ztt(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case yv:t="ENVMAP_BLENDING_MULTIPLY";break;case nY:t="ENVMAP_BLENDING_MIX";break;case rY:t="ENVMAP_BLENDING_ADD"}return t}(e),m=function Vtt(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),g=function Att(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Nm).join("\n")}(e),_=function Itt(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(o),b=r.createProgram();let y,v,w=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(y=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_].filter(Nm).join("\n"),y.length>0&&(y+="\n"),v=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_].filter(Nm).join("\n"),v.length>0&&(v+="\n")):(y=[AN(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+h:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nm).join("\n"),v=[AN(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,_,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.envMap?"#define "+h:"",e.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",e.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==dl?"#define TONE_MAPPING":"",e.toneMapping!==dl?je.tonemapping_pars_fragment:"",e.toneMapping!==dl?Ttt("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",je.colorspace_pars_fragment,Ett("linearToOutputTexel",e.outputColorSpace),(li.getLuminanceCoefficients(oy),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${oy.x.toFixed(4)}, ${oy.y.toFixed(4)}, ${oy.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(Nm).join("\n")),s=zC(s),s=EN(s,e),s=TN(s,e),a=zC(a),a=EN(a,e),a=TN(a,e),s=DN(s),a=DN(a),!0!==e.isRawShaderMaterial&&(w="#version 300 es\n",y=[g,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,v=["#define varying in",e.glslVersion===AF?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===AF?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const C=w+v+a,F=MN(r,r.VERTEX_SHADER,w+y+s),k=MN(r,r.FRAGMENT_SHADER,C);function P(H){if(i.debug.checkShaderErrors){const et=r.getProgramInfoLog(b).trim(),K=r.getShaderInfoLog(F).trim(),ot=r.getShaderInfoLog(k).trim();let mt=!0,G=!0;if(!1===r.getProgramParameter(b,r.LINK_STATUS))if(mt=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,F,k);else{const it=CN(r,F,"vertex"),q=CN(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+H.name+"\nMaterial Type: "+H.type+"\n\nProgram Info Log: "+et+"\n"+it+"\n"+q)}else""!==et?console.warn("THREE.WebGLProgram: Program Info Log:",et):(""===K||""===ot)&&(G=!1);G&&(H.diagnostics={runnable:mt,programLog:et,vertexShader:{log:K,prefix:y},fragmentShader:{log:ot,prefix:v}})}r.deleteShader(F),r.deleteShader(k),B=new ry(r,b),I=function Rtt(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const o=i.getActiveAttrib(t,r),s=o.name;let a=1;o.type===i.FLOAT_MAT2&&(a=2),o.type===i.FLOAT_MAT3&&(a=3),o.type===i.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:i.getAttribLocation(t,s),locationSize:a}}return e}(r,b)}let B,I;r.attachShader(b,F),r.attachShader(b,k),void 0!==e.index0AttributeName?r.bindAttribLocation(b,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),this.getUniforms=function(){return void 0===B&&P(this),B},this.getAttributes=function(){return void 0===I&&P(this),I};let T=!1===e.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=r.getProgramParameter(b,wtt)),T},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=Mtt++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=F,this.fragmentShader=k,this}let Gtt=0;class Wtt{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),o=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(o)&&(s.add(o),o.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new jtt(t),e.set(t,n)),n}}class jtt{constructor(t){this.id=Gtt++,this.code=t,this.usedTimes=0}}function $tt(i,t,e,n,r,o,s){const a=new vC,l=new Wtt,d=new Set,h=[],f=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(I){return d.add(I),0===I?"uv":`uv${I}`}return{getParameters:function y(I,T,H,et,K){const ot=et.fog,mt=K.geometry,it=(I.isMeshStandardMaterial?e:t).get(I.envMap||(I.isMeshStandardMaterial?et.environment:null)),q=it&&it.mapping===Mm?it.image.height:null,ht=_[I.type];null!==I.precision&&(g=r.getMaxPrecision(I.precision),g!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",g,"instead."));const Et=mt.morphAttributes.position||mt.morphAttributes.normal||mt.morphAttributes.color,Nt=void 0!==Et?Et.length:0;let Xe,rt,Tt,Yt,he=0;if(void 0!==mt.morphAttributes.position&&(he=1),void 0!==mt.morphAttributes.normal&&(he=2),void 0!==mt.morphAttributes.color&&(he=3),ht){const Pi=Es[ht];Xe=Pi.vertexShader,rt=Pi.fragmentShader}else Xe=I.vertexShader,rt=I.fragmentShader,l.update(I),Tt=l.getVertexShaderID(I),Yt=l.getFragmentShaderID(I);const yt=i.getRenderTarget(),te=i.state.buffers.depth.getReversed(),se=!0===K.isInstancedMesh,_e=!0===K.isBatchedMesh,ii=!!I.map,Dt=!!it,z=!!I.aoMap,le=!!I.lightMap,Mt=!!I.bumpMap,Xt=!!I.normalMap,kt=!!I.displacementMap,xe=!!I.emissiveMap,$t=!!I.metalnessMap,O=!!I.roughnessMap,D=I.anisotropy>0,Q=I.clearcoat>0,vt=I.iridescence>0,ct=I.sheen>0,ae=I.transmission>0,Bt=D&&!!I.anisotropyMap,qt=Q&&!!I.clearcoatMap,ni=Q&&!!I.clearcoatNormalMap,Ct=Q&&!!I.clearcoatRoughnessMap,Kt=vt&&!!I.iridescenceMap,we=vt&&!!I.iridescenceThicknessMap,Pe=ct&&!!I.sheenColorMap,Qt=ct&&!!I.sheenRoughnessMap,ci=!!I.specularMap,$e=!!I.specularColorMap,Gi=!!I.specularIntensityMap,j=ae&&!!I.transmissionMap,Ut=ae&&!!I.thicknessMap,pt=!!I.alphaMap,Ve=!!I.extensions;let pn=dl;I.toneMapped&&(null===yt||!0===yt.isXRRenderTarget)&&(pn=i.toneMapping);const mr={shaderID:ht,shaderType:I.type,shaderName:I.name,vertexShader:Xe,fragmentShader:rt,defines:I.defines,customVertexShaderID:Tt,customFragmentShaderID:Yt,isRawShaderMaterial:!0===I.isRawShaderMaterial,glslVersion:I.glslVersion,precision:g,batching:_e,batchingColor:_e&&null!==K._colorsTexture,instancing:se,instancingColor:se&&null!==K.instanceColor,instancingMorph:se&&null!==K.morphTexture,supportsVertexTextures:m,outputColorSpace:null===yt?i.outputColorSpace:!0===yt.isXRRenderTarget?yt.texture.colorSpace:$u,alphaToCoverage:!!I.alphaToCoverage,map:ii,matcap:!!I.matcap,envMap:Dt,envMapMode:Dt&&it.mapping,envMapCubeUVHeight:q,aoMap:z,lightMap:le,bumpMap:Mt,normalMap:Xt,displacementMap:m&&kt,emissiveMap:xe,normalMapObjectSpace:Xt&&1===I.normalMapType,normalMapTangentSpace:Xt&&0===I.normalMapType,metalnessMap:$t,roughnessMap:O,anisotropy:D,anisotropyMap:Bt,clearcoat:Q,clearcoatMap:qt,clearcoatNormalMap:ni,clearcoatRoughnessMap:Ct,dispersion:I.dispersion>0,iridescence:vt,iridescenceMap:Kt,iridescenceThicknessMap:we,sheen:ct,sheenColorMap:Pe,sheenRoughnessMap:Qt,specularMap:ci,specularColorMap:$e,specularIntensityMap:Gi,transmission:ae,transmissionMap:j,thicknessMap:Ut,gradientMap:!!I.gradientMap,opaque:!1===I.transparent&&1===I.blending&&!1===I.alphaToCoverage,alphaMap:pt,alphaTest:I.alphaTest>0,alphaHash:!!I.alphaHash,combine:I.combine,mapUv:ii&&b(I.map.channel),aoMapUv:z&&b(I.aoMap.channel),lightMapUv:le&&b(I.lightMap.channel),bumpMapUv:Mt&&b(I.bumpMap.channel),normalMapUv:Xt&&b(I.normalMap.channel),displacementMapUv:kt&&b(I.displacementMap.channel),emissiveMapUv:xe&&b(I.emissiveMap.channel),metalnessMapUv:$t&&b(I.metalnessMap.channel),roughnessMapUv:O&&b(I.roughnessMap.channel),anisotropyMapUv:Bt&&b(I.anisotropyMap.channel),clearcoatMapUv:qt&&b(I.clearcoatMap.channel),clearcoatNormalMapUv:ni&&b(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ct&&b(I.clearcoatRoughnessMap.channel),iridescenceMapUv:Kt&&b(I.iridescenceMap.channel),iridescenceThicknessMapUv:we&&b(I.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&b(I.sheenColorMap.channel),sheenRoughnessMapUv:Qt&&b(I.sheenRoughnessMap.channel),specularMapUv:ci&&b(I.specularMap.channel),specularColorMapUv:$e&&b(I.specularColorMap.channel),specularIntensityMapUv:Gi&&b(I.specularIntensityMap.channel),transmissionMapUv:j&&b(I.transmissionMap.channel),thicknessMapUv:Ut&&b(I.thicknessMap.channel),alphaMapUv:pt&&b(I.alphaMap.channel),vertexTangents:!!mt.attributes.tangent&&(Xt||D),vertexColors:I.vertexColors,vertexAlphas:!0===I.vertexColors&&!!mt.attributes.color&&4===mt.attributes.color.itemSize,pointsUvs:!0===K.isPoints&&!!mt.attributes.uv&&(ii||pt),fog:!!ot,useFog:!0===I.fog,fogExp2:!!ot&&ot.isFogExp2,flatShading:!0===I.flatShading,sizeAttenuation:!0===I.sizeAttenuation,logarithmicDepthBuffer:f,reverseDepthBuffer:te,skinning:!0===K.isSkinnedMesh,morphTargets:void 0!==mt.morphAttributes.position,morphNormals:void 0!==mt.morphAttributes.normal,morphColors:void 0!==mt.morphAttributes.color,morphTargetsCount:Nt,morphTextureStride:he,numDirLights:T.directional.length,numPointLights:T.point.length,numSpotLights:T.spot.length,numSpotLightMaps:T.spotLightMap.length,numRectAreaLights:T.rectArea.length,numHemiLights:T.hemi.length,numDirLightShadows:T.directionalShadowMap.length,numPointLightShadows:T.pointShadowMap.length,numSpotLightShadows:T.spotShadowMap.length,numSpotLightShadowsWithMaps:T.numSpotLightShadowsWithMaps,numLightProbes:T.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:I.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:pn,decodeVideoTexture:ii&&!0===I.map.isVideoTexture&&li.getTransfer(I.map.colorSpace)===Oi,decodeVideoTextureEmissive:xe&&!0===I.emissiveMap.isVideoTexture&&li.getTransfer(I.emissiveMap.colorSpace)===Oi,premultipliedAlpha:I.premultipliedAlpha,doubleSided:2===I.side,flipSided:1===I.side,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:Ve&&!0===I.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ve&&!0===I.extensions.multiDraw||_e)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return mr.vertexUv1s=d.has(1),mr.vertexUv2s=d.has(2),mr.vertexUv3s=d.has(3),d.clear(),mr},getProgramCacheKey:function v(I){const T=[];if(I.shaderID?T.push(I.shaderID):(T.push(I.customVertexShaderID),T.push(I.customFragmentShaderID)),void 0!==I.defines)for(const H in I.defines)T.push(H),T.push(I.defines[H]);return!1===I.isRawShaderMaterial&&(function w(I,T){I.push(T.precision),I.push(T.outputColorSpace),I.push(T.envMapMode),I.push(T.envMapCubeUVHeight),I.push(T.mapUv),I.push(T.alphaMapUv),I.push(T.lightMapUv),I.push(T.aoMapUv),I.push(T.bumpMapUv),I.push(T.normalMapUv),I.push(T.displacementMapUv),I.push(T.emissiveMapUv),I.push(T.metalnessMapUv),I.push(T.roughnessMapUv),I.push(T.anisotropyMapUv),I.push(T.clearcoatMapUv),I.push(T.clearcoatNormalMapUv),I.push(T.clearcoatRoughnessMapUv),I.push(T.iridescenceMapUv),I.push(T.iridescenceThicknessMapUv),I.push(T.sheenColorMapUv),I.push(T.sheenRoughnessMapUv),I.push(T.specularMapUv),I.push(T.specularColorMapUv),I.push(T.specularIntensityMapUv),I.push(T.transmissionMapUv),I.push(T.thicknessMapUv),I.push(T.combine),I.push(T.fogExp2),I.push(T.sizeAttenuation),I.push(T.morphTargetsCount),I.push(T.morphAttributeCount),I.push(T.numDirLights),I.push(T.numPointLights),I.push(T.numSpotLights),I.push(T.numSpotLightMaps),I.push(T.numHemiLights),I.push(T.numRectAreaLights),I.push(T.numDirLightShadows),I.push(T.numPointLightShadows),I.push(T.numSpotLightShadows),I.push(T.numSpotLightShadowsWithMaps),I.push(T.numLightProbes),I.push(T.shadowMapType),I.push(T.toneMapping),I.push(T.numClippingPlanes),I.push(T.numClipIntersection),I.push(T.depthPacking)}(T,I),function S(I,T){a.disableAll(),T.supportsVertexTextures&&a.enable(0),T.instancing&&a.enable(1),T.instancingColor&&a.enable(2),T.instancingMorph&&a.enable(3),T.matcap&&a.enable(4),T.envMap&&a.enable(5),T.normalMapObjectSpace&&a.enable(6),T.normalMapTangentSpace&&a.enable(7),T.clearcoat&&a.enable(8),T.iridescence&&a.enable(9),T.alphaTest&&a.enable(10),T.vertexColors&&a.enable(11),T.vertexAlphas&&a.enable(12),T.vertexUv1s&&a.enable(13),T.vertexUv2s&&a.enable(14),T.vertexUv3s&&a.enable(15),T.vertexTangents&&a.enable(16),T.anisotropy&&a.enable(17),T.alphaHash&&a.enable(18),T.batching&&a.enable(19),T.dispersion&&a.enable(20),T.batchingColor&&a.enable(21),I.push(a.mask),a.disableAll(),T.fog&&a.enable(0),T.useFog&&a.enable(1),T.flatShading&&a.enable(2),T.logarithmicDepthBuffer&&a.enable(3),T.reverseDepthBuffer&&a.enable(4),T.skinning&&a.enable(5),T.morphTargets&&a.enable(6),T.morphNormals&&a.enable(7),T.morphColors&&a.enable(8),T.premultipliedAlpha&&a.enable(9),T.shadowMapEnabled&&a.enable(10),T.doubleSided&&a.enable(11),T.flipSided&&a.enable(12),T.useDepthPacking&&a.enable(13),T.dithering&&a.enable(14),T.transmission&&a.enable(15),T.sheen&&a.enable(16),T.opaque&&a.enable(17),T.pointsUvs&&a.enable(18),T.decodeVideoTexture&&a.enable(19),T.decodeVideoTextureEmissive&&a.enable(20),T.alphaToCoverage&&a.enable(21),I.push(a.mask)}(T,I),T.push(i.outputColorSpace)),T.push(I.customProgramCacheKey),T.join()},getUniforms:function C(I){const T=_[I.type];let H;return H=T?cK.clone(Es[T].uniforms):I.uniforms,H},acquireProgram:function F(I,T){let H;for(let et=0,K=h.length;et<K;et++){const ot=h[et];if(ot.cacheKey===T){H=ot,++H.usedTimes;break}}return void 0===H&&(H=new Htt(i,T,I,o),h.push(H)),H},releaseProgram:function k(I){if(0==--I.usedTimes){const T=h.indexOf(I);h[T]=h[h.length-1],h.pop(),I.destroy()}},releaseShaderCache:function P(I){l.remove(I)},programs:h,dispose:function B(){l.dispose()}}}function qtt(){let i=new WeakMap;return{has:function t(s){return i.has(s)},get:function e(s){let a=i.get(s);return void 0===a&&(a={},i.set(s,a)),a},remove:function n(s){i.delete(s)},update:function r(s,a,l){i.get(s)[a]=l},dispose:function o(){i=new WeakMap}}}function Ztt(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function IN(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function RN(){const i=[];let t=0;const e=[],n=[],r=[];function s(f,m,g,_,b,y){let v=i[t];return void 0===v?(v={id:f.id,object:f,geometry:m,material:g,groupOrder:_,renderOrder:f.renderOrder,z:b,group:y},i[t]=v):(v.id=f.id,v.object=f,v.geometry=m,v.material=g,v.groupOrder=_,v.renderOrder=f.renderOrder,v.z=b,v.group=y),t++,v}return{opaque:e,transmissive:n,transparent:r,init:function o(){t=0,e.length=0,n.length=0,r.length=0},push:function a(f,m,g,_,b,y){const v=s(f,m,g,_,b,y);g.transmission>0?n.push(v):!0===g.transparent?r.push(v):e.push(v)},unshift:function l(f,m,g,_,b,y){const v=s(f,m,g,_,b,y);g.transmission>0?n.unshift(v):!0===g.transparent?r.unshift(v):e.unshift(v)},finish:function h(){for(let f=t,m=i.length;f<m;f++){const g=i[f];if(null===g.id)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}},sort:function d(f,m){e.length>1&&e.sort(f||Ztt),n.length>1&&n.sort(m||IN),r.length>1&&r.sort(m||IN)}}}function Xtt(){let i=new WeakMap;return{get:function t(n,r){const o=i.get(n);let s;return void 0===o?(s=new RN,i.set(n,[s])):r>=o.length?(s=new RN,o.push(s)):s=o[r],s},dispose:function e(){i=new WeakMap}}}function Ytt(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new N,color:new Gt};break;case"SpotLight":e={position:new N,direction:new N,color:new Gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new N,color:new Gt,distance:0,decay:0};break;case"HemisphereLight":e={direction:new N,skyColor:new Gt,groundColor:new Gt};break;case"RectAreaLight":e={color:new Gt,position:new N,halfWidth:new N,halfHeight:new N}}return i[t.id]=e,e}}}let Qtt=0;function Jtt(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function tet(i){const t=new Ytt,e=function Ktt(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)n.probe.push(new N);const r=new N,o=new Ce,s=new Ce;return{setup:function a(d){let h=0,f=0,m=0;for(let I=0;I<9;I++)n.probe[I].set(0,0,0);let g=0,_=0,b=0,y=0,v=0,w=0,S=0,C=0,F=0,k=0,P=0;d.sort(Jtt);for(let I=0,T=d.length;I<T;I++){const H=d[I],et=H.color,K=H.intensity,ot=H.distance,mt=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)h+=et.r*K,f+=et.g*K,m+=et.b*K;else if(H.isLightProbe){for(let G=0;G<9;G++)n.probe[G].addScaledVector(H.sh.coefficients[G],K);P++}else if(H.isDirectionalLight){const G=t.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const it=H.shadow,q=e.get(H);q.shadowIntensity=it.intensity,q.shadowBias=it.bias,q.shadowNormalBias=it.normalBias,q.shadowRadius=it.radius,q.shadowMapSize=it.mapSize,n.directionalShadow[g]=q,n.directionalShadowMap[g]=mt,n.directionalShadowMatrix[g]=H.shadow.matrix,w++}n.directional[g]=G,g++}else if(H.isSpotLight){const G=t.get(H);G.position.setFromMatrixPosition(H.matrixWorld),G.color.copy(et).multiplyScalar(K),G.distance=ot,G.coneCos=Math.cos(H.angle),G.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),G.decay=H.decay,n.spot[b]=G;const it=H.shadow;if(H.map&&(n.spotLightMap[F]=H.map,F++,it.updateMatrices(H),H.castShadow&&k++),n.spotLightMatrix[b]=it.matrix,H.castShadow){const q=e.get(H);q.shadowIntensity=it.intensity,q.shadowBias=it.bias,q.shadowNormalBias=it.normalBias,q.shadowRadius=it.radius,q.shadowMapSize=it.mapSize,n.spotShadow[b]=q,n.spotShadowMap[b]=mt,C++}b++}else if(H.isRectAreaLight){const G=t.get(H);G.color.copy(et).multiplyScalar(K),G.halfWidth.set(.5*H.width,0,0),G.halfHeight.set(0,.5*H.height,0),n.rectArea[y]=G,y++}else if(H.isPointLight){const G=t.get(H);if(G.color.copy(H.color).multiplyScalar(H.intensity),G.distance=H.distance,G.decay=H.decay,H.castShadow){const it=H.shadow,q=e.get(H);q.shadowIntensity=it.intensity,q.shadowBias=it.bias,q.shadowNormalBias=it.normalBias,q.shadowRadius=it.radius,q.shadowMapSize=it.mapSize,q.shadowCameraNear=it.camera.near,q.shadowCameraFar=it.camera.far,n.pointShadow[_]=q,n.pointShadowMap[_]=mt,n.pointShadowMatrix[_]=H.shadow.matrix,S++}n.point[_]=G,_++}else if(H.isHemisphereLight){const G=t.get(H);G.skyColor.copy(H.color).multiplyScalar(K),G.groundColor.copy(H.groundColor).multiplyScalar(K),n.hemi[v]=G,v++}}y>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=Ot.LTC_FLOAT_1,n.rectAreaLTC2=Ot.LTC_FLOAT_2):(n.rectAreaLTC1=Ot.LTC_HALF_1,n.rectAreaLTC2=Ot.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=f,n.ambient[2]=m;const B=n.hash;(B.directionalLength!==g||B.pointLength!==_||B.spotLength!==b||B.rectAreaLength!==y||B.hemiLength!==v||B.numDirectionalShadows!==w||B.numPointShadows!==S||B.numSpotShadows!==C||B.numSpotMaps!==F||B.numLightProbes!==P)&&(n.directional.length=g,n.spot.length=b,n.rectArea.length=y,n.point.length=_,n.hemi.length=v,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=S,n.pointShadowMap.length=S,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=S,n.spotLightMatrix.length=C+F-k,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=k,n.numLightProbes=P,B.directionalLength=g,B.pointLength=_,B.spotLength=b,B.rectAreaLength=y,B.hemiLength=v,B.numDirectionalShadows=w,B.numPointShadows=S,B.numSpotShadows=C,B.numSpotMaps=F,B.numLightProbes=P,n.version=Qtt++)},setupView:function l(d,h){let f=0,m=0,g=0,_=0,b=0;const y=h.matrixWorldInverse;for(let v=0,w=d.length;v<w;v++){const S=d[v];if(S.isDirectionalLight){const C=n.directional[f];C.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),f++}else if(S.isSpotLight){const C=n.spot[g];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),C.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(y),g++}else if(S.isRectAreaLight){const C=n.rectArea[_];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),s.identity(),o.copy(S.matrixWorld),o.premultiply(y),s.extractRotation(o),C.halfWidth.set(.5*S.width,0,0),C.halfHeight.set(0,.5*S.height,0),C.halfWidth.applyMatrix4(s),C.halfHeight.applyMatrix4(s),_++}else if(S.isPointLight){const C=n.point[m];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(y),m++}else if(S.isHemisphereLight){const C=n.hemi[b];C.direction.setFromMatrixPosition(S.matrixWorld),C.direction.transformDirection(y),b++}}},state:n}}function kN(i){const t=new tet(i),e=[],n=[],d={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function r(h){d.camera=h,e.length=0,n.length=0},state:d,setupLights:function a(){t.setup(e)},setupLightsView:function l(h){t.setupView(e,h)},pushLight:function o(h){e.push(h)},pushShadow:function s(h){n.push(h)}}}function eet(i){let t=new WeakMap;return{get:function e(r,o=0){const s=t.get(r);let a;return void 0===s?(a=new kN(i),t.set(r,[a])):o>=s.length?(a=new kN(i),s.push(a)):a=s[o],a},dispose:function n(){t=new WeakMap}}}class PN extends Dr{static get type(){return"MeshDepthMaterial"}constructor(t){super(),this.isMeshDepthMaterial=!0,this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ON extends Dr{static get type(){return"MeshDistanceMaterial"}constructor(t){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ret(i,t,e){let n=new ty;const r=new gt,o=new gt,s=new fi,a=new PN({depthPacking:3201}),l=new ON,d={},h=e.maxTextureSize,f={0:1,1:0,2:2},m=new Cs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const _=new We;_.setAttribute("position",new Bi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Dn(_,m),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=uF;let v=this.type;function w(k,P){const B=t.update(b);m.defines.VSM_SAMPLES!==k.blurSamples&&(m.defines.VSM_SAMPLES=k.blurSamples,g.defines.VSM_SAMPLES=k.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),null===k.mapPass&&(k.mapPass=new Ss(r.x,r.y)),m.uniforms.shadow_pass.value=k.map.texture,m.uniforms.resolution.value=k.mapSize,m.uniforms.radius.value=k.radius,i.setRenderTarget(k.mapPass),i.clear(),i.renderBufferDirect(P,null,B,m,b,null),g.uniforms.shadow_pass.value=k.mapPass.texture,g.uniforms.resolution.value=k.mapSize,g.uniforms.radius.value=k.radius,i.setRenderTarget(k.map),i.clear(),i.renderBufferDirect(P,null,B,g,b,null)}function S(k,P,B,I){let T=null;const H=!0===B.isPointLight?k.customDistanceMaterial:k.customDepthMaterial;if(void 0!==H)T=H;else if(T=!0===B.isPointLight?l:a,i.localClippingEnabled&&!0===P.clipShadows&&Array.isArray(P.clippingPlanes)&&0!==P.clippingPlanes.length||P.displacementMap&&0!==P.displacementScale||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const et=T.uuid,K=P.uuid;let ot=d[et];void 0===ot&&(ot={},d[et]=ot);let mt=ot[K];void 0===mt&&(mt=T.clone(),ot[K]=mt,P.addEventListener("dispose",F)),T=mt}return T.visible=P.visible,T.wireframe=P.wireframe,T.side=I===Qs?null!==P.shadowSide?P.shadowSide:P.side:null!==P.shadowSide?P.shadowSide:f[P.side],T.alphaMap=P.alphaMap,T.alphaTest=P.alphaTest,T.map=P.map,T.clipShadows=P.clipShadows,T.clippingPlanes=P.clippingPlanes,T.clipIntersection=P.clipIntersection,T.displacementMap=P.displacementMap,T.displacementScale=P.displacementScale,T.displacementBias=P.displacementBias,T.wireframeLinewidth=P.wireframeLinewidth,T.linewidth=P.linewidth,!0===B.isPointLight&&!0===T.isMeshDistanceMaterial&&(i.properties.get(T).light=B),T}function C(k,P,B,I,T){if(!1===k.visible)return;if(k.layers.test(P.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&T===Qs)&&(!k.frustumCulled||n.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,k.matrixWorld);const K=t.update(k),ot=k.material;if(Array.isArray(ot)){const mt=K.groups;for(let G=0,it=mt.length;G<it;G++){const q=mt[G],ht=ot[q.materialIndex];if(ht&&ht.visible){const Et=S(k,ht,I,T);k.onBeforeShadow(i,k,P,B,K,Et,q),i.renderBufferDirect(B,null,K,Et,k,q),k.onAfterShadow(i,k,P,B,K,Et,q)}}}else if(ot.visible){const mt=S(k,ot,I,T);k.onBeforeShadow(i,k,P,B,K,mt,null),i.renderBufferDirect(B,null,K,mt,k,null),k.onAfterShadow(i,k,P,B,K,mt,null)}}const et=k.children;for(let K=0,ot=et.length;K<ot;K++)C(et[K],P,B,I,T)}function F(k){k.target.removeEventListener("dispose",F);for(const B in d){const I=d[B],T=k.target.uuid;T in I&&(I[T].dispose(),delete I[T])}}this.render=function(k,P,B){if(!1===y.enabled||!1===y.autoUpdate&&!1===y.needsUpdate||0===k.length)return;const I=i.getRenderTarget(),T=i.getActiveCubeFace(),H=i.getActiveMipmapLevel(),et=i.state;et.setBlending(0),et.buffers.color.setClear(1,1,1,1),et.buffers.depth.setTest(!0),et.setScissorTest(!1);const K=v!==Qs&&this.type===Qs,ot=v===Qs&&this.type!==Qs;for(let mt=0,G=k.length;mt<G;mt++){const it=k[mt],q=it.shadow;if(void 0===q){console.warn("THREE.WebGLShadowMap:",it,"has no shadow.");continue}if(!1===q.autoUpdate&&!1===q.needsUpdate)continue;r.copy(q.mapSize);const ht=q.getFrameExtents();if(r.multiply(ht),o.copy(q.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(o.x=Math.floor(h/ht.x),r.x=o.x*ht.x,q.mapSize.x=o.x),r.y>h&&(o.y=Math.floor(h/ht.y),r.y=o.y*ht.y,q.mapSize.y=o.y)),null===q.map||!0===K||!0===ot){const Nt=this.type!==Qs?{minFilter:cr,magFilter:cr}:{};null!==q.map&&q.map.dispose(),q.map=new Ss(r.x,r.y,Nt),q.map.texture.name=it.name+".shadowMap",q.camera.updateProjectionMatrix()}i.setRenderTarget(q.map),i.clear();const Et=q.getViewportCount();for(let Nt=0;Nt<Et;Nt++){const he=q.getViewport(Nt);s.set(o.x*he.x,o.y*he.y,o.x*he.z,o.y*he.w),et.viewport(s),q.updateMatrices(it,Nt),n=q.getFrustum(),C(P,B,q.camera,it,this.type)}!0!==q.isPointLightShadow&&this.type===Qs&&w(q,B),q.needsUpdate=!1}v=this.type,y.needsUpdate=!1,i.setRenderTarget(I,T,H)}}const oet={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function set(i,t){const o=new function e(){let j=!1;const Ut=new fi;let st=null;const pt=new fi(0,0,0,0);return{setMask:function(Ht){st!==Ht&&!j&&(i.colorMask(Ht,Ht,Ht,Ht),st=Ht)},setLocked:function(Ht){j=Ht},setClear:function(Ht,Vt,Ve,pn,mr){!0===mr&&(Ht*=pn,Vt*=pn,Ve*=pn),Ut.set(Ht,Vt,Ve,pn),!1===pt.equals(Ut)&&(i.clearColor(Ht,Vt,Ve,pn),pt.copy(Ut))},reset:function(){j=!1,st=null,pt.set(-1,0,0,0)}}},s=new function n(){let j=!1,Ut=!1,st=null,pt=null,Ht=null;return{setReversed:function(Vt){if(Ut!==Vt){const Ve=t.get("EXT_clip_control");Ve.clipControlEXT(Ve.LOWER_LEFT_EXT,Ut?Ve.ZERO_TO_ONE_EXT:Ve.NEGATIVE_ONE_TO_ONE_EXT);const pn=Ht;Ht=null,this.setClear(pn)}Ut=Vt},getReversed:function(){return Ut},setTest:function(Vt){Vt?yt(i.DEPTH_TEST):te(i.DEPTH_TEST)},setMask:function(Vt){st!==Vt&&!j&&(i.depthMask(Vt),st=Vt)},setFunc:function(Vt){if(Ut&&(Vt=oet[Vt]),pt!==Vt){switch(Vt){case 0:i.depthFunc(i.NEVER);break;case 1:i.depthFunc(i.ALWAYS);break;case 2:i.depthFunc(i.LESS);break;case 3:default:i.depthFunc(i.LEQUAL);break;case 4:i.depthFunc(i.EQUAL);break;case 5:i.depthFunc(i.GEQUAL);break;case 6:i.depthFunc(i.GREATER);break;case 7:i.depthFunc(i.NOTEQUAL)}pt=Vt}},setLocked:function(Vt){j=Vt},setClear:function(Vt){Ht!==Vt&&(Ut&&(Vt=1-Vt),i.clearDepth(Vt),Ht=Vt)},reset:function(){j=!1,st=null,pt=null,Ht=null,Ut=!1}}},a=new function r(){let j=!1,Ut=null,st=null,pt=null,Ht=null,Vt=null,Ve=null,pn=null,mr=null;return{setTest:function(Pi){j||(Pi?yt(i.STENCIL_TEST):te(i.STENCIL_TEST))},setMask:function(Pi){Ut!==Pi&&!j&&(i.stencilMask(Pi),Ut=Pi)},setFunc:function(Pi,is,wa){(st!==Pi||pt!==is||Ht!==wa)&&(i.stencilFunc(Pi,is,wa),st=Pi,pt=is,Ht=wa)},setOp:function(Pi,is,wa){(Vt!==Pi||Ve!==is||pn!==wa)&&(i.stencilOp(Pi,is,wa),Vt=Pi,Ve=is,pn=wa)},setLocked:function(Pi){j=Pi},setClear:function(Pi){mr!==Pi&&(i.clearStencil(Pi),mr=Pi)},reset:function(){j=!1,Ut=null,st=null,pt=null,Ht=null,Vt=null,Ve=null,pn=null,mr=null}}},l=new WeakMap,d=new WeakMap;let h={},f={},m=new WeakMap,g=[],_=null,b=!1,y=null,v=null,w=null,S=null,C=null,F=null,k=null,P=new Gt(0,0,0),B=0,I=!1,T=null,H=null,et=null,K=null,ot=null;const mt=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,it=0;const q=i.getParameter(i.VERSION);-1!==q.indexOf("WebGL")?(it=parseFloat(/^WebGL (\d)/.exec(q)[1]),G=it>=1):-1!==q.indexOf("OpenGL ES")&&(it=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),G=it>=2);let ht=null,Et={};const Nt=i.getParameter(i.SCISSOR_BOX),he=i.getParameter(i.VIEWPORT),Xe=(new fi).fromArray(Nt),rt=(new fi).fromArray(he);function Tt(j,Ut,st,pt){const Ht=new Uint8Array(4),Vt=i.createTexture();i.bindTexture(j,Vt),i.texParameteri(j,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(j,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ve=0;Ve<st;Ve++)j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY?i.texImage3D(Ut,0,i.RGBA,1,1,pt,0,i.RGBA,i.UNSIGNED_BYTE,Ht):i.texImage2D(Ut+Ve,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ht);return Vt}const Yt={};function yt(j){!0!==h[j]&&(i.enable(j),h[j]=!0)}function te(j){!1!==h[j]&&(i.disable(j),h[j]=!1)}Yt[i.TEXTURE_2D]=Tt(i.TEXTURE_2D,i.TEXTURE_2D,1),Yt[i.TEXTURE_CUBE_MAP]=Tt(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Yt[i.TEXTURE_2D_ARRAY]=Tt(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Yt[i.TEXTURE_3D]=Tt(i.TEXTURE_3D,i.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),yt(i.DEPTH_TEST),s.setFunc(3),Mt(!1),Xt(1),yt(i.CULL_FACE),z(0);const _t={100:i.FUNC_ADD,101:i.FUNC_SUBTRACT,102:i.FUNC_REVERSE_SUBTRACT};_t[103]=i.MIN,_t[104]=i.MAX;const Dt={200:i.ZERO,201:i.ONE,202:i.SRC_COLOR,204:i.SRC_ALPHA,210:i.SRC_ALPHA_SATURATE,208:i.DST_COLOR,206:i.DST_ALPHA,203:i.ONE_MINUS_SRC_COLOR,205:i.ONE_MINUS_SRC_ALPHA,209:i.ONE_MINUS_DST_COLOR,207:i.ONE_MINUS_DST_ALPHA,211:i.CONSTANT_COLOR,212:i.ONE_MINUS_CONSTANT_COLOR,213:i.CONSTANT_ALPHA,214:i.ONE_MINUS_CONSTANT_ALPHA};function z(j,Ut,st,pt,Ht,Vt,Ve,pn,mr,Pi){if(0!==j){if(!1===b&&(yt(i.BLEND),b=!0),5===j)Ht=Ht||Ut,Vt=Vt||st,Ve=Ve||pt,(Ut!==v||Ht!==C)&&(i.blendEquationSeparate(_t[Ut],_t[Ht]),v=Ut,C=Ht),(st!==w||pt!==S||Vt!==F||Ve!==k)&&(i.blendFuncSeparate(Dt[st],Dt[pt],Dt[Vt],Dt[Ve]),w=st,S=pt,F=Vt,k=Ve),(!1===pn.equals(P)||mr!==B)&&(i.blendColor(pn.r,pn.g,pn.b,mr),P.copy(pn),B=mr),y=j,I=!1;else if(j!==y||Pi!==I){if((100!==v||100!==C)&&(i.blendEquation(i.FUNC_ADD),v=100,C=100),Pi)switch(j){case 1:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case 2:i.blendFunc(i.ONE,i.ONE);break;case 3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case 4:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}else switch(j){case 1:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case 2:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case 3:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case 4:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}w=null,S=null,F=null,k=null,P.set(0,0,0),B=0,y=j,I=Pi}}else!0===b&&(te(i.BLEND),b=!1)}function Mt(j){T!==j&&(i.frontFace(j?i.CW:i.CCW),T=j)}function Xt(j){0!==j?(yt(i.CULL_FACE),j!==H&&i.cullFace(1===j?i.BACK:2===j?i.FRONT:i.FRONT_AND_BACK)):te(i.CULL_FACE),H=j}function xe(j,Ut,st){j?(yt(i.POLYGON_OFFSET_FILL),(K!==Ut||ot!==st)&&(i.polygonOffset(Ut,st),K=Ut,ot=st)):te(i.POLYGON_OFFSET_FILL)}return{buffers:{color:o,depth:s,stencil:a},enable:yt,disable:te,bindFramebuffer:function se(j,Ut){return f[j]!==Ut&&(i.bindFramebuffer(j,Ut),f[j]=Ut,j===i.DRAW_FRAMEBUFFER&&(f[i.FRAMEBUFFER]=Ut),j===i.FRAMEBUFFER&&(f[i.DRAW_FRAMEBUFFER]=Ut),!0)},drawBuffers:function _e(j,Ut){let st=g,pt=!1;if(j){st=m.get(Ut),void 0===st&&(st=[],m.set(Ut,st));const Ht=j.textures;if(st.length!==Ht.length||st[0]!==i.COLOR_ATTACHMENT0){for(let Vt=0,Ve=Ht.length;Vt<Ve;Vt++)st[Vt]=i.COLOR_ATTACHMENT0+Vt;st.length=Ht.length,pt=!0}}else st[0]!==i.BACK&&(st[0]=i.BACK,pt=!0);pt&&i.drawBuffers(st)},useProgram:function ii(j){return _!==j&&(i.useProgram(j),_=j,!0)},setBlending:z,setMaterial:function le(j,Ut){2===j.side?te(i.CULL_FACE):yt(i.CULL_FACE);let st=1===j.side;Ut&&(st=!st),Mt(st),1===j.blending&&!1===j.transparent?z(0):z(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),s.setFunc(j.depthFunc),s.setTest(j.depthTest),s.setMask(j.depthWrite),o.setMask(j.colorWrite);const pt=j.stencilWrite;a.setTest(pt),pt&&(a.setMask(j.stencilWriteMask),a.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),a.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),xe(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),!0===j.alphaToCoverage?yt(i.SAMPLE_ALPHA_TO_COVERAGE):te(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Mt,setCullFace:Xt,setLineWidth:function kt(j){j!==et&&(G&&i.lineWidth(j),et=j)},setPolygonOffset:xe,setScissorTest:function $t(j){j?yt(i.SCISSOR_TEST):te(i.SCISSOR_TEST)},activeTexture:function O(j){void 0===j&&(j=i.TEXTURE0+mt-1),ht!==j&&(i.activeTexture(j),ht=j)},bindTexture:function D(j,Ut,st){void 0===st&&(st=null===ht?i.TEXTURE0+mt-1:ht);let pt=Et[st];void 0===pt&&(pt={type:void 0,texture:void 0},Et[st]=pt),(pt.type!==j||pt.texture!==Ut)&&(ht!==st&&(i.activeTexture(st),ht=st),i.bindTexture(j,Ut||Yt[j]),pt.type=j,pt.texture=Ut)},unbindTexture:function Q(){const j=Et[ht];void 0!==j&&void 0!==j.type&&(i.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)},compressedTexImage2D:function lt(){try{i.compressedTexImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexImage3D:function vt(){try{i.compressedTexImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage2D:function Kt(){try{i.texImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage3D:function we(){try{i.texImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},updateUBOMapping:function ci(j,Ut){let st=d.get(Ut);void 0===st&&(st=new WeakMap,d.set(Ut,st));let pt=st.get(j);void 0===pt&&(pt=i.getUniformBlockIndex(Ut,j.name),st.set(j,pt))},uniformBlockBinding:function $e(j,Ut){const pt=d.get(Ut).get(j);l.get(Ut)!==pt&&(i.uniformBlockBinding(Ut,pt,j.__bindingPointIndex),l.set(Ut,pt))},texStorage2D:function ni(){try{i.texStorage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texStorage3D:function Ct(){try{i.texStorage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage2D:function ct(){try{i.texSubImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage3D:function ae(){try{i.texSubImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage2D:function Bt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage3D:function qt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},scissor:function Pe(j){!1===Xe.equals(j)&&(i.scissor(j.x,j.y,j.z,j.w),Xe.copy(j))},viewport:function Qt(j){!1===rt.equals(j)&&(i.viewport(j.x,j.y,j.z,j.w),rt.copy(j))},reset:function Gi(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),s.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),h={},ht=null,Et={},f={},m=new WeakMap,g=[],_=null,b=!1,y=null,v=null,w=null,S=null,C=null,F=null,k=null,P=new Gt(0,0,0),B=0,I=!1,T=null,H=null,et=null,K=null,ot=null,Xe.set(0,0,i.canvas.width,i.canvas.height),rt.set(0,0,i.canvas.width,i.canvas.height),o.reset(),s.reset(),a.reset()}}}function VC(i,t,e,n){const r=function uet(i){switch(i){case ea:case _F:return{byteLength:1,components:1};case Cm:case vF:case Em:return{byteLength:2,components:1};case TS:case DS:return{byteLength:2,components:4};case hl:case ES:case uo:return{byteLength:4,components:1};case yF:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}(n);switch(e){case bF:case wF:return i*t;case MF:return i*t*2;case AS:case Cv:return i*t/r.components*r.byteLength;case SF:case IS:return i*t*2/r.components*r.byteLength;case xF:return i*t*3/r.components*r.byteLength;case Vr:case RS:return i*t*4/r.components*r.byteLength;case Ev:case Tv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Dv:case Av:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case PS:case LS:return Math.max(i,16)*Math.max(t,8)/4;case kS:case OS:return Math.max(i,8)*Math.max(t,8)/2;case FS:case NS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case BS:case US:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case zS:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case VS:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case HS:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case GS:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case WS:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case jS:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case $S:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case qS:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case ZS:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case XS:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case YS:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case KS:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case QS:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case Iv:case JS:case tC:return Math.ceil(i/4)*Math.ceil(t/4)*16;case CF:case eC:return Math.ceil(i/4)*Math.ceil(t/4)*8;case iC:case nC:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function het(i,t,e,n,r,o,s){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),d=new gt,h=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function _(O,D){return g?new OffscreenCanvas(O,D):Dm("canvas")}function b(O,D,Q){let lt=1;const vt=$t(O);if((vt.width>Q||vt.height>Q)&&(lt=Q/Math.max(vt.width,vt.height)),lt<1){if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap||typeof VideoFrame<"u"&&O instanceof VideoFrame){const ct=Math.floor(lt*vt.width),ae=Math.floor(lt*vt.height);void 0===f&&(f=_(ct,ae));const Bt=D?_(ct,ae):f;return Bt.width=ct,Bt.height=ae,Bt.getContext("2d").drawImage(O,0,0,ct,ae),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+vt.width+"x"+vt.height+") to ("+ct+"x"+ae+")."),Bt}return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+vt.width+"x"+vt.height+")."),O}return O}function y(O){return O.generateMipmaps}function v(O){i.generateMipmap(O)}function w(O){return O.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:O.isWebGL3DRenderTarget?i.TEXTURE_3D:O.isWebGLArrayRenderTarget||O.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function S(O,D,Q,lt,vt=!1){if(null!==O){if(void 0!==i[O])return i[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let ct=D;if(D===i.RED&&(Q===i.FLOAT&&(ct=i.R32F),Q===i.HALF_FLOAT&&(ct=i.R16F),Q===i.UNSIGNED_BYTE&&(ct=i.R8)),D===i.RED_INTEGER&&(Q===i.UNSIGNED_BYTE&&(ct=i.R8UI),Q===i.UNSIGNED_SHORT&&(ct=i.R16UI),Q===i.UNSIGNED_INT&&(ct=i.R32UI),Q===i.BYTE&&(ct=i.R8I),Q===i.SHORT&&(ct=i.R16I),Q===i.INT&&(ct=i.R32I)),D===i.RG&&(Q===i.FLOAT&&(ct=i.RG32F),Q===i.HALF_FLOAT&&(ct=i.RG16F),Q===i.UNSIGNED_BYTE&&(ct=i.RG8)),D===i.RG_INTEGER&&(Q===i.UNSIGNED_BYTE&&(ct=i.RG8UI),Q===i.UNSIGNED_SHORT&&(ct=i.RG16UI),Q===i.UNSIGNED_INT&&(ct=i.RG32UI),Q===i.BYTE&&(ct=i.RG8I),Q===i.SHORT&&(ct=i.RG16I),Q===i.INT&&(ct=i.RG32I)),D===i.RGB_INTEGER&&(Q===i.UNSIGNED_BYTE&&(ct=i.RGB8UI),Q===i.UNSIGNED_SHORT&&(ct=i.RGB16UI),Q===i.UNSIGNED_INT&&(ct=i.RGB32UI),Q===i.BYTE&&(ct=i.RGB8I),Q===i.SHORT&&(ct=i.RGB16I),Q===i.INT&&(ct=i.RGB32I)),D===i.RGBA_INTEGER&&(Q===i.UNSIGNED_BYTE&&(ct=i.RGBA8UI),Q===i.UNSIGNED_SHORT&&(ct=i.RGBA16UI),Q===i.UNSIGNED_INT&&(ct=i.RGBA32UI),Q===i.BYTE&&(ct=i.RGBA8I),Q===i.SHORT&&(ct=i.RGBA16I),Q===i.INT&&(ct=i.RGBA32I)),D===i.RGB&&Q===i.UNSIGNED_INT_5_9_9_9_REV&&(ct=i.RGB9_E5),D===i.RGBA){const ae=vt?Pv:li.getTransfer(lt);Q===i.FLOAT&&(ct=i.RGBA32F),Q===i.HALF_FLOAT&&(ct=i.RGBA16F),Q===i.UNSIGNED_BYTE&&(ct=ae===Oi?i.SRGB8_ALPHA8:i.RGBA8),Q===i.UNSIGNED_SHORT_4_4_4_4&&(ct=i.RGBA4),Q===i.UNSIGNED_SHORT_5_5_5_1&&(ct=i.RGB5_A1)}return(ct===i.R16F||ct===i.R32F||ct===i.RG16F||ct===i.RG32F||ct===i.RGBA16F||ct===i.RGBA32F)&&t.get("EXT_color_buffer_float"),ct}function C(O,D){let Q;return O?null===D||D===hl||D===Vu?Q=i.DEPTH24_STENCIL8:D===uo?Q=i.DEPTH32F_STENCIL8:D===Cm&&(Q=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===D||D===hl||D===Vu?Q=i.DEPTH_COMPONENT24:D===uo?Q=i.DEPTH_COMPONENT32F:D===Cm&&(Q=i.DEPTH_COMPONENT16),Q}function F(O,D){return!0===y(O)||O.isFramebufferTexture&&O.minFilter!==cr&&O.minFilter!==$n?Math.log2(Math.max(D.width,D.height))+1:void 0!==O.mipmaps&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?D.mipmaps.length:1}function k(O){const D=O.target;D.removeEventListener("dispose",k),function B(O){const D=n.get(O);if(void 0===D.__webglInit)return;const Q=O.source,lt=m.get(Q);if(lt){const vt=lt[D.__cacheKey];vt.usedTimes--,0===vt.usedTimes&&I(O),0===Object.keys(lt).length&&m.delete(Q)}n.remove(O)}(D),D.isVideoTexture&&h.delete(D)}function P(O){const D=O.target;D.removeEventListener("dispose",P),function T(O){const D=n.get(O);if(O.depthTexture&&(O.depthTexture.dispose(),n.remove(O.depthTexture)),O.isWebGLCubeRenderTarget)for(let lt=0;lt<6;lt++){if(Array.isArray(D.__webglFramebuffer[lt]))for(let vt=0;vt<D.__webglFramebuffer[lt].length;vt++)i.deleteFramebuffer(D.__webglFramebuffer[lt][vt]);else i.deleteFramebuffer(D.__webglFramebuffer[lt]);D.__webglDepthbuffer&&i.deleteRenderbuffer(D.__webglDepthbuffer[lt])}else{if(Array.isArray(D.__webglFramebuffer))for(let lt=0;lt<D.__webglFramebuffer.length;lt++)i.deleteFramebuffer(D.__webglFramebuffer[lt]);else i.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&i.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&i.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let lt=0;lt<D.__webglColorRenderbuffer.length;lt++)D.__webglColorRenderbuffer[lt]&&i.deleteRenderbuffer(D.__webglColorRenderbuffer[lt]);D.__webglDepthRenderbuffer&&i.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const Q=O.textures;for(let lt=0,vt=Q.length;lt<vt;lt++){const ct=n.get(Q[lt]);ct.__webglTexture&&(i.deleteTexture(ct.__webglTexture),s.memory.textures--),n.remove(Q[lt])}n.remove(O)}(D)}function I(O){const D=n.get(O);i.deleteTexture(D.__webglTexture),delete m.get(O.source)[D.__cacheKey],s.memory.textures--}let H=0;function mt(O,D){const Q=n.get(O);if(O.isVideoTexture&&function kt(O){const D=s.render.frame;h.get(O)!==D&&(h.set(O,D),O.update())}(O),!1===O.isRenderTargetTexture&&O.version>0&&Q.__version!==O.version){const lt=O.image;if(null===lt)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==lt.complete)return void rt(Q,O,D);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(i.TEXTURE_2D,Q.__webglTexture,i.TEXTURE0+D)}const ht={1e3:i.REPEAT,[Yo]:i.CLAMP_TO_EDGE,1002:i.MIRRORED_REPEAT},Et={[cr]:i.NEAREST,1004:i.NEAREST_MIPMAP_NEAREST,1005:i.NEAREST_MIPMAP_LINEAR,[$n]:i.LINEAR,1007:i.LINEAR_MIPMAP_NEAREST,[ta]:i.LINEAR_MIPMAP_LINEAR},Nt={512:i.NEVER,519:i.ALWAYS,513:i.LESS,515:i.LEQUAL,514:i.EQUAL,518:i.GEQUAL,516:i.GREATER,517:i.NOTEQUAL};function he(O,D){if(D.type===uo&&!1===t.has("OES_texture_float_linear")&&(D.magFilter===$n||1007===D.magFilter||1005===D.magFilter||D.magFilter===ta||D.minFilter===$n||1007===D.minFilter||1005===D.minFilter||D.minFilter===ta)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(O,i.TEXTURE_WRAP_S,ht[D.wrapS]),i.texParameteri(O,i.TEXTURE_WRAP_T,ht[D.wrapT]),(O===i.TEXTURE_3D||O===i.TEXTURE_2D_ARRAY)&&i.texParameteri(O,i.TEXTURE_WRAP_R,ht[D.wrapR]),i.texParameteri(O,i.TEXTURE_MAG_FILTER,Et[D.magFilter]),i.texParameteri(O,i.TEXTURE_MIN_FILTER,Et[D.minFilter]),D.compareFunction&&(i.texParameteri(O,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(O,i.TEXTURE_COMPARE_FUNC,Nt[D.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(D.magFilter===cr||1005!==D.minFilter&&D.minFilter!==ta||D.type===uo&&!1===t.has("OES_texture_float_linear"))return;if(D.anisotropy>1||n.get(D).__currentAnisotropy){const Q=t.get("EXT_texture_filter_anisotropic");i.texParameterf(O,Q.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy}}}function Xe(O,D){let Q=!1;void 0===O.__webglInit&&(O.__webglInit=!0,D.addEventListener("dispose",k));const lt=D.source;let vt=m.get(lt);void 0===vt&&(vt={},m.set(lt,vt));const ct=function ot(O){const D=[];return D.push(O.wrapS),D.push(O.wrapT),D.push(O.wrapR||0),D.push(O.magFilter),D.push(O.minFilter),D.push(O.anisotropy),D.push(O.internalFormat),D.push(O.format),D.push(O.type),D.push(O.generateMipmaps),D.push(O.premultiplyAlpha),D.push(O.flipY),D.push(O.unpackAlignment),D.push(O.colorSpace),D.join()}(D);if(ct!==O.__cacheKey){void 0===vt[ct]&&(vt[ct]={texture:i.createTexture(),usedTimes:0},s.memory.textures++,Q=!0),vt[ct].usedTimes++;const ae=vt[O.__cacheKey];void 0!==ae&&(vt[O.__cacheKey].usedTimes--,0===ae.usedTimes&&I(D)),O.__cacheKey=ct,O.__webglTexture=vt[ct].texture}return Q}function rt(O,D,Q){let lt=i.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(lt=i.TEXTURE_2D_ARRAY),D.isData3DTexture&&(lt=i.TEXTURE_3D);const vt=Xe(O,D),ct=D.source;e.bindTexture(lt,O.__webglTexture,i.TEXTURE0+Q);const ae=n.get(ct);if(ct.version!==ae.__version||!0===vt){e.activeTexture(i.TEXTURE0+Q);const Bt=li.getPrimaries(li.workingColorSpace),qt=""===D.colorSpace?null:li.getPrimaries(D.colorSpace),ni=""===D.colorSpace||Bt===qt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ni);let Ct=b(D.image,!1,r.maxTextureSize);Ct=xe(D,Ct);const Kt=o.convert(D.format,D.colorSpace),we=o.convert(D.type);let Qt,Pe=S(D.internalFormat,Kt,we,D.colorSpace,D.isVideoTexture);he(lt,D);const ci=D.mipmaps,$e=!0!==D.isVideoTexture,Gi=void 0===ae.__version||!0===vt,j=ct.dataReady,Ut=F(D,Ct);if(D.isDepthTexture)Pe=C(D.format===Gu,D.type),Gi&&($e?e.texStorage2D(i.TEXTURE_2D,1,Pe,Ct.width,Ct.height):e.texImage2D(i.TEXTURE_2D,0,Pe,Ct.width,Ct.height,0,Kt,we,null));else if(D.isDataTexture)if(ci.length>0){$e&&Gi&&e.texStorage2D(i.TEXTURE_2D,Ut,Pe,ci[0].width,ci[0].height);for(let st=0,pt=ci.length;st<pt;st++)Qt=ci[st],$e?j&&e.texSubImage2D(i.TEXTURE_2D,st,0,0,Qt.width,Qt.height,Kt,we,Qt.data):e.texImage2D(i.TEXTURE_2D,st,Pe,Qt.width,Qt.height,0,Kt,we,Qt.data);D.generateMipmaps=!1}else $e?(Gi&&e.texStorage2D(i.TEXTURE_2D,Ut,Pe,Ct.width,Ct.height),j&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Ct.width,Ct.height,Kt,we,Ct.data)):e.texImage2D(i.TEXTURE_2D,0,Pe,Ct.width,Ct.height,0,Kt,we,Ct.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){$e&&Gi&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ut,Pe,ci[0].width,ci[0].height,Ct.depth);for(let st=0,pt=ci.length;st<pt;st++)if(Qt=ci[st],D.format!==Vr)if(null!==Kt)if($e){if(j)if(D.layerUpdates.size>0){const Ht=VC(Qt.width,Qt.height,D.format,D.type);for(const Vt of D.layerUpdates){const Ve=Qt.data.subarray(Vt*Ht/Qt.data.BYTES_PER_ELEMENT,(Vt+1)*Ht/Qt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,st,0,0,Vt,Qt.width,Qt.height,1,Kt,Ve)}D.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,st,0,0,0,Qt.width,Qt.height,Ct.depth,Kt,Qt.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,st,Pe,Qt.width,Qt.height,Ct.depth,0,Qt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else $e?j&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,st,0,0,0,Qt.width,Qt.height,Ct.depth,Kt,we,Qt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,st,Pe,Qt.width,Qt.height,Ct.depth,0,Kt,we,Qt.data)}else{$e&&Gi&&e.texStorage2D(i.TEXTURE_2D,Ut,Pe,ci[0].width,ci[0].height);for(let st=0,pt=ci.length;st<pt;st++)Qt=ci[st],D.format!==Vr?null!==Kt?$e?j&&e.compressedTexSubImage2D(i.TEXTURE_2D,st,0,0,Qt.width,Qt.height,Kt,Qt.data):e.compressedTexImage2D(i.TEXTURE_2D,st,Pe,Qt.width,Qt.height,0,Qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):$e?j&&e.texSubImage2D(i.TEXTURE_2D,st,0,0,Qt.width,Qt.height,Kt,we,Qt.data):e.texImage2D(i.TEXTURE_2D,st,Pe,Qt.width,Qt.height,0,Kt,we,Qt.data)}else if(D.isDataArrayTexture)if($e){if(Gi&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ut,Pe,Ct.width,Ct.height,Ct.depth),j)if(D.layerUpdates.size>0){const st=VC(Ct.width,Ct.height,D.format,D.type);for(const pt of D.layerUpdates){const Ht=Ct.data.subarray(pt*st/Ct.data.BYTES_PER_ELEMENT,(pt+1)*st/Ct.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,pt,Ct.width,Ct.height,1,Kt,we,Ht)}D.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ct.width,Ct.height,Ct.depth,Kt,we,Ct.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,Pe,Ct.width,Ct.height,Ct.depth,0,Kt,we,Ct.data);else if(D.isData3DTexture)$e?(Gi&&e.texStorage3D(i.TEXTURE_3D,Ut,Pe,Ct.width,Ct.height,Ct.depth),j&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ct.width,Ct.height,Ct.depth,Kt,we,Ct.data)):e.texImage3D(i.TEXTURE_3D,0,Pe,Ct.width,Ct.height,Ct.depth,0,Kt,we,Ct.data);else if(D.isFramebufferTexture){if(Gi)if($e)e.texStorage2D(i.TEXTURE_2D,Ut,Pe,Ct.width,Ct.height);else{let st=Ct.width,pt=Ct.height;for(let Ht=0;Ht<Ut;Ht++)e.texImage2D(i.TEXTURE_2D,Ht,Pe,st,pt,0,Kt,we,null),st>>=1,pt>>=1}}else if(ci.length>0){if($e&&Gi){const st=$t(ci[0]);e.texStorage2D(i.TEXTURE_2D,Ut,Pe,st.width,st.height)}for(let st=0,pt=ci.length;st<pt;st++)Qt=ci[st],$e?j&&e.texSubImage2D(i.TEXTURE_2D,st,0,0,Kt,we,Qt):e.texImage2D(i.TEXTURE_2D,st,Pe,Kt,we,Qt);D.generateMipmaps=!1}else if($e){if(Gi){const st=$t(Ct);e.texStorage2D(i.TEXTURE_2D,Ut,Pe,st.width,st.height)}j&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Kt,we,Ct)}else e.texImage2D(i.TEXTURE_2D,0,Pe,Kt,we,Ct);y(D)&&v(lt),ae.__version=ct.version,D.onUpdate&&D.onUpdate(D)}O.__version=D.version}function Yt(O,D,Q,lt,vt,ct){const ae=o.convert(Q.format,Q.colorSpace),Bt=o.convert(Q.type),qt=S(Q.internalFormat,ae,Bt,Q.colorSpace),ni=n.get(D),Ct=n.get(Q);if(Ct.__renderTarget=D,!ni.__hasExternalTextures){const Kt=Math.max(1,D.width>>ct),we=Math.max(1,D.height>>ct);vt===i.TEXTURE_3D||vt===i.TEXTURE_2D_ARRAY?e.texImage3D(vt,ct,qt,Kt,we,D.depth,0,ae,Bt,null):e.texImage2D(vt,ct,qt,Kt,we,0,ae,Bt,null)}e.bindFramebuffer(i.FRAMEBUFFER,O),Xt(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,lt,vt,Ct.__webglTexture,0,Mt(D)):(vt===i.TEXTURE_2D||vt>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&vt<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,lt,vt,Ct.__webglTexture,ct),e.bindFramebuffer(i.FRAMEBUFFER,null)}function yt(O,D,Q){if(i.bindRenderbuffer(i.RENDERBUFFER,O),D.depthBuffer){const lt=D.depthTexture,ct=C(D.stencilBuffer,lt&&lt.isDepthTexture?lt.type:null),ae=D.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Bt=Mt(D);Xt(D)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Bt,ct,D.width,D.height):Q?i.renderbufferStorageMultisample(i.RENDERBUFFER,Bt,ct,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,ct,D.width,D.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,ae,i.RENDERBUFFER,O)}else{const lt=D.textures;for(let vt=0;vt<lt.length;vt++){const ct=lt[vt],ae=o.convert(ct.format,ct.colorSpace),Bt=o.convert(ct.type),qt=S(ct.internalFormat,ae,Bt,ct.colorSpace),ni=Mt(D);Q&&!1===Xt(D)?i.renderbufferStorageMultisample(i.RENDERBUFFER,ni,qt,D.width,D.height):Xt(D)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ni,qt,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,qt,D.width,D.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function se(O){const D=n.get(O),Q=!0===O.isWebGLCubeRenderTarget;if(D.__boundDepthTexture!==O.depthTexture){const lt=O.depthTexture;if(D.__depthDisposeCallback&&D.__depthDisposeCallback(),lt){const vt=()=>{delete D.__boundDepthTexture,delete D.__depthDisposeCallback,lt.removeEventListener("dispose",vt)};lt.addEventListener("dispose",vt),D.__depthDisposeCallback=vt}D.__boundDepthTexture=lt}if(O.depthTexture&&!D.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");!function te(O,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,O),!D.depthTexture||!D.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const lt=n.get(D.depthTexture);lt.__renderTarget=D,(!lt.__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),mt(D.depthTexture,0);const vt=lt.__webglTexture,ct=Mt(D);if(D.depthTexture.format===Hu)Xt(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,vt,0,ct):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,vt,0);else{if(D.depthTexture.format!==Gu)throw new Error("Unknown depthTexture format");Xt(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,vt,0,ct):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,vt,0)}}(D.__webglFramebuffer,O)}else if(Q){D.__webglDepthbuffer=[];for(let lt=0;lt<6;lt++)if(e.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer[lt]),void 0===D.__webglDepthbuffer[lt])D.__webglDepthbuffer[lt]=i.createRenderbuffer(),yt(D.__webglDepthbuffer[lt],O,!1);else{const vt=O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ct=D.__webglDepthbuffer[lt];i.bindRenderbuffer(i.RENDERBUFFER,ct),i.framebufferRenderbuffer(i.FRAMEBUFFER,vt,i.RENDERBUFFER,ct)}}else if(e.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer),void 0===D.__webglDepthbuffer)D.__webglDepthbuffer=i.createRenderbuffer(),yt(D.__webglDepthbuffer,O,!1);else{const lt=O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,vt=D.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,vt),i.framebufferRenderbuffer(i.FRAMEBUFFER,lt,i.RENDERBUFFER,vt)}e.bindFramebuffer(i.FRAMEBUFFER,null)}const Dt=[],z=[];function Mt(O){return Math.min(r.maxSamples,O.samples)}function Xt(O){const D=n.get(O);return O.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==D.__useRenderToTexture}function xe(O,D){const Q=O.colorSpace,lt=O.format,vt=O.type;return!0===O.isCompressedTexture||!0===O.isVideoTexture||Q!==$u&&""!==Q&&(li.getTransfer(Q)===Oi?(lt!==Vr||vt!==ea)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),D}function $t(O){return typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement?(d.width=O.naturalWidth||O.width,d.height=O.naturalHeight||O.height):typeof VideoFrame<"u"&&O instanceof VideoFrame?(d.width=O.displayWidth,d.height=O.displayHeight):(d.width=O.width,d.height=O.height),d}this.allocateTextureUnit=function K(){const O=H;return O>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+r.maxTextures),H+=1,O},this.resetTextureUnits=function et(){H=0},this.setTexture2D=mt,this.setTexture2DArray=function G(O,D){const Q=n.get(O);O.version>0&&Q.__version!==O.version?rt(Q,O,D):e.bindTexture(i.TEXTURE_2D_ARRAY,Q.__webglTexture,i.TEXTURE0+D)},this.setTexture3D=function it(O,D){const Q=n.get(O);O.version>0&&Q.__version!==O.version?rt(Q,O,D):e.bindTexture(i.TEXTURE_3D,Q.__webglTexture,i.TEXTURE0+D)},this.setTextureCube=function q(O,D){const Q=n.get(O);O.version>0&&Q.__version!==O.version?function Tt(O,D,Q){if(6!==D.image.length)return;const lt=Xe(O,D),vt=D.source;e.bindTexture(i.TEXTURE_CUBE_MAP,O.__webglTexture,i.TEXTURE0+Q);const ct=n.get(vt);if(vt.version!==ct.__version||!0===lt){e.activeTexture(i.TEXTURE0+Q);const ae=li.getPrimaries(li.workingColorSpace),Bt=""===D.colorSpace?null:li.getPrimaries(D.colorSpace),qt=""===D.colorSpace||ae===Bt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,qt);const ni=D.isCompressedTexture||D.image[0].isCompressedTexture,Ct=D.image[0]&&D.image[0].isDataTexture,Kt=[];for(let pt=0;pt<6;pt++)Kt[pt]=ni||Ct?Ct?D.image[pt].image:D.image[pt]:b(D.image[pt],!0,r.maxCubemapSize),Kt[pt]=xe(D,Kt[pt]);const we=Kt[0],Pe=o.convert(D.format,D.colorSpace),Qt=o.convert(D.type),ci=S(D.internalFormat,Pe,Qt,D.colorSpace),$e=!0!==D.isVideoTexture,Gi=void 0===ct.__version||!0===lt,j=vt.dataReady;let st,Ut=F(D,we);if(he(i.TEXTURE_CUBE_MAP,D),ni){$e&&Gi&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Ut,ci,we.width,we.height);for(let pt=0;pt<6;pt++){st=Kt[pt].mipmaps;for(let Ht=0;Ht<st.length;Ht++){const Vt=st[Ht];D.format!==Vr?null!==Pe?$e?j&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht,0,0,Vt.width,Vt.height,Pe,Vt.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht,ci,Vt.width,Vt.height,0,Vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$e?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht,0,0,Vt.width,Vt.height,Pe,Qt,Vt.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht,ci,Vt.width,Vt.height,0,Pe,Qt,Vt.data)}}}else{if(st=D.mipmaps,$e&&Gi){st.length>0&&Ut++;const pt=$t(Kt[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Ut,ci,pt.width,pt.height)}for(let pt=0;pt<6;pt++)if(Ct){$e?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,0,0,Kt[pt].width,Kt[pt].height,Pe,Qt,Kt[pt].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,ci,Kt[pt].width,Kt[pt].height,0,Pe,Qt,Kt[pt].data);for(let Ht=0;Ht<st.length;Ht++){const Ve=st[Ht].image[pt].image;$e?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht+1,0,0,Ve.width,Ve.height,Pe,Qt,Ve.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht+1,ci,Ve.width,Ve.height,0,Pe,Qt,Ve.data)}}else{$e?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,0,0,Pe,Qt,Kt[pt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,0,ci,Pe,Qt,Kt[pt]);for(let Ht=0;Ht<st.length;Ht++){const Vt=st[Ht];$e?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht+1,0,0,Pe,Qt,Vt.image[pt]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pt,Ht+1,ci,Pe,Qt,Vt.image[pt])}}}y(D)&&v(i.TEXTURE_CUBE_MAP),ct.__version=vt.version,D.onUpdate&&D.onUpdate(D)}O.__version=D.version}(Q,O,D):e.bindTexture(i.TEXTURE_CUBE_MAP,Q.__webglTexture,i.TEXTURE0+D)},this.rebindTextures=function _e(O,D,Q){const lt=n.get(O);void 0!==D&&Yt(lt.__webglFramebuffer,O,O.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==Q&&se(O)},this.setupRenderTarget=function ii(O){const D=O.texture,Q=n.get(O),lt=n.get(D);O.addEventListener("dispose",P);const vt=O.textures,ct=!0===O.isWebGLCubeRenderTarget,ae=vt.length>1;if(ae||(void 0===lt.__webglTexture&&(lt.__webglTexture=i.createTexture()),lt.__version=D.version,s.memory.textures++),ct){Q.__webglFramebuffer=[];for(let Bt=0;Bt<6;Bt++)if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer[Bt]=[];for(let qt=0;qt<D.mipmaps.length;qt++)Q.__webglFramebuffer[Bt][qt]=i.createFramebuffer()}else Q.__webglFramebuffer[Bt]=i.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){Q.__webglFramebuffer=[];for(let Bt=0;Bt<D.mipmaps.length;Bt++)Q.__webglFramebuffer[Bt]=i.createFramebuffer()}else Q.__webglFramebuffer=i.createFramebuffer();if(ae)for(let Bt=0,qt=vt.length;Bt<qt;Bt++){const ni=n.get(vt[Bt]);void 0===ni.__webglTexture&&(ni.__webglTexture=i.createTexture(),s.memory.textures++)}if(O.samples>0&&!1===Xt(O)){Q.__webglMultisampledFramebuffer=i.createFramebuffer(),Q.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Bt=0;Bt<vt.length;Bt++){const qt=vt[Bt];Q.__webglColorRenderbuffer[Bt]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Q.__webglColorRenderbuffer[Bt]);const ni=o.convert(qt.format,qt.colorSpace),Ct=o.convert(qt.type),Kt=S(qt.internalFormat,ni,Ct,qt.colorSpace,!0===O.isXRRenderTarget),we=Mt(O);i.renderbufferStorageMultisample(i.RENDERBUFFER,we,Kt,O.width,O.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Bt,i.RENDERBUFFER,Q.__webglColorRenderbuffer[Bt])}i.bindRenderbuffer(i.RENDERBUFFER,null),O.depthBuffer&&(Q.__webglDepthRenderbuffer=i.createRenderbuffer(),yt(Q.__webglDepthRenderbuffer,O,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(ct){e.bindTexture(i.TEXTURE_CUBE_MAP,lt.__webglTexture),he(i.TEXTURE_CUBE_MAP,D);for(let Bt=0;Bt<6;Bt++)if(D.mipmaps&&D.mipmaps.length>0)for(let qt=0;qt<D.mipmaps.length;qt++)Yt(Q.__webglFramebuffer[Bt][qt],O,D,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,qt);else Yt(Q.__webglFramebuffer[Bt],O,D,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Bt,0);y(D)&&v(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(ae){for(let Bt=0,qt=vt.length;Bt<qt;Bt++){const ni=vt[Bt],Ct=n.get(ni);e.bindTexture(i.TEXTURE_2D,Ct.__webglTexture),he(i.TEXTURE_2D,ni),Yt(Q.__webglFramebuffer,O,ni,i.COLOR_ATTACHMENT0+Bt,i.TEXTURE_2D,0),y(ni)&&v(i.TEXTURE_2D)}e.unbindTexture()}else{let Bt=i.TEXTURE_2D;if((O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(Bt=O.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Bt,lt.__webglTexture),he(Bt,D),D.mipmaps&&D.mipmaps.length>0)for(let qt=0;qt<D.mipmaps.length;qt++)Yt(Q.__webglFramebuffer[qt],O,D,i.COLOR_ATTACHMENT0,Bt,qt);else Yt(Q.__webglFramebuffer,O,D,i.COLOR_ATTACHMENT0,Bt,0);y(D)&&v(Bt),e.unbindTexture()}O.depthBuffer&&se(O)},this.updateRenderTargetMipmap=function _t(O){const D=O.textures;for(let Q=0,lt=D.length;Q<lt;Q++){const vt=D[Q];if(y(vt)){const ct=w(O),ae=n.get(vt).__webglTexture;e.bindTexture(ct,ae),v(ct),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function le(O){if(O.samples>0)if(!1===Xt(O)){const D=O.textures,Q=O.width,lt=O.height;let vt=i.COLOR_BUFFER_BIT;const ct=O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ae=n.get(O),Bt=D.length>1;if(Bt)for(let qt=0;qt<D.length;qt++)e.bindFramebuffer(i.FRAMEBUFFER,ae.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+qt,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ae.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+qt,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ae.__webglMultisampledFramebuffer),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ae.__webglFramebuffer);for(let qt=0;qt<D.length;qt++){if(O.resolveDepthBuffer&&(O.depthBuffer&&(vt|=i.DEPTH_BUFFER_BIT),O.stencilBuffer&&O.resolveStencilBuffer&&(vt|=i.STENCIL_BUFFER_BIT)),Bt){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ae.__webglColorRenderbuffer[qt]);const ni=n.get(D[qt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,ni,0)}i.blitFramebuffer(0,0,Q,lt,0,0,Q,lt,vt,i.NEAREST),!0===l&&(Dt.length=0,z.length=0,Dt.push(i.COLOR_ATTACHMENT0+qt),O.depthBuffer&&!1===O.resolveDepthBuffer&&(Dt.push(ct),z.push(ct),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,z)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Dt))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Bt)for(let qt=0;qt<D.length;qt++){e.bindFramebuffer(i.FRAMEBUFFER,ae.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+qt,i.RENDERBUFFER,ae.__webglColorRenderbuffer[qt]);const ni=n.get(D[qt]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ae.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+qt,i.TEXTURE_2D,ni,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ae.__webglMultisampledFramebuffer)}else O.depthBuffer&&!1===O.resolveDepthBuffer&&l&&i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[O.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=se,this.setupFrameBufferTexture=Yt,this.useMultisampledRTT=Xt}function fet(i,t){return{convert:function e(n,r=""){let o;const s=li.getTransfer(r);if(n===ea)return i.UNSIGNED_BYTE;if(n===TS)return i.UNSIGNED_SHORT_4_4_4_4;if(n===DS)return i.UNSIGNED_SHORT_5_5_5_1;if(n===yF)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===_F)return i.BYTE;if(n===vF)return i.SHORT;if(n===Cm)return i.UNSIGNED_SHORT;if(n===ES)return i.INT;if(n===hl)return i.UNSIGNED_INT;if(n===uo)return i.FLOAT;if(n===Em)return i.HALF_FLOAT;if(n===bF)return i.ALPHA;if(n===xF)return i.RGB;if(n===Vr)return i.RGBA;if(n===wF)return i.LUMINANCE;if(n===MF)return i.LUMINANCE_ALPHA;if(n===Hu)return i.DEPTH_COMPONENT;if(n===Gu)return i.DEPTH_STENCIL;if(n===AS)return i.RED;if(n===Cv)return i.RED_INTEGER;if(n===SF)return i.RG;if(n===IS)return i.RG_INTEGER;if(n===RS)return i.RGBA_INTEGER;if(n===Ev||n===Tv||n===Dv||n===Av)if(s===Oi){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===Ev)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Tv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Dv)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Av)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===Ev)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Tv)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Dv)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Av)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===kS||n===PS||n===OS||n===LS){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(n===kS)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===PS)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===OS)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===LS)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===FS||n===NS||n===BS){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(n===FS||n===NS)return s===Oi?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===BS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(n===US||n===zS||n===VS||n===HS||n===GS||n===WS||n===jS||n===$S||n===qS||n===ZS||n===XS||n===YS||n===KS||n===QS){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(n===US)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===zS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===VS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===HS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===GS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===WS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===jS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===$S)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===qS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===ZS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===XS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===YS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===KS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===QS)return s===Oi?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Iv||n===JS||n===tC){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===Iv)return s===Oi?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===JS)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===tC)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===CF||n===eC||n===iC||n===nC){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===Iv)return o.COMPRESSED_RED_RGTC1_EXT;if(n===eC)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===iC)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===nC)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Vu?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}class met extends er{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Bm extends Yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const pet={type:"move"};class HC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,o=null,s=null;const a=this._targetRay,l=this._grip,d=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(d&&t.hand){s=!0;for(const b of t.hand.values()){const y=e.getJointPose(b,n),v=this._getHandJoint(d,b);null!==y&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=y.radius),v.visible=null!==y}const m=d.joints["index-finger-tip"].position.distanceTo(d.joints["thumb-tip"].position),g=.02,_=.005;d.inputState.pinching&&m>g+_?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&m<=g-_&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),null!==o&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==o&&(r=o),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(pet)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==o),null!==d&&(d.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Bm;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class vet{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new Hr;t.properties.get(r).__webglTexture=e.texture,(e.depthNear!=n.depthNear||e.depthFar!=n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new Cs({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Dn(new Fm(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class yet extends na{constructor(t,e){super();const n=this;let r=null,o=1,s=null,a="local-floor",l=1,d=null,h=null,f=null,m=null,g=null,_=null;const b=new vet,y=e.getContextAttributes();let v=null,w=null;const S=[],C=[],F=new gt;let k=null;const P=new er;P.viewport=new fi;const B=new er;B.viewport=new fi;const I=[P,B],T=new met;let H=null,et=null;function K(rt){const Tt=C.indexOf(rt.inputSource);if(-1===Tt)return;const Yt=S[Tt];void 0!==Yt&&(Yt.update(rt.inputSource,rt.frame,d||s),Yt.dispatchEvent({type:rt.type,data:rt.inputSource}))}function ot(){r.removeEventListener("select",K),r.removeEventListener("selectstart",K),r.removeEventListener("selectend",K),r.removeEventListener("squeeze",K),r.removeEventListener("squeezestart",K),r.removeEventListener("squeezeend",K),r.removeEventListener("end",ot),r.removeEventListener("inputsourceschange",mt);for(let rt=0;rt<S.length;rt++){const Tt=C[rt];null!==Tt&&(C[rt]=null,S[rt].disconnect(Tt))}H=null,et=null,b.reset(),t.setRenderTarget(v),g=null,m=null,f=null,r=null,w=null,Xe.stop(),n.isPresenting=!1,t.setPixelRatio(k),t.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}function mt(rt){for(let Tt=0;Tt<rt.removed.length;Tt++){const Yt=rt.removed[Tt],yt=C.indexOf(Yt);yt>=0&&(C[yt]=null,S[yt].disconnect(Yt))}for(let Tt=0;Tt<rt.added.length;Tt++){const Yt=rt.added[Tt];let yt=C.indexOf(Yt);if(-1===yt){for(let se=0;se<S.length;se++){if(se>=C.length){C.push(Yt),yt=se;break}if(null===C[se]){C[se]=Yt,yt=se;break}}if(-1===yt)break}const te=S[yt];te&&te.connect(Yt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(rt){let Tt=S[rt];return void 0===Tt&&(Tt=new HC,S[rt]=Tt),Tt.getTargetRaySpace()},this.getControllerGrip=function(rt){let Tt=S[rt];return void 0===Tt&&(Tt=new HC,S[rt]=Tt),Tt.getGripSpace()},this.getHand=function(rt){let Tt=S[rt];return void 0===Tt&&(Tt=new HC,S[rt]=Tt),Tt.getHandSpace()},this.setFramebufferScaleFactor=function(rt){o=rt,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(rt){a=rt,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||s},this.setReferenceSpace=function(rt){d=rt},this.getBaseLayer=function(){return null!==m?m:g},this.getBinding=function(){return f},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=function(){var rt=Bu(function*(Tt){if(r=Tt,null!==r){if(v=t.getRenderTarget(),r.addEventListener("select",K),r.addEventListener("selectstart",K),r.addEventListener("selectend",K),r.addEventListener("squeeze",K),r.addEventListener("squeezestart",K),r.addEventListener("squeezeend",K),r.addEventListener("end",ot),r.addEventListener("inputsourceschange",mt),!0!==y.xrCompatible&&(yield e.makeXRCompatible()),k=t.getPixelRatio(),t.getSize(F),void 0===r.renderState.layers)g=new XRWebGLLayer(r,e,{antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o}),r.updateRenderState({baseLayer:g}),t.setPixelRatio(1),t.setSize(g.framebufferWidth,g.framebufferHeight,!1),w=new Ss(g.framebufferWidth,g.framebufferHeight,{format:Vr,type:ea,colorSpace:t.outputColorSpace,stencilBuffer:y.stencil});else{let Yt=null,yt=null,te=null;y.depth&&(te=y.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Yt=y.stencil?Gu:Hu,yt=y.stencil?Vu:hl);const se={colorFormat:e.RGBA8,depthFormat:te,scaleFactor:o};f=new XRWebGLBinding(r,e),m=f.createProjectionLayer(se),r.updateRenderState({layers:[m]}),t.setPixelRatio(1),t.setSize(m.textureWidth,m.textureHeight,!1),w=new Ss(m.textureWidth,m.textureHeight,{format:Vr,type:ea,depthTexture:new uN(m.textureWidth,m.textureHeight,yt,void 0,void 0,void 0,void 0,void 0,void 0,Yt),stencilBuffer:y.stencil,colorSpace:t.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:!1===m.ignoreDepthValues})}w.isXRRenderTarget=!0,this.setFoveation(l),d=null,s=yield r.requestReferenceSpace(a),Xe.setContext(r),Xe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Tt){return rt.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};const G=new N,it=new N;function ht(rt,Tt){null===Tt?rt.matrixWorld.copy(rt.matrix):rt.matrixWorld.multiplyMatrices(Tt.matrixWorld,rt.matrix),rt.matrixWorldInverse.copy(rt.matrixWorld).invert()}this.updateCamera=function(rt){if(null===r)return;let Tt=rt.near,Yt=rt.far;null!==b.texture&&(b.depthNear>0&&(Tt=b.depthNear),b.depthFar>0&&(Yt=b.depthFar)),T.near=B.near=P.near=Tt,T.far=B.far=P.far=Yt,(H!==T.near||et!==T.far)&&(r.updateRenderState({depthNear:T.near,depthFar:T.far}),H=T.near,et=T.far),P.layers.mask=2|rt.layers.mask,B.layers.mask=4|rt.layers.mask,T.layers.mask=P.layers.mask|B.layers.mask;const yt=rt.parent,te=T.cameras;ht(T,yt);for(let se=0;se<te.length;se++)ht(te[se],yt);2===te.length?function q(rt,Tt,Yt){G.setFromMatrixPosition(Tt.matrixWorld),it.setFromMatrixPosition(Yt.matrixWorld);const yt=G.distanceTo(it),te=Tt.projectionMatrix.elements,se=Yt.projectionMatrix.elements,_e=te[14]/(te[10]-1),ii=te[14]/(te[10]+1),_t=(te[9]+1)/te[5],Dt=(te[9]-1)/te[5],z=(te[8]-1)/te[0],le=(se[8]+1)/se[0],Mt=_e*z,Xt=_e*le,kt=yt/(-z+le),xe=kt*-z;if(Tt.matrixWorld.decompose(rt.position,rt.quaternion,rt.scale),rt.translateX(xe),rt.translateZ(kt),rt.matrixWorld.compose(rt.position,rt.quaternion,rt.scale),rt.matrixWorldInverse.copy(rt.matrixWorld).invert(),-1===te[10])rt.projectionMatrix.copy(Tt.projectionMatrix),rt.projectionMatrixInverse.copy(Tt.projectionMatrixInverse);else{const $t=_e+kt,O=ii+kt;rt.projectionMatrix.makePerspective(Mt-xe,Xt+(yt-xe),_t*ii/O*$t,Dt*ii/O*$t,$t,O),rt.projectionMatrixInverse.copy(rt.projectionMatrix).invert()}}(T,P,B):T.projectionMatrix.copy(P.projectionMatrix),function Et(rt,Tt,Yt){null===Yt?rt.matrix.copy(Tt.matrixWorld):(rt.matrix.copy(Yt.matrixWorld),rt.matrix.invert(),rt.matrix.multiply(Tt.matrixWorld)),rt.matrix.decompose(rt.position,rt.quaternion,rt.scale),rt.updateMatrixWorld(!0),rt.projectionMatrix.copy(Tt.projectionMatrix),rt.projectionMatrixInverse.copy(Tt.projectionMatrixInverse),rt.isPerspectiveCamera&&(rt.fov=2*Zu*Math.atan(1/rt.projectionMatrix.elements[5]),rt.zoom=1)}(rt,T,yt)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==m||null!==g)return l},this.setFoveation=function(rt){l=rt,null!==m&&(m.fixedFoveation=rt),null!==g&&void 0!==g.fixedFoveation&&(g.fixedFoveation=rt)},this.hasDepthSensing=function(){return null!==b.texture},this.getDepthSensingMesh=function(){return b.getMesh(T)};let Nt=null;const Xe=new nN;Xe.setAnimationLoop(function he(rt,Tt){if(h=Tt.getViewerPose(d||s),_=Tt,null!==h){const Yt=h.views;null!==g&&(t.setRenderTargetFramebuffer(w,g.framebuffer),t.setRenderTarget(w));let yt=!1;Yt.length!==T.cameras.length&&(T.cameras.length=0,yt=!0);for(let se=0;se<Yt.length;se++){const _e=Yt[se];let ii=null;if(null!==g)ii=g.getViewport(_e);else{const Dt=f.getViewSubImage(m,_e);ii=Dt.viewport,0===se&&(t.setRenderTargetTextures(w,Dt.colorTexture,m.ignoreDepthValues?void 0:Dt.depthStencilTexture),t.setRenderTarget(w))}let _t=I[se];void 0===_t&&(_t=new er,_t.layers.enable(se),_t.viewport=new fi,I[se]=_t),_t.matrix.fromArray(_e.transform.matrix),_t.matrix.decompose(_t.position,_t.quaternion,_t.scale),_t.projectionMatrix.fromArray(_e.projectionMatrix),_t.projectionMatrixInverse.copy(_t.projectionMatrix).invert(),_t.viewport.set(ii.x,ii.y,ii.width,ii.height),0===se&&(T.matrix.copy(_t.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===yt&&T.cameras.push(_t)}const te=r.enabledFeatures;if(te&&te.includes("depth-sensing")){const se=f.getDepthInformation(Yt[0]);se&&se.isValid&&se.texture&&b.init(t,se,r.renderState)}}for(let Yt=0;Yt<S.length;Yt++){const yt=C[Yt],te=S[Yt];null!==yt&&void 0!==te&&te.update(yt,Tt,d||s)}Nt&&Nt(rt,Tt),Tt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Tt}),_=null}),this.setAnimationLoop=function(rt){Nt=rt},this.dispose=function(){}}}const Nc=new aa,bet=new Ce;function xet(i,t){function e(y,v){!0===y.matrixAutoUpdate&&y.updateMatrix(),v.value.copy(y.matrix)}function o(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,e(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,e(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,e(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,1===v.side&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,e(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),1===v.side&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,e(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,e(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,e(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const w=t.get(v),S=w.envMap,C=w.envMapRotation;S&&(y.envMap.value=S,Nc.copy(C),Nc.x*=-1,Nc.y*=-1,Nc.z*=-1,S.isCubeTexture&&!1===S.isRenderTargetTexture&&(Nc.y*=-1,Nc.z*=-1),y.envMapRotation.value.setFromMatrix4(bet.makeRotationFromEuler(Nc)),y.flipEnvMap.value=S.isCubeTexture&&!1===S.isRenderTargetTexture?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap&&(y.lightMap.value=v.lightMap,y.lightMapIntensity.value=v.lightMapIntensity,e(v.lightMap,y.lightMapTransform)),v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,e(v.aoMap,y.aoMapTransform))}return{refreshFogUniforms:function n(y,v){v.color.getRGB(y.fogColor.value,tN(i)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)},refreshMaterialUniforms:function r(y,v,w,S,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?o(y,v):v.isMeshToonMaterial?(o(y,v),function f(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}(y,v)):v.isMeshPhongMaterial?(o(y,v),function h(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}(y,v)):v.isMeshStandardMaterial?(o(y,v),function m(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,e(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,e(v.roughnessMap,y.roughnessMapTransform)),v.envMap&&(y.envMapIntensity.value=v.envMapIntensity)}(y,v),v.isMeshPhysicalMaterial&&function g(y,v,w){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,e(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,e(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,e(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,e(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,e(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),1===v.side&&y.clearcoatNormalScale.value.negate())),v.dispersion>0&&(y.dispersion.value=v.dispersion),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,e(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,e(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=w.texture,y.transmissionSamplerSize.value.set(w.width,w.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,e(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,e(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(y.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(y.anisotropyMap.value=v.anisotropyMap,e(v.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,e(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,e(v.specularIntensityMap,y.specularIntensityMapTransform))}(y,v,C)):v.isMeshMatcapMaterial?(o(y,v),function _(y,v){v.matcap&&(y.matcap.value=v.matcap)}(y,v)):v.isMeshDepthMaterial?o(y,v):v.isMeshDistanceMaterial?(o(y,v),function b(y,v){const w=t.get(v).light;y.referencePosition.value.setFromMatrixPosition(w.matrixWorld),y.nearDistance.value=w.shadow.camera.near,y.farDistance.value=w.shadow.camera.far}(y,v)):v.isMeshNormalMaterial?o(y,v):v.isLineBasicMaterial?(function s(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,e(v.map,y.mapTransform))}(y,v),v.isLineDashedMaterial&&function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}(y,v)):v.isPointsMaterial?function l(y,v,w,S){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*w,y.scale.value=.5*S,v.map&&(y.map.value=v.map,e(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,e(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v,w,S):v.isSpriteMaterial?function d(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,e(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,e(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function wet(i,t,e,n){let r={},o={},s=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function g(w,S,C,F){const k=w.value,P=S+"_"+C;if(void 0===F[P])return F[P]="number"==typeof k||"boolean"==typeof k?k:k.clone(),!0;{const B=F[P];if("number"==typeof k||"boolean"==typeof k){if(B!==k)return F[P]=k,!0}else if(!1===B.equals(k))return B.copy(k),!0}return!1}function b(w){const S={boundary:0,storage:0};return"number"==typeof w||"boolean"==typeof w?(S.boundary=4,S.storage=4):w.isVector2?(S.boundary=8,S.storage=8):w.isVector3||w.isColor?(S.boundary=16,S.storage=12):w.isVector4?(S.boundary=16,S.storage=16):w.isMatrix3?(S.boundary=48,S.storage=48):w.isMatrix4?(S.boundary=64,S.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),S}function y(w){const S=w.target;S.removeEventListener("dispose",y);const C=s.indexOf(S.__bindingPointIndex);s.splice(C,1),i.deleteBuffer(r[S.id]),delete r[S.id],delete o[S.id]}return{bind:function l(w,S){n.uniformBlockBinding(w,S.program)},update:function d(w,S){let C=r[w.id];void 0===C&&(function _(w){const S=w.uniforms;let C=0;for(let P=0,B=S.length;P<B;P++){const I=Array.isArray(S[P])?S[P]:[S[P]];for(let T=0,H=I.length;T<H;T++){const et=I[T],K=Array.isArray(et.value)?et.value:[et.value];for(let ot=0,mt=K.length;ot<mt;ot++){const it=b(K[ot]),q=C%16,ht=q%it.boundary,Et=q+ht;C+=ht,0!==Et&&16-Et<it.storage&&(C+=16-Et),et.__data=new Float32Array(it.storage/Float32Array.BYTES_PER_ELEMENT),et.__offset=C,C+=it.storage}}}const k=C%16;k>0&&(C+=16-k),w.__size=C,w.__cache={}}(w),C=function h(w){const S=function f(){for(let w=0;w<a;w++)if(-1===s.indexOf(w))return s.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();w.__bindingPointIndex=S;const C=i.createBuffer(),F=w.__size,k=w.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,F,k),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,S,C),C}(w),r[w.id]=C,w.addEventListener("dispose",y)),n.updateUBOMapping(w,S.program);const k=t.render.frame;o[w.id]!==k&&(function m(w){const C=w.uniforms,F=w.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[w.id]);for(let k=0,P=C.length;k<P;k++){const B=Array.isArray(C[k])?C[k]:[C[k]];for(let I=0,T=B.length;I<T;I++){const H=B[I];if(!0===g(H,k,I,F)){const et=H.__offset,K=Array.isArray(H.value)?H.value:[H.value];let ot=0;for(let mt=0;mt<K.length;mt++){const G=K[mt],it=b(G);"number"==typeof G||"boolean"==typeof G?(H.__data[0]=G,i.bufferSubData(i.UNIFORM_BUFFER,et+ot,H.__data)):G.isMatrix3?(H.__data[0]=G.elements[0],H.__data[1]=G.elements[1],H.__data[2]=G.elements[2],H.__data[3]=0,H.__data[4]=G.elements[3],H.__data[5]=G.elements[4],H.__data[6]=G.elements[5],H.__data[7]=0,H.__data[8]=G.elements[6],H.__data[9]=G.elements[7],H.__data[10]=G.elements[8],H.__data[11]=0):(G.toArray(H.__data,ot),ot+=it.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,et,H.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(w),o[w.id]=k)},dispose:function v(){for(const w in r)i.deleteBuffer(r[w]);s=[],r={},o={}}}}class Met{constructor(t={}){const{canvas:e=GY(),context:n=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:d=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:m=!1}=t;let g;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=n.getContextAttributes().alpha}else g=s;const _=new Uint32Array(4),b=new Int32Array(4);let y=null,v=null;const w=[],S=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=ho,this.toneMapping=dl,this.toneMappingExposure=1;const C=this;let F=!1,k=0,P=0,B=null,I=-1,T=null;const H=new fi,et=new fi;let K=null;const ot=new Gt(0);let mt=0,G=e.width,it=e.height,q=1,ht=null,Et=null;const Nt=new fi(0,0,G,it),he=new fi(0,0,G,it);let Xe=!1;const rt=new ty;let Tt=!1,Yt=!1;const yt=new Ce,te=new Ce,se=new N,_e=new fi,ii={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let _t=!1;function Dt(){return null===B?q:1}let Mt,Xt,kt,xe,$t,O,D,Q,lt,vt,ct,ae,Bt,qt,ni,Ct,Kt,we,Pe,Qt,ci,$e,Gi,j,z=n;function le(R,$){return e.getContext(R,$)}try{const R={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:d,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r170"),e.addEventListener("webglcontextlost",pt,!1),e.addEventListener("webglcontextrestored",Ht,!1),e.addEventListener("webglcontextcreationerror",Vt,!1),null===z){const $="webgl2";if(z=le($,R),null===z)throw le($)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(R){throw console.error("THREE.WebGLRenderer: "+R.message),R}function Ut(){Mt=new EJ(z),Mt.init(),$e=new fet(z,Mt),Xt=new bJ(z,Mt,t,$e),kt=new set(z,Mt),Xt.reverseDepthBuffer&&m&&kt.buffers.depth.setReversed(!0),xe=new AJ(z),$t=new qtt,O=new het(z,Mt,kt,$t,Xt,$e,xe),D=new wJ(C),Q=new CJ(C),lt=new gK(z),Gi=new vJ(z,lt),vt=new TJ(z,lt,xe,Gi),ct=new RJ(z,vt,lt,xe),Pe=new IJ(z,Xt,O),Ct=new xJ($t),ae=new $tt(C,D,Q,Mt,Xt,Gi,Ct),Bt=new xet(C,$t),qt=new Xtt,ni=new eet(Mt),we=new _J(C,D,Q,kt,ct,g,l),Kt=new ret(C,ct,Xt),j=new wet(z,xe,Xt,kt),Qt=new yJ(z,Mt,xe),ci=new DJ(z,Mt,xe),xe.programs=ae.programs,C.capabilities=Xt,C.extensions=Mt,C.properties=$t,C.renderLists=qt,C.shadowMap=Kt,C.state=kt,C.info=xe}Ut();const st=new yet(C,z);function pt(R){R.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function Ht(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1;const R=xe.autoReset,$=Kt.enabled,J=Kt.autoUpdate,tt=Kt.needsUpdate,Z=Kt.type;Ut(),xe.autoReset=R,Kt.enabled=$,Kt.autoUpdate=J,Kt.needsUpdate=tt,Kt.type=Z}function Vt(R){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",R.statusMessage)}function Ve(R){const $=R.target;$.removeEventListener("dispose",Ve),function pn(R){(function mr(R){const $=$t.get(R).programs;void 0!==$&&($.forEach(function(J){ae.releaseProgram(J)}),R.isShaderMaterial&&ae.releaseShaderCache(R))})(R),$t.remove(R)}($)}function Pi(R,$,J){!0===R.transparent&&2===R.side&&!1===R.forceSinglePass?(R.side=1,R.needsUpdate=!0,Jb(R,$,J),R.side=0,R.needsUpdate=!0,Jb(R,$,J),R.side=2):Jb(R,$,J)}this.xr=st,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const R=Mt.get("WEBGL_lose_context");R&&R.loseContext()},this.forceContextRestore=function(){const R=Mt.get("WEBGL_lose_context");R&&R.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(R){void 0!==R&&(q=R,this.setSize(G,it,!1))},this.getSize=function(R){return R.set(G,it)},this.setSize=function(R,$,J=!0){st.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(G=R,it=$,e.width=Math.floor(R*q),e.height=Math.floor($*q),!0===J&&(e.style.width=R+"px",e.style.height=$+"px"),this.setViewport(0,0,R,$))},this.getDrawingBufferSize=function(R){return R.set(G*q,it*q).floor()},this.setDrawingBufferSize=function(R,$,J){G=R,it=$,q=J,e.width=Math.floor(R*J),e.height=Math.floor($*J),this.setViewport(0,0,R,$)},this.getCurrentViewport=function(R){return R.copy(H)},this.getViewport=function(R){return R.copy(Nt)},this.setViewport=function(R,$,J,tt){R.isVector4?Nt.set(R.x,R.y,R.z,R.w):Nt.set(R,$,J,tt),kt.viewport(H.copy(Nt).multiplyScalar(q).round())},this.getScissor=function(R){return R.copy(he)},this.setScissor=function(R,$,J,tt){R.isVector4?he.set(R.x,R.y,R.z,R.w):he.set(R,$,J,tt),kt.scissor(et.copy(he).multiplyScalar(q).round())},this.getScissorTest=function(){return Xe},this.setScissorTest=function(R){kt.setScissorTest(Xe=R)},this.setOpaqueSort=function(R){ht=R},this.setTransparentSort=function(R){Et=R},this.getClearColor=function(R){return R.copy(we.getClearColor())},this.setClearColor=function(){we.setClearColor.apply(we,arguments)},this.getClearAlpha=function(){return we.getClearAlpha()},this.setClearAlpha=function(){we.setClearAlpha.apply(we,arguments)},this.clear=function(R=!0,$=!0,J=!0){let tt=0;if(R){let Z=!1;if(null!==B){const At=B.texture.format;Z=At===RS||At===IS||At===Cv}if(Z){const At=B.texture.type,zt=At===ea||At===hl||At===Cm||At===Vu||At===TS||At===DS,ce=we.getClearColor(),ne=we.getClearAlpha(),Fe=ce.r,He=ce.g,de=ce.b;zt?(_[0]=Fe,_[1]=He,_[2]=de,_[3]=ne,z.clearBufferuiv(z.COLOR,0,_)):(b[0]=Fe,b[1]=He,b[2]=de,b[3]=ne,z.clearBufferiv(z.COLOR,0,b))}else tt|=z.COLOR_BUFFER_BIT}$&&(tt|=z.DEPTH_BUFFER_BIT),J&&(tt|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(tt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",pt,!1),e.removeEventListener("webglcontextrestored",Ht,!1),e.removeEventListener("webglcontextcreationerror",Vt,!1),qt.dispose(),ni.dispose(),$t.dispose(),D.dispose(),Q.dispose(),ct.dispose(),Gi.dispose(),j.dispose(),ae.dispose(),st.dispose(),st.removeEventListener("sessionstart",Rz),st.removeEventListener("sessionend",kz),dd.stop()},this.renderBufferDirect=function(R,$,J,tt,Z,At){null===$&&($=ii);const zt=Z.isMesh&&Z.matrixWorld.determinant()<0,ce=function But(R,$,J,tt,Z){!0!==$.isScene&&($=ii),O.resetTextureUnits();const At=$.fog,ce=null===B?C.outputColorSpace:!0===B.isXRRenderTarget?B.texture.colorSpace:$u,ne=(tt.isMeshStandardMaterial?Q:D).get(tt.envMap||(tt.isMeshStandardMaterial?$.environment:null)),Fe=!0===tt.vertexColors&&!!J.attributes.color&&4===J.attributes.color.itemSize,He=!!J.attributes.tangent&&(!!tt.normalMap||tt.anisotropy>0),de=!!J.morphAttributes.position,di=!!J.morphAttributes.normal,Qi=!!J.morphAttributes.color;let Li=dl;tt.toneMapped&&(null===B||!0===B.isXRRenderTarget)&&(Li=C.toneMapping);const qr=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,Ei=void 0!==qr?qr.length:0,fe=$t.get(tt),Ma=v.state.lights;!0!==Tt||!0!==Yt&&R===T||Ct.setState(tt,R,R===T&&tt.id===I);let Ti=!1;tt.version===fe.__version?(fe.needsLights&&fe.lightsStateVersion!==Ma.state.version||fe.outputColorSpace!==ce||Z.isBatchedMesh&&!1===fe.batching||!Z.isBatchedMesh&&!0===fe.batching||Z.isBatchedMesh&&!0===fe.batchingColor&&null===Z.colorTexture||Z.isBatchedMesh&&!1===fe.batchingColor&&null!==Z.colorTexture||Z.isInstancedMesh&&!1===fe.instancing||!Z.isInstancedMesh&&!0===fe.instancing||Z.isSkinnedMesh&&!1===fe.skinning||!Z.isSkinnedMesh&&!0===fe.skinning||Z.isInstancedMesh&&!0===fe.instancingColor&&null===Z.instanceColor||Z.isInstancedMesh&&!1===fe.instancingColor&&null!==Z.instanceColor||Z.isInstancedMesh&&!0===fe.instancingMorph&&null===Z.morphTexture||Z.isInstancedMesh&&!1===fe.instancingMorph&&null!==Z.morphTexture||fe.envMap!==ne||!0===tt.fog&&fe.fog!==At||void 0!==fe.numClippingPlanes&&(fe.numClippingPlanes!==Ct.numPlanes||fe.numIntersection!==Ct.numIntersection)||fe.vertexAlphas!==Fe||fe.vertexTangents!==He||fe.morphTargets!==de||fe.morphNormals!==di||fe.morphColors!==Qi||fe.toneMapping!==Li||fe.morphTargetsCount!==Ei)&&(Ti=!0):(Ti=!0,fe.__version=tt.version);let ns=fe.currentProgram;!0===Ti&&(ns=Jb(tt,$,Z));let Ph=!1,xo=!1,Ep=!1;const Ji=ns.getUniforms(),Is=fe.uniforms;if(kt.useProgram(ns.program)&&(Ph=!0,xo=!0,Ep=!0),tt.id!==I&&(I=tt.id,xo=!0),Ph||T!==R){kt.buffers.depth.getReversed()?(yt.copy(R.projectionMatrix),function jY(i){const t=i.elements;t[2]=.5*t[2]+.5*t[3],t[6]=.5*t[6]+.5*t[7],t[10]=.5*t[10]+.5*t[11],t[14]=.5*t[14]+.5*t[15]}(yt),function $Y(i){const t=i.elements;-1===t[11]?(t[10]=-t[10]-1,t[14]=-t[14]):(t[10]=-t[10],t[14]=1-t[14])}(yt),Ji.setValue(z,"projectionMatrix",yt)):Ji.setValue(z,"projectionMatrix",R.projectionMatrix),Ji.setValue(z,"viewMatrix",R.matrixWorldInverse);const Il=Ji.map.cameraPosition;void 0!==Il&&Il.setValue(z,se.setFromMatrixPosition(R.matrixWorld)),Xt.logarithmicDepthBuffer&&Ji.setValue(z,"logDepthBufFC",2/(Math.log(R.far+1)/Math.LN2)),(tt.isMeshPhongMaterial||tt.isMeshToonMaterial||tt.isMeshLambertMaterial||tt.isMeshBasicMaterial||tt.isMeshStandardMaterial||tt.isShaderMaterial)&&Ji.setValue(z,"isOrthographic",!0===R.isOrthographicCamera),T!==R&&(T=R,xo=!0,Ep=!0)}if(Z.isSkinnedMesh){Ji.setOptional(z,Z,"bindMatrix"),Ji.setOptional(z,Z,"bindMatrixInverse");const No=Z.skeleton;No&&(null===No.boneTexture&&No.computeBoneTexture(),Ji.setValue(z,"boneTexture",No.boneTexture,O))}Z.isBatchedMesh&&(Ji.setOptional(z,Z,"batchingTexture"),Ji.setValue(z,"batchingTexture",Z._matricesTexture,O),Ji.setOptional(z,Z,"batchingIdTexture"),Ji.setValue(z,"batchingIdTexture",Z._indirectTexture,O),Ji.setOptional(z,Z,"batchingColorTexture"),null!==Z._colorsTexture&&Ji.setValue(z,"batchingColorTexture",Z._colorsTexture,O));const Tp=J.morphAttributes;if((void 0!==Tp.position||void 0!==Tp.normal||void 0!==Tp.color)&&Pe.update(Z,J,ns),(xo||fe.receiveShadow!==Z.receiveShadow)&&(fe.receiveShadow=Z.receiveShadow,Ji.setValue(z,"receiveShadow",Z.receiveShadow)),tt.isMeshGouraudMaterial&&null!==tt.envMap&&(Is.envMap.value=ne,Is.flipEnvMap.value=ne.isCubeTexture&&!1===ne.isRenderTargetTexture?-1:1),tt.isMeshStandardMaterial&&null===tt.envMap&&null!==$.environment&&(Is.envMapIntensity.value=$.environmentIntensity),xo&&(Ji.setValue(z,"toneMappingExposure",C.toneMappingExposure),fe.needsLights&&function Uut(R,$){R.ambientLightColor.needsUpdate=$,R.lightProbe.needsUpdate=$,R.directionalLights.needsUpdate=$,R.directionalLightShadows.needsUpdate=$,R.pointLights.needsUpdate=$,R.pointLightShadows.needsUpdate=$,R.spotLights.needsUpdate=$,R.spotLightShadows.needsUpdate=$,R.rectAreaLights.needsUpdate=$,R.hemisphereLights.needsUpdate=$}(Is,Ep),At&&!0===tt.fog&&Bt.refreshFogUniforms(Is,At),Bt.refreshMaterialUniforms(Is,tt,q,it,v.state.transmissionRenderTarget[R.id]),ry.upload(z,Fz(fe),Is,O)),tt.isShaderMaterial&&!0===tt.uniformsNeedUpdate&&(ry.upload(z,Fz(fe),Is,O),tt.uniformsNeedUpdate=!1),tt.isSpriteMaterial&&Ji.setValue(z,"center",Z.center),Ji.setValue(z,"modelViewMatrix",Z.modelViewMatrix),Ji.setValue(z,"normalMatrix",Z.normalMatrix),Ji.setValue(z,"modelMatrix",Z.matrixWorld),tt.isShaderMaterial||tt.isRawShaderMaterial){const No=tt.uniformsGroups;for(let Il=0,Rl=No.length;Il<Rl;Il++){const Bz=No[Il];j.update(Bz,ns),j.bind(Bz,ns)}}return ns}(R,$,J,tt,Z);kt.setMaterial(tt,zt);let ne=J.index,Fe=1;if(!0===tt.wireframe){if(ne=vt.getWireframeAttribute(J),void 0===ne)return;Fe=2}const He=J.drawRange,de=J.attributes.position;let di=He.start*Fe,Qi=(He.start+He.count)*Fe;null!==At&&(di=Math.max(di,At.start*Fe),Qi=Math.min(Qi,(At.start+At.count)*Fe)),null!==ne?(di=Math.max(di,0),Qi=Math.min(Qi,ne.count)):null!=de&&(di=Math.max(di,0),Qi=Math.min(Qi,de.count));const Li=Qi-di;if(Li<0||Li===1/0)return;Gi.setup(Z,tt,ce,J,ne);let qr,Ei=Qt;if(null!==ne&&(qr=lt.get(ne),Ei=ci,Ei.setIndex(qr)),Z.isMesh)!0===tt.wireframe?(kt.setLineWidth(tt.wireframeLinewidth*Dt()),Ei.setMode(z.LINES)):Ei.setMode(z.TRIANGLES);else if(Z.isLine){let fe=tt.linewidth;void 0===fe&&(fe=1),kt.setLineWidth(fe*Dt()),Ei.setMode(Z.isLineSegments?z.LINES:Z.isLineLoop?z.LINE_LOOP:z.LINE_STRIP)}else Z.isPoints?Ei.setMode(z.POINTS):Z.isSprite&&Ei.setMode(z.TRIANGLES);if(Z.isBatchedMesh)if(null!==Z._multiDrawInstances)Ei.renderMultiDrawInstances(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount,Z._multiDrawInstances);else if(Mt.get("WEBGL_multi_draw"))Ei.renderMultiDraw(Z._multiDrawStarts,Z._multiDrawCounts,Z._multiDrawCount);else{const fe=Z._multiDrawStarts,Ma=Z._multiDrawCounts,Ti=Z._multiDrawCount,ns=ne?lt.get(ne).bytesPerElement:1,Ph=$t.get(tt).currentProgram.getUniforms();for(let xo=0;xo<Ti;xo++)Ph.setValue(z,"_gl_DrawID",xo),Ei.render(fe[xo]/ns,Ma[xo])}else if(Z.isInstancedMesh)Ei.renderInstances(di,Li,Z.count);else if(J.isInstancedBufferGeometry){const Ma=Math.min(J.instanceCount,void 0!==J._maxInstanceCount?J._maxInstanceCount:1/0);Ei.renderInstances(di,Li,Ma)}else Ei.render(di,Li)},this.compile=function(R,$,J=null){null===J&&(J=R),v=ni.get(J),v.init($),S.push(v),J.traverseVisible(function(Z){Z.isLight&&Z.layers.test($.layers)&&(v.pushLight(Z),Z.castShadow&&v.pushShadow(Z))}),R!==J&&R.traverseVisible(function(Z){Z.isLight&&Z.layers.test($.layers)&&(v.pushLight(Z),Z.castShadow&&v.pushShadow(Z))}),v.setupLights();const tt=new Set;return R.traverse(function(Z){if(!(Z.isMesh||Z.isPoints||Z.isLine||Z.isSprite))return;const At=Z.material;if(At)if(Array.isArray(At))for(let zt=0;zt<At.length;zt++){const ce=At[zt];Pi(ce,J,Z),tt.add(ce)}else Pi(At,J,Z),tt.add(At)}),S.pop(),v=null,tt},this.compileAsync=function(R,$,J=null){const tt=this.compile(R,$,J);return new Promise(Z=>{function At(){tt.forEach(function(zt){$t.get(zt).currentProgram.isReady()&&tt.delete(zt)}),0!==tt.size?setTimeout(At,10):Z(R)}null!==Mt.get("KHR_parallel_shader_compile")?At():setTimeout(At,10)})};let is=null;function Rz(){dd.stop()}function kz(){dd.start()}const dd=new nN;function bD(R,$,J,tt){if(!1===R.visible)return;if(R.layers.test($.layers))if(R.isGroup)J=R.renderOrder;else if(R.isLOD)!0===R.autoUpdate&&R.update($);else if(R.isLight)v.pushLight(R),R.castShadow&&v.pushShadow(R);else if(R.isSprite){if(!R.frustumCulled||rt.intersectsSprite(R)){tt&&_e.setFromMatrixPosition(R.matrixWorld).applyMatrix4(te);const zt=ct.update(R),ce=R.material;ce.visible&&y.push(R,zt,ce,J,_e.z,null)}}else if((R.isMesh||R.isLine||R.isPoints)&&(!R.frustumCulled||rt.intersectsObject(R))){const zt=ct.update(R),ce=R.material;if(tt&&(void 0!==R.boundingSphere?(null===R.boundingSphere&&R.computeBoundingSphere(),_e.copy(R.boundingSphere.center)):(null===zt.boundingSphere&&zt.computeBoundingSphere(),_e.copy(zt.boundingSphere.center)),_e.applyMatrix4(R.matrixWorld).applyMatrix4(te)),Array.isArray(ce)){const ne=zt.groups;for(let Fe=0,He=ne.length;Fe<He;Fe++){const de=ne[Fe],di=ce[de.materialIndex];di&&di.visible&&y.push(R,zt,di,J,_e.z,de)}}else ce.visible&&y.push(R,zt,ce,J,_e.z,null)}const At=R.children;for(let zt=0,ce=At.length;zt<ce;zt++)bD(At[zt],$,J,tt)}function Pz(R,$,J,tt){const Z=R.opaque,At=R.transmissive,zt=R.transparent;v.setupLightsView(J),!0===Tt&&Ct.setGlobalState(C.clippingPlanes,J),tt&&kt.viewport(H.copy(tt)),Z.length>0&&Qb(Z,$,J),At.length>0&&Qb(At,$,J),zt.length>0&&Qb(zt,$,J),kt.buffers.depth.setTest(!0),kt.buffers.depth.setMask(!0),kt.buffers.color.setMask(!0),kt.setPolygonOffset(!1)}function Oz(R,$,J,tt){if(null!==(!0===J.isScene?J.overrideMaterial:null))return;void 0===v.state.transmissionRenderTarget[tt.id]&&(v.state.transmissionRenderTarget[tt.id]=new Ss(1,1,{generateMipmaps:!0,type:Mt.has("EXT_color_buffer_half_float")||Mt.has("EXT_color_buffer_float")?Em:ea,minFilter:ta,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:li.workingColorSpace}));const At=v.state.transmissionRenderTarget[tt.id],zt=tt.viewport||H;At.setSize(zt.z,zt.w);const ce=C.getRenderTarget();C.setRenderTarget(At),C.getClearColor(ot),mt=C.getClearAlpha(),mt<1&&C.setClearColor(16777215,.5),C.clear(),_t&&we.render(J);const ne=C.toneMapping;C.toneMapping=dl;const Fe=tt.viewport;if(void 0!==tt.viewport&&(tt.viewport=void 0),v.setupLightsView(tt),!0===Tt&&Ct.setGlobalState(C.clippingPlanes,tt),Qb(R,J,tt),O.updateMultisampleRenderTarget(At),O.updateRenderTargetMipmap(At),!1===Mt.has("WEBGL_multisampled_render_to_texture")){let He=!1;for(let de=0,di=$.length;de<di;de++){const Qi=$[de],Li=Qi.object,qr=Qi.geometry,Ei=Qi.material,fe=Qi.group;if(2===Ei.side&&Li.layers.test(tt.layers)){const Ma=Ei.side;Ei.side=1,Ei.needsUpdate=!0,Lz(Li,J,tt,qr,Ei,fe),Ei.side=Ma,Ei.needsUpdate=!0,He=!0}}!0===He&&(O.updateMultisampleRenderTarget(At),O.updateRenderTargetMipmap(At))}C.setRenderTarget(ce),C.setClearColor(ot,mt),void 0!==Fe&&(tt.viewport=Fe),C.toneMapping=ne}function Qb(R,$,J){const tt=!0===$.isScene?$.overrideMaterial:null;for(let Z=0,At=R.length;Z<At;Z++){const zt=R[Z],ce=zt.object,ne=zt.geometry,Fe=null===tt?zt.material:tt,He=zt.group;ce.layers.test(J.layers)&&Lz(ce,$,J,ne,Fe,He)}}function Lz(R,$,J,tt,Z,At){R.onBeforeRender(C,$,J,tt,Z,At),R.modelViewMatrix.multiplyMatrices(J.matrixWorldInverse,R.matrixWorld),R.normalMatrix.getNormalMatrix(R.modelViewMatrix),Z.onBeforeRender(C,$,J,tt,R,At),!0===Z.transparent&&2===Z.side&&!1===Z.forceSinglePass?(Z.side=1,Z.needsUpdate=!0,C.renderBufferDirect(J,$,tt,Z,R,At),Z.side=0,Z.needsUpdate=!0,C.renderBufferDirect(J,$,tt,Z,R,At),Z.side=2):C.renderBufferDirect(J,$,tt,Z,R,At),R.onAfterRender(C,$,J,tt,Z,At)}function Jb(R,$,J){!0!==$.isScene&&($=ii);const tt=$t.get(R),Z=v.state.lights,zt=Z.state.version,ce=ae.getParameters(R,Z.state,v.state.shadowsArray,$,J),ne=ae.getProgramCacheKey(ce);let Fe=tt.programs;tt.environment=R.isMeshStandardMaterial?$.environment:null,tt.fog=$.fog,tt.envMap=(R.isMeshStandardMaterial?Q:D).get(R.envMap||tt.environment),tt.envMapRotation=null!==tt.environment&&null===R.envMap?$.environmentRotation:R.envMapRotation,void 0===Fe&&(R.addEventListener("dispose",Ve),Fe=new Map,tt.programs=Fe);let He=Fe.get(ne);if(void 0!==He){if(tt.currentProgram===He&&tt.lightsStateVersion===zt)return Nz(R,ce),He}else ce.uniforms=ae.getUniforms(R),R.onBeforeCompile(ce,C),He=ae.acquireProgram(ce,ne),Fe.set(ne,He),tt.uniforms=ce.uniforms;const de=tt.uniforms;return(!R.isShaderMaterial&&!R.isRawShaderMaterial||!0===R.clipping)&&(de.clippingPlanes=Ct.uniform),Nz(R,ce),tt.needsLights=function zut(R){return R.isMeshLambertMaterial||R.isMeshToonMaterial||R.isMeshPhongMaterial||R.isMeshStandardMaterial||R.isShadowMaterial||R.isShaderMaterial&&!0===R.lights}(R),tt.lightsStateVersion=zt,tt.needsLights&&(de.ambientLightColor.value=Z.state.ambient,de.lightProbe.value=Z.state.probe,de.directionalLights.value=Z.state.directional,de.directionalLightShadows.value=Z.state.directionalShadow,de.spotLights.value=Z.state.spot,de.spotLightShadows.value=Z.state.spotShadow,de.rectAreaLights.value=Z.state.rectArea,de.ltc_1.value=Z.state.rectAreaLTC1,de.ltc_2.value=Z.state.rectAreaLTC2,de.pointLights.value=Z.state.point,de.pointLightShadows.value=Z.state.pointShadow,de.hemisphereLights.value=Z.state.hemi,de.directionalShadowMap.value=Z.state.directionalShadowMap,de.directionalShadowMatrix.value=Z.state.directionalShadowMatrix,de.spotShadowMap.value=Z.state.spotShadowMap,de.spotLightMatrix.value=Z.state.spotLightMatrix,de.spotLightMap.value=Z.state.spotLightMap,de.pointShadowMap.value=Z.state.pointShadowMap,de.pointShadowMatrix.value=Z.state.pointShadowMatrix),tt.currentProgram=He,tt.uniformsList=null,He}function Fz(R){if(null===R.uniformsList){const $=R.currentProgram.getUniforms();R.uniformsList=ry.seqWithValue($.seq,R.uniforms)}return R.uniformsList}function Nz(R,$){const J=$t.get(R);J.outputColorSpace=$.outputColorSpace,J.batching=$.batching,J.batchingColor=$.batchingColor,J.instancing=$.instancing,J.instancingColor=$.instancingColor,J.instancingMorph=$.instancingMorph,J.skinning=$.skinning,J.morphTargets=$.morphTargets,J.morphNormals=$.morphNormals,J.morphColors=$.morphColors,J.morphTargetsCount=$.morphTargetsCount,J.numClippingPlanes=$.numClippingPlanes,J.numIntersection=$.numClipIntersection,J.vertexAlphas=$.vertexAlphas,J.vertexTangents=$.vertexTangents,J.toneMapping=$.toneMapping}dd.setAnimationLoop(function wa(R){is&&is(R)}),typeof self<"u"&&dd.setContext(self),this.setAnimationLoop=function(R){is=R,st.setAnimationLoop(R),null===R?dd.stop():dd.start()},st.addEventListener("sessionstart",Rz),st.addEventListener("sessionend",kz),this.render=function(R,$){if(void 0!==$&&!0!==$.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===F)return;if(!0===R.matrixWorldAutoUpdate&&R.updateMatrixWorld(),null===$.parent&&!0===$.matrixWorldAutoUpdate&&$.updateMatrixWorld(),!0===st.enabled&&!0===st.isPresenting&&(!0===st.cameraAutoUpdate&&st.updateCamera($),$=st.getCamera()),!0===R.isScene&&R.onBeforeRender(C,R,$,B),v=ni.get(R,S.length),v.init($),S.push(v),te.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),rt.setFromProjectionMatrix(te),Yt=this.localClippingEnabled,Tt=Ct.init(this.clippingPlanes,Yt),y=qt.get(R,w.length),y.init(),w.push(y),!0===st.enabled&&!0===st.isPresenting){const At=C.xr.getDepthSensingMesh();null!==At&&bD(At,$,-1/0,C.sortObjects)}bD(R,$,0,C.sortObjects),y.finish(),!0===C.sortObjects&&y.sort(ht,Et),_t=!1===st.enabled||!1===st.isPresenting||!1===st.hasDepthSensing(),_t&&we.addToRenderList(y,R),this.info.render.frame++,!0===Tt&&Ct.beginShadows(),Kt.render(v.state.shadowsArray,R,$),!0===Tt&&Ct.endShadows(),!0===this.info.autoReset&&this.info.reset();const tt=y.opaque,Z=y.transmissive;if(v.setupLights(),$.isArrayCamera){const At=$.cameras;if(Z.length>0)for(let zt=0,ce=At.length;zt<ce;zt++)Oz(tt,Z,R,At[zt]);_t&&we.render(R);for(let zt=0,ce=At.length;zt<ce;zt++){const ne=At[zt];Pz(y,R,ne,ne.viewport)}}else Z.length>0&&Oz(tt,Z,R,$),_t&&we.render(R),Pz(y,R,$);null!==B&&(O.updateMultisampleRenderTarget(B),O.updateRenderTargetMipmap(B)),!0===R.isScene&&R.onAfterRender(C,R,$),Gi.resetDefaultState(),I=-1,T=null,S.pop(),S.length>0?(v=S[S.length-1],!0===Tt&&Ct.setGlobalState(C.clippingPlanes,v.state.camera)):v=null,w.pop(),y=w.length>0?w[w.length-1]:null},this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(R,$,J){$t.get(R.texture).__webglTexture=$,$t.get(R.depthTexture).__webglTexture=J;const tt=$t.get(R);tt.__hasExternalTextures=!0,tt.__autoAllocateDepthBuffer=void 0===J,tt.__autoAllocateDepthBuffer||!0===Mt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),tt.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(R,$){const J=$t.get(R);J.__webglFramebuffer=$,J.__useDefaultFramebuffer=void 0===$},this.setRenderTarget=function(R,$=0,J=0){B=R,k=$,P=J;let tt=!0,Z=null,At=!1,zt=!1;if(R){const ne=$t.get(R);if(void 0!==ne.__useDefaultFramebuffer)kt.bindFramebuffer(z.FRAMEBUFFER,null),tt=!1;else if(void 0===ne.__webglFramebuffer)O.setupRenderTarget(R);else if(ne.__hasExternalTextures)O.rebindTextures(R,$t.get(R.texture).__webglTexture,$t.get(R.depthTexture).__webglTexture);else if(R.depthBuffer){const de=R.depthTexture;if(ne.__boundDepthTexture!==de){if(null!==de&&$t.has(de)&&(R.width!==de.image.width||R.height!==de.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");O.setupDepthRenderbuffer(R)}}const Fe=R.texture;(Fe.isData3DTexture||Fe.isDataArrayTexture||Fe.isCompressedArrayTexture)&&(zt=!0);const He=$t.get(R).__webglFramebuffer;R.isWebGLCubeRenderTarget?(Z=Array.isArray(He[$])?He[$][J]:He[$],At=!0):Z=R.samples>0&&!1===O.useMultisampledRTT(R)?$t.get(R).__webglMultisampledFramebuffer:Array.isArray(He)?He[J]:He,H.copy(R.viewport),et.copy(R.scissor),K=R.scissorTest}else H.copy(Nt).multiplyScalar(q).floor(),et.copy(he).multiplyScalar(q).floor(),K=Xe;if(kt.bindFramebuffer(z.FRAMEBUFFER,Z)&&tt&&kt.drawBuffers(R,Z),kt.viewport(H),kt.scissor(et),kt.setScissorTest(K),At){const ne=$t.get(R.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+$,ne.__webglTexture,J)}else if(zt){const ne=$t.get(R.texture);z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,ne.__webglTexture,J||0,$||0)}I=-1},this.readRenderTargetPixels=function(R,$,J,tt,Z,At,zt){if(!R||!R.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ce=$t.get(R).__webglFramebuffer;if(R.isWebGLCubeRenderTarget&&void 0!==zt&&(ce=ce[zt]),ce){kt.bindFramebuffer(z.FRAMEBUFFER,ce);try{const ne=R.texture,Fe=ne.format,He=ne.type;if(!Xt.textureFormatReadable(Fe))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Xt.textureTypeReadable(He))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");$>=0&&$<=R.width-tt&&J>=0&&J<=R.height-Z&&z.readPixels($,J,tt,Z,$e.convert(Fe),$e.convert(He),At)}finally{const ne=null!==B?$t.get(B).__webglFramebuffer:null;kt.bindFramebuffer(z.FRAMEBUFFER,ne)}}},this.readRenderTargetPixelsAsync=function(){var R=Bu(function*($,J,tt,Z,At,zt,ce){if(!$||!$.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ne=$t.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&void 0!==ce&&(ne=ne[ce]),ne){const Fe=$.texture,He=Fe.format,de=Fe.type;if(!Xt.textureFormatReadable(He))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Xt.textureTypeReadable(de))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(J>=0&&J<=$.width-Z&&tt>=0&&tt<=$.height-At){kt.bindFramebuffer(z.FRAMEBUFFER,ne);const di=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,di),z.bufferData(z.PIXEL_PACK_BUFFER,zt.byteLength,z.STREAM_READ),z.readPixels(J,tt,Z,At,$e.convert(He),$e.convert(de),0);const Qi=null!==B?$t.get(B).__webglFramebuffer:null;kt.bindFramebuffer(z.FRAMEBUFFER,Qi);const Li=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);return z.flush(),yield function WY(i,t,e){return new Promise(function(n,r){setTimeout(function o(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:n()}},e)})}(z,Li,4),z.bindBuffer(z.PIXEL_PACK_BUFFER,di),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,zt),z.deleteBuffer(di),z.deleteSync(Li),zt}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}});return function($,J,tt,Z,At,zt,ce){return R.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(R,$=null,J=0){!0!==R.isTexture&&(Am("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$=arguments[0]||null,R=arguments[1]);const tt=Math.pow(2,-J),Z=Math.floor(R.image.width*tt),At=Math.floor(R.image.height*tt),zt=null!==$?$.x:0,ce=null!==$?$.y:0;O.setTexture2D(R,0),z.copyTexSubImage2D(z.TEXTURE_2D,J,0,0,zt,ce,Z,At),kt.unbindTexture()},this.copyTextureToTexture=function(R,$,J=null,tt=null,Z=0){let At,zt,ce,ne,Fe,He,de,di,Qi;!0!==R.isTexture&&(Am("WebGLRenderer: copyTextureToTexture function signature has changed."),tt=arguments[0]||null,R=arguments[1],$=arguments[2],Z=arguments[3]||0,J=null);const Li=R.isCompressedTexture?R.mipmaps[Z]:R.image;null!==J?(At=J.max.x-J.min.x,zt=J.max.y-J.min.y,ce=J.isBox3?J.max.z-J.min.z:1,ne=J.min.x,Fe=J.min.y,He=J.isBox3?J.min.z:0):(At=Li.width,zt=Li.height,ce=Li.depth||1,ne=0,Fe=0,He=0),null!==tt?(de=tt.x,di=tt.y,Qi=tt.z):(de=0,di=0,Qi=0);const qr=$e.convert($.format),Ei=$e.convert($.type);let fe;$.isData3DTexture?(O.setTexture3D($,0),fe=z.TEXTURE_3D):$.isDataArrayTexture||$.isCompressedArrayTexture?(O.setTexture2DArray($,0),fe=z.TEXTURE_2D_ARRAY):(O.setTexture2D($,0),fe=z.TEXTURE_2D),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,$.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,$.unpackAlignment);const Ma=z.getParameter(z.UNPACK_ROW_LENGTH),Ti=z.getParameter(z.UNPACK_IMAGE_HEIGHT),ns=z.getParameter(z.UNPACK_SKIP_PIXELS),Ph=z.getParameter(z.UNPACK_SKIP_ROWS),xo=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,Li.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Li.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,ne),z.pixelStorei(z.UNPACK_SKIP_ROWS,Fe),z.pixelStorei(z.UNPACK_SKIP_IMAGES,He);const Ep=R.isDataArrayTexture||R.isData3DTexture,Ji=$.isDataArrayTexture||$.isData3DTexture;if(R.isRenderTargetTexture||R.isDepthTexture){const Is=$t.get(R),Tp=$t.get($),No=$t.get(Is.__renderTarget),Il=$t.get(Tp.__renderTarget);kt.bindFramebuffer(z.READ_FRAMEBUFFER,No.__webglFramebuffer),kt.bindFramebuffer(z.DRAW_FRAMEBUFFER,Il.__webglFramebuffer);for(let Rl=0;Rl<ce;Rl++)Ep&&z.framebufferTextureLayer(z.READ_FRAMEBUFFER,z.COLOR_ATTACHMENT0,$t.get(R).__webglTexture,Z,He+Rl),R.isDepthTexture?(Ji&&z.framebufferTextureLayer(z.DRAW_FRAMEBUFFER,z.COLOR_ATTACHMENT0,$t.get($).__webglTexture,Z,Qi+Rl),z.blitFramebuffer(ne,Fe,At,zt,de,di,At,zt,z.DEPTH_BUFFER_BIT,z.NEAREST)):Ji?z.copyTexSubImage3D(fe,Z,de,di,Qi+Rl,ne,Fe,At,zt):z.copyTexSubImage2D(fe,Z,de,di,Qi+Rl,ne,Fe,At,zt);kt.bindFramebuffer(z.READ_FRAMEBUFFER,null),kt.bindFramebuffer(z.DRAW_FRAMEBUFFER,null)}else Ji?R.isDataTexture||R.isData3DTexture?z.texSubImage3D(fe,Z,de,di,Qi,At,zt,ce,qr,Ei,Li.data):$.isCompressedArrayTexture?z.compressedTexSubImage3D(fe,Z,de,di,Qi,At,zt,ce,qr,Li.data):z.texSubImage3D(fe,Z,de,di,Qi,At,zt,ce,qr,Ei,Li):R.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,Z,de,di,At,zt,qr,Ei,Li.data):R.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,Z,de,di,Li.width,Li.height,qr,Li.data):z.texSubImage2D(z.TEXTURE_2D,Z,de,di,At,zt,qr,Ei,Li);z.pixelStorei(z.UNPACK_ROW_LENGTH,Ma),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Ti),z.pixelStorei(z.UNPACK_SKIP_PIXELS,ns),z.pixelStorei(z.UNPACK_SKIP_ROWS,Ph),z.pixelStorei(z.UNPACK_SKIP_IMAGES,xo),0===Z&&$.generateMipmaps&&z.generateMipmap(fe),kt.unbindTexture()},this.copyTextureToTexture3D=function(R,$,J=null,tt=null,Z=0){return!0!==R.isTexture&&(Am("WebGLRenderer: copyTextureToTexture3D function signature has changed."),J=arguments[0]||null,tt=arguments[1]||null,R=arguments[2],$=arguments[3],Z=arguments[4]||0),Am('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(R,$,J,tt,Z)},this.initRenderTarget=function(R){void 0===$t.get(R).__webglFramebuffer&&O.setupRenderTarget(R)},this.initTexture=function(R){R.isCubeTexture?O.setTextureCube(R,0):R.isData3DTexture?O.setTexture3D(R,0):R.isDataArrayTexture||R.isCompressedArrayTexture?O.setTexture2DArray(R,0):O.setTexture2D(R,0),kt.unbindTexture()},this.resetState=function(){k=0,P=0,B=null,kt.reset(),Gi.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ia}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=li._getDrawingBufferColorSpace(t),e.unpackColorSpace=li._getUnpackColorSpace()}}class LN extends Yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new aa,this.environmentIntensity=1,this.environmentRotation=new aa,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class Ts{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),o=0;e.push(0);for(let s=1;s<=t;s++)n=this.getPoint(s/t),o+=n.distanceTo(r),e.push(o),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const o=n.length;let s;s=e||t*n[o-1];let d,a=0,l=o-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),d=n[r]-s,d<0)a=r+1;else{if(!(d>0)){l=r;break}l=r-1}if(r=l,n[r]===s)return r/(o-1);const h=n[r];return(r+(s-h)/(n[r+1]-h))/(o-1)}getTangent(t,e){let r=t-1e-4,o=t+1e-4;r<0&&(r=0),o>1&&(o=1);const s=this.getPoint(r),a=this.getPoint(o),l=e||(s.isVector2?new gt:new N);return l.copy(a).sub(s).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new N,r=[],o=[],s=[],a=new N,l=new Ce;for(let g=0;g<=t;g++)r[g]=this.getTangentAt(g/t,new N);o[0]=new N,s[0]=new N;let d=Number.MAX_VALUE;const h=Math.abs(r[0].x),f=Math.abs(r[0].y),m=Math.abs(r[0].z);h<=d&&(d=h,n.set(1,0,0)),f<=d&&(d=f,n.set(0,1,0)),m<=d&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],a),s[0].crossVectors(r[0],o[0]);for(let g=1;g<=t;g++){if(o[g]=o[g-1].clone(),s[g]=s[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(hn(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(l.makeRotationAxis(a,_))}s[g].crossVectors(r[g],o[g])}if(!0===e){let g=Math.acos(hn(o[0].dot(o[t]),-1,1));g/=t,r[0].dot(a.crossVectors(o[0],o[t]))>0&&(g=-g);for(let _=1;_<=t;_++)o[_].applyMatrix4(l.makeRotationAxis(r[_],g*_)),s[_].crossVectors(r[_],o[_])}return{tangents:r,normals:o,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class iE extends Ts{constructor(t=0,e=0,n=1,r=1,o=0,s=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(t,e=new gt){const n=e,r=2*Math.PI;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=s?0:r),!0===this.aClockwise&&!s&&(o===r?o=-r:o-=r);const a=this.aStartAngle+t*o;let l=this.aX+this.xRadius*Math.cos(a),d=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const h=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=l-this.aX,g=d-this.aY;l=m*h-g*f+this.aX,d=m*f+g*h+this.aY}return n.set(l,d)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function nE(){let i=0,t=0,e=0,n=0;function r(o,s,a,l){i=o,t=a,e=-3*o+3*s-2*a-l,n=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,d){r(s,a,d*(a-o),d*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,d,h,f){let m=(s-o)/d-(a-o)/(d+h)+(a-s)/h,g=(a-s)/h-(l-s)/(h+f)+(l-a)/f;m*=h,g*=h,r(s,a,m,g)},calc:function(o){const s=o*o;return i+t*o+e*s+n*(s*o)}}}const by=new N,rE=new nE,oE=new nE,sE=new nE;function o2(i,t,e,n,r){const o=.5*(n-t),s=.5*(r-e),a=i*i;return(2*e-2*n+o+s)*(i*a)+(-3*e+3*n-2*o-s)*a+o*i+e}function qm(i,t,e,n){return function Get(i,t){const e=1-i;return e*e*t}(i,t)+function Wet(i,t){return 2*(1-i)*i*t}(i,e)+function jet(i,t){return i*i*t}(i,n)}function Zm(i,t,e,n,r){return function $et(i,t){const e=1-i;return e*e*e*t}(i,t)+function qet(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function Zet(i,t){return 3*(1-i)*i*i*t}(i,n)+function Xet(i,t){return i*i*i*t}(i,r)}class s2 extends Ts{constructor(t=new gt,e=new gt,n=new gt,r=new gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new gt){const n=e,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Zm(t,r.x,o.x,s.x,a.x),Zm(t,r.y,o.y,s.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class a2 extends Ts{constructor(t=new gt,e=new gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new gt){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new gt){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class l2 extends Ts{constructor(t=new gt,e=new gt,n=new gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new gt){const n=e,r=this.v0,o=this.v1,s=this.v2;return n.set(qm(t,r.x,o.x,s.x),qm(t,r.y,o.y,s.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class d2 extends Ts{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new gt){const n=e,r=this.points,o=(r.length-1)*t,s=Math.floor(o),a=o-s,l=r[0===s?s:s-1],d=r[s],h=r[s>r.length-2?r.length-1:s+1],f=r[s>r.length-3?r.length-1:s+2];return n.set(o2(a,l.x,d.x,h.x,f.x),o2(a,l.y,d.y,h.y,f.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new gt).fromArray(r))}return this}}var xy=Object.freeze({__proto__:null,ArcCurve:class Vet extends iE{constructor(t,e,n,r,o,s){super(t,e,n,n,r,o,s),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class Het extends Ts{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new N){const n=e,r=this.points,o=r.length,s=(o-(this.closed?0:1))*t;let d,h,a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:0===l&&a===o-1&&(a=o-2,l=1),this.closed||a>0?d=r[(a-1)%o]:(by.subVectors(r[0],r[1]).add(r[0]),d=by);const f=r[a%o],m=r[(a+1)%o];if(this.closed||a+2<o?h=r[(a+2)%o]:(by.subVectors(r[o-1],r[o-2]).add(r[o-1]),h=by),"centripetal"===this.curveType||"chordal"===this.curveType){const g="chordal"===this.curveType?.5:.25;let _=Math.pow(d.distanceToSquared(f),g),b=Math.pow(f.distanceToSquared(m),g),y=Math.pow(m.distanceToSquared(h),g);b<1e-4&&(b=1),_<1e-4&&(_=b),y<1e-4&&(y=b),rE.initNonuniformCatmullRom(d.x,f.x,m.x,h.x,_,b,y),oE.initNonuniformCatmullRom(d.y,f.y,m.y,h.y,_,b,y),sE.initNonuniformCatmullRom(d.z,f.z,m.z,h.z,_,b,y)}else"catmullrom"===this.curveType&&(rE.initCatmullRom(d.x,f.x,m.x,h.x,this.tension),oE.initCatmullRom(d.y,f.y,m.y,h.y,this.tension),sE.initCatmullRom(d.z,f.z,m.z,h.z,this.tension));return n.set(rE.calc(l),oE.calc(l),sE.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new N).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:s2,CubicBezierCurve3:class Yet extends Ts{constructor(t=new N,e=new N,n=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new N){const n=e,r=this.v0,o=this.v1,s=this.v2,a=this.v3;return n.set(Zm(t,r.x,o.x,s.x,a.x),Zm(t,r.y,o.y,s.y,a.y),Zm(t,r.z,o.z,s.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:iE,LineCurve:a2,LineCurve3:class Ket extends Ts{constructor(t=new N,e=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new N){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new N){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:l2,QuadraticBezierCurve3:class c2 extends Ts{constructor(t=new N,e=new N,n=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new N){const n=e,r=this.v0,o=this.v1,s=this.v2;return n.set(qm(t,r.x,o.x,s.x),qm(t,r.y,o.y,s.y),qm(t,r.z,o.z,s.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:d2});class Qet extends Ts{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new xy[!0===t.isVector2?"LineCurve":"LineCurve3"](e,t)),this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let o=0;for(;o<r.length;){if(r[o]>=n){const s=r[o]-n,a=this.curves[o],l=a.getLength();return a.getPointAt(0===l?0:1-s/l,e)}o++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,o=this.curves;r<o.length;r++){const s=o[r],l=s.getPoints(s.isEllipseCurve?2*t:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?t*s.points.length:t);for(let d=0;d<l.length;d++){const h=l[d];n&&n.equals(h)||(e.push(h),n=h)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new xy[r.type]).fromJSON(r))}return this}}class wy extends Qet{constructor(t){super(),this.type="Path",this.currentPoint=new gt,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new a2(this.currentPoint.clone(),new gt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const o=new l2(this.currentPoint.clone(),new gt(t,e),new gt(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,o,s){const a=new s2(this.currentPoint.clone(),new gt(t,e),new gt(n,r),new gt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new d2(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,o,s){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,o,s),this}absarc(t,e,n,r,o,s){return this.absellipse(t,e,n,n,r,o,s),this}ellipse(t,e,n,r,o,s,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,o,s,a,l),this}absellipse(t,e,n,r,o,s,a,l){const d=new iE(t,e,n,r,o,s,a,l);if(this.curves.length>0){const f=d.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(d);const h=d.getPoint(1);return this.currentPoint.copy(h),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Hc extends wy{constructor(t){super(t),this.uuid=fo(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++)this.holes.push(t.holes[e].clone());return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++)t.holes.push(this.holes[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const r=t.holes[e];this.holes.push((new wy).fromJSON(r))}return this}}function u2(i,t,e,n,r){let o,s;if(r===function git(i,t,e,n){let r=0;for(let o=t,s=e-n;o<e;o+=n)r+=(i[s]-i[o])*(i[o+1]+i[s+1]),s=o;return r}(i,t,e,n)>0)for(o=t;o<e;o+=n)s=m2(o,i[o],i[o+1],s);else for(o=e-n;o>=t;o-=n)s=m2(o,i[o],i[o+1],s);return s&&Ty(s,s.next)&&(Qm(s),s=s.next),s}function Gc(i,t){if(!i)return i;t||(t=i);let n,e=i;do{if(n=!1,e.steiner||!Ty(e,e.next)&&0!==sn(e.prev,e,e.next))e=e.next;else{if(Qm(e),e=t=e.prev,e===e.next)break;n=!0}}while(n||e!==t);return t}function Ym(i,t,e,n,r,o,s){if(!i)return;!s&&o&&function dit(i,t,e,n){let r=i;do{0===r.z&&(r.z=hE(r.x,r.y,t,e,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function uit(i){let t,e,n,r,o,s,a,l,d=1;do{for(e=i,i=null,o=null,s=0;e;){for(s++,n=e,a=0,t=0;t<d&&(a++,n=n.nextZ,n);t++);for(l=d;a>0||l>0&&n;)0!==a&&(0===l||!n||e.z<=n.z)?(r=e,e=e.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:i=r,r.prevZ=o,o=r;e=n}o.nextZ=null,d*=2}while(s>1)}(r)}(i,n,r,o);let l,d,a=i;for(;i.prev!==i.next;)if(l=i.prev,d=i.next,o?iit(i,n,r,o):eit(i))t.push(l.i/e|0),t.push(i.i/e|0),t.push(d.i/e|0),Qm(i),i=d.next,a=d.next;else if((i=d)===a){s?1===s?Ym(i=nit(Gc(i),t,e),t,e,n,r,o,2):2===s&&rit(i,t,e,n,r,o):Ym(Gc(i),t,e,n,r,o,1);break}}function eit(i){const t=i.prev,e=i,n=i.next;if(sn(t,e,n)>=0)return!1;const r=t.x,o=e.x,s=n.x,a=t.y,l=e.y,d=n.y,h=r<o?r<s?r:s:o<s?o:s,f=a<l?a<d?a:d:l<d?l:d,m=r>o?r>s?r:s:o>s?o:s,g=a>l?a>d?a:d:l>d?l:d;let _=n.next;for(;_!==t;){if(_.x>=h&&_.x<=m&&_.y>=f&&_.y<=g&&xh(r,a,o,l,s,d,_.x,_.y)&&sn(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}function iit(i,t,e,n){const r=i.prev,o=i,s=i.next;if(sn(r,o,s)>=0)return!1;const a=r.x,l=o.x,d=s.x,h=r.y,f=o.y,m=s.y,g=a<l?a<d?a:d:l<d?l:d,_=h<f?h<m?h:m:f<m?f:m,b=a>l?a>d?a:d:l>d?l:d,y=h>f?h>m?h:m:f>m?f:m,v=hE(g,_,t,e,n),w=hE(b,y,t,e,n);let S=i.prevZ,C=i.nextZ;for(;S&&S.z>=v&&C&&C.z<=w;){if(S.x>=g&&S.x<=b&&S.y>=_&&S.y<=y&&S!==r&&S!==s&&xh(a,h,l,f,d,m,S.x,S.y)&&sn(S.prev,S,S.next)>=0||(S=S.prevZ,C.x>=g&&C.x<=b&&C.y>=_&&C.y<=y&&C!==r&&C!==s&&xh(a,h,l,f,d,m,C.x,C.y)&&sn(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;S&&S.z>=v;){if(S.x>=g&&S.x<=b&&S.y>=_&&S.y<=y&&S!==r&&S!==s&&xh(a,h,l,f,d,m,S.x,S.y)&&sn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;C&&C.z<=w;){if(C.x>=g&&C.x<=b&&C.y>=_&&C.y<=y&&C!==r&&C!==s&&xh(a,h,l,f,d,m,C.x,C.y)&&sn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function nit(i,t,e){let n=i;do{const r=n.prev,o=n.next.next;!Ty(r,o)&&h2(r,n,n.next,o)&&Km(r,o)&&Km(o,r)&&(t.push(r.i/e|0),t.push(n.i/e|0),t.push(o.i/e|0),Qm(n),Qm(n.next),n=i=o),n=n.next}while(n!==i);return Gc(n)}function rit(i,t,e,n,r,o){let s=i;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&fit(s,a)){let l=f2(s,a);return s=Gc(s,s.next),l=Gc(l,l.next),Ym(s,t,e,n,r,o,0),void Ym(l,t,e,n,r,o,0)}a=a.next}s=s.next}while(s!==i)}function sit(i,t){return i.x-t.x}function ait(i,t){const e=function lit(i,t){let r,e=t,n=-1/0;const o=i.x,s=i.y;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){const m=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(m<=o&&m>n&&(n=m,r=e.x<e.next.x?e:e.next,m===o))return r}e=e.next}while(e!==t);if(!r)return null;const a=r,l=r.x,d=r.y;let f,h=1/0;e=r;do{o>=e.x&&e.x>=l&&o!==e.x&&xh(s<d?o:n,s,l,d,s<d?n:o,s,e.x,e.y)&&(f=Math.abs(s-e.y)/(o-e.x),Km(e,i)&&(f<h||f===h&&(e.x>r.x||e.x===r.x&&cit(r,e)))&&(r=e,h=f)),e=e.next}while(e!==a);return r}(i,t);if(!e)return t;const n=f2(e,i);return Gc(n,n.next),Gc(e,e.next)}function cit(i,t){return sn(i.prev,i,t.prev)<0&&sn(t.next,i,i.next)<0}function hE(i,t,e,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-e)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function hit(i){let t=i,e=i;do{(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next}while(t!==i);return e}function xh(i,t,e,n,r,o,s,a){return(r-s)*(t-a)>=(i-s)*(o-a)&&(i-s)*(n-a)>=(e-s)*(t-a)&&(e-s)*(o-a)>=(r-s)*(n-a)}function fit(i,t){return i.next.i!==t.i&&i.prev.i!==t.i&&!function mit(i,t){let e=i;do{if(e.i!==i.i&&e.next.i!==i.i&&e.i!==t.i&&e.next.i!==t.i&&h2(e,e.next,i,t))return!0;e=e.next}while(e!==i);return!1}(i,t)&&(Km(i,t)&&Km(t,i)&&function pit(i,t){let e=i,n=!1;const r=(i.x+t.x)/2,o=(i.y+t.y)/2;do{e.y>o!=e.next.y>o&&e.next.y!==e.y&&r<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(n=!n),e=e.next}while(e!==i);return n}(i,t)&&(sn(i.prev,i,t.prev)||sn(i,t.prev,t))||Ty(i,t)&&sn(i.prev,i,i.next)>0&&sn(t.prev,t,t.next)>0)}function sn(i,t,e){return(t.y-i.y)*(e.x-t.x)-(t.x-i.x)*(e.y-t.y)}function Ty(i,t){return i.x===t.x&&i.y===t.y}function h2(i,t,e,n){const r=Ay(sn(i,t,e)),o=Ay(sn(i,t,n)),s=Ay(sn(e,n,i)),a=Ay(sn(e,n,t));return!!(r!==o&&s!==a||0===r&&Dy(i,e,t)||0===o&&Dy(i,n,t)||0===s&&Dy(e,i,n)||0===a&&Dy(e,t,n))}function Dy(i,t,e){return t.x<=Math.max(i.x,e.x)&&t.x>=Math.min(i.x,e.x)&&t.y<=Math.max(i.y,e.y)&&t.y>=Math.min(i.y,e.y)}function Ay(i){return i>0?1:i<0?-1:0}function Km(i,t){return sn(i.prev,i,i.next)<0?sn(i,t,i.next)>=0&&sn(i,i.prev,t)>=0:sn(i,t,i.prev)<0||sn(i,i.next,t)<0}function f2(i,t){const e=new fE(i.i,i.x,i.y),n=new fE(t.i,t.x,t.y),r=i.next,o=t.prev;return i.next=t,t.prev=i,e.next=r,r.prev=e,n.next=e,e.prev=n,o.next=n,n.prev=o,n}function m2(i,t,e,n){const r=new fE(i,t,e);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Qm(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function fE(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ma{static area(t){const e=t.length;let n=0;for(let r=e-1,o=0;o<e;r=o++)n+=t[r].x*t[o].y-t[o].x*t[r].y;return.5*n}static isClockWise(t){return ma.area(t)<0}static triangulateShape(t,e){const n=[],r=[],o=[];p2(t),g2(n,t);let s=t.length;e.forEach(p2);for(let l=0;l<e.length;l++)r.push(s),s+=e[l].length,g2(n,e[l]);const a=function(i,t,e=2){const n=t&&t.length,r=n?t[0]*e:i.length;let o=u2(i,0,r,e,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,d,h,f,m,g;if(n&&(o=function oit(i,t,e,n){const r=[];let o,s,a,l,d;for(o=0,s=t.length;o<s;o++)a=t[o]*n,l=o<s-1?t[o+1]*n:i.length,d=u2(i,a,l,n,!1),d===d.next&&(d.steiner=!0),r.push(hit(d));for(r.sort(sit),o=0;o<r.length;o++)e=ait(r[o],e);return e}(i,t,o,e)),i.length>80*e){a=d=i[0],l=h=i[1];for(let _=e;_<r;_+=e)f=i[_],m=i[_+1],f<a&&(a=f),m<l&&(l=m),f>d&&(d=f),m>h&&(h=m);g=Math.max(d-a,h-l),g=0!==g?32767/g:0}return Ym(o,s,e,a,l,g,0),s}(n,r);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function p2(i){const t=i.length;t>2&&i[t-1].equals(i[0])&&i.pop()}function g2(i,t){for(let e=0;e<t.length;e++)i.push(t[e].x),i.push(t[e].y)}class Ry extends We{constructor(t=new Hc([new gt(0,.5),new gt(-.5,-.5),new gt(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],r=[],o=[],s=[];let a=0,l=0;if(!1===Array.isArray(t))d(t);else for(let h=0;h<t.length;h++)d(t[h]),this.addGroup(a,l,h),a+=l,l=0;function d(h){const f=r.length/3,m=h.extractPoints(e);let g=m.shape;const _=m.holes;!1===ma.isClockWise(g)&&(g=g.reverse());for(let y=0,v=_.length;y<v;y++){const w=_[y];!0===ma.isClockWise(w)&&(_[y]=w.reverse())}const b=ma.triangulateShape(g,_);for(let y=0,v=_.length;y<v;y++)g=g.concat(_[y]);for(let y=0,v=g.length;y<v;y++){const w=g[y];r.push(w.x,w.y,0),o.push(0,0,1),s.push(w.x,w.y)}for(let y=0,v=b.length;y<v;y++){const w=b[y];n.push(w[0]+f,w[1]+f,w[2]+f),l+=3}}this.setIndex(n),this.setAttribute("position",new ie(r,3)),this.setAttribute("normal",new ie(o,3)),this.setAttribute("uv",new ie(s,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}toJSON(){const t=super.toJSON();return function yit(i,t){if(t.shapes=[],Array.isArray(i))for(let e=0,n=i.length;e<n;e++)t.shapes.push(i[e].uuid);else t.shapes.push(i.uuid);return t}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let r=0,o=t.shapes.length;r<o;r++)n.push(e[t.shapes[r]]);return new Ry(n,t.curveSegments)}}function Wc(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}class Py{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{let s;i:{n:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<o)break n;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(o=r,r=e[++n],t<r)break e}s=e.length;break i}if(t>=o)break t;{const a=e[1];t<a&&(n=2,o=a);for(let l=n-2;;){if(void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=o,o=e[--n-1],t>=o)break e}s=n,n=0}}for(;n<s;){const a=n+s>>>1;t<e[a]?s=a:n=a+1}if(r=e[n],o=e[n-1],void 0===o)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=n[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class kit extends Py{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let o=t-2,s=t+1,a=r[o],l=r[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:o=t,a=2*e-n;break;case 2402:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:s=t,l=2*n-e;break;case 2402:s=1,l=n+r[1]-r[0];break;default:s=t-1,l=e}const d=.5*(n-e),h=this.valueSize;this._weightPrev=d/(e-a),this._weightNext=d/(l-n),this._offsetPrev=o*h,this._offsetNext=s*h}interpolate_(t,e,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,d=l-a,h=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,_=(n-e)/(r-e),b=_*_,y=b*_,v=-m*y+2*m*b-m*_,w=(1+m)*y+(-1.5-2*m)*b+(-.5+m)*_+1,S=(-1-g)*y+(1.5+g)*b+.5*_,C=g*y-g*b;for(let F=0;F!==a;++F)o[F]=v*s[h+F]+w*s[d+F]+S*s[l+F]+C*s[f+F];return o}}class w2 extends Py{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=t*a,d=l-a,h=(n-e)/(r-e),f=1-h;for(let m=0;m!==a;++m)o[m]=s[d+m]*f+s[l+m]*h;return o}}class Pit extends Py{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class Ds{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Wc(e,this.TimeBufferType),this.values=Wc(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Wc(t.times,Array),values:Wc(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Pit(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new w2(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new kit(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let o=0,s=r-1;for(;o!==r&&n[o]<t;)++o;for(;-1!==s&&n[s]>e;)--s;if(++s,0!==o||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=n.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==s&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),t=!1;break}s=l}if(void 0!==r&&function b2(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const d=r[a];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,d),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),o=t.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const d=t[a];if(d!==t[a+1]&&(1!==a||d!==t[0]))if(r)l=!0;else{const f=a*n,m=f-n,g=f+n;for(let _=0;_!==n;++_){const b=e[f+_];if(b!==e[m+_]||b!==e[g+_]){l=!0;break}}}if(l){if(a!==s){t[s]=t[a];const f=a*n,m=s*n;for(let g=0;g!==n;++g)e[m+g]=e[f+g]}++s}}if(o>0){t[s]=t[o];for(let a=o*n,l=s*n,d=0;d!==n;++d)e[l+d]=e[a+d];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}Ds.prototype.TimeBufferType=Float32Array,Ds.prototype.ValueBufferType=Float32Array,Ds.prototype.DefaultInterpolation=2301;class wh extends Ds{constructor(t,e,n){super(t,e,n)}}wh.prototype.ValueTypeName="bool",wh.prototype.ValueBufferType=Array,wh.prototype.DefaultInterpolation=2300,wh.prototype.InterpolantFactoryMethodLinear=void 0,wh.prototype.InterpolantFactoryMethodSmooth=void 0;(class M2 extends Ds{}).prototype.ValueTypeName="color";(class Oy extends Ds{}).prototype.ValueTypeName="number";class Oit extends Py{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let d=t*a;for(let h=d+a;d!==h;d+=4)mo.slerpFlat(o,0,s,d-a,s,d,l);return o}}class Ly extends Ds{InterpolantFactoryMethodLinear(t){return new Oit(this.times,this.values,this.getValueSize(),t)}}Ly.prototype.ValueTypeName="quaternion",Ly.prototype.InterpolantFactoryMethodSmooth=void 0;class Mh extends Ds{constructor(t,e,n){super(t,e,n)}}Mh.prototype.ValueTypeName="string",Mh.prototype.ValueBufferType=Array,Mh.prototype.DefaultInterpolation=2300,Mh.prototype.InterpolantFactoryMethodLinear=void 0,Mh.prototype.InterpolantFactoryMethodSmooth=void 0;(class Fy extends Ds{}).prototype.ValueTypeName="vector",Error;const TE="\\[\\]\\.:\\/",rnt=new RegExp("["+TE+"]","g"),DE="[^"+TE+"]",ont="[^"+TE.replace("\\.","")+"]",dnt=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",DE)+/(WCOD+)?/.source.replace("WCOD",ont)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",DE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",DE)+"$"),unt=["material","materials","bones","map"];class hnt{constructor(t,e,n){const r=n||Ki.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Ki=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rnt,"")}static parseTrackName(e){const n=dnt.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==o&&-1!==o){const s=r.nodeName.substring(o+1);-1!==unt.indexOf(s)&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===n||l.uuid===n)return l;const d=r(l.children);if(d)return d}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[n++]=r[o]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,o=n.propertyName;let s=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let h=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===h){h=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==h){if(void 0===e[h])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[h]}}const a=e[o];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+o+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===o){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[s]&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else void 0!==a.fromArray&&void 0!==a.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(d=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=hnt,i})();Ki.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ki.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ki.prototype.GetterByBindingType=[Ki.prototype._getValue_direct,Ki.prototype._getValue_array,Ki.prototype._getValue_arrayElement,Ki.prototype._getValue_toArray],Ki.prototype.SetterByBindingTypeAndVersioning=[[Ki.prototype._setValue_direct,Ki.prototype._setValue_direct_setNeedsUpdate,Ki.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ki.prototype._setValue_array,Ki.prototype._setValue_array_setNeedsUpdate,Ki.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ki.prototype._setValue_arrayElement,Ki.prototype._setValue_arrayElement_setNeedsUpdate,Ki.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ki.prototype._setValue_fromArray,Ki.prototype._setValue_fromArray_setNeedsUpdate,Ki.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"170"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="170");let Y2=(()=>{class i{constructor(){this.triangles={},this.animate=()=>{requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)}}init3DVisualization(){const e=document.getElementById("3d-container");if(!e)return;const n=document.createElement("div");n.id="ypr-values",n.style.position="absolute",n.style.top="210px",n.style.width="100%",n.style.textAlign="center",n.style.fontSize="12px",n.style.color="black",n.style.backgroundColor="rgba(255, 255, 255, 0.9)",n.style.padding="10px",n.style.borderRadius="5px",n.innerHTML='\n      <p><b>Roll:</b> <span id="roll-value">N/A</span>\xb0</p>\n      <p><b>Pitch:</b> <span id="pitch-value">N/A</span>\xb0</p>\n      <p><b>Yaw:</b> <span id="yaw-value">N/A</span>\xb0</p>\n    ',e.appendChild(n),this.scene=new LN;const r=e.clientWidth,o=e.clientHeight;this.camera=new er(75,r/o,.1,1e3),this.camera.position.z=5,this.renderer=new Met({antialias:!0,alpha:!0}),this.renderer.setSize(r,o),this.renderer.setClearColor(0,0),e.appendChild(this.renderer.domElement),this.addTriangle("roll",16711680,1,-3),this.addTriangle("pitch",65280,.8,0),this.addTriangle("yaw",255,.6,3),this.animate()}addTriangle(e,n,r,o){const s=new Hc;s.moveTo(0,1),s.lineTo(-.5,-1),s.lineTo(.5,-1),s.lineTo(0,1);const a=new Ry(s),l=new yl({color:n,wireframe:!0}),d=new Dn(a,l);d.scale.set(r,r,r),d.position.x=o,this.scene.add(d),this.triangles[e]=d}update3DVisualization(e){const{roll:n,pitch:r,yaw:o}=e;console.log("Updating 3D visualization:",{roll:n,pitch:r,yaw:o}),this.triangles.roll&&(this.triangles.roll.rotation.z=lC_degToRad(n||0)),this.triangles.pitch&&(this.triangles.pitch.rotation.x=lC_degToRad(r||0)),this.triangles.yaw&&(this.triangles.yaw.rotation.y=lC_degToRad(o||0));const s=document.getElementById("roll-value"),a=document.getElementById("pitch-value"),l=document.getElementById("yaw-value");s&&(s.textContent=`${n.toFixed(2)}`),a&&(a.textContent=`${r.toFixed(2)}`),l&&(l.textContent=`${o.toFixed(2)}`),this.animate()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),K2=(()=>{class i{constructor(e){this.http=e}setupDeviceSelector(e){const n=document.getElementById("device-select");this.http.get("http://localhost:3018/api/position").subscribe(r=>{Array.from(new Set(r.map(s=>s.deviceId))).forEach(s=>{const a=document.createElement("option");a.value=s,a.textContent=`Device ${s}`,n.appendChild(a)})}),n.addEventListener("change",r=>{e(r.target.value)})}static{this.\u0275fac=function(n){return new(n||i)(Y(Mc))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function Q2(...i){const t=Kp(i),{args:e,keys:n}=zO(i),r=new Mi(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let l=s,d=s;for(let h=0;h<s;h++){let f=!1;Bn(e[h]).subscribe(hi(o,m=>{f||(f=!0,d--),a[h]=m},()=>l--,void 0,()=>{(!l||!f)&&(d||o.next(n?VO(n,a):a),o.complete())}))}});return t?r.pipe(zM(t)):r}let J2=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(U(ms),U(Re))}}static{this.\u0275dir=dt({type:i})}}return i})(),Kc=(()=>{class i extends J2{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,features:[Zt]})}}return i})();const ts=new at("NgValueAccessor"),vnt={provide:ts,useExisting:_i(()=>tp),multi:!0},bnt=new at("CompositionEventMode");let tp=(()=>{class i extends J2{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ynt(){const i=el()?el().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(U(ms),U(Re),U(bnt,8))}}static{this.\u0275dir=dt({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){1&n&&Ci("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ke([vnt]),Zt]})}}return i})();function Sl(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function eB(i){return null!=i&&"number"==typeof i.length}const fr=new at("NgValidators"),Cl=new at("NgAsyncValidators"),xnt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class wnt{static min(t){return function iB(i){return t=>{if(Sl(t.value)||Sl(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function nB(i){return t=>{if(Sl(t.value)||Sl(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return function rB(i){return Sl(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function oB(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function sB(i){return Sl(i.value)||xnt.test(i.value)?null:{email:!0}}(t)}static minLength(t){return function aB(i){return t=>Sl(t.value)||!eB(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function lB(i){return t=>eB(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function cB(i){if(!i)return $y;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Sl(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return pB(t)}static composeAsync(t){return gB(t)}}function $y(i){return null}function dB(i){return null!=i}function uB(i){return Uf(i)?Jt(i):i}function hB(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function fB(i,t){return t.map(e=>e(i))}function mB(i){return i.map(t=>function Mnt(i){return!i.validate}(t)?t:e=>t.validate(e))}function pB(i){if(!i)return null;const t=i.filter(dB);return 0==t.length?null:function(e){return hB(fB(e,t))}}function kE(i){return null!=i?pB(mB(i)):null}function gB(i){if(!i)return null;const t=i.filter(dB);return 0==t.length?null:function(e){return Q2(fB(e,t).map(uB)).pipe(Ee(hB))}}function PE(i){return null!=i?gB(mB(i)):null}function _B(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function vB(i){return i._rawValidators}function yB(i){return i._rawAsyncValidators}function OE(i){return i?Array.isArray(i)?i:[i]:[]}function qy(i,t){return Array.isArray(i)?i.includes(t):i===t}function bB(i,t){const e=OE(t);return OE(i).forEach(r=>{qy(e,r)||e.push(r)}),e}function xB(i,t){return OE(t).filter(e=>!qy(i,e))}class wB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=kE(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=PE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Rr extends wB{get formDirective(){return null}get path(){return null}}class ga extends wB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class MB{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let LE=(()=>{class i extends MB{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(U(ga,2))}}static{this.\u0275dir=dt({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){2&n&&yi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Zt]})}}return i})();const ep="VALID",Xy="INVALID",Sh="PENDING",ip="DISABLED";function BE(i){return(Yy(i)?i.validators:i)||null}function UE(i,t){return(Yy(t)?t.asyncValidators:i)||null}function Yy(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class zE{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ep}get invalid(){return this.status===Xy}get pending(){return this.status==Sh}get disabled(){return this.status===ip}get enabled(){return this.status!==ip}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(bB(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(bB(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(xB(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(xB(t,this._rawAsyncValidators))}hasValidator(t){return qy(this._rawValidators,t)}hasAsyncValidator(t){return qy(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Sh,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ip,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ep,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ep||this.status===Sh)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ip:ep}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Sh,this._hasOwnPendingAsyncValidator=!0;const e=uB(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Si,this.statusChanges=new Si}_calculateStatus(){return this._allControlsDisabled()?ip:this.errors?Xy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sh)?Sh:this._anyControlsHaveStatus(Xy)?Xy:ep}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Yy(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Dnt(i){return Array.isArray(i)?kE(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function Ant(i){return Array.isArray(i)?PE(i):i||null}(this._rawAsyncValidators)}}class VE extends zE{constructor(t,e,n){super(BE(e),UE(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function EB(i,t,e){i._forEachChild((n,r)=>{if(void 0===e[r])throw new nt(1002,"")})})(this,0,t),Object.keys(t).forEach(n=>{(function CB(i,t,e){const n=i.controls;if(!(t?Object.keys(n):n).length)throw new nt(1e3,"");if(!n[e])throw new nt(1001,"")})(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{const r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,o)=>{n=e(n,r,o)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}const Qc=new at("CallSetDisabledState",{providedIn:"root",factory:()=>np}),np="always";function rp(i,t,e=np){HE(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function knt(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&TB(i,t)})}(i,t),function Ont(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function Pnt(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&TB(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function Rnt(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function Qy(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),tb(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Jy(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function HE(i,t){const e=vB(i);null!==t.validator?i.setValidators(_B(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=yB(i);null!==t.asyncValidator?i.setAsyncValidators(_B(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();Jy(t._rawValidators,r),Jy(t._rawAsyncValidators,r)}function tb(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=vB(i);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,i.setValidators(o))}}if(null!==t.asyncValidator){const r=yB(i);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,i.setAsyncValidators(o))}}}const n=()=>{};return Jy(t._rawValidators,n),Jy(t._rawAsyncValidators,n),e}function TB(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function DB(i,t){HE(i,t)}function AB(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}const Unt={provide:Rr,useExisting:_i(()=>eb)},op=(()=>Promise.resolve())();let eb=(()=>{class i extends Rr{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Si,this.form=new VE({},kE(e),PE(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){op.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),rp(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){op.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){op.then(()=>{const n=this._findContainer(e.path),r=new VE({});DB(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){op.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){op.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,AB(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(U(fr,10),U(Cl,10),U(Qc,8))}}static{this.\u0275dir=dt({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){1&n&&Ci("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ke([Unt]),Zt]})}}return i})();function IB(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function RB(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const kB=class extends zE{constructor(t=null,e,n){super(BE(e),UE(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yy(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=RB(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IB(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IB(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){RB(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Hnt={provide:ga,useExisting:_i(()=>ib)},LB=(()=>Promise.resolve())();let ib=(()=>{class i extends ga{constructor(e,n,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new kB,this._registered=!1,this.name="",this.update=new Si,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function jE(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(o=>{o.constructor===tp?e=o:function Nnt(i){return Object.getPrototypeOf(i.constructor)===Kc}(o)?n=o:r=o}),r||n||e||null}(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),function WE(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){LB.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&wu(n);LB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?function Ky(i,t){return[...t.path,i]}(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(U(Rr,9),U(fr,10),U(Cl,10),U(ts,10),U(pc,8),U(Qc,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ke([Hnt]),Zt,Gn]})}}return i})(),NB=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();const $E=new at("NgModelWithFormControlWarning"),Xnt={provide:Rr,useExisting:_i(()=>nb)};let nb=(()=>{class i extends Rr{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Si,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return rp(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Qy(e.control||null,e,!1),function Bnt(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,AB(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Qy(n||null,e),(i=>i instanceof kB)(r)&&(rp(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);DB(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function Lnt(i,t){return tb(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){HE(this.form,this),this._oldForm&&tb(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(n){return new(n||i)(U(fr,10),U(Cl,10),U(Qc,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){1&n&&Ci("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ke([Xnt]),Zt,Gn]})}}return i})();const Jnt={provide:ts,useExisting:_i(()=>XE),multi:!0};function GB(i,t){return null==i?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let XE=(()=>{class i extends Kc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=GB(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){const n=function trt(i){return i.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){1&n&&Ci("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ke([Jnt]),Zt]})}}return i})(),WB=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(GB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(ms),U(XE,9))}}static{this.\u0275dir=dt({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();const ert={provide:ts,useExisting:_i(()=>YE),multi:!0};function jB(i,t){return null==i?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${i}: ${t}`.slice(0,50))}let YE=(()=>{class i extends Kc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let n;if(this.value=e,Array.isArray(e)){const r=e.map(o=>this._getOptionId(o));n=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{const r=[],o=n.selectedOptions;if(void 0!==o){const s=o;for(let a=0;a<s.length;a++){const d=this._getOptionValue(s[a].value);r.push(d)}}else{const s=n.options;for(let a=0;a<s.length;a++){const l=s[a];if(l.selected){const d=this._getOptionValue(l.value);r.push(d)}}}this.value=r,e(r)}}_registerOption(e){const n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(const n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){const n=function irt(i){return i.split(":")[0]}(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){1&n&&Ci("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ke([ert]),Zt]})}}return i})(),$B=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(jB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(jB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(ms),U(YE,9))}}static{this.\u0275dir=dt({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),n3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[NB]})}}return i})(),hrt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Qc,useValue:e.callSetDisabledState??np}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[n3]})}}return i})(),frt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:$E,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Qc,useValue:e.callSetDisabledState??np}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[n3]})}}return i})();const mrt=Ks.icon({iconUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.3/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});let prt=(()=>{class i{constructor(e,n,r,o){this.mapService=e,this.threeJsService=n,this.deviceService=r,this.http=o,this.selectedDevice="all"}ngOnInit(){Ks.Marker.prototype.options.icon=mrt,this.mapService.initMap(),this.mapService.addLegend(),this.threeJsService.init3DVisualization(),this.deviceService.setupDeviceSelector(e=>{this.selectedDevice=e,this.mapService.resetMarkers()}),this.fetchData()}fetchData(){setInterval(()=>{this.mapService.fetchData(this.selectedDevice,e=>{this.mapService.updateMarkers(e),e.forEach(n=>{this.threeJsService.update3DVisualization(n)})})},100)}static{this.\u0275fac=function(n){return new(n||i)(U(lF),U(Y2),U(K2),U(Mc))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-maps"]],features:[ke([lF,Y2,K2])],decls:12,vars:0,consts:[["id","map-container"],["id","map",2,"height","500px","width","100%"],["id","3d-container",2,"position","absolute","top","10px","right","10px","width","250px","height","250px","background","rgba(255, 255, 255, 0.9)","border","1px solid black","border-radius","5px","z-index","1000"],["id","tracking-button",2,"position","absolute","top","10px","left","50%","transform","translateX(-50%)","padding","10px 20px","background-color","#007bff","color","white","border","none","border-radius","5px","cursor","pointer","font-size","16px","z-index","1000"],[2,"margin-top","20px","text-align","center"],["for","device-select"],["id","device-select"],["value","all"]],template:function(n,r){1&n&&(xt(0,"div",0),vi(1,"div",1)(2,"div",2),xt(3,"button",3),pe(4," Start Tracking\n"),St()(),xt(5,"div",4)(6,"label",5)(7,"b"),pe(8,"Select Device:"),St()(),xt(9,"select",6)(10,"option",7),pe(11,"All Devices"),St()()())},dependencies:[WB,$B],styles:["#map-container[_ngcontent-%COMP%]{position:relative}#map[_ngcontent-%COMP%]{height:500px;width:100%}#3d-container[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;width:250px;height:250px;background:rgba(255,255,255,.9);border:1px solid black;border-radius:5px;z-index:1000}"]})}}return i})();function mn(i){return null!=i&&"false"!=`${i}`}function rb(i,t=0){return function r3(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function ob(i){return Array.isArray(i)?i:[i]}function An(i){return null==i?"":"string"==typeof i?i:`${i}px`}function _a(i){return i instanceof Re?i.nativeElement:i}const grt=["addListener","removeListener"],_rt=["addEventListener","removeEventListener"],vrt=["on","off"];function QE(i,t,e,n){if(Ye(e)&&(n=e,e=void 0),n)return QE(i,t,e).pipe(zM(n));const[r,o]=function xrt(i){return Ye(i.addEventListener)&&Ye(i.removeEventListener)}(i)?_rt.map(s=>a=>i[s](t,a,e)):function yrt(i){return Ye(i.addListener)&&Ye(i.removeListener)}(i)?grt.map(o3(i,t)):function brt(i){return Ye(i.on)&&Ye(i.off)}(i)?vrt.map(o3(i,t)):[];if(!r&&Gh(i))return gn(s=>QE(s,t,e))(Bn(i));if(!r)throw new TypeError("Invalid event target");return new Mi(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function o3(i,t){return e=>n=>i[e](t,n)}class wrt extends tn{constructor(t,e){super()}schedule(t,e=0){return this}}const sb={setInterval(i,t,...e){const{delegate:n}=sb;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=sb;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class JE extends wrt{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,n=0){return sb.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&sb.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(o){n=!0,r=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Di(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const sp={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=sp;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(o=>{e=void 0,i(o)});return new tn(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=sp;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=sp;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},tT={now:()=>(tT.delegate||Date).now(),delegate:void 0};class ap{constructor(t,e=ap.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}ap.now=tT.now;class eT extends ap{constructor(t,e=ap.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}new class Srt extends eT{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class Mrt extends JE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=sp.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(sp.cancelAnimationFrame(e),t._scheduled=void 0)}});let iT,Ert=1;const ab={};function s3(i){return i in ab&&(delete ab[i],!0)}const Trt={setImmediate(i){const t=Ert++;return ab[t]=!0,iT||(iT=Promise.resolve()),iT.then(()=>s3(t)&&i()),t},clearImmediate(i){s3(i)}},{setImmediate:Drt,clearImmediate:Art}=Trt,lb={setImmediate(...i){const{delegate:t}=lb;return(t?.setImmediate||Drt)(...i)},clearImmediate(i){const{delegate:t}=lb;return(t?.clearImmediate||Art)(i)},delegate:void 0},nT=(new class Rrt extends eT{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class Irt extends JE{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=lb.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(lb.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}}),new eT(JE)),Prt=nT;function a3(i,t=nT){return function Ort(i){return gi((t,e)=>{let n=!1,r=null,o=null,s=!1;const a=()=>{if(o?.unsubscribe(),o=null,n){n=!1;const d=r;r=null,e.next(d)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe(hi(e,d=>{n=!0,r=d,o||Bn(i(d)).subscribe(o=hi(e,a,l))},()=>{s=!0,(!n||!o||o.closed)&&e.complete()}))})}(()=>function Frt(i=0,t,e=Prt){let n=-1;return null!=t&&(Yp(t)?e=t:n=t),new Mi(r=>{let o=function Lrt(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},o)})}(i,t))}let rT;try{rT=typeof Intl<"u"&&Intl.v8BreakIterator}catch{rT=!1}let Ch,In=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Aq(i){return i===pO}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!rT)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(Y(Za))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const l3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function c3(){if(Ch)return Ch;if("object"!=typeof document||!document)return Ch=new Set(l3),Ch;let i=document.createElement("input");return Ch=new Set(l3.filter(t=>(i.setAttribute("type",t),i.type===t))),Ch}let lp,td,oT;function cp(i){return function Nrt(){if(null==lp&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>lp=!0}))}finally{lp=lp||!1}return lp}()?i:!!i.capture}function Brt(){if(null==td){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return td=!1,td;if("scrollBehavior"in document.documentElement.style)td=!0;else{const i=Element.prototype.scrollTo;td=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return td}function db(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function El(i){return i.composedPath?i.composedPath()[0]:i.target}function sT(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Vrt=new at("cdk-dir-doc",{providedIn:"root",factory:function Hrt(){return wt(Ne)}}),Grt=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let dp=(()=>{class i{constructor(e){this.value="ltr",this.change=new Si,e&&(this.value=function Wrt(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Grt.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(Y(Vrt,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),up=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})(),$rt=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Wt,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Mi(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(a3(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):jt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(jn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=_a(n),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>QE(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(Y(oe),Y(In),Y(Ne,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),aT=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Wt,this._changeListener=o=>{this._change.next(o)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(a3(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(Y(In),Y(oe),Y(Ne,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),hp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})(),lT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[up,hp,up,hp]})}}return i})();class cT{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class dT extends cT{constructor(t,e,n,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=o}}class d3 extends cT{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Zrt extends cT{constructor(t){super(),this.element=t instanceof Re?t.nativeElement:t}}class uT{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof dT?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof d3?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Zrt?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Xrt extends uT{constructor(t,e,n,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Sn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let hT=(()=>{class i extends uT{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Si,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=n.createComponent(o,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(n){return new(n||i)(U(eu),U(Jn),U(Ne))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Zt]})}}return i})(),ub=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();const u3=Brt();class Yrt{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=An(-this._previousScrollPosition.left),t.style.top=An(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),u3&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),u3&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class Krt{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(jn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class h3{enable(){}disable(){}attach(){}}function fT(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function f3(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class Qrt{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();fT(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Jrt=(()=>{class i{constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new h3,this.close=s=>new Krt(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new Yrt(this._viewportRuler,this._document),this.reposition=s=>new Qrt(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static{this.\u0275fac=function(n){return new(n||i)(Y($rt),Y(aT),Y(oe),Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class m3{constructor(t){if(this.scrollStrategy=new h3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class tot{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let p3=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),eot=(()=>{class i extends p3{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(oe,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),iot=(()=>{class i extends p3{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=El(o)},this._clickListener=o=>{const s=El(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){const h=l[d];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(s)||h.overlayElement.contains(a))break;const f=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(o)):f.next(o)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(In),Y(oe,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),hb=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||sT()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const n=this._document.createElement("div");n.classList.add(e),sT()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(In))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class fp{constructor(t,e,n,r,o,s,a,l,d,h=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=d,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new Wt,this._attachments=new Wt,this._detachments=new Wt,this._locationChanges=tn.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new Wt,this._outsidePointerEvents=new Wt,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Sr(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=An(this._config.width),t.height=An(this._config.height),t.minWidth=An(this._config.minWidth),t.minHeight=An(this._config.minHeight),t.maxWidth=An(this._config.maxWidth),t.maxHeight=An(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=ob(e||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Cr(Ii(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const g3="cdk-overlay-connected-position-bounding-box",not=/([A-Za-z%]+)$/;class rot{get positions(){return this._preferredPositions}constructor(t,e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Wt,this._resizeSubscription=tn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(g3),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),d=this._getOverlayPoint(l,e,a),h=this._getOverlayFit(d,e,n,a);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(h,d,n)?o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<h.visibleArea)&&(s={overlayFit:h,overlayPoint:d,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(const d of o){const h=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);h>l&&(l=h,a=d)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ed(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(g3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,o;if("center"==n.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?s:a}return e.left<0&&(r-=e.left),o="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,n){let r,o;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,n,r){const o=v3(e);let{x:s,y:a}=t,l=this._getOffset(r,"x"),d=this._getOffset(r,"y");l&&(s+=l),d&&(a+=d);let m=0-a,g=a+o.height-n.height,_=this._subtractOverflows(o.width,0-s,s+o.width-n.width),b=this._subtractOverflows(o.height,m,g),y=_*b;return{visibleArea:y,isCompletelyWithinViewport:o.width*o.height===y,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:_==o.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,o=n.right-e.x,s=_3(this._overlayRef.getConfig().minHeight),a=_3(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=s&&s<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=o)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=v3(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-n.top-t.y,0),d=Math.max(o.left-n.left-t.x,0);let h=0,f=0;return h=r.width<=o.width?d||-s:t.x<this._viewportMargin?o.left-n.left-t.x:0,f=r.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:h,y:f},{x:t.x+h,y:t.y+f}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new tot(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let o,s,a,h,f,m;if("top"===e.overlayY)s=t.y,o=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,o=n.height-a+this._viewportMargin;else{const g=Math.min(n.bottom-t.y+n.top,t.y),_=this._lastBoundingBoxSize.height;o=2*g,s=t.y-g,o>_&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-_/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)m=n.width-t.x+this._viewportMargin,h=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)f=t.x,h=n.right-t.x;else{const g=Math.min(n.right-t.x+n.left,t.x),_=this._lastBoundingBoxSize.width;h=2*g,f=t.x-g,h>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=t.x-_/2)}return{top:s,left:f,bottom:a,right:m,width:h,height:o}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=An(n.height),r.top=An(n.top),r.bottom=An(n.bottom),r.width=An(n.width),r.left=An(n.left),r.right=An(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=An(o)),s&&(r.maxWidth=An(s))}this._lastBoundingBoxSize=n,ed(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ed(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ed(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();ed(n,this._getExactOverlayY(e,t,h)),ed(n,this._getExactOverlayX(e,t,h))}else n.position="static";let a="",l=this._getOffset(e,"x"),d=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),d&&(a+=`translateY(${d}px)`),n.transform=a.trim(),s.maxHeight&&(r?n.maxHeight=An(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=An(s.maxWidth):o&&(n.maxWidth="")),ed(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=An(o.y),r}_getExactOverlayX(t,e,n){let s,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=An(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:f3(t,n),isOriginOutsideView:fT(t,n),isOverlayClipped:f3(e,n),isOverlayOutsideView:fT(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&ob(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Re)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function ed(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function _3(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(not);return e&&"px"!==e?null:parseFloat(t)}return i||null}function v3(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const y3="cdk-global-overlay-wrapper";class oot{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(y3),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),d=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a),h=this._xPosition,f=this._xOffset,m="rtl"===this._overlayRef.getConfig().direction;let g="",_="",b="";l?b="flex-start":"center"===h?(b="center",m?_=f:g=f):m?"left"===h||"end"===h?(b="flex-end",g=f):("right"===h||"start"===h)&&(b="flex-start",_=f):"left"===h||"start"===h?(b="flex-start",g=f):("right"===h||"end"===h)&&(b="flex-end",_=f),t.position=this._cssPosition,t.marginLeft=l?"0":g,t.marginTop=d?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":_,e.justifyContent=b,e.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(y3),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let sot=(()=>{class i{constructor(e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o}global(){return new oot}flexibleConnectedTo(e){return new rot(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(Y(aT),Y(Ne),Y(In),Y(hb))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),aot=0,id=(()=>{class i{constructor(e,n,r,o,s,a,l,d,h,f,m,g){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=d,this._directionality=h,this._location=f,this._outsideClickDispatcher=m,this._animationsModuleType=g}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),s=new m3(e);return s.direction=s.direction||this._directionality.value,new fp(o,n,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+aot++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(tl)),new Xrt(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(Y(Jrt),Y(hb),Y(eu),Y(sot),Y(eot),Y(Sn),Y(oe),Y(Ne),Y(dp),Y(tm),Y(iot),Y(Ao,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const dot={provide:new at("cdk-connected-overlay-scroll-strategy"),deps:[id],useFactory:function cot(i){return()=>i.scrollStrategies.reposition()}};let mT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[id,dot],imports:[up,ub,lT,lT]})}}return i})();function fb(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function w3(i){return jn((t,e)=>i<=e)}let M3=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),gT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[M3]})}}return i})();const S3=new Set;let nd,kot=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Oot}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function Pot(i,t){if(!S3.has(i))try{nd||(nd=document.createElement("style"),t&&(nd.nonce=t),nd.setAttribute("type","text/css"),document.head.appendChild(nd)),nd.sheet&&(nd.sheet.insertRule(`@media ${i} {body{ }}`,0),S3.add(i))}catch(e){console.error(e)}}(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(Y(In),Y(zx,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Oot(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Lot=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Wt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return C3(ob(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=yc(C3(ob(e)).map(s=>this._registerQuery(s).observable));return o=Z_(o.pipe(Sr(1)),o.pipe(w3(1),function pT(i,t=nT){return gi((e,n)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const d=o;o=null,n.next(d)}};function l(){const d=s+i,h=t.now();if(h<d)return r=this.schedule(void 0,d-h),void n.add(r);a()}e.subscribe(hi(n,d=>{o=d,s=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{o=r=null}))})}(0))),o.pipe(Ee(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:d})=>{a.matches=a.matches||l,a.breakpoints[d]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),o={observable:new Mi(s=>{const a=l=>this._zone.run(()=>s.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Y_(n),Ee(({matches:s})=>({query:e,matches:s})),Cr(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static{this.\u0275fac=function(n){return new(n||i)(Y(kot),Y(oe))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function C3(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}let mb=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function Vot(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function zot(i){try{return i.frameElement}catch{return null}}(function Xot(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===A3(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),o=A3(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function qot(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function Zot(i){return!function Got(i){return function jot(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Hot(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function Wot(i){return function $ot(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||D3(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(n){return new(n||i)(Y(In))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function D3(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function A3(i){if(!D3(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class I3{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,o=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Sr(1)).subscribe(t)}}let _T=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new I3(e,this._checker,this._ngZone,this._document,n)}static{this.\u0275fac=function(n){return new(n||i)(Y(mb),Y(oe),Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function R3(i){return 0===i.buttons||0===i.detail}function k3(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const Yot=new at("cdk-input-modality-detector-options"),Kot={ignoreKeys:[18,17,224,91,16]},Eh=cp({passive:!0,capture:!0});let Qot=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new _n(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=El(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(R3(s)?"keyboard":"mouse"),this._mostRecentTarget=El(s))},this._onTouchstart=s=>{k3(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=El(s))},this._options={...Kot,...o},this.modalityDetected=this._modality.pipe(w3(1)),this.modalityChanged=this.modalityDetected.pipe(rs()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Eh),r.addEventListener("mousedown",this._onMousedown,Eh),r.addEventListener("touchstart",this._onTouchstart,Eh)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Eh),document.removeEventListener("mousedown",this._onMousedown,Eh),document.removeEventListener("touchstart",this._onTouchstart,Eh))}static{this.\u0275fac=function(n){return new(n||i)(Y(In),Y(oe),Y(Ne),Y(Yot,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const tst=new at("cdk-focus-monitor-default-options"),pb=cp({passive:!0,capture:!0});let gb=(()=>{class i{constructor(e,n,r,o,s){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Wt,this._rootNodeFocusAndBlurListener=a=>{for(let d=El(a);d;d=d.parentElement)"focus"===a.type?this._onFocus(a,d):this._onBlur(a,d)},this._document=o,this._detectionMode=s?.detectionMode||0}monitor(e,n=!1){const r=_a(e);if(!this._platform.isBrowser||1!==r.nodeType)return jt();const o=function zrt(i){if(function Urt(){if(null==oT){const i=typeof document<"u"?document.head:null;oT=!(!i||!i.createShadowRoot&&!i.attachShadow)}return oT}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return n&&(s.checkChildren=!0),s.subject;const a={checkChildren:n,subject:new Wt,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=_a(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const o=_a(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),o=El(e);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,pb),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,pb)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Cr(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,pb),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,pb),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&n.push([o,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const o=e.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(n))return!0;return!1}static{this.\u0275fac=function(n){return new(n||i)(Y(oe),Y(In),Y(Qot),Y(Ne,8),Y(tst,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const O3="cdk-high-contrast-black-on-white",L3="cdk-high-contrast-white-on-black",vT="cdk-high-contrast-active";let F3=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=wt(Lot).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(vT,O3,L3),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(vT,O3):2===n&&e.add(vT,L3)}}static{this.\u0275fac=function(n){return new(n||i)(Y(In),Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),est=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(Y(F3))}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[gT]})}}return i})();function ist(i,t){}class _b{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let N3=(()=>{class i extends uT{constructor(e,n,r,o,s,a,l,d){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=o,this._interactivityChecker=s,this._ngZone=a,this._overlayRef=l,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=h=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(h);return this._contentAttached(),f},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let n=null;if("string"==typeof e?n=this._document.querySelector(e):"boolean"==typeof e?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=db(),o=this._elementRef.nativeElement;(!r||r===this._document.body||r===o||o.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=db();return e===n||e.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=db())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(_T),U(Ne,8),U(_b),U(mb),U(oe),U(fp),U(gb))}}static{this.\u0275cmp=Ke({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(n,r){if(1&n&&tr(hT,7),2&n){let o;Qe(o=Je())&&(r._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,r){2&n&&on("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[Zt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,r){1&n&&me(0,ist,0,0,"ng-template",0)},dependencies:[hT],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return i})();class yT{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Wt,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!fb(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const B3=new at("DialogScrollStrategy"),nst=new at("DialogData"),rst=new at("DefaultDialogConfig"),sst={provide:B3,deps:[id],useFactory:function ost(i){return()=>i.scrollStrategies.block()}};let ast=0,U3=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,r,o,s,a){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Wt,this._afterOpenedAtThisLevel=new Wt,this._ariaHiddenElements=new Map,this.afterAllClosed=X_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Y_(void 0))),this._scrollStrategy=a}open(e,n){(n={...this._defaultOptions||new _b,...n}).id=n.id||"cdk-dialog-"+ast++,n.id&&this.getDialogById(n.id);const o=this._getOverlayConfig(n),s=this._overlay.create(o),a=new yT(s,n),l=this._attachContainer(s,a,n);return a.containerInstance=l,this._attachDialogContent(e,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){bT(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){bT(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),bT(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const n=new m3({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){const o=r.injector||r.viewContainerRef?.injector,s=[{provide:_b,useValue:r},{provide:yT,useValue:n},{provide:fp,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,s.push(...r.container.providers(r))):a=N3;const l=new dT(a,r.viewContainerRef,Sn.create({parent:o||this._injector,providers:s}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,o){if(e instanceof Wn){const s=this._createInjector(o,n,r,void 0);let a={$implicit:o.data,dialogRef:n};o.templateContext&&(a={...a,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),r.attachTemplatePortal(new d3(e,null,a,s))}else{const s=this._createInjector(o,n,r,this._injector),a=r.attachComponentPortal(new dT(e,o.viewContainerRef,s,o.componentFactoryResolver));n.componentRef=a,n.componentInstance=a.instance}}_createInjector(e,n,r,o){const s=e.injector||e.viewContainerRef?.injector,a=[{provide:nst,useValue:e.data},{provide:yT,useValue:n}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(n,e,r)):a.push(...e.providers)),e.direction&&(!s||!s.get(dp,null,{optional:!0}))&&a.push({provide:dp,useValue:{value:e.direction,change:jt()}}),Sn.create({parent:s||o,providers:a})}_removeOpenDialog(e,n){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,s)=>{o?s.setAttribute("aria-hidden",o):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){const o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(n){return new(n||i)(Y(id),Y(Sn),Y(rst,8),Y(i,12),Y(hb),Y(B3))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();function bT(i,t){let e=i.length;for(;e--;)t(i[e])}let lst=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[U3,sst],imports:[mT,ub,est,ub]})}}return i})();const dst=new at("mat-sanity-checks",{providedIn:"root",factory:function cst(){return!0}});let wi=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!sT()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}static{this.\u0275fac=function(n){return new(n||i)(Y(F3),Y(dst,8),Y(Ne))}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[up,up]})}}return i})();function ust(i){return class extends i{get disabled(){return this._disabled}set disabled(t){this._disabled=mn(t)}constructor(...t){super(...t),this._disabled=!1}}}function H3(i,t){return class extends i{get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function hst(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=mn(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function fst(i){return class extends i{updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}let pst=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),G3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,wi]})}}return i})();class gst{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const W3=cp({passive:!0,capture:!0});class _st{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=El(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,n,r){const o=this._events.get(e);if(o){const s=o.get(n);s?s.add(r):o.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,W3)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const o=r.get(e);o&&(o.delete(n),0===o.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,W3)))}}const j3={enterDuration:225,exitDuration:150},$3=cp({passive:!0,capture:!0}),q3=["mousedown","touchstart"],Z3=["mouseup","mouseleave","touchend","touchcancel"];class pp{static{this._eventManager=new _st}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=_a(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...j3,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function yst(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,d=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-s+"px",h.style.top=l-s+"px",h.style.height=2*s+"px",h.style.width=2*s+"px",null!=n.color&&(h.style.backgroundColor=n.color),h.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(h);const f=window.getComputedStyle(h),g=f.transitionDuration,_="none"===f.transitionProperty||"0s"===g||"0s, 0s"===g||0===r.width&&0===r.height,b=new gst(this,h,n,_);h.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let y=null;return!_&&(d||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(b),w=()=>this._destroyRipple(b);h.addEventListener("transitionend",v),h.addEventListener("transitioncancel",w),y={onTransitionEnd:v,onTransitionCancel:w}}),this._activeRipples.set(b,y),(_||!d)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,n={...j3,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=_a(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,q3.forEach(n=>{pp._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Z3.forEach(e=>{this._triggerElement.addEventListener(e,this,$3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=1,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=R3(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!k3(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(q3.forEach(e=>pp._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&Z3.forEach(e=>t.removeEventListener(e,this,$3)))}}const vb=new at("mat-ripple-global-options");let bst=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new pp(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(oe),U(In),U(vb,8),U(Ao,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){2&n&&yi("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]})}}return i})(),xT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,wi]})}}return i})(),X3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi]})}}return i})(),wT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[xT,vc,wi,X3]})}}return i})();const Y3={capture:!0},K3=["focus","click","mouseenter","touchstart"],MT="mat-ripple-loader-uninitialized",ST="mat-ripple-loader-class-name",Q3="mat-ripple-loader-centered",yb="mat-ripple-loader-disabled";let xst=(()=>{class i{constructor(){this._document=wt(Ne,{optional:!0}),this._animationMode=wt(Ao,{optional:!0}),this._globalRippleOptions=wt(vb,{optional:!0}),this._platform=wt(In),this._ngZone=wt(oe),this._hosts=new Map,this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;const r=e.target.closest(`[${MT}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(const e of K3)this._document?.addEventListener(e,this._onInteraction,Y3)})}ngOnDestroy(){const e=this._hosts.keys();for(const n of e)this.destroyRipple(n);for(const n of K3)this._document?.removeEventListener(n,this._onInteraction,Y3)}configureRipple(e,n){e.setAttribute(MT,""),(n.className||!e.hasAttribute(ST))&&e.setAttribute(ST,n.className||""),n.centered&&e.setAttribute(Q3,""),n.disabled&&e.setAttribute(yb,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){const r=this._hosts.get(e);r?r.disabled=n:n?e.setAttribute(yb,""):e.removeAttribute(yb)}_createRipple(e){if(!this._document)return;const n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(ST)),e.append(r);const o=new bst(new Re(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,o.centered=e.hasAttribute(Q3),o.disabled=e.hasAttribute(yb),this.attachRipple(e,o),o}attachRipple(e,n){e.removeAttribute(MT),this._hosts.set(e,n)}destroyRipple(e){const n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();class J3{}class wst{}const va="*";function gp(i,t){return{type:7,name:i,definitions:t,options:{}}}function rd(i,t=null){return{type:4,styles:t,timings:i}}function eU(i,t=null){return{type:2,steps:i,options:t}}function vo(i){return{type:6,styles:i,offset:null}}function Th(i,t,e){return{type:0,name:i,styles:t,options:e}}function Tl(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}class _p{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class iU{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++n==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}function Mst(i,t){}class bb{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const DT="mdc-dialog--open",nU="mdc-dialog--opening",rU="mdc-dialog--closing";let Est=(()=>{class i extends N3{constructor(e,n,r,o,s,a,l,d){super(e,n,r,o,s,a,l,d),this._animationStateChanged=new Si}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(_T),U(Ne,8),U(bb),U(mb),U(oe),U(fp),U(gb))}}static{this.\u0275cmp=Ke({type:i,selectors:[["ng-component"]],features:[Zt],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}return i})();const oU="--mat-dialog-transition-duration";function sU(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?rb(i.substring(0,i.length-2)):i.endsWith("s")?1e3*rb(i.substring(0,i.length-1)):"0"===i?0:null}let Tst=(()=>{class i extends Est{constructor(e,n,r,o,s,a,l,d,h){super(e,n,r,o,s,a,l,h),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?sU(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?sU(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(oU,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(nU,DT)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(DT),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(DT),this._animationsEnabled?(this._hostElement.style.setProperty(oU,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(rU)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(nU,rU)}_waitForAnimationToComplete(e,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(_T),U(Ne,8),U(bb),U(mb),U(oe),U(fp),U(Ao,8),U(gb))}}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(n,r){2&n&&(_u("id",r._config.id),on("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),yi("_mat-animation-noopable",!r._animationsEnabled))},features:[Zt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,r){1&n&&(xt(0,"div",0)(1,"div",1),me(2,Mst,0,0,"ng-template",2),St()())},dependencies:[hT],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}}return i})();class Dh{constructor(t,e,n){this._ref=t,this._containerInstance=n,this._afterOpened=new Wt,this._beforeClosed=new Wt,this._state=0,this.disableClose=e.disableClose,this.id=t.id,n._animationStateChanged.pipe(jn(r=>"opened"===r.state),Sr(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(jn(r=>"closed"===r.state),Sr(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ii(this.backdropClick(),this.keydownEvents().pipe(jn(r=>27===r.keyCode&&!this.disableClose&&!fb(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),aU(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(jn(e=>"closing"===e.state),Sr(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function aU(i,t,e){return i._closeInteractionType=t,i.close(e)}const AT=new at("MatMdcDialogData"),Dst=new at("mat-mdc-dialog-default-options"),lU=new at("mat-mdc-dialog-scroll-strategy"),Ist={provide:lU,deps:[id],useFactory:function Ast(i){return()=>i.scrollStrategies.block()}};let Rst=0,kst=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,r,o,s,a,l,d,h,f){this._overlay=e,this._defaultOptions=r,this._parentDialog=o,this._dialogRefConstructor=l,this._dialogContainerType=d,this._dialogDataToken=h,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Wt,this._afterOpenedAtThisLevel=new Wt,this._idPrefix="mat-dialog-",this.dialogConfigClass=bb,this.afterAllClosed=X_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Y_(void 0))),this._scrollStrategy=a,this._dialog=n.get(U3)}open(e,n){let r;(n={...this._defaultOptions||new bb,...n}).id=n.id||`${this._idPrefix}${Rst++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(e,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:_b,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(s,a,l)=>(r=new this._dialogRefConstructor(s,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentRef=o.componentRef,r.componentInstance=o.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const s=this.openDialogs.indexOf(r);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}static{this.\u0275fac=function(n){s_()}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),xb=(()=>{class i extends kst{constructor(e,n,r,o,s,a,l,d){super(e,n,o,a,l,s,Dh,Tst,AT,d),this._idPrefix="mat-mdc-dialog-"}static{this.\u0275fac=function(n){return new(n||i)(Y(id),Y(Sn),Y(tm,8),Y(Dst,8),Y(lU),Y(i,12),Y(hb),Y(Ao,8))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),Pst=0,IT=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=cU(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){aU(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}static{this.\u0275fac=function(n){return new(n||i)(U(Dh,8),U(Re),U(xb))}}static{this.\u0275dir=dt({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(n,r){1&n&&Ci("click",function(s){return r._onButtonClick(s)}),2&n&&on("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Gn]})}}return i})(),RT=(()=>{class i{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r,this.id="mat-mdc-dialog-title-"+Pst++}ngOnInit(){this._dialogRef||(this._dialogRef=cU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._dialogRef._containerInstance?._ariaLabelledByQueue?.push(this.id)})}ngOnDestroy(){const e=this._dialogRef?._containerInstance?._ariaLabelledByQueue;e&&Promise.resolve().then(()=>{const n=e.indexOf(this.id);n>-1&&e.splice(n,1)})}static{this.\u0275fac=function(n){return new(n||i)(U(Dh,8),U(Re),U(xb))}}static{this.\u0275dir=dt({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(n,r){2&n&&_u("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]})}}return i})(),kT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]})}}return i})(),PT=(()=>{class i{constructor(){this.align="start"}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(n,r){2&n&&yi("mat-mdc-dialog-actions-align-center","center"===r.align)("mat-mdc-dialog-actions-align-end","end"===r.align)},inputs:{align:"align"}})}}return i})();function cU(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}let Ost=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[xb,Ist],imports:[lst,mT,ub,wi,wi]})}}return i})();const Lst=["mat-button",""],Fst=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Nst=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],Ust=["mat-icon-button",""],zst=["*"],Vst=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Hst=H3(ust(hst(class{constructor(i){this._elementRef=i}})));let uU=(()=>{class i extends Hst{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=mn(e),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=mn(e),this._updateRippleDisabled()}constructor(e,n,r,o){super(e),this._platform=n,this._ngZone=r,this._animationMode=o,this._focusMonitor=wt(gb),this._rippleLoader=wt(xst),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const s=e.nativeElement.classList;for(const a of Vst)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{s.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...e){return e.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){s_()}}static{this.\u0275dir=dt({type:i,features:[Zt]})}}return i})(),wb=(()=>{class i extends uU{constructor(e,n,r,o){super(e,n,r,o)}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(In),U(oe),U(Ao,8))}}static{this.\u0275cmp=Ke({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(n,r){2&n&&(on("disabled",r.disabled||null),yi("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Zt],attrs:Lst,ngContentSelectors:Nst,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(ao(Fst),vi(0,"span",0),ui(1),xt(2,"span",1),ui(3,1),St(),ui(4,2),vi(5,"span",2)(6,"span",3)),2&n&&yi("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})(),jst=(()=>{class i extends uU{constructor(e,n,r,o){super(e,n,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(In),U(oe),U(Ao,8))}}static{this.\u0275cmp=Ke({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(n,r){2&n&&(on("disabled",r.disabled||null),yi("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Zt],attrs:Ust,ngContentSelectors:zst,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){1&n&&(ao(),vi(0,"span",0),ui(1),vi(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})(),$st=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,xT,wi]})}}return i})();const hU=cp({passive:!0});let qst=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return rr;const n=_a(e),r=this._monitoredElements.get(n);if(r)return r.subject;const o=new Wt,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(s)&&(n.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(n.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,hU),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:o,unlisten:()=>{n.removeEventListener("animationstart",a,hU)}}),o}stopMonitoring(e){const n=_a(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||i)(Y(In),Y(oe))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Zst=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({})}}return i})();class Xst extends Wt{constructor(t=1/0,e=1/0,n=tT){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(n.push(t),!r&&n.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=n?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!r){const s=e.now();let a=0;for(let l=1;l<n.length&&n[l]<=s;l+=2)a=l;a&&n.splice(0,a+1)}}}class Kst{constructor(t){this._box=t,this._destroyed=new Wt,this._resizeSubject=new Wt,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Mi(e=>{const n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(jn(e=>e.some(n=>n.target===t)),function Yst(i,t,e){let n,r=!1;return i&&"object"==typeof i?({bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i):n=i??1/0,Zn({connector:()=>new Xst(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}({bufferSize:1,refCount:!0}),Cr(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Qst=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=wt(oe)}ngOnDestroy(){for(const[,e]of this._observers)e.destroy();this._observers.clear()}observe(e,n){const r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new Kst(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const Jst=["notch"],tat=["matFormFieldNotchedOutline",""],eat=["*"],iat=["textField"],nat=["iconPrefixContainer"],rat=["textPrefixContainer"];function oat(i,t){1&i&&vi(0,"span",19)}function sat(i,t){if(1&i&&(xt(0,"label",17),ui(1,1),me(2,oat,1,0,"span",18),St()),2&i){const e=Xi(2);ge("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),on("for",e._control.id),ye(2),ge("ngIf",!e.hideRequiredMarker&&e._control.required)}}function aat(i,t){1&i&&me(0,sat,3,5,"label",16),2&i&&ge("ngIf",Xi()._hasFloatingLabel())}function lat(i,t){1&i&&vi(0,"div",20)}function cat(i,t){}function dat(i,t){1&i&&me(0,cat,0,0,"ng-template",22),2&i&&(Xi(2),ge("ngTemplateOutlet",Ws(1)))}function uat(i,t){if(1&i&&(xt(0,"div",21),me(1,dat,1,1,"ng-template",9),St()),2&i){const e=Xi();ge("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),ye(1),ge("ngIf",!e._forceDisplayInfixLabel())}}function hat(i,t){1&i&&(xt(0,"div",23,24),ui(2,2),St())}function fat(i,t){1&i&&(xt(0,"div",25,26),ui(2,3),St())}function mat(i,t){}function pat(i,t){1&i&&me(0,mat,0,0,"ng-template",22),2&i&&(Xi(),ge("ngTemplateOutlet",Ws(1)))}function gat(i,t){1&i&&(xt(0,"div",27),ui(1,4),St())}function _at(i,t){1&i&&(xt(0,"div",28),ui(1,5),St())}function vat(i,t){1&i&&vi(0,"div",29)}function yat(i,t){1&i&&(xt(0,"div",30),ui(1,6),St()),2&i&&ge("@transitionMessages",Xi()._subscriptAnimationState)}function bat(i,t){if(1&i&&(xt(0,"mat-hint",34),pe(1),St()),2&i){const e=Xi(2);ge("id",e._hintLabelId),ye(1),Vf(e.hintLabel)}}function xat(i,t){if(1&i&&(xt(0,"div",31),me(1,bat,2,2,"mat-hint",32),ui(2,7),vi(3,"div",33),ui(4,8),St()),2&i){const e=Xi();ge("@transitionMessages",e._subscriptAnimationState),ye(1),ge("ngIf",e.hintLabel)}}const wat=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Mat=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Mb=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["mat-label"]]})}}return i})();const Sat=new at("MatError");let Cat=0,fU=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+Cat++}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){2&n&&(_u("id",r.id),on("align",null),yi("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}})}}return i})();const Eat=new at("MatPrefix"),Tat=new at("MatSuffix"),mU=new at("FloatingLabelParent");let pU=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=wt(Qst),this._ngZone=wt(oe),this._parent=wt(mU),this._resizeSubscription=new tn}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function Dat(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const n=e.scrollWidth;return e.remove(),n}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){2&n&&yi("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}})}}return i})();const gU="mdc-line-ripple--active",Sb="mdc-line-ripple--deactivating";let _U=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{const o=this._elementRef.nativeElement.classList,s=o.contains(Sb);"opacity"===r.propertyName&&s&&o.remove(gU,Sb)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(Sb),e.add(gU)}deactivate(){this._elementRef.nativeElement.classList.add(Sb)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(oe))}}static{this.\u0275dir=dt({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]})}}return i})(),vU=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){this._notch.nativeElement.style.width=this.open&&e?`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(oe))}}static{this.\u0275cmp=Ke({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(1&n&&tr(Jst,5),2&n){let o;Qe(o=Je())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){2&n&&yi("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:tat,ngContentSelectors:eat,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(n,r){1&n&&(ao(),vi(0,"div",0),xt(1,"div",1,2),ui(3),St(),vi(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})();const Aat={transitionMessages:gp("transitionMessages",[Th("enter",vo({opacity:1,transform:"translateY(0%)"})),Tl("void => enter",[vo({opacity:0,transform:"translateY(-5px)"}),rd("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let yU=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=dt({type:i})}}return i})();const bU=new at("MatFormField"),Iat=new at("MAT_FORM_FIELD_DEFAULT_OPTIONS");let xU=0,SU=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=mn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,o,s,a,l,d){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+xU++,this._hintLabelId="mat-mdc-hint-"+xU++,this._subscriptAnimationState="",this._destroyed=new Wt,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Cr(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Ii(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Cr(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Cr(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=n?.getBoundingClientRect().width??0,s=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(pc),U(oe),U(dp),U(In),U(Iat,8),U(Ao,8),U(Ne))}}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,o){if(1&n&&(dn(o,Mb,5),dn(o,Mb,7),dn(o,yU,5),dn(o,Eat,5),dn(o,Tat,5),dn(o,Sat,5),dn(o,fU,5)),2&n){let s;Qe(s=Je())&&(r._labelChildNonStatic=s.first),Qe(s=Je())&&(r._labelChildStatic=s.first),Qe(s=Je())&&(r._formFieldControl=s.first),Qe(s=Je())&&(r._prefixChildren=s),Qe(s=Je())&&(r._suffixChildren=s),Qe(s=Je())&&(r._errorChildren=s),Qe(s=Je())&&(r._hintChildren=s)}},viewQuery:function(n,r){if(1&n&&(tr(iat,5),tr(nat,5),tr(rat,5),tr(pU,5),tr(vU,5),tr(_U,5)),2&n){let o;Qe(o=Je())&&(r._textField=o.first),Qe(o=Je())&&(r._iconPrefixContainer=o.first),Qe(o=Je())&&(r._textPrefixContainer=o.first),Qe(o=Je())&&(r._floatingLabel=o.first),Qe(o=Je())&&(r._notchedOutline=o.first),Qe(o=Je())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){2&n&&yi("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ke([{provide:bU,useExisting:i},{provide:mU,useExisting:i}])],ngContentSelectors:Mat,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(n,r){1&n&&(ao(wat),me(0,aat,1,1,"ng-template",null,0,Yf),xt(2,"div",1,2),Ci("click",function(s){return r._control.onContainerClick(s)}),me(4,lat,1,0,"div",3),xt(5,"div",4),me(6,uat,2,2,"div",5),me(7,hat,3,0,"div",6),me(8,fat,3,0,"div",7),xt(9,"div",8),me(10,pat,1,1,"ng-template",9),ui(11),St(),me(12,gat,2,0,"div",10),me(13,_at,2,0,"div",11),St(),me(14,vat,1,0,"div",12),St(),xt(15,"div",13),me(16,yat,2,1,"div",14),me(17,xat,5,2,"div",15),St()),2&n&&(ye(2),yi("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),ye(2),ge("ngIf",!r._hasOutline()&&!r._control.disabled),ye(2),ge("ngIf",r._hasOutline()),ye(1),ge("ngIf",r._hasIconPrefix),ye(1),ge("ngIf",r._hasTextPrefix),ye(2),ge("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),ye(2),ge("ngIf",r._hasTextSuffix),ye(1),ge("ngIf",r._hasIconSuffix),ye(1),ge("ngIf",!r._hasOutline()),ye(1),yi("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),ge("ngSwitch",r._getDisplayedMessages()),ye(1),ge("ngSwitchCase","error"),ye(1),ge("ngSwitchCase","hint"))},dependencies:[nm,SM,G_,hO,fU,pU,vU,_U],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[Aat.transitionMessages]},changeDetection:0})}}return i})(),Cb=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,vc,gT,wi]})}}return i})();const Pat=new at("MAT_INPUT_VALUE_ACCESSOR"),Oat=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Lat=0;const Fat=fst(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n,this.stateChanges=new Wt}});let CU=(()=>{class i extends Fat{get disabled(){return this._disabled}set disabled(e){this._disabled=mn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(wnt.required)??!1}set required(e){this._required=mn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&c3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=mn(e)}constructor(e,n,r,o,s,a,l,d,h,f){super(a,o,s,r),this._elementRef=e,this._platform=n,this._autofillMonitor=d,this._formField=f,this._uid="mat-input-"+Lat++,this.focused=!1,this.stateChanges=new Wt,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>c3().has(_)),this._iOSKeyupListener=_=>{const b=_.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const m=this._elementRef.nativeElement,g=m.nodeName.toLowerCase();this._inputValueAccessor=l||m,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&h.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===g,this._isTextarea="textarea"===g,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=m.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Oat.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(In),U(ga,10),U(eb,8),U(nb,8),U(pst),U(Pat,10),U(qst),U(oe),U(bU,8))}}static{this.\u0275dir=dt({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,r){1&n&&Ci("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&n&&(_u("id",r.id)("disabled",r.disabled)("required",r.required),on("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),yi("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[ke([{provide:yU,useExisting:i}]),Zt,Gn]})}}return i})(),Nat=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,Cb,Cb,Zst,wi]})}}return i})(),Bat=(()=>{class i{constructor(e){this.dialogRef=e,this.deviceName=""}addDevice(){this.dialogRef.close({name:this.deviceName})}static{this.\u0275fac=function(n){return new(n||i)(U(Dh))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-add-device-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(n,r){1&n&&(xt(0,"h2",0),pe(1,"Add Device"),St(),xt(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),pe(5,"Device Name"),St(),xt(6,"input",2),Ci("ngModelChange",function(s){return r.deviceName=s}),St()()(),xt(7,"mat-dialog-actions",3)(8,"button",4),pe(9,"Cancel"),St(),xt(10,"button",5),Ci("click",function(){return r.addDevice()}),pe(11,"Add"),St()()),2&n&&(ye(6),ge("ngModel",r.deviceName),ye(4),ge("disabled",!r.deviceName))},dependencies:[wb,tp,LE,ib,IT,RT,kT,PT,CU,SU,Mb],encapsulation:2})}}return i})(),Uat=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}confirmDelete(){this.dialogRef.close(!0)}static{this.\u0275fac=function(n){return new(n||i)(U(Dh),U(AT))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-delete-device-dialog"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","","color","warn",3,"click"]],template:function(n,r){1&n&&(xt(0,"h2",0),pe(1,"Delete Device"),St(),xt(2,"mat-dialog-content")(3,"p"),pe(4,'Are you sure you want to delete the device "'),xt(5,"b"),pe(6),St(),pe(7,'"?'),St()(),xt(8,"mat-dialog-actions",1)(9,"button",2),pe(10,"No"),St(),xt(11,"button",3),Ci("click",function(){return r.confirmDelete()}),pe(12,"Yes"),St()()),2&n&&(ye(6),Vf(r.data.name))},dependencies:[wb,IT,RT,kT,PT],encapsulation:2})}}return i})(),zat=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n,this.deviceName="",n&&(this.deviceName=n.name)}saveChanges(){this.dialogRef.close({name:this.deviceName})}static{this.\u0275fac=function(n){return new(n||i)(U(Dh),U(AT))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-edit-device-dialog"]],decls:12,vars:2,consts:[["mat-dialog-title",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["align","end"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(n,r){1&n&&(xt(0,"h2",0),pe(1,"Edit Device"),St(),xt(2,"mat-dialog-content")(3,"mat-form-field",1)(4,"mat-label"),pe(5,"Device Name"),St(),xt(6,"input",2),Ci("ngModelChange",function(s){return r.deviceName=s}),St()()(),xt(7,"mat-dialog-actions",3)(8,"button",4),pe(9,"Cancel"),St(),xt(10,"button",5),Ci("click",function(){return r.saveChanges()}),pe(11,"Save"),St()()),2&n&&(ye(6),ge("ngModel",r.deviceName),ye(4),ge("disabled",!r.deviceName))},dependencies:[wb,tp,LE,ib,IT,RT,kT,PT,CU,SU,Mb],encapsulation:2})}}return i})(),Vat=(()=>{class i{constructor(e){this.http=e,this.apiUrl="http://192.168.47.127:3018/api/devices"}getDevices(){return this.http.get(this.apiUrl)}addDevice(e){return this.http.post(this.apiUrl,e)}updateDevice(e){return this.http.put(`${this.apiUrl}/${e.id}`,e)}deleteDevice(e){return this.http.delete(`${this.apiUrl}/${e}`)}static{this.\u0275fac=function(n){return new(n||i)(Y(Mc))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();const Hat=["*"];let Eb;function vp(i){return function Gat(){if(void 0===Eb&&(Eb=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(Eb=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Eb}()?.createHTML(i)||i}function EU(i){return Error(`Unable to find icon with the name "${i}"`)}function TU(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function DU(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class od{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let Tb=(()=>{class i{constructor(e,n,r,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,o){return this._addSvgIconConfig(e,n,new od(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,o){const s=this._sanitizer.sanitize(Qn.HTML,r);if(!s)throw DU(r);const a=vp(s);return this._addSvgIconConfig(e,n,new od("",a,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new od(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const o=this._sanitizer.sanitize(Qn.HTML,n);if(!o)throw DU(n);const s=vp(o);return this._addSvgIconSetConfig(e,new od("",s,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(Qn.RESOURCE_URL,e);if(!n)throw TU(e);const r=this._cachedIconsByUrl.get(n);return r?jt(Db(r)):this._loadSvgIconFromConfig(new od(e,null)).pipe(En(o=>this._cachedIconsByUrl.set(n,o)),Ee(o=>Db(o)))}getNamedSvgIcon(e,n=""){const r=AU(n,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(n);return s?this._getSvgFromIconSetConfigs(e,s):Su(EU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?jt(Db(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Ee(n=>Db(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?jt(r):Q2(n.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(nl(a=>{const d=`Loading icon set URL: ${this._sanitizer.sanitize(Qn.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(d)),jt(null)})))).pipe(Ee(()=>{const s=this._extractIconWithNameFromAnySet(e,n);if(!s)throw EU(e);return s}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(En(n=>e.svgText=n),Ee(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?jt(null):this._fetchIcon(e).pipe(En(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const o=e.querySelector(`[id="${n}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(vp("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(vp("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&n.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw function Wat(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(Qn.RESOURCE_URL,n);if(!s)throw TU(n);const a=this._inProgressUrlFetches.get(s);if(a)return a;const l=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Ee(d=>vp(d)),Eu(()=>this._inProgressUrlFetches.delete(s)),Zn());return this._inProgressUrlFetches.set(s,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(AU(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](n,e);if(o)return $at(o)?new od(o.url,null,o.options):new od(o,null)}}static{this.\u0275fac=function(n){return new(n||i)(Y(Mc,8),Y(BM),Y(Ne,8),Y(Io))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Db(i){return i.cloneNode(!0)}function AU(i,t){return i+":"+t}function $at(i){return!(!i.url||!i.options)}const qat=H3(class{constructor(i){this._elementRef=i}}),Zat=new at("MAT_ICON_DEFAULT_OPTIONS"),Xat=new at("mat-icon-location",{providedIn:"root",factory:function Yat(){const i=wt(Ne),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),IU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Kat=IU.map(i=>`[${i}]`).join(", "),Qat=/^url\(['"]?#(.*?)['"]?\)$/;let Jat=(()=>{class i extends qat{get inline(){return this._inline}set inline(e){this._inline=mn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,o,s,a){super(e),this._iconRegistry=n,this._location=o,this._errorHandler=s,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=tn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(Kat),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)IU.forEach(s=>{const a=n[o],l=a.getAttribute(s),d=l?l.match(Qat):null;if(d){let h=r.get(a);h||(h=[],r.set(a,h)),h.push({name:s,value:d[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Sr(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${o.message}`))})}}static{this.\u0275fac=function(n){return new(n||i)(U(Re),U(Tb),Bd("aria-hidden"),U(Xat),U(Io),U(Zat,8))}}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(n,r){2&n&&(on("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),yi("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Zt],ngContentSelectors:Hat,decls:1,vars:0,template:function(n,r){1&n&&(ao(),ui(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return i})(),RU=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,wi]})}}return i})();function OT(i){return i&&"function"==typeof i.connect&&!(i instanceof HM)}class PU{applyChanges(t,e,n,r,o){t.forEachOperation((s,a,l)=>{let d,h;if(null==s.previousIndex){const f=n(s,a,l);d=e.createEmbeddedView(f.templateRef,f.context,f.index),h=1}else null==l?(e.remove(a),h=3):(d=e.get(a),e.move(d,l),h=2);o&&o({context:d?.context,operation:h,record:s})})}detach(){}}const yp=new at("_ViewRepeater"),tlt=[[["caption"]],[["colgroup"],["col"]]],elt=["caption","colgroup, col"];function LT(i){return class extends i{get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=mn(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}}}const Ah=new at("CDK_TABLE");let Ih=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(U(Wn))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkCellDef",""]]})}}return i})(),Rh=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(U(Wn))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkHeaderCellDef",""]]})}}return i})(),Ab=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(U(Wn))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkFooterCellDef",""]]})}}return i})();class olt{}const slt=LT(olt);let ya=(()=>{class i extends slt{get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const n=this._stickyEnd;this._stickyEnd=mn(e),this._hasStickyChanged=n!==this._stickyEnd}constructor(e){super(),this._table=e,this._stickyEnd=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static{this.\u0275fac=function(n){return new(n||i)(U(Ah,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(n,r,o){if(1&n&&(dn(o,Ih,5),dn(o,Rh,5),dn(o,Ab,5)),2&n){let s;Qe(s=Je())&&(r.cell=s.first),Qe(s=Je())&&(r.headerCell=s.first),Qe(s=Je())&&(r.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[ke([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),Zt]})}}return i})();class FT{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let NT=(()=>{class i extends FT{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||i)(U(ya),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[Zt]})}}return i})(),BT=(()=>{class i extends FT{constructor(e,n){if(super(e,n),1===e._table?._elementRef.nativeElement.nodeType){const r=e._table._elementRef.nativeElement.getAttribute("role");n.nativeElement.setAttribute("role","grid"===r||"treegrid"===r?"gridcell":"cell")}}static{this.\u0275fac=function(n){return new(n||i)(U(ya),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[Zt]})}}return i})();class NU{constructor(){this.tasks=[],this.endTasks=[]}}const UT=new at("_COALESCED_STYLE_SCHEDULER");let BU=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Wt}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new NU,this._getScheduleObservable().pipe(Cr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new NU;for(const n of e.tasks)n();for(const n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Jt(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Sr(1))}static{this.\u0275fac=function(n){return new(n||i)(Y(oe))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),zT=(()=>{class i{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){const n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof bp?e.headerCell.template:this instanceof xp?e.footerCell.template:e.cell.template}static{this.\u0275fac=function(n){return new(n||i)(U(Wn),U(js))}}static{this.\u0275dir=dt({type:i,features:[Gn]})}}return i})();class alt extends zT{}const llt=LT(alt);let bp=(()=>{class i extends llt{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}static{this.\u0275fac=function(n){return new(n||i)(U(Wn),U(js),U(Ah,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[Zt,Gn]})}}return i})();class clt extends zT{}const dlt=LT(clt);let xp=(()=>{class i extends dlt{constructor(e,n,r){super(e,n),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}static{this.\u0275fac=function(n){return new(n||i)(U(Wn),U(js),U(Ah,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[Zt,Gn]})}}return i})(),Ib=(()=>{class i extends zT{constructor(e,n,r){super(e,n),this._table=r}static{this.\u0275fac=function(n){return new(n||i)(U(Wn),U(js),U(Ah,8))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[Zt]})}}return i})(),ba=(()=>{class i{static{this.mostRecentCellOutlet=null}constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}static{this.\u0275fac=function(n){return new(n||i)(U(Jn))}}static{this.\u0275dir=dt({type:i,selectors:[["","cdkCellOutlet",""]]})}}return i})(),VT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){1&n&&_s(0,0)},dependencies:[ba],encapsulation:2})}}return i})(),GT=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){1&n&&_s(0,0)},dependencies:[ba],encapsulation:2})}}return i})(),Rb=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static{this.\u0275fac=function(n){return new(n||i)(U(Wn))}}static{this.\u0275dir=dt({type:i,selectors:[["ng-template","cdkNoDataRow",""]]})}}return i})();const UU=["top","bottom","left","right"];class ult{constructor(t,e,n,r,o=!0,s=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=o,this._needsPositionStickyOnElement=s,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const n=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let o=0;o<r.children.length;o++)n.push(r.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(const r of n)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,n,r=!0){if(!t.length||!this._isBrowser||!e.some(m=>m)&&!n.some(m=>m))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const o=t[0],s=o.children.length,a=this._getCellWidths(o,r),l=this._getStickyStartColumnPositions(a,e),d=this._getStickyEndColumnPositions(a,n),h=e.lastIndexOf(!0),f=n.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const m="rtl"===this.direction,g=m?"right":"left",_=m?"left":"right";for(const b of t)for(let y=0;y<s;y++){const v=b.children[y];e[y]&&this._addStickyStyle(v,g,l[y],y===h),n[y]&&this._addStickyStyle(v,_,d[y],y===f)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===h?[]:a.slice(0,h+1).map((b,y)=>e[y]?b:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===f?[]:a.slice(f).map((b,y)=>n[y+f]?b:null).reverse()}))})}stickRows(t,e,n){if(!this._isBrowser)return;const r="bottom"===n?t.slice().reverse():t,o="bottom"===n?e.slice().reverse():e,s=[],a=[],l=[];for(let h=0,f=0;h<r.length;h++){if(!o[h])continue;s[h]=f;const m=r[h];l[h]=this._isNativeHtmlTable?Array.from(m.children):[m];const g=m.getBoundingClientRect().height;f+=g,a[h]=g}const d=o.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{for(let h=0;h<r.length;h++){if(!o[h])continue;const f=s[h],m=h===d;for(const g of l[h])this._addStickyStyle(g,n,f,m)}"top"===n?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:l})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const n=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);UU.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${n}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let n=0;for(const r of UU)t.style[r]&&(n+=e[r]);return n?`${n}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const n=[],r=t.children;for(let o=0;o<r.length;o++)n.push(r[o].getBoundingClientRect().width);return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(t,e){const n=[];let r=0;for(let o=0;o<t.length;o++)e[o]&&(n[o]=r,r+=t[o]);return n}_getStickyEndColumnPositions(t,e){const n=[];let r=0;for(let o=t.length;o>0;o--)e[o]&&(n[o]=r,r+=t[o]);return n}}const WT=new at("CDK_SPL");let kb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["","rowOutlet",""]]})}}return i})(),Pb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["","headerRowOutlet",""]]})}}return i})(),Ob=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["","footerRowOutlet",""]]})}}return i})(),Lb=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n}static{this.\u0275fac=function(n){return new(n||i)(U(Jn),U(Re))}}static{this.\u0275dir=dt({type:i,selectors:[["","noDataRowOutlet",""]]})}}return i})(),Fb=(()=>{class i{get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=mn(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=mn(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,n,r,o,s,a,l,d,h,f,m,g){this._differs=e,this._changeDetectorRef=n,this._elementRef=r,this._dir=s,this._platform=l,this._viewRepeater=d,this._coalescedStyleScheduler=h,this._viewportRuler=f,this._stickyPositioningListener=m,this._ngZone=g,this._onDestroy=new Wt,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Si,this.viewChange=new _n({start:0,end:Number.MAX_VALUE}),o||this._elementRef.nativeElement.setAttribute("role","table"),this._document=a,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(Cr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),OT(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(r,o,s)=>this._getEmbeddedViewArgs(r.item,s),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{n.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&oe.isInAngularZone()?this._ngZone.onStable.pipe(Sr(1),Cr(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const o=this._headerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,o,"top"),this._headerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const o=this._footerRowDefs.map(s=>s.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,o,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,o),this._footerRowDefs.forEach(s=>s.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,s)=>{this._addStickyColumnStyles([o],this._headerRowDefs[s])}),this._rowDefs.forEach(o=>{const s=[];for(let a=0;a<n.length;a++)this._renderRows[a].rowDef===o&&s.push(n[a]);this._addStickyColumnStyles(s,o)}),r.forEach((o,s)=>{this._addStickyColumnStyles([o],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_getAllRenderRows(){const e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let o=this._data[r];const s=this._getRenderRowsForData(o,r,n.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let a=0;a<s.length;a++){let l=s[a];const d=this._cachedRenderRowsMap.get(l.data);d.has(l.rowDef)?d.get(l.rowDef).push(l):d.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,n,r){return this._getRowDefs(e,n).map(s=>{const a=r&&r.has(s)?r.get(s):[];if(a.length){const l=a.shift();return l.dataIndex=n,l}return{data:e,rowDef:s,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Nb(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=Nb(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Nb(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Nb(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(n=>!n.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(s,a)=>s||!!a.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),n||r||o}_switchDataSource(e){this._data=[],OT(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;OT(this.dataSource)?e=this.dataSource.connect(this):UM(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=jt(this.dataSource)),this._renderChangeSubscription=e.pipe(Cr(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){const r=Array.from(n.columns||[]).map(a=>this._columnDefsByName.get(a)),o=r.map(a=>a.sticky),s=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const n=[];for(let r=0;r<e.viewContainer.length;r++){const o=e.viewContainer.get(r);n.push(o.rootNodes[0])}return n}_getRowDefs(e,n){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(o=>!o.when||o.when(n,e));else{let o=this._rowDefs.find(s=>s.when&&s.when(n,e))||this._defaultRowDef;o&&r.push(o)}return r}_getEmbeddedViewArgs(e,n){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:n}}_renderRow(e,n,r,o={}){const s=e.viewContainer.createEmbeddedView(n.template,o,r);return this._renderCellTemplateForItem(n,o),s}_renderCellTemplateForItem(e,n){for(let r of this._getCellTemplates(e))ba.mostRecentCellOutlet&&ba.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let n=0,r=e.length;n<r;n++){const s=e.get(n).context;s.count=r,s.first=0===n,s.last=n===r-1,s.even=n%2==0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[n].dataIndex,s.renderIndex=n):s.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,n=>{const r=this._columnDefsByName.get(n);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),n=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of n){const o=this._document.createElement(r.tag);o.setAttribute("role","rowgroup");for(const s of r.outlets)o.appendChild(s.elementRef.nativeElement);e.appendChild(o)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(n,r)=>n||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new ult(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:jt()).pipe(Cr(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const n=0===this._rowOutlet.viewContainer.length;if(n===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(n){const o=r.createEmbeddedView(e.templateRef),s=o.rootNodes[0];1===o.rootNodes.length&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=n,this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||i)(U(js),U(pc),U(Re),Bd("role"),U(dp,8),U(Ne),U(In),U(yp),U(UT),U(aT),U(WT,12),U(oe,8))}}static{this.\u0275cmp=Ke({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(n,r,o){if(1&n&&(dn(o,Rb,5),dn(o,ya,5),dn(o,Ib,5),dn(o,bp,5),dn(o,xp,5)),2&n){let s;Qe(s=Je())&&(r._noDataRow=s.first),Qe(s=Je())&&(r._contentColumnDefs=s),Qe(s=Je())&&(r._contentRowDefs=s),Qe(s=Je())&&(r._contentHeaderRowDefs=s),Qe(s=Je())&&(r._contentFooterRowDefs=s)}},viewQuery:function(n,r){if(1&n&&(tr(kb,7),tr(Pb,7),tr(Ob,7),tr(Lb,7)),2&n){let o;Qe(o=Je())&&(r._rowOutlet=o.first),Qe(o=Je())&&(r._headerRowOutlet=o.first),Qe(o=Je())&&(r._footerRowOutlet=o.first),Qe(o=Je())&&(r._noDataRowOutlet=o.first)}},hostAttrs:["ngSkipHydration","",1,"cdk-table"],hostVars:2,hostBindings:function(n,r){2&n&&yi("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[ke([{provide:Ah,useExisting:i},{provide:yp,useClass:PU},{provide:UT,useClass:BU},{provide:WT,useValue:null}])],ngContentSelectors:elt,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){1&n&&(ao(tlt),ui(0),ui(1,1),_s(2,0)(3,1)(4,2)(5,3))},dependencies:[kb,Pb,Ob,Lb],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}}return i})();function Nb(i,t){return i.concat(Array.from(t))}let flt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[lT]})}}return i})();const mlt=[[["caption"]],[["colgroup"],["col"]]],plt=["caption","colgroup, col"];let VU=(()=>{class i extends Fb{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}ngOnInit(){super.ngOnInit(),this._isNativeHtmlTable&&this._elementRef.nativeElement.querySelector("tbody").classList.add("mdc-data-table__content")}static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:["ngSkipHydration","",1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(n,r){2&n&&yi("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],features:[ke([{provide:Fb,useExisting:i},{provide:Ah,useExisting:i},{provide:UT,useClass:BU},{provide:yp,useClass:PU},{provide:WT,useValue:null}]),Zt],ngContentSelectors:plt,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){1&n&&(ao(mlt),ui(0),ui(1,1),_s(2,0)(3,1)(4,2)(5,3))},dependencies:[kb,Pb,Ob,Lb],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{--mat-table-row-item-outline-width:1px;table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}}return i})(),jT=(()=>{class i extends Ih{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["","matCellDef",""]],features:[ke([{provide:Ih,useExisting:i}]),Zt]})}}return i})(),$T=(()=>{class i extends Rh{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["","matHeaderCellDef",""]],features:[ke([{provide:Rh,useExisting:i}]),Zt]})}}return i})(),qT=(()=>{class i extends ya{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[ke([{provide:ya,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),Zt]})}}return i})(),ZT=(()=>{class i extends NT{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],features:[Zt]})}}return i})(),XT=(()=>{class i extends BT{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],features:[Zt]})}}return i})(),HU=(()=>{class i extends bp{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[ke([{provide:bp,useExisting:i}]),Zt]})}}return i})(),GU=(()=>{class i extends Ib{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275dir=dt({type:i,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[ke([{provide:Ib,useExisting:i}]),Zt]})}}return i})(),WU=(()=>{class i extends VT{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],features:[ke([{provide:VT,useExisting:i}]),Zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){1&n&&_s(0,0)},dependencies:[ba],encapsulation:2})}}return i})(),jU=(()=>{class i extends GT{static{this.\u0275fac=function(){let e;return function(r){return(e||(e=oi(i)))(r||i)}}()}static{this.\u0275cmp=Ke({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],features:[ke([{provide:GT,useExisting:i}]),Zt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){1&n&&_s(0,0)},dependencies:[ba],encapsulation:2})}}return i})(),Mlt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,flt,wi]})}}return i})();function Clt(i,t){1&i&&(xt(0,"th",12),pe(1," Device Name "),St())}function Elt(i,t){if(1&i&&(xt(0,"td",13),pe(1),St()),2&i){const e=t.$implicit;ye(1),Vf(e.name)}}function Tlt(i,t){1&i&&(xt(0,"th",12),pe(1," API Key "),St())}function Dlt(i,t){if(1&i){const e=ww();xt(0,"td",13),pe(1),xt(2,"button",14),Ci("click",function(){const o=bg(e).$implicit;return xg(Xi(2).copyToClipboard(o.apiKey))}),xt(3,"mat-icon"),pe(4,"content_copy"),St()()()}if(2&i){const e=t.$implicit;ye(1),Qa(" ",e.apiKey," ")}}function Alt(i,t){1&i&&(xt(0,"th",12),pe(1," Actions "),St())}function Ilt(i,t){if(1&i){const e=ww();xt(0,"td",13)(1,"button",15),Ci("click",function(){const o=bg(e).$implicit;return xg(Xi(2).editDevice(o))}),xt(2,"mat-icon"),pe(3,"edit"),St()(),xt(4,"button",16),Ci("click",function(){const o=bg(e).$implicit;return xg(Xi(2).deleteDevice(o))}),xt(5,"mat-icon"),pe(6,"delete"),St()()()}}function Rlt(i,t){1&i&&vi(0,"tr",17)}function klt(i,t){1&i&&vi(0,"tr",18)}function Plt(i,t){if(1&i&&(xt(0,"table",4),Xa(1,5),me(2,Clt,2,0,"th",6),me(3,Elt,2,1,"td",7),Ya(),Xa(4,8),me(5,Tlt,2,0,"th",6),me(6,Dlt,5,1,"td",7),Ya(),Xa(7,9),me(8,Alt,2,0,"th",6),me(9,Ilt,7,0,"td",7),Ya(),me(10,Rlt,1,0,"tr",10),me(11,klt,1,0,"tr",11),St()),2&i){const e=Xi();ge("dataSource",e.devices),ye(10),ge("matHeaderRowDef",e.displayedColumns),ye(1),ge("matRowDefColumns",e.displayedColumns)}}function Olt(i,t){1&i&&(xt(0,"div",19)(1,"p"),pe(2,"No devices found. Add a new device to get started."),St()())}const Llt=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:oX},{path:"maps",component:prt},{path:"settings",component:(()=>{class i{copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{alert("API Key copied to clipboard!")})}constructor(e,n){this.dialog=e,this.deviceService=n,this.devices=[],this.displayedColumns=["name","apiKey","actions"],this.loadDevices()}loadDevices(){this.deviceService.getDevices().subscribe({next:e=>{this.devices=e},error:e=>{console.error("Failed to load devices:",e),alert("Error loading devices. Please try again later.")}})}openAddDeviceDialog(){this.dialog.open(Bat,{width:"400px"}).afterClosed().subscribe(n=>{n&&this.deviceService.addDevice(n).subscribe({next:r=>{this.devices.push(r),alert("Device added successfully!")},error:r=>{console.error("Failed to add device:",r),alert("Error adding device. Please try again.")}})})}editDevice(e){this.dialog.open(zat,{width:"400px",data:{name:e.name}}).afterClosed().subscribe(r=>{if(r){const o={...e,name:r.name};this.deviceService.updateDevice(o).subscribe({next:()=>{const s=this.devices.findIndex(a=>a.id===e.id);this.devices[s]=o,alert("Device updated successfully!")},error:s=>{console.error("Failed to update device:",s),alert("Error updating device. Please try again.")}})}})}deleteDevice(e){this.dialog.open(Uat,{width:"400px",data:{name:e.name}}).afterClosed().subscribe(r=>{r&&this.deviceService.deleteDevice(e.id).subscribe({next:()=>{this.devices=this.devices.filter(o=>o.id!==e.id),alert("Device deleted successfully!")},error:o=>{console.error("Failed to delete device:",o),alert("Error deleting device. Please try again.")}})})}static{this.\u0275fac=function(n){return new(n||i)(U(xb),U(Vat))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-settings"]],decls:7,vars:2,consts:[[1,"settings-container"],["mat-raised-button","","color","primary",3,"click"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],["class","no-devices",4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","apiKey"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"no-devices"]],template:function(n,r){1&n&&(xt(0,"div",0)(1,"h1"),pe(2,"Device Management"),St(),xt(3,"button",1),Ci("click",function(){return r.openAddDeviceDialog()}),pe(4,"Add Device"),St(),me(5,Plt,12,3,"table",2),me(6,Olt,3,0,"div",3),St()),2&n&&(ye(5),ge("ngIf",r.devices.length>0),ye(1),ge("ngIf",0===r.devices.length))},dependencies:[nm,Jat,wb,jst,VU,$T,HU,qT,jT,GU,ZT,XT,WU,jU],styles:[".settings-container[_ngcontent-%COMP%]{padding:20px}.device-list[_ngcontent-%COMP%]{margin-top:20px}.device-card[_ngcontent-%COMP%]{margin:10px 0;padding:10px}"]})}}return i})()}];let Flt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[WL.forRoot(Llt),WL]})}}return i})(),Nlt=(()=>{class i{constructor(){this.isMinimized=!1}ngOnInit(){this.sidebarToggleListener=e=>{this.isMinimized=e.detail.isMinimized},window.addEventListener("sidebarToggle",this.sidebarToggleListener)}ngOnDestroy(){window.removeEventListener("sidebarToggle",this.sidebarToggleListener)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-navbar"]],decls:8,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-success","shadow-sm","rounded-bottom"],[1,"container-fluid"],["href","#",1,"navbar-brand","text-white","d-flex","align-items-center"],[1,"fas","fa-home","me-2"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"]],template:function(n,r){1&n&&(xt(0,"nav",0)(1,"div",1)(2,"a",2),vi(3,"i",3),pe(4," SIMPEL Web Manager "),St(),xt(5,"button",4),vi(6,"span",5),St(),vi(7,"div",6),St()()),2&n&&yi("minimized",r.isMinimized)}})}}return i})();function Blt(i,t){1&i&&(xt(0,"div",13),pe(1," SIMPEL Menu "),St())}function Ult(i,t){1&i&&(xt(0,"span"),pe(1,"Dashboard"),St())}function zlt(i,t){1&i&&(xt(0,"span"),pe(1,"Maps"),St())}function Vlt(i,t){1&i&&(xt(0,"span"),pe(1,"Setting"),St())}let Hlt=(()=>{class i{constructor(){this.toggle=new Si,this.isMinimized=!1}toggleMinimize(){this.isMinimized=!this.isMinimized,this.toggle.emit()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-sidebar"]],outputs:{toggle:"toggle"},decls:17,vars:10,consts:[[1,"sidebar"],[1,"minimize-btn",3,"click"],[1,"fa-solid"],["class","sidebar-header",4,"ngIf"],[1,"nav-list","sidebar-nav"],[1,"nav-item"],["routerLink","/dashboard",1,"nav-link"],[1,"fa-solid","fa-gauge-high"],[4,"ngIf"],["routerLink","/maps",1,"nav-link"],[1,"fa-solid","fa-map"],["routerLink","/settings",1,"nav-link"],[1,"fa-solid","fa-gear"],[1,"sidebar-header"]],template:function(n,r){1&n&&(xt(0,"aside",0)(1,"button",1),Ci("click",function(){return r.toggleMinimize()}),vi(2,"i",2),St(),me(3,Blt,2,0,"div",3),xt(4,"ul",4)(5,"li",5)(6,"a",6),vi(7,"i",7),me(8,Ult,2,0,"span",8),St()(),xt(9,"li",5)(10,"a",9),vi(11,"i",10),me(12,zlt,2,0,"span",8),St()(),xt(13,"li",5)(14,"a",11),vi(15,"i",12),me(16,Vlt,2,0,"span",8),St()()()()),2&n&&(yi("minimized",r.isMinimized),ye(2),yi("fa-arrow-left",!r.isMinimized)("fa-arrow-right",r.isMinimized),ye(1),ge("ngIf",!r.isMinimized),ye(5),ge("ngIf",!r.isMinimized),ye(4),ge("ngIf",!r.isMinimized),ye(4),ge("ngIf",!r.isMinimized))},dependencies:[nm,mv],styles:[".sidebar.minimized[_ngcontent-%COMP%]{width:80px;padding-top:1rem}.minimize-btn[_ngcontent-%COMP%]{background:#0000;border:none;color:#fff;cursor:pointer;position:absolute;top:15px;right:30px;font-size:1.5rem;width:35px;height:35px;border-radius:50%;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 5px #0003;z-index:1100;transition:right .3s ease-in-out,background-color .3s ease-in-out}.minimize-btn[_ngcontent-%COMP%]:hover{background:#4644ca}.sidebar.minimized[_ngcontent-%COMP%]   .minimize-btn[_ngcontent-%COMP%]{top:15px;right:20px}.sidebar-header[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;font-weight:600;margin-top:2rem;transition:opacity .3s ease-in-out}.sidebar.minimized[_ngcontent-%COMP%]   .sidebar-header[_ngcontent-%COMP%]{opacity:0}.nav-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:2rem 0 0}.nav-item[_ngcontent-%COMP%]{margin-bottom:1rem}.nav-link[_ngcontent-%COMP%]{display:flex;align-items:center;padding:.75rem 1.5rem;color:#fff;text-decoration:none;font-size:1rem;transition:background-color .3s ease-in-out,border-left .3s ease-in-out,color .3s ease-in-out}.sidebar.minimized[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{justify-content:center;padding:.75rem .5rem}.nav-link[_ngcontent-%COMP%]:hover{background-color:#02498b;border-left:4px solid #0004ff;color:#ea00ff}.nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem;font-size:1.2rem}.sidebar.minimized[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:0}"]})}}return i})(),Glt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"bg-light","text-center","py-3"]],template:function(n,r){1&n&&(xt(0,"footer",0)(1,"p"),pe(2,"\xa9 2024 SIMPEL WEB MANAGER . All Rights Reserved."),St()())}})}}return i})();function Wlt(i,t){1&i&&vi(0,"div",4)}let jlt=(()=>{class i{constructor(e){this.renderer=e,this.isMinimized=!1,this.trails=Array(20).fill(0),this.positions=Array(20).fill({x:0,y:0})}toggleSidebar(){this.isMinimized=!this.isMinimized;const e=new CustomEvent("sidebarToggle",{detail:{isMinimized:this.isMinimized}});window.dispatchEvent(e)}ngOnInit(){document.addEventListener("mousemove",e=>{const{clientX:n,clientY:r}=e;this.positions.unshift({x:n,y:r}),this.positions.pop(),document.querySelectorAll(".cursor-trail").forEach((s,a)=>{s.style.transform=`translate(${this.positions[a].x}px, ${this.positions[a].y}px)`,s.style.opacity=""+(20-a)/20}),this.showTrails(),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.hideTrails()},30)})}hideTrails(){document.querySelectorAll(".cursor-trail").forEach(n=>{n.style.opacity="0"})}showTrails(){document.querySelectorAll(".cursor-trail").forEach((n,r)=>{n.style.opacity=""+(20-r)/20})}static{this.\u0275fac=function(n){return new(n||i)(U(ms))}}static{this.\u0275cmp=Ke({type:i,selectors:[["app-root"]],decls:7,vars:3,consts:[["class","cursor-trail",4,"ngFor","ngForOf"],[1,"dashboard-layout"],[3,"toggle"],[1,"content-area"],[1,"cursor-trail"]],template:function(n,r){1&n&&(me(0,Wlt,1,0,"div",0),xt(1,"div",1)(2,"app-sidebar",2),Ci("toggle",function(){return r.toggleSidebar()}),St(),xt(3,"div",3),vi(4,"app-navbar")(5,"router-outlet")(6,"app-footer"),St()()),2&n&&(ge("ngForOf",r.trails),ye(3),yi("minimized",r.isMinimized))},dependencies:[cO,iS,Nlt,Hlt,Glt],styles:[".cursor-trail[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:30px;height:10px;background:linear-gradient(to right,#1b7af7,rgba(92,116,253,0));background-color:#06f;border-radius:90%;pointer-events:none;transition:transform .3s ease-out,opacity .6s ease-out;opacity:0;z-index:9999}"]})}}return i})();function $U(i){return new nt(3e3,!1)}function Dl(i){switch(i.length){case 0:return new _p;case 1:return i[0];default:return new iU(i)}}function qU(i,t,e=new Map,n=new Map){const r=[],o=[];let s=-1,a=null;if(t.forEach(l=>{const d=l.get("offset"),h=d==s,f=h&&a||new Map;l.forEach((m,g)=>{let _=g,b=m;if("offset"!==g)switch(_=i.normalizePropertyName(_,r),b){case"!":b=e.get(g);break;case va:b=n.get(g);break;default:b=i.normalizeStyleValue(g,_,b,r)}f.set(_,b)}),h||o.push(f),a=f,s=d}),r.length)throw function mct(i){return new nt(3502,!1)}();return o}function YT(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&KT(e,"start",i)));break;case"done":i.onDone(()=>n(e&&KT(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&KT(e,"destroy",i)))}}function KT(i,t,e){const o=QT(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),s=i._data;return null!=s&&(o._data=s),o}function QT(i,t,e,n,r="",o=0,s){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:o,disabled:!!s}}function yo(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function ZU(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}const Ect=(()=>typeof document>"u"?null:document.documentElement)();function JT(i){const t=i.parentNode||i.host||null;return t===Ect?null:t}let sd=null,XU=!1;function YU(i,t){for(;t;){if(t===i)return!0;t=JT(t)}return!1}function KU(i,t,e){if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]}let QU=(()=>{class i{validateStyleProperty(e){return function Dct(i){sd||(sd=function Act(){return typeof document<"u"?document.body:null}()||{},XU=!!sd.style&&"WebkitAppearance"in sd.style);let t=!0;return sd.style&&!function Tct(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in sd.style,!t&&XU&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in sd.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return YU(e,n)}getParentElement(e){return JT(e)}query(e,n,r){return KU(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,o,s,a=[],l){return new _p(r,o)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})(),tD=(()=>{class i{static{this.NOOP=new QU}}return i})();const Ict=1e3,eD="ng-enter",Bb="ng-leave",Ub="ng-trigger",zb=".ng-trigger",tz="ng-animating",iD=".ng-animating";function xa(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:nD(parseFloat(t[1]),t[2])}function nD(i,t){return"s"===t?i*Ict:i}function Vb(i,t,e){return i.hasOwnProperty("duration")?i:function kct(i,t,e){let r,o=0,s="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push($U()),{duration:0,delay:0,easing:""};r=nD(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=nD(parseFloat(l),a[4]));const d=a[5];d&&(s=d)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function $lt(){return new nt(3100,!1)}()),a=!0),o<0&&(t.push(function qlt(){return new nt(3101,!1)}()),a=!0),a&&t.splice(l,0,$U())}return{duration:r,delay:o,easing:s}}(i,t,e)}function wp(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function ez(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Al(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function As(i,t,e){t.forEach((n,r)=>{const o=oD(r);e&&!e.has(r)&&e.set(r,i.style[o]),i.style[o]=n})}function ad(i,t){t.forEach((e,n)=>{const r=oD(n);i.style[r]=""})}function Mp(i){return Array.isArray(i)?1==i.length?i[0]:eU(i):i}const rD=new RegExp("{{\\s*(.+?)\\s*}}","g");function nz(i){let t=[];if("string"==typeof i){let e;for(;e=rD.exec(i);)t.push(e[1]);rD.lastIndex=0}return t}function Sp(i,t,e){const n=i.toString(),r=n.replace(rD,(o,s)=>{let a=t[s];return null==a&&(e.push(function Xlt(i){return new nt(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function Hb(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const Lct=/-+([a-z0-9])/g;function oD(i){return i.replace(Lct,(...t)=>t[1].toUpperCase())}function bo(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function Ylt(i){return new nt(3004,!1)}()}}function rz(i,t){return window.getComputedStyle(i)[t]}const Gb="*";function Bct(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function Uct(i,t,e){if(":"==i[0]){const l=function zct(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function dct(i){return new nt(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function cct(i){return new nt(3015,!1)}()),t;const r=n[1],o=n[2],s=n[3];t.push(oz(r,s));"<"==o[0]&&!(r==Gb&&s==Gb)&&t.push(oz(s,r))}(n,e,t)):e.push(i),e}const Wb=new Set(["true","1"]),jb=new Set(["false","0"]);function oz(i,t){const e=Wb.has(i)||jb.has(i),n=Wb.has(t)||jb.has(t);return(r,o)=>{let s=i==Gb||i==r,a=t==Gb||t==o;return!s&&e&&"boolean"==typeof r&&(s=r?Wb.has(i):jb.has(i)),!a&&n&&"boolean"==typeof o&&(a=o?Wb.has(t):jb.has(t)),s&&a}}const Vct=new RegExp("s*:selfs*,?","g");function sD(i,t,e,n){return new Hct(i).build(t,e,n)}class Hct{constructor(t){this._driver=t}build(t,e,n){const r=new jct(e);return this._resetContextStyleTimingState(r),bo(this,Mp(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function Qlt(){return new nt(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,d=l.name;d.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,o.push(this.visitState(l,e))}),l.name=d}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(function Jlt(){return new nt(3007,!1)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const o=new Set,s=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{nz(l).forEach(d=>{s.hasOwnProperty(d)||o.add(d)})})}),o.size&&(Hb(o.values()),e.errors.push(function tct(i,t){return new nt(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=bo(this,Mp(t.animation),e);return{type:1,matchers:Bct(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ld(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>bo(this,n,e)),options:ld(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const o=t.steps.map(s=>{e.currentTime=n;const a=bo(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:o,options:ld(t.options)}}visitAnimate(t,e){const n=function qct(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return aD(Vb(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=aD(0,0,"");return o.dynamic=!0,o.strValue=e,o}const r=Vb(e,t);return aD(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,o=t.styles?t.styles:vo({});if(5==o.type)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const d={};n.easing&&(d.easing=n.easing),s=vo(d)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===va?n.push(a):e.errors.push(new nt(3002,!1)):n.push(ez(a));let o=!1,s=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let l of a.values())if(l.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),t.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{const d=e.collectedStyles.get(e.currentQuerySelector),h=d.get(l);let f=!0;h&&(o!=r&&o>=h.startTime&&r<=h.endTime&&(e.errors.push(function ict(i,t,e,n,r){return new nt(3010,!1)}()),f=!1),o=h.startTime),f&&d.set(l,{startTime:o,endTime:r}),e.options&&function Oct(i,t,e){const n=t.params||{},r=nz(i);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||e.push(function Zlt(i){return new nt(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function nct(){return new nt(3011,!1)}()),n;let o=0;const s=[];let a=!1,l=!1,d=0;const h=t.steps.map(v=>{const w=this._makeStyleAst(v,e);let S=null!=w.offset?w.offset:function $ct(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(w.styles),C=0;return null!=S&&(o++,C=w.offset=S),l=l||C<0||C>1,a=a||C<d,d=C,s.push(C),w});l&&e.errors.push(function rct(){return new nt(3012,!1)}()),a&&e.errors.push(function oct(){return new nt(3200,!1)}());const f=t.steps.length;let m=0;o>0&&o<f?e.errors.push(function sct(){return new nt(3202,!1)}()):0==o&&(m=1/(f-1));const g=f-1,_=e.currentTime,b=e.currentAnimateTimings,y=b.duration;return h.forEach((v,w)=>{const S=m>0?w==g?1:m*w:s[w],C=S*y;e.currentTime=_+b.delay+C,b.duration=C,this._validateStyleAst(v,e),v.offset=S,n.styles.push(v)}),n}visitReference(t,e){return{type:8,animation:bo(this,Mp(t.animation),e),options:ld(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ld(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ld(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function Gct(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(Vct,"")),i=i.replace(/@\*/g,zb).replace(/@\w+/g,e=>zb+"-"+e.slice(1)).replace(/:animating/g,iD),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+o:o,yo(e.collectedStyles,e.currentQuerySelector,new Map);const a=bo(this,Mp(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:ld(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function act(){return new nt(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Vb(t.timings,e.errors,!0);return{type:12,animation:bo(this,Mp(t.animation),e),timings:n,options:null}}}class jct{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ld(i){return i?(i=wp(i)).params&&(i.params=function Wct(i){return i?wp(i):null}(i.params)):i={},i}function aD(i,t,e){return{duration:i,delay:t,easing:e}}function lD(i,t,e,n,r,o,s=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class $b{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Yct=new RegExp(":enter","g"),Qct=new RegExp(":leave","g");function cD(i,t,e,n,r,o=new Map,s=new Map,a,l,d=[]){return(new Jct).buildKeyframes(i,t,e,n,r,o,s,a,l,d)}class Jct{buildKeyframes(t,e,n,r,o,s,a,l,d,h=[]){d=d||new $b;const f=new dD(t,e,d,r,o,h,[]);f.options=l;const m=l.delay?xa(l.delay):0;f.currentTimeline.delayNextStep(m),f.currentTimeline.setStyles([s],null,f.errors,l),bo(this,n,f);const g=f.timelines.filter(_=>_.containsAnimation());if(g.length&&a.size){let _;for(let b=g.length-1;b>=0;b--){const y=g[b];if(y.element===e){_=y;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,l)}return g.length?g.map(_=>_.buildKeyframes()):[lD(e,[],[],[],0,m,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const o=r?.delay;if(o){const s="number"==typeof o?o:xa(Sp(o,r?.params??{},e.errors));n.delayNextStep(s)}}}_visitSubInstructions(t,e,n){let o=e.currentTimeline.currentTime;const s=null!=n.duration?xa(n.duration):null,a=null!=n.delay?xa(n.delay):null;return 0!==s&&t.forEach(l=>{const d=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,d.duration+d.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),bo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=qb);const s=xa(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>bo(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?xa(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),bo(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Vb(e.params?Sp(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(n.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(o):n.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,o=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?xa(r.delay):0;o&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=qb);let s=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((d,h)=>{e.currentQueryIndex=h;const f=e.createSubContext(t.options,d);o&&f.delayNextStep(o),d===e.element&&(l=f.currentTimeline),bo(this,t.animation,f),f.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,f.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const h=e.currentTimeline;l&&h.delayNextStep(l);const f=h.currentTime;bo(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-f+(r.startTime-n.currentTimeline.startTime)}}const qb={};class dD{constructor(t,e,n,r,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=qb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Zb(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=xa(n.duration)),null!=n.delay&&(r.delay=xa(n.delay));const o=n.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=Sp(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,o=new dD(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=qb,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},o=new tdt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(Yct,"."+this._enterClassName)).replace(Qct,"."+this._leaveClassName);let d=this._driver.query(this.element,t,1!=n);0!==n&&(d=n<0?d.slice(d.length+n,d.length):d.slice(0,n)),a.push(...d)}return!o&&0==a.length&&s.push(function lct(i){return new nt(3014,!1)}()),a}}class Zb{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Zb(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||va),this._currentKeyframe.set(e,va);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const o=r&&r.params||{},s=function edt(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let o of n)e.set(o,va)}else Al(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of s){const d=Sp(l,o,n);this._pendingStyles.set(a,d),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??va),this._updateStyle(a,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const d=Al(a,new Map,this._backFill);d.forEach((h,f)=>{"!"===h?t.add(f):h===va&&e.add(f)}),n||d.set("offset",l/this.duration),r.push(d)});const o=t.size?Hb(t.values()):[],s=e.size?Hb(e.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return lD(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class tdt extends Zb{constructor(t,e,n,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=n+e,a=e/s,l=Al(t[0]);l.set("offset",0),o.push(l);const d=Al(t[0]);d.set("offset",lz(a)),o.push(d);const h=t.length-1;for(let f=1;f<=h;f++){let m=Al(t[f]);const g=m.get("offset");m.set("offset",lz((e+g*n)/s)),o.push(m)}n=s,e=0,r="",t=o}return lD(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function lz(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class uD{}const idt=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class ndt extends uD{normalizePropertyName(t,e){return oD(t)}normalizeStyleValue(t,e,n,r){let o="";const s=n.toString().trim();if(idt.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)o="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Klt(i,t){return new nt(3005,!1)}())}return s+o}}function cz(i,t,e,n,r,o,s,a,l,d,h,f,m){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:l,preStyleProps:d,postStyleProps:h,totalTime:f,errors:m}}const hD={};class dz{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function rdt(i,t,e,n,r){return i.some(o=>o(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,o,s,a,l,d,h){const f=[],m=this.ast.options&&this.ast.options.params||hD,_=this.buildStyles(n,a&&a.params||hD,f),b=l&&l.params||hD,y=this.buildStyles(r,b,f),v=new Set,w=new Map,S=new Map,C="void"===r,F={params:odt(b,m),delay:this.ast.options?.delay},k=h?[]:cD(t,e,this.ast.animation,o,s,_,y,F,d,f);let P=0;if(k.forEach(I=>{P=Math.max(I.duration+I.delay,P)}),f.length)return cz(e,this._triggerName,n,r,C,_,y,[],[],w,S,P,f);k.forEach(I=>{const T=I.element,H=yo(w,T,new Set);I.preStyleProps.forEach(K=>H.add(K));const et=yo(S,T,new Set);I.postStyleProps.forEach(K=>et.add(K)),T!==e&&v.add(T)});const B=Hb(v.values());return cz(e,this._triggerName,n,r,C,_,y,k,B,w,S,P)}}function odt(i,t){const e=wp(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class sdt{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=wp(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!==s&&(r[o]=s)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=Sp(s,r,e));const l=this.normalizer.normalizePropertyName(a,e);s=this.normalizer.normalizeStyleValue(a,l,s,e),n.set(a,s)})}),n}}class ldt{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new sdt(r.style,r.options&&r.options.params||{},n))}),uz(this.states,"true","1"),uz(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new dz(t,r,this.states))}),this.fallbackTransition=function cdt(i,t,e){return new dz(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(s=>s.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function uz(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const ddt=new $b;class udt{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],o=sD(this._driver,e,n,[]);if(n.length)throw function pct(i){return new nt(3503,!1)}();this._animations.set(t,o)}_buildPlayer(t,e,n){const r=t.element,o=qU(this._normalizer,t.keyframes,e,n);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],o=this._animations.get(t);let s;const a=new Map;if(o?(s=cD(this._driver,e,o,eD,Bb,new Map,new Map,n,ddt,r),s.forEach(h=>{const f=yo(a,h.element,new Map);h.postStyleProps.forEach(m=>f.set(m,null))})):(r.push(function gct(){return new nt(3300,!1)}()),s=[]),r.length)throw function _ct(i){return new nt(3504,!1)}();a.forEach((h,f)=>{h.forEach((m,g)=>{h.set(g,this._driver.computeStyle(f,g,va))})});const d=Dl(s.map(h=>{const f=a.get(h.element);return this._buildPlayer(h,new Map,f)}));return this._playersById.set(t,d),d.onDestroy(()=>this.destroy(t)),this.players.push(d),d}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function vct(i){return new nt(3301,!1)}();return e}listen(t,e,n,r){const o=QT(e,"","","");return YT(this._getPlayer(t),n,o,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const hz="ng-animate-queued",fD="ng-animate-disabled",gdt=[],fz={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},_dt={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},es="__ng_removed";class mD{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function xdt(i){return i??null}(n?t.value:t),n){const o=wp(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Cp="void",pD=new mD(Cp);class vdt{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Fo(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function yct(i,t){return new nt(3302,!1)}();if(null==n||0==n.length)throw function bct(i){return new nt(3303,!1)}();if(!function wdt(i){return"start"==i||"done"==i}(n))throw function xct(i,t){return new nt(3400,!1)}();const o=yo(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=yo(this._engine.statesByElement,t,new Map);return a.has(e)||(Fo(t,Ub),Fo(t,Ub+"-"+e),a.set(e,pD)),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function wct(i){return new nt(3401,!1)}();return e}trigger(t,e,n,r=!0){const o=this._getTrigger(e),s=new gD(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Fo(t,Ub),Fo(t,Ub+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const d=new mD(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&d.absorbOptions(l.options),a.set(e,d),l||(l=pD),d.value!==Cp&&l.value===d.value){if(!function Cdt(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||i[o]!==t[o])return!1}return!0}(l.params,d.params)){const b=[],y=o.matchStyles(l.value,l.params,b),v=o.matchStyles(d.value,d.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{ad(t,y),As(t,v)})}return}const m=yo(this._engine.playersByElement,t,[]);m.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let g=o.matchTransition(l.value,d.value,t,d.params),_=!1;if(!g){if(!r)return;g=o.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:g,fromState:l,toState:d,player:s,isFallbackTransition:_}),_||(Fo(t,hz),s.onStart(()=>{kh(t,hz)})),s.onDone(()=>{let b=this.players.indexOf(s);b>=0&&this.players.splice(b,1);const y=this._engine.playersByElement.get(t);if(y){let v=y.indexOf(s);v>=0&&y.splice(v,1)}}),this.players.push(s),m.push(s),s}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,zb,!0);n.forEach(r=>{if(r[es])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(o.forEach((l,d)=>{if(s.set(d,l.value),this._triggers.has(d)){const h=this.trigger(t,d,Cp,r);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),n&&Dl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers.get(s).fallbackTransition,d=n.get(s)||pD,h=new mD(Cp),f=new gD(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:d,toState:h,player:f,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const o=n.players.length?n.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(n.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const o=t[es];(!o||o===fz)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Fo(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const o=n.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==n.triggerName){const l=QT(o,n.triggerName,n.fromState.value,n.toState.value);l._data=t,YT(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const o=n.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}}class ydt{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new vdt(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let s=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const d=n.indexOf(l);n.splice(d+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}s||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){t&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const n=this._fetchNamespace(t);this.namespacesByHostElement.delete(n.hostElement);const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1),n.destroy(e),delete this._namespaceLookup[t]}))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const o=this._fetchNamespace(r.namespaceId);o&&e.add(o)}return e}trigger(t,e,n,r){if(Xb(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!Xb(e))return;const o=e[es];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Fo(t,fD)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),kh(t,fD))}removeNode(t,e,n){if(Xb(e)){const r=t?this._fetchNamespace(t):null;r?r.removeNode(e,n):this.markElementAsRemoved(t,e,!1,n);const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,n)}else this._onRemovalComplete(e,n)}markElementAsRemoved(t,e,n,r,o){this.collectedLeaveElements.push(e),e[es]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,n,r,o){return Xb(e)?this._fetchNamespace(t).listen(e,n,r,o):()=>{}}_buildInstruction(t,e,n,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,zb,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,iD,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Dl(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[es];if(e&&e.setForRemoval){if(t[es]=fz,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(fD)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Fo(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Dl(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function Mct(i){return new nt(3402,!1)}()}_flushAnimations(t,e){const n=new $b,r=[],o=new Map,s=[],a=new Map,l=new Map,d=new Map,h=new Set;this.disabledNodes.forEach(G=>{h.add(G);const it=this.driver.query(G,".ng-animate-queued",!0);for(let q=0;q<it.length;q++)h.add(it[q])});const f=this.bodyNode,m=Array.from(this.statesByElement.keys()),g=gz(m,this.collectedEnterElements),_=new Map;let b=0;g.forEach((G,it)=>{const q=eD+b++;_.set(it,q),G.forEach(ht=>Fo(ht,q))});const y=[],v=new Set,w=new Set;for(let G=0;G<this.collectedLeaveElements.length;G++){const it=this.collectedLeaveElements[G],q=it[es];q&&q.setForRemoval&&(y.push(it),v.add(it),q.hasAnimation?this.driver.query(it,".ng-star-inserted",!0).forEach(ht=>v.add(ht)):w.add(it))}const S=new Map,C=gz(m,Array.from(v));C.forEach((G,it)=>{const q=Bb+b++;S.set(it,q),G.forEach(ht=>Fo(ht,q))}),t.push(()=>{g.forEach((G,it)=>{const q=_.get(it);G.forEach(ht=>kh(ht,q))}),C.forEach((G,it)=>{const q=S.get(it);G.forEach(ht=>kh(ht,q))}),y.forEach(G=>{this.processLeaveNode(G)})});const F=[],k=[];for(let G=this._namespaceList.length-1;G>=0;G--)this._namespaceList[G].drainQueuedTransitions(e).forEach(q=>{const ht=q.player,Et=q.element;if(F.push(ht),this.collectedEnterElements.length){const yt=Et[es];if(yt&&yt.setForMove){if(yt.previousTriggersValues&&yt.previousTriggersValues.has(q.triggerName)){const te=yt.previousTriggersValues.get(q.triggerName),se=this.statesByElement.get(q.element);if(se&&se.has(q.triggerName)){const _e=se.get(q.triggerName);_e.value=te,se.set(q.triggerName,_e)}}return void ht.destroy()}}const Nt=!f||!this.driver.containsElement(f,Et),he=S.get(Et),Xe=_.get(Et),rt=this._buildInstruction(q,n,Xe,he,Nt);if(rt.errors&&rt.errors.length)return void k.push(rt);if(Nt)return ht.onStart(()=>ad(Et,rt.fromStyles)),ht.onDestroy(()=>As(Et,rt.toStyles)),void r.push(ht);if(q.isFallbackTransition)return ht.onStart(()=>ad(Et,rt.fromStyles)),ht.onDestroy(()=>As(Et,rt.toStyles)),void r.push(ht);const Tt=[];rt.timelines.forEach(yt=>{yt.stretchStartingKeyframe=!0,this.disabledNodes.has(yt.element)||Tt.push(yt)}),rt.timelines=Tt,n.append(Et,rt.timelines),s.push({instruction:rt,player:ht,element:Et}),rt.queriedElements.forEach(yt=>yo(a,yt,[]).push(ht)),rt.preStyleProps.forEach((yt,te)=>{if(yt.size){let se=l.get(te);se||l.set(te,se=new Set),yt.forEach((_e,ii)=>se.add(ii))}}),rt.postStyleProps.forEach((yt,te)=>{let se=d.get(te);se||d.set(te,se=new Set),yt.forEach((_e,ii)=>se.add(ii))})});if(k.length){const G=[];k.forEach(it=>{G.push(function Sct(i,t){return new nt(3505,!1)}())}),F.forEach(it=>it.destroy()),this.reportError(G)}const P=new Map,B=new Map;s.forEach(G=>{const it=G.element;n.has(it)&&(B.set(it,it),this._beforeAnimationBuild(G.player.namespaceId,G.instruction,P))}),r.forEach(G=>{const it=G.element;this._getPreviousPlayers(it,!1,G.namespaceId,G.triggerName,null).forEach(ht=>{yo(P,it,[]).push(ht),ht.destroy()})});const I=y.filter(G=>vz(G,l,d)),T=new Map;pz(T,this.driver,w,d,va).forEach(G=>{vz(G,l,d)&&I.push(G)});const et=new Map;g.forEach((G,it)=>{pz(et,this.driver,new Set(G),l,"!")}),I.forEach(G=>{const it=T.get(G),q=et.get(G);T.set(G,new Map([...it?.entries()??[],...q?.entries()??[]]))});const K=[],ot=[],mt={};s.forEach(G=>{const{element:it,player:q,instruction:ht}=G;if(n.has(it)){if(h.has(it))return q.onDestroy(()=>As(it,ht.toStyles)),q.disabled=!0,q.overrideTotalTime(ht.totalTime),void r.push(q);let Et=mt;if(B.size>1){let he=it;const Xe=[];for(;he=he.parentNode;){const rt=B.get(he);if(rt){Et=rt;break}Xe.push(he)}Xe.forEach(rt=>B.set(rt,Et))}const Nt=this._buildAnimation(q.namespaceId,ht,P,o,et,T);if(q.setRealPlayer(Nt),Et===mt)K.push(q);else{const he=this.playersByElement.get(Et);he&&he.length&&(q.parentPlayer=Dl(he)),r.push(q)}}else ad(it,ht.fromStyles),q.onDestroy(()=>As(it,ht.toStyles)),ot.push(q),h.has(it)&&r.push(q)}),ot.forEach(G=>{const it=o.get(G.element);if(it&&it.length){const q=Dl(it);G.setRealPlayer(q)}}),r.forEach(G=>{G.parentPlayer?G.syncPlayerEvents(G.parentPlayer):G.destroy()});for(let G=0;G<y.length;G++){const it=y[G],q=it[es];if(kh(it,Bb),q&&q.hasAnimation)continue;let ht=[];if(a.size){let Nt=a.get(it);Nt&&Nt.length&&ht.push(...Nt);let he=this.driver.query(it,iD,!0);for(let Xe=0;Xe<he.length;Xe++){let rt=a.get(he[Xe]);rt&&rt.length&&ht.push(...rt)}}const Et=ht.filter(Nt=>!Nt.destroyed);Et.length?Mdt(this,it,Et):this.processLeaveNode(it)}return y.length=0,K.forEach(G=>{this.players.push(G),G.onDone(()=>{G.destroy();const it=this.players.indexOf(G);this.players.splice(it,1)}),G.play()}),K}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Cp;a.forEach(d=>{d.queued||!l&&d.triggerName!=r||s.push(d)})}}return(n||r)&&(s=s.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,n){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const d=l.element,h=d!==o,f=yo(n,d,[]);this._getPreviousPlayers(d,h,s,a,e.toState).forEach(g=>{const _=g.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),g.destroy(),f.push(g)})}ad(o,e.fromStyles)}_buildAnimation(t,e,n,r,o,s){const a=e.triggerName,l=e.element,d=[],h=new Set,f=new Set,m=e.timelines.map(_=>{const b=_.element;h.add(b);const y=b[es];if(y&&y.removedBeforeQueried)return new _p(_.duration,_.delay);const v=b!==l,w=function Sdt(i){const t=[];return _z(i,t),t}((n.get(b)||gdt).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===b),S=o.get(b),C=s.get(b),F=qU(this._normalizer,_.keyframes,S,C),k=this._buildPlayer(_,F,w);if(_.subTimeline&&r&&f.add(b),v){const P=new gD(t,a,b);P.setRealPlayer(k),d.push(P)}return k});d.forEach(_=>{yo(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function bdt(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,_.element,_))}),h.forEach(_=>Fo(_,tz));const g=Dl(m);return g.onDestroy(()=>{h.forEach(_=>kh(_,tz)),As(l,e.toStyles)}),f.forEach(_=>{yo(r,_,[]).push(g)}),g}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new _p(t.duration,t.delay)}}class gD{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new _p,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>YT(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){yo(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Xb(i){return i&&1===i.nodeType}function mz(i,t){const e=i.style.display;return i.style.display=t??"none",e}function pz(i,t,e,n,r){const o=[];e.forEach(l=>o.push(mz(l)));const s=[];n.forEach((l,d)=>{const h=new Map;l.forEach(f=>{const m=t.computeStyle(d,f,r);h.set(f,m),(!m||0==m.length)&&(d[es]=_dt,s.push(d))}),i.set(d,h)});let a=0;return e.forEach(l=>mz(l,o[a++])),s}function gz(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const d=a.parentNode;return l=e.has(d)?d:r.has(d)?1:s(d),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&e.get(l).push(a)}),e}function Fo(i,t){i.classList?.add(t)}function kh(i,t){i.classList?.remove(t)}function Mdt(i,t,e){Dl(e).onDone(()=>i.processLeaveNode(t))}function _z(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof iU?_z(n.players,t):t.push(n)}}function vz(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(o=>r.add(o)):t.set(i,n),e.delete(i),!0}class Yb{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new ydt(t,e,n),this._timelineEngine=new udt(t,e,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,n,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],h=sD(this._driver,o,l,[]);if(l.length)throw function fct(i,t){return new nt(3404,!1)}();a=function adt(i,t,e){return new ldt(i,t,e)}(r,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n){this._transitionEngine.removeNode(t,e,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[o,s]=ZU(n);this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,o){if("@"==n.charAt(0)){const[s,a]=ZU(n);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,n,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(t){this._transitionEngine.afterFlushAnimationsDone(t)}}let Tdt=(()=>{class i{static{this.initialStylesByElement=new WeakMap}constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let o=i.initialStylesByElement.get(e);o||i.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&As(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(As(this._element,this._initialStyles),this._endStyles&&(As(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(ad(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ad(this._element,this._endStyles),this._endStyles=null),As(this._element,this._initialStyles),this._state=3)}}return i})();function _D(i){let t=null;return i.forEach((e,n)=>{(function Ddt(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class yz{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map;const e=()=>this._onFinish();this.domPlayer.addEventListener("finish",e),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",e)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:rz(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class Adt{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return YU(t,e)}getParentElement(t){return JT(t)}query(t,e,n){return KU(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,o,s=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const d=new Map,h=s.filter(g=>g instanceof yz);(function Fct(i,t){return 0===i||0===t})(n,r)&&h.forEach(g=>{g.currentSnapshot.forEach((_,b)=>d.set(b,_))});let f=function Pct(i){return i.length?i[0]instanceof Map?i:i.map(t=>ez(t)):[]}(e).map(g=>Al(g));f=function Nct(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((o,s)=>{n.has(s)||r.push(s),n.set(s,o)}),r.length)for(let o=1;o<t.length;o++){let s=t[o];r.forEach(a=>s.set(a,rz(i,a)))}}return t}(t,f,d);const m=function Edt(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=_D(t[0]),t.length>1&&(n=_D(t[t.length-1]))):t instanceof Map&&(e=_D(t)),e||n?new Tdt(i,e,n):null}(t,f);return new yz(t,f,l,m)}}let Idt=(()=>{class i extends J3{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:cn.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?eU(e):e;return bz(this._renderer,null,n,"register",[r]),new Rdt(n,this._renderer)}static{this.\u0275fac=function(n){return new(n||i)(Y(Af),Y(Ne))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();class Rdt extends wst{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new kdt(this._id,t,e||{},this._renderer)}}class kdt{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return bz(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bz(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const xz="@.disabled";let Pdt=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(o,s)=>{const a=s?.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,n){const o=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let h=this._rendererCache.get(o);return h||(h=new wz("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,h)),h}const s=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(s,a,e,h.name,h)};return n.data.animation.forEach(l),new Odt(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static{this.\u0275fac=function(n){return new(n||i)(Y(Af),Y(Yb),Y(oe))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})();class wz{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(t){this.delegate.destroyNode?.(t)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==xz?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Odt extends wz{constructor(t,e,n,r,o){super(e,n,r,o),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==xz?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function Ldt(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let o=e.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function Fdt(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}const Mz=[{provide:J3,useClass:Idt},{provide:uD,useFactory:function Bdt(){return new ndt}},{provide:Yb,useClass:(()=>{class i extends Yb{constructor(e,n,r,o){super(e.body,n,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(n){return new(n||i)(Y(Ne),Y(tD),Y(uD),Y(tl))}}static{this.\u0275prov=bt({token:i,factory:i.\u0275fac})}}return i})()},{provide:Af,useFactory:function Udt(i,t,e){return new Pdt(i,t,e)},deps:[OM,Yb,oe]}],vD=[{provide:tD,useFactory:()=>new Adt},{provide:Ao,useValue:"BrowserAnimations"},...Mz],Sz=[{provide:tD,useClass:QU},{provide:Ao,useValue:"NoopAnimations"},...Mz];let zdt=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?Sz:vD}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:vD,imports:[OO]})}}return i})(),Vdt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,wi]})}}return i})(),Wdt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[G3,wi,G3,wi]})}}return i})(),$dt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[vc,wi,hp,hp,wi]})}}return i})(),qdt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,wi]})}}return i})(),Mut=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[gT,vc,wi,xT,X3,qdt]})}}return i})(),Iut=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({imports:[wi,vc,wi]})}}return i})();const Lut={provide:new at("mat-select-scroll-strategy"),deps:[id],useFactory:function Out(i){return()=>i.scrollStrategies.reposition()}};let Fut=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i})}static{this.\u0275inj=Te({providers:[Lut],imports:[vc,mT,wT,wi,hp,Cb,wT,wi]})}}return i})(),Nut=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=Oe({type:i,bootstrap:[jlt]})}static{this.\u0275inj=Te({imports:[OO,Flt,zdt,Vdt,RU,$st,$dt,Mut,Iut,RU,hrt,Wdt,Ost,Nat,Mlt,Cb,Fut,wT,IX,frt]})}}return i})();x9().bootstrapModule(Nut).catch(i=>console.error(i))},244:function(Dp,Ap){!function(It){"use strict";function mi(c){var u,p,x,M;for(p=1,x=arguments.length;p<x;p++)for(u in M=arguments[p])c[u]=M[u];return c}var Sa=Object.create||function(){function c(){}return function(u){return c.prototype=u,new c}}();function Di(c,u){var p=Array.prototype.slice;if(c.bind)return c.bind.apply(c,p.call(arguments,1));var x=p.call(arguments,2);return function(){return c.apply(u,x.length?x.concat(p.call(arguments)):arguments)}}var tn=0;function ri(c){return"_leaflet_id"in c||(c._leaflet_id=++tn),c._leaflet_id}function Oh(c,u,p){var x,M,E,V;return V=function(){x=!1,M&&(E.apply(p,M),M=!1)},E=function(){x?M=arguments:(c.apply(p,arguments),setTimeout(V,u),x=!0)},E}function Ca(c,u,p){var x=u[1],M=u[0],E=x-M;return c===x&&p?c:((c-M)%E+E)%E+M}function Ai(){return!1}function pr(c,u){if(!1===u)return c;var p=Math.pow(10,void 0===u?6:u);return Math.round(c*p)/p}function ud(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function Bo(c){return ud(c).split(/\s+/)}function Ui(c,u){for(var p in Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?Sa(c.options):{}),u)c.options[p]=u[p];return c.options}function Ip(c,u,p){var x=[];for(var M in c)x.push(encodeURIComponent(p?M.toUpperCase():M)+"="+encodeURIComponent(c[M]));return(u&&-1!==u.indexOf("?")?"&":"?")+x.join("&")}var t0=/\{ *([\w_ -]+) *\}/g;function hd(c,u){return c.replace(t0,function(p,x){var M=u[x];if(void 0===M)throw new Error("No value provided for variable "+p);return"function"==typeof M&&(M=M(u)),M})}var Rn=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)};function Ea(c,u){for(var p=0;p<c.length;p++)if(c[p]===u)return p;return-1}var fd="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function kl(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var Rp=0;function md(c){var u=+new Date,p=Math.max(0,16-(u-Rp));return Rp=u+p,window.setTimeout(c,p)}var Lh=window.requestAnimationFrame||kl("RequestAnimationFrame")||md,Ta=window.cancelAnimationFrame||kl("CancelAnimationFrame")||kl("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function kn(c,u,p){if(!p||Lh!==md)return Lh.call(window,Di(c,u));c.call(u)}function kr(c){c&&Ta.call(window,c)}var Fh={__proto__:null,extend:mi,create:Sa,bind:Di,get lastId(){return tn},stamp:ri,throttle:Oh,wrapNum:Ca,falseFn:Ai,formatNum:pr,trim:ud,splitWords:Bo,setOptions:Ui,getParamString:Ip,template:hd,isArray:Rn,indexOf:Ea,emptyImageUrl:fd,requestFn:Lh,cancelFn:Ta,requestAnimFrame:kn,cancelAnimFrame:kr};function Uo(){}Uo.extend=function(c){var u=function(){Ui(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=u.__super__=this.prototype,x=Sa(p);for(var M in x.constructor=u,u.prototype=x,this)Object.prototype.hasOwnProperty.call(this,M)&&"prototype"!==M&&"__super__"!==M&&(u[M]=this[M]);return c.statics&&mi(u,c.statics),c.includes&&(function Nh(c){if(!(typeof L>"u")&&L&&L.Mixin){c=Rn(c)?c:[c];for(var u=0;u<c.length;u++)c[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(c.includes),mi.apply(null,[x].concat(c.includes))),mi(x,c),delete x.statics,delete x.includes,x.options&&(x.options=p.options?Sa(p.options):{},mi(x.options,c.options)),x._initHooks=[],x.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var E=0,V=x._initHooks.length;E<V;E++)x._initHooks[E].call(this)}},u},Uo.include=function(c){var u=this.prototype.options;return mi(this.prototype,c),c.options&&(this.prototype.options=u,this.mergeOptions(c.options)),this},Uo.mergeOptions=function(c){return mi(this.prototype.options,c),this},Uo.addInitHook=function(c){var u=Array.prototype.slice.call(arguments,1),p="function"==typeof c?c:function(){this[c].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};var an={on:function(c,u,p){if("object"==typeof c)for(var x in c)this._on(x,c[x],u);else for(var M=0,E=(c=Bo(c)).length;M<E;M++)this._on(c[M],u,p);return this},off:function(c,u,p){if(arguments.length)if("object"==typeof c)for(var x in c)this._off(x,c[x],u);else{c=Bo(c);for(var M=1===arguments.length,E=0,V=c.length;E<V;E++)M?this._off(c[E]):this._off(c[E],u,p)}else delete this._events;return this},_on:function(c,u,p,x){if("function"==typeof u){if(!1===this._listens(c,u,p)){p===this&&(p=void 0);var M={fn:u,ctx:p};x&&(M.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(M)}}else console.warn("wrong listener type: "+typeof u)},_off:function(c,u,p){var x,M,E;if(this._events&&(x=this._events[c])){if(1===arguments.length){if(this._firingCount)for(M=0,E=x.length;M<E;M++)x[M].fn=Ai;return void delete this._events[c]}if("function"!=typeof u)return void console.warn("wrong listener type: "+typeof u);var V=this._listens(c,u,p);!1!==V&&(this._firingCount&&(x[V].fn=Ai,this._events[c]=x=x.slice()),x.splice(V,1))}},fire:function(c,u,p){if(!this.listens(c,p))return this;var x=mi({},u,{type:c,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var M=this._events[c];if(M){this._firingCount=this._firingCount+1||1;for(var E=0,V=M.length;E<V;E++){var X=M[E],W=X.fn;X.once&&this.off(c,W,X.ctx),W.call(X.ctx||this,x)}this._firingCount--}}return p&&this._propagateEvent(x),this},listens:function(c,u,p,x){"string"!=typeof c&&console.warn('"string" type argument expected');var M=u;"function"!=typeof u&&(x=!!u,M=void 0,p=void 0);var E=this._events&&this._events[c];if(E&&E.length&&!1!==this._listens(c,M,p))return!0;if(x)for(var V in this._eventParents)if(this._eventParents[V].listens(c,u,p,x))return!0;return!1},_listens:function(c,u,p){if(!this._events)return!1;var x=this._events[c]||[];if(!u)return!!x.length;p===this&&(p=void 0);for(var M=0,E=x.length;M<E;M++)if(x[M].fn===u&&x[M].ctx===p)return M;return!1},once:function(c,u,p){if("object"==typeof c)for(var x in c)this._on(x,c[x],u,!0);else for(var M=0,E=(c=Bo(c)).length;M<E;M++)this._on(c[M],u,p,!0);return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[ri(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[ri(c)],this},_propagateEvent:function(c){for(var u in this._eventParents)this._eventParents[u].fire(c.type,mi({layer:c.target,propagatedFrom:c.target},c),!0)}};an.addEventListener=an.on,an.removeEventListener=an.clearAllEventListeners=an.off,an.addOneTimeEventListener=an.once,an.fireEvent=an.fire,an.hasEventListeners=an.listens;var Pl=Uo.extend(an);function Ae(c,u,p){this.x=p?Math.round(c):c,this.y=p?Math.round(u):u}var Mi=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};function Me(c,u,p){return c instanceof Ae?c:Rn(c)?new Ae(c[0],c[1]):null==c?c:"object"==typeof c&&"x"in c&&"y"in c?new Ae(c.x,c.y):new Ae(c,u,p)}function Wi(c,u){if(c)for(var p=u?[c,u]:c,x=0,M=p.length;x<M;x++)this.extend(p[x])}function ir(c,u){return!c||c instanceof Wi?c:new Wi(c,u)}function nr(c,u){if(c)for(var p=u?[c,u]:c,x=0,M=p.length;x<M;x++)this.extend(p[x])}function Wt(c,u){return c instanceof nr?c:new nr(c,u)}function pi(c,u,p){if(isNaN(c)||isNaN(u))throw new Error("Invalid LatLng object: ("+c+", "+u+")");this.lat=+c,this.lng=+u,void 0!==p&&(this.alt=+p)}function ti(c,u,p){return c instanceof pi?c:Rn(c)&&"object"!=typeof c[0]?3===c.length?new pi(c[0],c[1],c[2]):2===c.length?new pi(c[0],c[1]):null:null==c?c:"object"==typeof c&&"lat"in c?new pi(c.lat,"lng"in c?c.lng:c.lon,c.alt):void 0===u?null:new pi(c,u,p)}Ae.prototype={clone:function(){return new Ae(this.x,this.y)},add:function(c){return this.clone()._add(Me(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(Me(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new Ae(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new Ae(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Mi(this.x),this.y=Mi(this.y),this},distanceTo:function(c){var u=(c=Me(c)).x-this.x,p=c.y-this.y;return Math.sqrt(u*u+p*p)},equals:function(c){return(c=Me(c)).x===this.x&&c.y===this.y},contains:function(c){return c=Me(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+pr(this.x)+", "+pr(this.y)+")"}},Wi.prototype={extend:function(c){var u,p;if(!c)return this;if(c instanceof Ae||"number"==typeof c[0]||"x"in c)u=p=Me(c);else if(p=(c=ir(c)).max,!(u=c.min)||!p)return this;return this.min||this.max?(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)):(this.min=u.clone(),this.max=p.clone()),this},getCenter:function(c){return Me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return Me(this.min.x,this.max.y)},getTopRight:function(){return Me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var u,p;return(c="number"==typeof c[0]||c instanceof Ae?Me(c):ir(c))instanceof Wi?(u=c.min,p=c.max):u=p=c,u.x>=this.min.x&&p.x<=this.max.x&&u.y>=this.min.y&&p.y<=this.max.y},intersects:function(c){c=ir(c);var u=this.min,p=this.max,x=c.min,M=c.max;return M.x>=u.x&&x.x<=p.x&&M.y>=u.y&&x.y<=p.y},overlaps:function(c){c=ir(c);var u=this.min,p=this.max,x=c.min,M=c.max;return M.x>u.x&&x.x<p.x&&M.y>u.y&&x.y<p.y},isValid:function(){return!(!this.min||!this.max)},pad:function(c){var u=this.min,p=this.max,x=Math.abs(u.x-p.x)*c,M=Math.abs(u.y-p.y)*c;return ir(Me(u.x-x,u.y-M),Me(p.x+x,p.y+M))},equals:function(c){return!!c&&(c=ir(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight()))}},nr.prototype={extend:function(c){var x,M,u=this._southWest,p=this._northEast;if(c instanceof pi)x=c,M=c;else{if(!(c instanceof nr))return c?this.extend(ti(c)||Wt(c)):this;if(M=c._northEast,!(x=c._southWest)||!M)return this}return u||p?(u.lat=Math.min(x.lat,u.lat),u.lng=Math.min(x.lng,u.lng),p.lat=Math.max(M.lat,p.lat),p.lng=Math.max(M.lng,p.lng)):(this._southWest=new pi(x.lat,x.lng),this._northEast=new pi(M.lat,M.lng)),this},pad:function(c){var u=this._southWest,p=this._northEast,x=Math.abs(u.lat-p.lat)*c,M=Math.abs(u.lng-p.lng)*c;return new nr(new pi(u.lat-x,u.lng-M),new pi(p.lat+x,p.lng+M))},getCenter:function(){return new pi((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new pi(this.getNorth(),this.getWest())},getSouthEast:function(){return new pi(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){c="number"==typeof c[0]||c instanceof pi||"lat"in c?ti(c):Wt(c);var x,M,u=this._southWest,p=this._northEast;return c instanceof nr?(x=c.getSouthWest(),M=c.getNorthEast()):x=M=c,x.lat>=u.lat&&M.lat<=p.lat&&x.lng>=u.lng&&M.lng<=p.lng},intersects:function(c){c=Wt(c);var u=this._southWest,p=this._northEast,x=c.getSouthWest(),M=c.getNorthEast();return M.lat>=u.lat&&x.lat<=p.lat&&M.lng>=u.lng&&x.lng<=p.lng},overlaps:function(c){c=Wt(c);var u=this._southWest,p=this._northEast,x=c.getSouthWest(),M=c.getNorthEast();return M.lat>u.lat&&x.lat<p.lat&&M.lng>u.lng&&x.lng<p.lng},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,u){return!!c&&(c=Wt(c),this._southWest.equals(c.getSouthWest(),u)&&this._northEast.equals(c.getNorthEast(),u))},isValid:function(){return!(!this._southWest||!this._northEast)}},pi.prototype={equals:function(c,u){return!!c&&(c=ti(c),Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng))<=(void 0===u?1e-9:u))},toString:function(c){return"LatLng("+pr(this.lat,c)+", "+pr(this.lng,c)+")"},distanceTo:function(c){return hi.distance(this,ti(c))},wrap:function(){return hi.wrapLatLng(this)},toBounds:function(c){var u=180*c/40075017,p=u/Math.cos(Math.PI/180*this.lat);return Wt([this.lat-u,this.lng-p],[this.lat+u,this.lng+p])},clone:function(){return new pi(this.lat,this.lng,this.alt)}};var c,gi={latLngToPoint:function(c,u){var p=this.projection.project(c),x=this.scale(u);return this.transformation._transform(p,x)},pointToLatLng:function(c,u){var p=this.scale(u),x=this.transformation.untransform(c,p);return this.projection.unproject(x)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var u=this.projection.bounds,p=this.scale(c);return new Wi(this.transformation.transform(u.min,p),this.transformation.transform(u.max,p))},infinite:!1,wrapLatLng:function(c){var u=this.wrapLng?Ca(c.lng,this.wrapLng,!0):c.lng;return new pi(this.wrapLat?Ca(c.lat,this.wrapLat,!0):c.lat,u,c.alt)},wrapLatLngBounds:function(c){var u=c.getCenter(),p=this.wrapLatLng(u),x=u.lat-p.lat,M=u.lng-p.lng;if(0===x&&0===M)return c;var E=c.getSouthWest(),V=c.getNorthEast();return new nr(new pi(E.lat-x,E.lng-M),new pi(V.lat-x,V.lng-M))}},hi=mi({},gi,{wrapLng:[-180,180],R:6371e3,distance:function(c,u){var p=Math.PI/180,x=c.lat*p,M=u.lat*p,E=Math.sin((u.lat-c.lat)*p/2),V=Math.sin((u.lng-c.lng)*p/2),X=E*E+Math.cos(x)*Math.cos(M)*V*V,W=2*Math.atan2(Math.sqrt(X),Math.sqrt(1-X));return this.R*W}}),Ee={R:6378137,MAX_LATITUDE:85.0511287798,project:function(c){var u=Math.PI/180,p=this.MAX_LATITUDE,x=Math.max(Math.min(p,c.lat),-p),M=Math.sin(x*u);return new Ae(this.R*c.lng*u,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(c){var u=180/Math.PI;return new pi((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*u,c.x*u/this.R)},bounds:(c=6378137*Math.PI,new Wi([-c,-c],[c,c]))};function Ol(c,u,p,x){if(Rn(c))return this._a=c[0],this._b=c[1],this._c=c[2],void(this._d=c[3]);this._a=c,this._b=u,this._c=p,this._d=x}function Ll(c,u,p,x){return new Ol(c,u,p,x)}Ol.prototype={transform:function(c,u){return this._transform(c.clone(),u)},_transform:function(c,u){return c.x=(u=u||1)*(this._a*c.x+this._b),c.y=u*(this._c*c.y+this._d),c},untransform:function(c,u){return new Ae((c.x/(u=u||1)-this._b)/this._a,(c.y/u-this._d)/this._c)}};var Fl=mi({},hi,{code:"EPSG:3857",projection:Ee,transformation:function(){var c=.5/(Math.PI*Ee.R);return Ll(c,.5,-c,.5)}()}),e0=mi({},Fl,{code:"EPSG:900913"});function Pp(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Op(c,u){var x,M,E,V,X,W,p="";for(x=0,E=c.length;x<E;x++){for(M=0,V=(X=c[x]).length;M<V;M++)p+=(M?"L":"M")+(W=X[M]).x+" "+W.y;p+=u?re.svg?"z":"x":""}return p||"M0 0"}var Bh=document.documentElement.style,pd="ActiveXObject"in window,n0=pd&&!document.addEventListener,Lp="msLaunchUri"in navigator&&!("documentMode"in document),Uh=Zr("webkit"),zh=Zr("android"),Fp=Zr("android 2")||Zr("android 3"),Vh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),r0=zh&&Zr("Google")&&Vh<537&&!("AudioNode"in window),Nl=!!window.opera,Hh=!Lp&&Zr("chrome"),Np=Zr("gecko")&&!Uh&&!Nl&&!pd,o0=!Hh&&Zr("safari"),Bp=Zr("phantom"),zo="OTransition"in Bh,Up=0===navigator.platform.indexOf("Win"),zp=pd&&"transition"in Bh,gd="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Fp,Vp="MozPerspective"in Bh,s0=!window.L_DISABLE_3D&&(zp||gd||Vp)&&!zo&&!Bp,Rs=typeof orientation<"u"||Zr("mobile"),a0=Rs&&Uh,l0=Rs&&gd,Hp=!window.PointerEvent&&window.MSPointerEvent,Gp=!(!window.PointerEvent&&!Hp),Wp="ontouchstart"in window||!!window.TouchEvent,c0=!window.L_NO_TOUCH&&(Wp||Gp),d0=Rs&&Nl,u0=Rs&&Np,h0=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xD=function(){var c=!1;try{var u=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",Ai,u),window.removeEventListener("testPassiveEventSupport",Ai,u)}catch{}return c}(),Gh=!!document.createElement("canvas").getContext,_d=!(!document.createElementNS||!Pp("svg").createSVGRect),jp=!!_d&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(c.firstChild&&c.firstChild.namespaceURI)}(),$p=!_d&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var u=c.firstChild;return u.style.behavior="url(#default#VML)",u&&"object"==typeof u.adj}catch{return!1}}();function Zr(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var re={ie:pd,ielt9:n0,edge:Lp,webkit:Uh,android:zh,android23:Fp,androidStock:r0,opera:Nl,chrome:Hh,gecko:Np,safari:o0,phantom:Bp,opera12:zo,win:Up,ie3d:zp,webkit3d:gd,gecko3d:Vp,any3d:s0,mobile:Rs,mobileWebkit:a0,mobileWebkit3d:l0,msPointer:Hp,pointer:Gp,touch:c0,touchNative:Wp,mobileOpera:d0,mobileGecko:u0,retina:h0,passiveEvents:xD,canvas:Gh,svg:_d,vml:$p,inlineSvg:jp,mac:0===navigator.platform.indexOf("Mac"),linux:0===navigator.platform.indexOf("Linux")},Wh=re.msPointer?"MSPointerDown":"pointerdown",jh=re.msPointer?"MSPointerMove":"pointermove",Bn=re.msPointer?"MSPointerUp":"pointerup",Zp=re.msPointer?"MSPointerCancel":"pointercancel",$h={touchstart:Wh,touchmove:jh,touchend:Bn,touchcancel:Zp},Xp={touchstart:function wD(c,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Un(u),rr(c,u)},touchmove:rr,touchend:rr,touchcancel:rr},Da={},qh=!1;function m0(c,u,p){return"touchstart"===u&&function Aa(){qh||(document.addEventListener(Wh,Vo,!0),document.addEventListener(jh,g0,!0),document.addEventListener(Bn,gn,!0),document.addEventListener(Zp,gn,!0),qh=!0)}(),Xp[u]?(p=Xp[u].bind(this,p),c.addEventListener($h[u],p,!1),p):(console.warn("wrong event specified:",u),Ai)}function Vo(c){Da[c.pointerId]=c}function g0(c){Da[c.pointerId]&&(Da[c.pointerId]=c)}function gn(c){delete Da[c.pointerId]}function rr(c,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){for(var p in u.touches=[],Da)u.touches.push(Da[p]);u.changedTouches=[u],c(u)}}var Yp=200;var os,$i,zl,Ra,Hl,ks=or(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bl=or(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Xh="webkitTransition"===Bl||"OTransition"===Bl?Bl+"End":"transitionend";function Yh(c){return"string"==typeof c?document.getElementById(c):c}function Ul(c,u){var p=c.style[u]||c.currentStyle&&c.currentStyle[u];if((!p||"auto"===p)&&document.defaultView){var x=document.defaultView.getComputedStyle(c,null);p=x?x[u]:null}return"auto"===p?null:p}function si(c,u,p){var x=document.createElement(c);return x.className=u||"",p&&p.appendChild(x),x}function ji(c){var u=c.parentNode;u&&u.removeChild(c)}function vd(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Ps(c){var u=c.parentNode;u&&u.lastChild!==c&&u.appendChild(c)}function Ia(c){var u=c.parentNode;u&&u.firstChild!==c&&u.insertBefore(c,u.firstChild)}function Kh(c,u){if(void 0!==c.classList)return c.classList.contains(u);var p=jt(c);return p.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(p)}function Jt(c,u){if(void 0!==c.classList)for(var p=Bo(u),x=0,M=p.length;x<M;x++)c.classList.add(p[x]);else if(!Kh(c,u)){var E=jt(c);_n(c,(E?E+" ":"")+u)}}function Ii(c,u){void 0!==c.classList?c.classList.remove(u):_n(c,ud((" "+jt(c)+" ").replace(" "+u+" "," ")))}function _n(c,u){void 0===c.className.baseVal?c.className=u:c.className.baseVal=u}function jt(c){return c.correspondingElement&&(c=c.correspondingElement),void 0===c.className.baseVal?c.className:c.className.baseVal}function Zn(c,u){"opacity"in c.style?c.style.opacity=u:"filter"in c.style&&function Qh(c,u){var p=!1,x="DXImageTransform.Microsoft.Alpha";try{p=c.filters.item(x)}catch{if(1===u)return}u=Math.round(100*u),p?(p.Enabled=100!==u,p.Opacity=u):c.style.filter+=" progid:"+x+"(opacity="+u+")"}(c,u)}function or(c){for(var u=document.documentElement.style,p=0;p<c.length;p++)if(c[p]in u)return c[p];return!1}function rs(c,u,p){var x=u||new Ae(0,0);c.style[ks]=(re.ie3d?"translate("+x.x+"px,"+x.y+"px)":"translate3d("+x.x+"px,"+x.y+"px,0)")+(p?" scale("+p+")":"")}function ln(c,u){c._leaflet_pos=u,re.any3d?rs(c,u):(c.style.left=u.x+"px",c.style.top=u.y+"px")}function ei(c){return c._leaflet_pos||new Ae(0,0)}if("onselectstart"in document)os=function(){Lt(window,"selectstart",Un)},$i=function(){Fi(window,"selectstart",Un)};else{var Vl=or(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);os=function(){if(Vl){var c=document.documentElement.style;zl=c[Vl],c[Vl]="none"}},$i=function(){Vl&&(document.documentElement.style[Vl]=zl,zl=void 0)}}function _i(){Lt(window,"dragstart",Un)}function ve(){Fi(window,"dragstart",Un)}function Qp(c){for(;-1===c.tabIndex;)c=c.parentNode;c.style&&(Gl(),Ra=c,Hl=c.style.outlineStyle,c.style.outlineStyle="none",Lt(window,"keydown",Gl))}function Gl(){Ra&&(Ra.style.outlineStyle=Hl,Ra=void 0,Hl=void 0,Fi(window,"keydown",Gl))}function nt(c){do{c=c.parentNode}while(!(c.offsetWidth&&c.offsetHeight||c===document.body));return c}function ka(c){var u=c.getBoundingClientRect();return{x:u.width/c.offsetWidth||1,y:u.height/c.offsetHeight||1,boundingClientRect:u}}var Se={__proto__:null,TRANSFORM:ks,TRANSITION:Bl,TRANSITION_END:Xh,get:Yh,getStyle:Ul,create:si,remove:ji,empty:vd,toFront:Ps,toBack:Ia,hasClass:Kh,addClass:Jt,removeClass:Ii,setClass:_n,getClass:jt,setOpacity:Zn,testProp:or,setTransform:rs,setPosition:ln,getPosition:ei,get disableTextSelection(){return os},get enableTextSelection(){return $i},disableImageDrag:_i,enableImageDrag:ve,preventOutline:Qp,restoreOutline:Gl,getSizedParentNode:nt,getScale:ka};function Lt(c,u,p,x){if(u&&"object"==typeof u)for(var M in u)Xn(c,M,u[M],p);else for(var E=0,V=(u=Bo(u)).length;E<V;E++)Xn(c,u[E],p,x);return this}var wo="_leaflet_events";function Fi(c,u,p,x){if(1===arguments.length)Jp(c),delete c[wo];else if(u&&"object"==typeof u)for(var M in u)tg(c,M,u[M],p);else if(u=Bo(u),2===arguments.length)Jp(c,function(X){return-1!==Ea(u,X)});else for(var E=0,V=u.length;E<V;E++)tg(c,u[E],p,x);return this}function Jp(c,u){for(var p in c[wo]){var x=p.split(/\d/)[0];(!u||u(x))&&tg(c,x,null,null,p)}}var Wl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xn(c,u,p,x){var M=u+ri(p)+(x?"_"+ri(x):"");if(c[wo]&&c[wo][M])return this;var E=function(X){return p.call(x||c,X||window.event)},V=E;!re.touchNative&&re.pointer&&0===u.indexOf("touch")?E=m0(c,u,E):re.touch&&"dblclick"===u?E=function Zh(c,u){c.addEventListener("dblclick",u);var x,p=0;function M(E){if(1===E.detail){if("mouse"!==E.pointerType&&(!E.sourceCapabilities||E.sourceCapabilities.firesTouchEvents)){var V=v0(E);if(!V.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})||V.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement})){var X=Date.now();X-p<=Yp?2==++x&&u(function _0(c){var p,x,u={};for(x in c)u[x]=(p=c[x])&&p.bind?p.bind(c):p;return c=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}(E)):x=1,p=X}}}else x=E.detail}return c.addEventListener("click",M),{dblclick:u,simDblclick:M}}(c,E):"addEventListener"in c?"touchstart"===u||"touchmove"===u||"wheel"===u||"mousewheel"===u?c.addEventListener(Wl[u]||u,E,!!re.passiveEvents&&{passive:!1}):"mouseenter"===u||"mouseleave"===u?c.addEventListener(Wl[u],E=function(X){X=X||window.event,Jh(c,X)&&V(X)},!1):c.addEventListener(u,V,!1):c.attachEvent("on"+u,E),c[wo]=c[wo]||{},c[wo][M]=E}function tg(c,u,p,x,M){M=M||u+ri(p)+(x?"_"+ri(x):"");var E=c[wo]&&c[wo][M];if(!E)return this;!re.touchNative&&re.pointer&&0===u.indexOf("touch")?function p0(c,u,p){$h[u]?c.removeEventListener($h[u],p,!1):console.warn("wrong event specified:",u)}(c,u,E):re.touch&&"dblclick"===u?function Kp(c,u){c.removeEventListener("dblclick",u.dblclick),c.removeEventListener("click",u.simDblclick)}(c,E):"removeEventListener"in c?c.removeEventListener(Wl[u]||u,E,!1):c.detachEvent("on"+u,E),c[wo][M]=null}function Os(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function eg(c){return Xn(c,"wheel",Os),this}function Xr(c){return Lt(c,"mousedown touchstart dblclick contextmenu",Os),c._leaflet_disable_click=!0,this}function Un(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Pa(c){return Un(c),Os(c),this}function v0(c){if(c.composedPath)return c.composedPath();for(var u=[],p=c.target;p;)u.push(p),p=p.parentNode;return u}function y0(c,u){if(!u)return new Ae(c.clientX,c.clientY);var p=ka(u),x=p.boundingClientRect;return new Ae((c.clientX-x.left)/p.x-u.clientLeft,(c.clientY-x.top)/p.y-u.clientTop)}var b0=re.linux&&re.chrome?window.devicePixelRatio:re.mac?3*window.devicePixelRatio:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function x0(c){return re.edge?c.wheelDeltaY/2:c.deltaY&&0===c.deltaMode?-c.deltaY/b0:c.deltaY&&1===c.deltaMode?20*-c.deltaY:c.deltaY&&2===c.deltaMode?60*-c.deltaY:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?20*-c.detail:c.detail?c.detail/-32765*60:0}function Jh(c,u){var p=u.relatedTarget;if(!p)return!0;try{for(;p&&p!==c;)p=p.parentNode}catch{return!1}return p!==c}var MD={__proto__:null,on:Lt,off:Fi,stopPropagation:Os,disableScrollPropagation:eg,disableClickPropagation:Xr,preventDefault:Un,stop:Pa,getPropagationPath:v0,getMousePosition:y0,getWheelDelta:x0,isExternalTarget:Jh,addListener:Lt,removeListener:Fi},gr=Pl.extend({run:function(c,u,p,x){this.stop(),this._el=c,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(x||.5,.2),this._startPos=ei(c),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=kn(this._animate,this),this._step()},_step:function(c){var u=+new Date-this._startTime,p=1e3*this._duration;u<p?this._runFrame(this._easeOut(u/p),c):(this._runFrame(1),this._complete())},_runFrame:function(c,u){var p=this._startPos.add(this._offset.multiplyBy(c));u&&p._round(),ln(this._el,p),this.fire("step")},_complete:function(){kr(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Rt=Pl.extend({options:{crs:Fl,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,u){u=Ui(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=Di(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),void 0!==u.zoom&&(this._zoom=this._limitZoom(u.zoom)),u.center&&void 0!==u.zoom&&this.setView(ti(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bl&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Lt(this._proxy,Xh,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,u,p){return u=void 0===u?this._zoom:this._limitZoom(u),c=this._limitCenter(ti(c),u,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&!0!==p&&(void 0!==p.animate&&(p.zoom=mi({animate:p.animate},p.zoom),p.pan=mi({animate:p.animate,duration:p.duration},p.pan)),this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,u,p.zoom):this._tryAnimatedPan(c,p.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(c,u,p.pan&&p.pan.noMoveStart),this)},setZoom:function(c,u){return this._loaded?this.setView(this.getCenter(),c,{zoom:u}):(this._zoom=c,this)},zoomIn:function(c,u){return this.setZoom(this._zoom+(c=c||(re.any3d?this.options.zoomDelta:1)),u)},zoomOut:function(c,u){return this.setZoom(this._zoom-(c=c||(re.any3d?this.options.zoomDelta:1)),u)},setZoomAround:function(c,u,p){var x=this.getZoomScale(u),M=this.getSize().divideBy(2),V=(c instanceof Ae?c:this.latLngToContainerPoint(c)).subtract(M).multiplyBy(1-1/x),X=this.containerPointToLatLng(M.add(V));return this.setView(X,u,{zoom:p})},_getBoundsCenterZoom:function(c,u){u=u||{},c=c.getBounds?c.getBounds():Wt(c);var p=Me(u.paddingTopLeft||u.padding||[0,0]),x=Me(u.paddingBottomRight||u.padding||[0,0]),M=this.getBoundsZoom(c,!1,p.add(x));if((M="number"==typeof u.maxZoom?Math.min(u.maxZoom,M):M)===1/0)return{center:c.getCenter(),zoom:M};var E=x.subtract(p).divideBy(2),V=this.project(c.getSouthWest(),M),X=this.project(c.getNorthEast(),M);return{center:this.unproject(V.add(X).divideBy(2).add(E),M),zoom:M}},fitBounds:function(c,u){if(!(c=Wt(c)).isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(c,u);return this.setView(p.center,p.zoom,u)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,u){return this.setView(c,this._zoom,{pan:u})},panBy:function(c,u){if(u=u||{},!(c=Me(c).round()).x&&!c.y)return this.fire("moveend");if(!0!==u.animate&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),!1!==u.animate){Jt(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,p,u.duration||.25,u.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,u,p){if(!1===(p=p||{}).animate||!re.any3d)return this.setView(c,u,p);this._stop();var x=this.project(this.getCenter()),M=this.project(c),E=this.getSize(),V=this._zoom;c=ti(c),u=void 0===u?V:u;var X=Math.max(E.x,E.y),W=X*this.getZoomScale(V,u),ut=M.distanceTo(x)||1,Ft=1.42,ue=Ft*Ft;function ee(en){var Bs=(W*W-X*X+(en?-1:1)*ue*ue*ut*ut)/(2*(en?W:X)*ue*ut),Mn=Math.sqrt(Bs*Bs+1)-Bs;return Mn<1e-9?-18:Math.log(Mn)}function vn(en){return(Math.exp(en)-Math.exp(-en))/2}function Zi(en){return(Math.exp(en)+Math.exp(-en))/2}var wn=ee(0);function cs(en){return X*(Zi(wn)*function nn(en){return vn(en)/Zi(en)}(wn+Ft*en)-vn(wn))/ue}var tc=Date.now(),Ha=(ee(1)-wn)/Ft,Ze=p.duration?1e3*p.duration:1e3*Ha*.8;return this._moveStart(!0,p.noMoveStart),function B0(){var en=(Date.now()-tc)/Ze,ec=function Go(en){return 1-Math.pow(1-en,1.5)}(en)*Ha;en<=1?(this._flyToFrame=kn(B0,this),this._move(this.unproject(x.add(M.subtract(x).multiplyBy(cs(ec)/ut)),V),this.getScaleZoom(X/function Ns(en){return X*(Zi(wn)/Zi(wn+Ft*en))}(ec),V),{flyTo:!0})):this._move(c,u)._moveEnd(!0)}.call(this),this},flyToBounds:function(c,u){var p=this._getBoundsCenterZoom(c,u);return this.flyTo(p.center,p.zoom,u)},setMaxBounds:function(c){return c=Wt(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var u=this.options.minZoom;return this.options.minZoom=c,this._loaded&&u!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var u=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&u!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,u){this._enforcingBounds=!0;var p=this.getCenter(),x=this._limitCenter(p,this._zoom,Wt(c));return p.equals(x)||this.panTo(x,u),this._enforcingBounds=!1,this},panInside:function(c,u){var p=Me((u=u||{}).paddingTopLeft||u.padding||[0,0]),x=Me(u.paddingBottomRight||u.padding||[0,0]),M=this.project(this.getCenter()),E=this.project(c),V=this.getPixelBounds(),X=ir([V.min.add(p),V.max.subtract(x)]),W=X.getSize();if(!X.contains(E)){this._enforcingBounds=!0;var ut=E.subtract(X.getCenter()),Ft=X.extend(E).getSize().subtract(W);M.x+=ut.x<0?-Ft.x:Ft.x,M.y+=ut.y<0?-Ft.y:Ft.y,this.panTo(this.unproject(M),u),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=mi({animate:!1,pan:!0},!0===c?{animate:!0}:c);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),x=u.divideBy(2).round(),M=p.divideBy(2).round(),E=x.subtract(M);return E.x||E.y?(c.animate&&c.pan?this.panBy(E):(c.pan&&this._rawPanBy(E),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(Di(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:p})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=mi({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=Di(this._handleGeolocationResponse,this),p=Di(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,p,c):navigator.geolocation.getCurrentPosition(u,p,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var u=c.code,p=c.message||(1===u?"permission denied":2===u?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var x=new pi(c.coords.latitude,c.coords.longitude),M=x.toBounds(2*c.coords.accuracy),E=this._locateOptions;if(E.setView){var V=this.getBoundsZoom(M);this.setView(x,E.maxZoom?Math.min(V,E.maxZoom):V)}var X={latlng:x,bounds:M,timestamp:c.timestamp};for(var W in c.coords)"number"==typeof c.coords[W]&&(X[W]=c.coords[W]);this.fire("locationfound",X)}},addHandler:function(c,u){if(!u)return this;var p=this[c]=new u(this);return this._handlers.push(p),this.options[c]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}var c;for(c in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ji(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(kr(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[c].remove();for(c in this._panes)ji(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,u){var x=si("div","leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),u||this._mapPane);return c&&(this._panes[c]=x),x},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds();return new nr(this.unproject(c.getBottomLeft()),this.unproject(c.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,u,p){c=Wt(c),p=Me(p||[0,0]);var x=this.getZoom()||0,M=this.getMinZoom(),E=this.getMaxZoom(),V=c.getNorthWest(),X=c.getSouthEast(),W=this.getSize().subtract(p),ut=ir(this.project(X,x),this.project(V,x)).getSize(),Ft=re.any3d?this.options.zoomSnap:1,ue=W.x/ut.x,ee=W.y/ut.y,vn=u?Math.max(ue,ee):Math.min(ue,ee);return x=this.getScaleZoom(vn,x),Ft&&(x=Math.round(x/(Ft/100))*(Ft/100),x=u?Math.ceil(x/Ft)*Ft:Math.floor(x/Ft)*Ft),Math.max(M,Math.min(E,x))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ae(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,u){var p=this._getTopLeftPoint(c,u);return new Wi(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(void 0===c?this.getZoom():c)},getPane:function(c){return"string"==typeof c?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,u){var p=this.options.crs;return u=void 0===u?this._zoom:u,p.scale(c)/p.scale(u)},getScaleZoom:function(c,u){var p=this.options.crs,x=p.zoom(c*p.scale(u=void 0===u?this._zoom:u));return isNaN(x)?1/0:x},project:function(c,u){return u=void 0===u?this._zoom:u,this.options.crs.latLngToPoint(ti(c),u)},unproject:function(c,u){return u=void 0===u?this._zoom:u,this.options.crs.pointToLatLng(Me(c),u)},layerPointToLatLng:function(c){var u=Me(c).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(c){return this.project(ti(c))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(ti(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(Wt(c))},distance:function(c,u){return this.options.crs.distance(ti(c),ti(u))},containerPointToLayerPoint:function(c){return Me(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return Me(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var u=this.containerPointToLayerPoint(Me(c));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ti(c)))},mouseEventToContainerPoint:function(c){return y0(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var u=this._container=Yh(c);if(!u)throw new Error("Map container not found.");if(u._leaflet_id)throw new Error("Map container is already initialized.");Lt(u,"scroll",this._onScroll,this),this._containerId=ri(u)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,Jt(c,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Ul(c,"position");"absolute"!==u&&"relative"!==u&&"fixed"!==u&&"sticky"!==u&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ln(this._mapPane,new Ae(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Jt(c.markerPane,"leaflet-zoom-hide"),Jt(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,u,p){ln(this._mapPane,new Ae(0,0));var x=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var M=this._zoom!==u;this._moveStart(M,p)._move(c,u)._moveEnd(M),this.fire("viewreset"),x&&this.fire("load")},_moveStart:function(c,u){return c&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(c,u,p,x){void 0===u&&(u=this._zoom);var M=this._zoom!==u;return this._zoom=u,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),x?p&&p.pinch&&this.fire("zoom",p):((M||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return kr(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){ln(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[ri(this._container)]=this;var u=c?Fi:Lt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){kr(this._resizeRequest),this._resizeRequest=kn(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,u){for(var x,p=[],M="mouseout"===u||"mouseover"===u,E=c.target||c.srcElement,V=!1;E;){if((x=this._targets[ri(E)])&&("click"===u||"preclick"===u)&&this._draggableMoved(x)){V=!0;break}if(x&&x.listens(u,!0)&&(M&&!Jh(E,c)||(p.push(x),M))||E===this._container)break;E=E.parentNode}return!p.length&&!V&&!M&&this.listens(u,!0)&&(p=[this]),p},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var u=c.target||c.srcElement;if(!(!this._loaded||u._leaflet_disable_events||"click"===c.type&&this._isClickDisabled(u))){var p=c.type;"mousedown"===p&&Qp(u),this._fireDOMEvent(c,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,u,p){if("click"===c.type){var x=mi({},c);x.type="preclick",this._fireDOMEvent(x,x.type,p)}var M=this._findEventTargets(c,u);if(p){for(var E=[],V=0;V<p.length;V++)p[V].listens(u,!0)&&E.push(p[V]);M=E.concat(M)}if(M.length){"contextmenu"===u&&Un(c);var X=M[0],W={originalEvent:c};if("keypress"!==c.type&&"keydown"!==c.type&&"keyup"!==c.type){var ut=X.getLatLng&&(!X._radius||X._radius<=10);W.containerPoint=ut?this.latLngToContainerPoint(X.getLatLng()):this.mouseEventToContainerPoint(c),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=ut?X.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(V=0;V<M.length;V++)if(M[V].fire(u,W,!0),W.originalEvent._stopped||!1===M[V].options.bubblingMouseEvents&&-1!==Ea(this._mouseEvents,u))return}},_draggableMoved:function(c){return(c=c.dragging&&c.dragging.enabled()?c:this).dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,u=this._handlers.length;c<u;c++)this._handlers[c].disable()},whenReady:function(c,u){return this._loaded?c.call(u||this,{target:this}):this.on("load",c,u),this},_getMapPanePos:function(){return ei(this._mapPane)||new Ae(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,u){return(c&&void 0!==u?this._getNewPixelOrigin(c,u):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,u){var p=this.getSize()._divideBy(2);return this.project(c,u)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,u,p){var x=this._getNewPixelOrigin(p,u);return this.project(c,u)._subtract(x)},_latLngBoundsToNewLayerBounds:function(c,u,p){var x=this._getNewPixelOrigin(p,u);return ir([this.project(c.getSouthWest(),u)._subtract(x),this.project(c.getNorthWest(),u)._subtract(x),this.project(c.getSouthEast(),u)._subtract(x),this.project(c.getNorthEast(),u)._subtract(x)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,u,p){if(!p)return c;var x=this.project(c,u),M=this.getSize().divideBy(2),E=new Wi(x.subtract(M),x.add(M)),V=this._getBoundsOffset(E,p,u);return Math.abs(V.x)<=1&&Math.abs(V.y)<=1?c:this.unproject(x.add(V),u)},_limitOffset:function(c,u){if(!u)return c;var p=this.getPixelBounds(),x=new Wi(p.min.add(c),p.max.add(c));return c.add(this._getBoundsOffset(x,u))},_getBoundsOffset:function(c,u,p){var x=ir(this.project(u.getNorthEast(),p),this.project(u.getSouthWest(),p)),M=x.min.subtract(c.min),E=x.max.subtract(c.max);return new Ae(this._rebound(M.x,-E.x),this._rebound(M.y,-E.y))},_rebound:function(c,u){return c+u>0?Math.round(c-u)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(u))},_limitZoom:function(c){var u=this.getMinZoom(),p=this.getMaxZoom(),x=re.any3d?this.options.zoomSnap:1;return x&&(c=Math.round(c/x)*x),Math.max(u,Math.min(p,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ii(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,u){var p=this._getCenterOffset(c)._trunc();return!(!0!==(u&&u.animate)&&!this.getSize().contains(p)||(this.panBy(p,u),0))},_createAnimProxy:function(){var c=this._proxy=si("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(u){var p=ks,x=this._proxy.style[p];rs(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),x===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ji(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),u=this.getZoom();rs(this._proxy,this.project(c,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,u,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||!1===p.animate||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var x=this.getZoomScale(u),M=this._getCenterOffset(c)._divideBy(1-1/x);return!(!0!==p.animate&&!this.getSize().contains(M)||(kn(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(c,u,!0)},this),0))},_animateZoom:function(c,u,p,x){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=u,Jt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:u,noUpdate:x}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(Di(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ii(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});var Mo=Uo.extend({options:{position:"topright"},initialize:function(c){Ui(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var u=this._map;return u&&u.removeControl(this),this.options.position=c,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var u=this._container=this.onAdd(c),p=this.getPosition(),x=c._controlCorners[p];return Jt(u,"leaflet-control"),-1!==p.indexOf("bottom")?x.insertBefore(u,x.firstChild):x.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ji(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),yd=function(c){return new Mo(c)};Rt.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},u="leaflet-",p=this._controlContainer=si("div",u+"control-container",this._container);function x(M,E){c[M+E]=si("div",u+M+" "+u+E,p)}x("top","left"),x("top","right"),x("bottom","left"),x("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)ji(this._controlCorners[c]);ji(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bt=Mo.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,u,p,x){return p<x?-1:x<p?1:0}},initialize:function(c,u,p){for(var x in Ui(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,c)this._addLayer(c[x],x);for(x in u)this._addLayer(u[x],x,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Mo.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,u){return this._addLayer(c,u),this._map?this._update():this},addOverlay:function(c,u){return this._addLayer(c,u,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var u=this._getLayer(ri(c));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){Jt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Jt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Ii(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ii(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",u=this._container=si("div",c),p=this.options.collapsed;u.setAttribute("aria-haspopup",!0),Xr(u),eg(u);var x=this._section=si("section",c+"-list");p&&(this._map.on("click",this.collapse,this),Lt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=si("a",c+"-toggle",u);M.href="#",M.title="Layers",M.setAttribute("role","button"),Lt(M,{keydown:function(E){13===E.keyCode&&this._expandSafely()},click:function(E){Un(E),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=si("div",c+"-base",x),this._separator=si("div",c+"-separator",x),this._overlaysList=si("div",c+"-overlays",x),u.appendChild(x)},_getLayer:function(c){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&ri(this._layers[u].layer)===c)return this._layers[u]},_addLayer:function(c,u,p){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:u,overlay:p}),this.options.sortLayers&&this._layers.sort(Di(function(x,M){return this.options.sortFunction(x.layer,M.layer,x.name,M.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;vd(this._baseLayersList),vd(this._overlaysList),this._layerControlInputs=[];var c,u,p,x,M=0;for(p=0;p<this._layers.length;p++)this._addItem(x=this._layers[p]),u=u||x.overlay,c=c||!x.overlay,M+=x.overlay?0:1;return this.options.hideSingleBase&&(this._baseLayersList.style.display=(c=c&&M>1)?"":"none"),this._separator.style.display=u&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var u=this._getLayer(ri(c.target)),p=u.overlay?"add"===c.type?"overlayadd":"overlayremove":"add"===c.type?"baselayerchange":null;p&&this._map.fire(p,u)},_createRadioElement:function(c,u){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(u?' checked="checked"':"")+"/>",x=document.createElement("div");return x.innerHTML=p,x.firstChild},_addItem:function(c){var x,u=document.createElement("label"),p=this._map.hasLayer(c.layer);c.overlay?((x=document.createElement("input")).type="checkbox",x.className="leaflet-control-layers-selector",x.defaultChecked=p):x=this._createRadioElement("leaflet-base-layers_"+ri(this),p),this._layerControlInputs.push(x),x.layerId=ri(c.layer),Lt(x,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+c.name;var E=document.createElement("span");return u.appendChild(E),E.appendChild(x),E.appendChild(M),(c.overlay?this._overlaysList:this._baseLayersList).appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var u,p,c=this._layerControlInputs,x=[],M=[];this._handlingClick=!0;for(var E=c.length-1;E>=0;E--)p=this._getLayer((u=c[E]).layerId).layer,u.checked?x.push(p):u.checked||M.push(p);for(E=0;E<M.length;E++)this._map.hasLayer(M[E])&&this._map.removeLayer(M[E]);for(E=0;E<x.length;E++)this._map.hasLayer(x[E])||this._map.addLayer(x[E]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u,p,c=this._layerControlInputs,x=this._map.getZoom(),M=c.length-1;M>=0;M--)p=this._getLayer((u=c[M]).layerId).layer,u.disabled=void 0!==p.options.minZoom&&x<p.options.minZoom||void 0!==p.options.maxZoom&&x>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,Lt(c,"click",Un),this.expand();var u=this;setTimeout(function(){Fi(c,"click",Un),u._preventClick=!1})}}),Te=Mo.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var u="leaflet-control-zoom",p=si("div",u+" leaflet-bar"),x=this.options;return this._zoomInButton=this._createButton(x.zoomInText,x.zoomInTitle,u+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(x.zoomOutText,x.zoomOutTitle,u+"-out",p,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,u,p,x,M){var E=si("a",p,x);return E.innerHTML=c,E.href="#",E.title=u,E.setAttribute("role","button"),E.setAttribute("aria-label",u),Xr(E),Lt(E,"click",Pa),Lt(E,"click",M,this),Lt(E,"click",this._refocusOnMap,this),E},_updateDisabled:function(){var c=this._map,u="leaflet-disabled";Ii(this._zoomInButton,u),Ii(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Jt(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Jt(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});Rt.mergeOptions({zoomControl:!0}),Rt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Te,this.addControl(this.zoomControl))});var ig=Mo.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var u="leaflet-control-scale",p=si("div",u),x=this.options;return this._addScales(x,u+"-line",p),c.on(x.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),p},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,u,p){c.metric&&(this._mScale=si("div",u,p)),c.imperial&&(this._iScale=si("div",u,p))},_update:function(){var c=this._map,u=c.getSize().y/2,p=c.distance(c.containerPointToLatLng([0,u]),c.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(p)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var u=this._getRoundNum(c);this._updateScale(this._mScale,u<1e3?u+" m":u/1e3+" km",u/c)},_updateImperial:function(c){var p,x,M,u=3.2808399*c;u>5280?(x=this._getRoundNum(p=u/5280),this._updateScale(this._iScale,x+" mi",x/p)):(M=this._getRoundNum(u),this._updateScale(this._iScale,M+" ft",M/u))},_updateScale:function(c,u,p){c.style.width=Math.round(this.options.maxWidth*p)+"px",c.innerHTML=u},_getRoundNum:function(c){var u=Math.pow(10,(Math.floor(c)+"").length-1),p=c/u;return u*(p>=10?10:p>=5?5:p>=3?3:p>=2?2:1)}}),Oa=Mo.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?'<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> ':"")+"Leaflet</a>"},initialize:function(c){Ui(this,c),this._attributions={}},onAdd:function(c){for(var u in c.attributionControl=this,this._container=si("div","leaflet-control-attribution"),Xr(this._container),c._layers)c._layers[u].getAttribution&&this.addAttribution(c._layers[u].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var u in this._attributions)this._attributions[u]&&c.push(u);var p=[];this.options.prefix&&p.push(this.options.prefix),c.length&&p.push(c.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});Rt.mergeOptions({attributionControl:!0}),Rt.addInitHook(function(){this.options.attributionControl&&(new Oa).addTo(this)});Mo.Layers=bt,Mo.Zoom=Te,Mo.Scale=ig,Mo.Attribution=Oa,yd.layers=function(c,u,p){return new bt(c,u,p)},yd.zoom=function(c){return new Te(c)},yd.scale=function(c){return new ig(c)},yd.attribution=function(c){return new Oa(c)};var Pr=Uo.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Pr.addTo=function(c,u){return c.addHandler(u,this),this};var rg={Events:an},og=re.touch?"touchstart mousedown":"mousedown",De=Pl.extend({options:{clickTolerance:3},initialize:function(c,u,p,x){Ui(this,x),this._element=c,this._dragStartTarget=u||c,this._preventOutline=p},enable:function(){this._enabled||(Lt(this._dragStartTarget,og,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(De._dragging===this&&this.finishDrag(!0),Fi(this._dragStartTarget,og,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Kh(this._element,"leaflet-zoom-anim"))){if(c.touches&&1!==c.touches.length)return void(De._dragging===this&&this.finishDrag());if(!(De._dragging||c.shiftKey||1!==c.which&&1!==c.button&&!c.touches||(De._dragging=this,this._preventOutline&&Qp(this._element),_i(),os(),this._moving))){this.fire("down");var u=c.touches?c.touches[0]:c,p=nt(this._element);this._startPoint=new Ae(u.clientX,u.clientY),this._startPos=ei(this._element),this._parentScale=ka(p);var x="mousedown"===c.type;Lt(document,x?"mousemove":"touchmove",this._onMove,this),Lt(document,x?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1)return void(this._moved=!0);var u=c.touches&&1===c.touches.length?c.touches[0]:c,p=new Ae(u.clientX,u.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,Un(c),this._moved||(this.fire("dragstart"),this._moved=!0,Jt(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Jt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),ln(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Ii(document.body,"leaflet-dragging"),this._lastTarget&&(Ii(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Fi(document,"mousemove touchmove",this._onMove,this),Fi(document,"mouseup touchend touchcancel",this._onUp,this),ve(),$i();var u=this._moved&&this._moving;this._moving=!1,De._dragging=!1,u&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function wd(c,u,p){var x,E,V,X,W,ut,Ft,ue,ee,M=[1,4,2,8];for(E=0,Ft=c.length;E<Ft;E++)c[E]._code=Ls(c[E],u);for(X=0;X<4;X++){for(ue=M[X],x=[],E=0,V=(Ft=c.length)-1;E<Ft;V=E++)ut=c[V],(W=c[E])._code&ue?ut._code&ue||((ee=La(ut,W,ue,u,p))._code=Ls(ee,u),x.push(ee)):(ut._code&ue&&((ee=La(ut,W,ue,u,p))._code=Ls(ee,u),x.push(ee)),x.push(W));c=x}return c}function tf(c,u){var p,x,M,E,V,X,W,ut;if(!c||0===c.length)throw new Error("latlngs not passed");Yr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ue=ti([0,0]),ee=Wt(c);ee.getNorthWest().distanceTo(ee.getSouthWest())*ee.getNorthEast().distanceTo(ee.getNorthWest())<1700&&(ue=zn(c));var Zi=c.length,nn=[];for(p=0;p<Zi;p++){var wn=ti(c[p]);nn.push(u.project(ti([wn.lat-ue.lat,wn.lng-ue.lng])))}for(X=W=ut=0,p=0,x=Zi-1;p<Zi;x=p++)W+=((M=nn[p]).x+(E=nn[x]).x)*(V=M.y*E.x-E.y*M.x),ut+=(M.y+E.y)*V,X+=3*V;var Ns=u.unproject(Me(0===X?nn[0]:[W/X,ut/X]));return ti([Ns.lat+ue.lat,Ns.lng+ue.lng])}function zn(c){for(var u=0,p=0,x=0,M=0;M<c.length;M++){var E=ti(c[M]);u+=E.lat,p+=E.lng,x++}return ti([u/x,p/x])}var Md,sg={__proto__:null,clipPolygon:wd,polygonCenter:tf,centroid:zn};function M0(c,u){if(!u||!c.length)return c.slice();var p=u*u;return function TD(c,u){var p=c.length,M=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(p);M[0]=M[p-1]=1,at(c,M,u,0,p-1);var E,V=[];for(E=0;E<p;E++)M[E]&&V.push(c[E]);return V}(c=function ef(c,u){for(var p=[c[0]],x=1,M=0,E=c.length;x<E;x++)rf(c[x],c[M])>u&&(p.push(c[x]),M=x);return M<E-1&&p.push(c[E-1]),p}(c,p),p)}function Ri(c,u,p){return Math.sqrt(Sd(c,u,p,!0))}function at(c,u,p,x,M){var V,X,W,E=0;for(X=x+1;X<=M-1;X++)(W=Sd(c[X],c[x],c[M],!0))>E&&(V=X,E=W);E>p&&(u[V]=1,at(c,u,p,x,V),at(c,u,p,V,M))}function nf(c,u,p,x,M){var X,W,ut,E=x?Md:Ls(c,p),V=Ls(u,p);for(Md=V;;){if(!(E|V))return[c,u];if(E&V)return!1;ut=Ls(W=La(c,u,X=E||V,p,M),p),X===E?(c=W,E=ut):(u=W,V=ut)}}function La(c,u,p,x,M){var ut,Ft,E=u.x-c.x,V=u.y-c.y,X=x.min,W=x.max;return 8&p?(ut=c.x+E*(W.y-c.y)/V,Ft=W.y):4&p?(ut=c.x+E*(X.y-c.y)/V,Ft=X.y):2&p?(ut=W.x,Ft=c.y+V*(W.x-c.x)/E):1&p&&(ut=X.x,Ft=c.y+V*(X.x-c.x)/E),new Ae(ut,Ft,M)}function Ls(c,u){var p=0;return c.x<u.min.x?p|=1:c.x>u.max.x&&(p|=2),c.y<u.min.y?p|=4:c.y>u.max.y&&(p|=8),p}function rf(c,u){var p=u.x-c.x,x=u.y-c.y;return p*p+x*x}function Sd(c,u,p,x){var ut,M=u.x,E=u.y,V=p.x-M,X=p.y-E,W=V*V+X*X;return W>0&&((ut=((c.x-M)*V+(c.y-E)*X)/W)>1?(M=p.x,E=p.y):ut>0&&(M+=V*ut,E+=X*ut)),V=c.x-M,X=c.y-E,x?V*V+X*X:new Ae(M,E)}function Yr(c){return!Rn(c[0])||"object"!=typeof c[0][0]&&typeof c[0][0]<"u"}function S0(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Yr(c)}function C0(c,u){var p,x,M,E,V,X,W,ut;if(!c||0===c.length)throw new Error("latlngs not passed");Yr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ft=ti([0,0]),ue=Wt(c);ue.getNorthWest().distanceTo(ue.getSouthWest())*ue.getNorthEast().distanceTo(ue.getNorthWest())<1700&&(Ft=zn(c));var vn=c.length,Zi=[];for(p=0;p<vn;p++){var nn=ti(c[p]);Zi.push(u.project(ti([nn.lat-Ft.lat,nn.lng-Ft.lng])))}for(p=0,x=0;p<vn-1;p++)x+=Zi[p].distanceTo(Zi[p+1])/2;if(0===x)ut=Zi[0];else for(p=0,E=0;p<vn-1;p++)if((E+=M=(V=Zi[p]).distanceTo(X=Zi[p+1]))>x){ut=[X.x-(W=(E-x)/M)*(X.x-V.x),X.y-W*(X.y-V.y)];break}var wn=u.unproject(Me(ut));return ti([wn.lat+Ft.lat,wn.lng+Ft.lng])}var DD={__proto__:null,simplify:M0,pointToSegmentDistance:Ri,closestPointOnSegment:function ED(c,u,p){return Sd(c,u,p)},clipSegment:nf,_getEdgeIntersection:La,_getBitCode:Ls,_sqClosestPointOnSegment:Sd,isFlat:Yr,_flat:S0,polylineCenter:C0},Fs={project:function(c){return new Ae(c.lng,c.lat)},unproject:function(c){return new pi(c.y,c.x)},bounds:new Wi([-180,-90],[180,90])},jl={R:6378137,R_MINOR:6356752.314245179,bounds:new Wi([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(c){var u=Math.PI/180,p=this.R,x=c.lat*u,M=this.R_MINOR/p,E=Math.sqrt(1-M*M),V=E*Math.sin(x),X=Math.tan(Math.PI/4-x/2)/Math.pow((1-V)/(1+V),E/2);return x=-p*Math.log(Math.max(X,1e-10)),new Ae(c.lng*u*p,x)},unproject:function(c){for(var ut,u=180/Math.PI,p=this.R,x=this.R_MINOR/p,M=Math.sqrt(1-x*x),E=Math.exp(-c.y/p),V=Math.PI/2-2*Math.atan(E),X=0,W=.1;X<15&&Math.abs(W)>1e-7;X++)ut=M*Math.sin(V),ut=Math.pow((1-ut)/(1+ut),M/2),V+=W=Math.PI/2-2*Math.atan(E*ut)-V;return new pi(V*u,c.x*u/p)}},Cd={__proto__:null,LonLat:Fs,Mercator:jl,SphericalMercator:Ee},E0=mi({},hi,{code:"EPSG:3395",projection:jl,transformation:function(){var c=.5/(Math.PI*jl.R);return Ll(c,.5,-c,.5)}()}),ag=mi({},hi,{code:"EPSG:4326",projection:Fs,transformation:Ll(1/180,1,-1/180,.5)}),T0=mi({},gi,{projection:Fs,transformation:Ll(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,u){var p=u.lng-c.lng,x=u.lat-c.lat;return Math.sqrt(p*p+x*x)},infinite:!0});gi.Earth=hi,gi.EPSG3395=E0,gi.EPSG3857=Fl,gi.EPSG900913=e0,gi.EPSG4326=ag,gi.Simple=T0;var Or=Pl.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[ri(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[ri(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var u=c.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var p=this.getEvents();u.on(p,this),this.once("remove",function(){u.off(p,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});Rt.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var u=ri(c);return this._layers[u]||(this._layers[u]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c)),this},removeLayer:function(c){var u=ri(c);return this._layers[u]?(this._loaded&&c.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return ri(c)in this._layers},eachLayer:function(c,u){for(var p in this._layers)c.call(u,this._layers[p]);return this},_addLayers:function(c){for(var u=0,p=(c=c?Rn(c)?c:[c]:[]).length;u<p;u++)this.addLayer(c[u])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[ri(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var u=ri(c);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,u=-1/0,p=this._getZoomSpan();for(var x in this._zoomBoundLayers){var M=this._zoomBoundLayers[x].options;c=void 0===M.minZoom?c:Math.min(c,M.minZoom),u=void 0===M.maxZoom?u:Math.max(u,M.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=c===1/0?void 0:c,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Kr=Or.extend({initialize:function(c,u){var p,x;if(Ui(this,u),this._layers={},c)for(p=0,x=c.length;p<x;p++)this.addLayer(c[p])},addLayer:function(c){var u=this.getLayerId(c);return this._layers[u]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var u=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(c){return("number"==typeof c?c:this.getLayerId(c))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var p,x,u=Array.prototype.slice.call(arguments,1);for(p in this._layers)(x=this._layers[p])[c]&&x[c].apply(x,u);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,u){for(var p in this._layers)c.call(u,this._layers[p]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return ri(c)}}),Vn=Kr.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Kr.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Kr.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new nr;for(var u in this._layers){var p=this._layers[u];c.extend(p.getBounds?p.getBounds():p.getLatLng())}return c}}),Y=Uo.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){Ui(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,u){var p=this._getIconUrl(c);if(!p){if("icon"===c)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var x=this._createImg(p,u&&"IMG"===u.tagName?u:null);return this._setIconStyles(x,c),(this.options.crossOrigin||""===this.options.crossOrigin)&&(x.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),x},_setIconStyles:function(c,u){var p=this.options,x=p[u+"Size"];"number"==typeof x&&(x=[x,x]);var M=Me(x),E=Me("shadow"===u&&p.shadowAnchor||p.iconAnchor||M&&M.divideBy(2,!0));c.className="leaflet-marker-"+u+" "+(p.className||""),E&&(c.style.marginLeft=-E.x+"px",c.style.marginTop=-E.y+"px"),M&&(c.style.width=M.x+"px",c.style.height=M.y+"px")},_createImg:function(c,u){return(u=u||document.createElement("img")).src=c,u},_getIconUrl:function(c){return re.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});var wt=Y.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return"string"!=typeof wt.imagePath&&(wt.imagePath=this._detectIconPath()),(this.options.imagePath||wt.imagePath)+Y.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var u=function(p,x,M){var E=x.exec(p);return E&&E[M]};return(c=u(c,/^url\((['"])?(.+)\1\)$/,2))&&u(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=si("div","leaflet-default-icon-path",document.body),u=Ul(c,"background-image")||Ul(c,"backgroundImage");if(document.body.removeChild(c),u=this._stripUrl(u))return u;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),$l=Pr.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new De(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Jt(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ii(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var u=this._marker,p=u._map,x=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,E=ei(u._icon),V=p.getPixelBounds(),X=p.getPixelOrigin(),W=ir(V.min._subtract(X).add(M),V.max._subtract(X).subtract(M));if(!W.contains(E)){var ut=Me((Math.max(W.max.x,E.x)-W.max.x)/(V.max.x-W.max.x)-(Math.min(W.min.x,E.x)-W.min.x)/(V.min.x-W.min.x),(Math.max(W.max.y,E.y)-W.max.y)/(V.max.y-W.max.y)-(Math.min(W.min.y,E.y)-W.min.y)/(V.min.y-W.min.y)).multiplyBy(x);p.panBy(ut,{animate:!1}),this._draggable._newPos._add(ut),this._draggable._startPos._add(ut),ln(u._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=kn(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(kr(this._panRequest),this._panRequest=kn(this._adjustPan.bind(this,c)))},_onDrag:function(c){var u=this._marker,p=u._shadow,x=ei(u._icon),M=u._map.layerPointToLatLng(x);p&&ln(p,x),u._latlng=M,c.latlng=M,c.oldLatLng=this._oldLatLng,u.fire("move",c).fire("drag",c)},_onDragEnd:function(c){kr(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Fa=Or.extend({options:{icon:new wt,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,u){Ui(this,u),this._latlng=ti(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var u=this._latlng;return this._latlng=ti(c),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=c.icon.createIcon(this._icon),x=!1;p!==this._icon&&(this._icon&&this._removeIcon(),x=!0,c.title&&(p.title=c.title),"IMG"===p.tagName&&(p.alt=c.alt||"")),Jt(p,u),c.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Lt(p,"focus",this._panOnFocus,this);var M=c.icon.createShadow(this._shadow),E=!1;M!==this._shadow&&(this._removeShadow(),E=!0),M&&(Jt(M,u),M.alt=""),this._shadow=M,c.opacity<1&&this._updateOpacity(),x&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&E&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Fi(this._icon,"focus",this._panOnFocus,this),ji(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ji(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&ln(this._icon,c),this._shadow&&ln(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(Jt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),$l)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new $l(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&Zn(this._icon,c),this._shadow&&Zn(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var u=this.options.icon.options,p=u.iconSize?Me(u.iconSize):Me(0,0),x=u.iconAnchor?Me(u.iconAnchor):Me(0,0);c.panInside(this._latlng,{paddingTopLeft:x,paddingBottomRight:p.subtract(x)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});var ss=Or.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return Ui(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ed=ss.extend({options:{fill:!0,radius:10},initialize:function(c,u){Ui(this,u),this._latlng=ti(c),this._radius=this.options.radius},setLatLng:function(c){var u=this._latlng;return this._latlng=ti(c),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var u=c&&c.radius||this._radius;return ss.prototype.setStyle.call(this,c),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,u=this._radiusY||c,p=this._clickTolerance(),x=[c+p,u+p];this._pxBounds=new Wi(this._point.subtract(x),this._point.add(x))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});var Qr=Ed.extend({initialize:function(c,u,p){if("number"==typeof u&&(u=mi({},p,{radius:u})),Ui(this,u),this._latlng=ti(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new nr(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:ss.prototype.setStyle,_project:function(){var c=this._latlng.lng,u=this._latlng.lat,p=this._map,x=p.options.crs;if(x.distance===hi.distance){var M=Math.PI/180,E=this._mRadius/hi.R/M,V=p.project([u+E,c]),X=p.project([u-E,c]),W=V.add(X).divideBy(2),ut=p.unproject(W).lat,Ft=Math.acos((Math.cos(E*M)-Math.sin(u*M)*Math.sin(ut*M))/(Math.cos(u*M)*Math.cos(ut*M)))/M;(isNaN(Ft)||0===Ft)&&(Ft=E/Math.cos(Math.PI/180*u)),this._point=W.subtract(p.getPixelOrigin()),this._radius=isNaN(Ft)?0:W.x-p.project([ut,c-Ft]).x,this._radiusY=W.y-V.y}else{var ue=x.unproject(x.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(ue).x}this._updateBounds()}});var cn=ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,u){Ui(this,u),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var M,E,u=1/0,p=null,x=Sd,V=0,X=this._parts.length;V<X;V++)for(var W=this._parts[V],ut=1,Ft=W.length;ut<Ft;ut++){var ue=x(c,M=W[ut-1],E=W[ut],!0);ue<u&&(u=ue,p=x(c,M,E))}return p&&(p.distance=Math.sqrt(u)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return C0(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,u){return u=u||this._defaultShape(),c=ti(c),u.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new nr,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Yr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var u=[],p=Yr(c),x=0,M=c.length;x<M;x++)p?(u[x]=ti(c[x]),this._bounds.extend(u[x])):u[x]=this._convertLatLngs(c[x]);return u},_project:function(){var c=new Wi;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),u=new Ae(c,c);this._rawPxBounds&&(this._pxBounds=new Wi([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(c,u,p){var E,V,M=c.length;if(c[0]instanceof pi){for(V=[],E=0;E<M;E++)V[E]=this._map.latLngToLayerPoint(c[E]),p.extend(V[E]);u.push(V)}else for(E=0;E<M;E++)this._projectLatlngs(c[E],u,p)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(c)){if(this.options.noClip)return void(this._parts=this._rings);var p,x,M,E,V,X,W,u=this._parts;for(p=0,M=0,E=this._rings.length;p<E;p++)for(x=0,V=(W=this._rings[p]).length;x<V-1;x++)(X=nf(W[x],W[x+1],c,x,!0))&&(u[M]=u[M]||[],u[M].push(X[0]),(X[1]!==W[x+1]||x===V-2)&&(u[M].push(X[1]),M++))}},_simplifyPoints:function(){for(var c=this._parts,u=this.options.smoothFactor,p=0,x=c.length;p<x;p++)c[p]=M0(c[p],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,u){var p,x,M,E,V,X,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(p=0,E=this._parts.length;p<E;p++)for(x=0,M=(V=(X=this._parts[p]).length)-1;x<V;M=x++)if((u||0!==x)&&Ri(c,X[M],X[x])<=W)return!0;return!1}});cn._flat=S0;var qe=cn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return tf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var u=cn.prototype._convertLatLngs.call(this,c),p=u.length;return p>=2&&u[0]instanceof pi&&u[0].equals(u[p-1])&&u.pop(),u},_setLatLngs:function(c){cn.prototype._setLatLngs.call(this,c),Yr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Yr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,u=this.options.weight,p=new Ae(u,u);if(c=new Wi(c.min.subtract(p),c.max.add(p)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(c)){if(this.options.noClip)return void(this._parts=this._rings);for(var E,x=0,M=this._rings.length;x<M;x++)(E=wd(this._rings[x],c,!0)).length&&this._parts.push(E)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var p,x,M,E,V,X,W,ut,u=!1;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(E=0,W=this._parts.length;E<W;E++)for(V=0,X=(ut=(p=this._parts[E]).length)-1;V<ut;X=V++)(x=p[V]).y>c.y!=(M=p[X]).y>c.y&&c.x<(M.x-x.x)*(c.y-x.y)/(M.y-x.y)+x.x&&(u=!u);return u||cn.prototype._containsPoint.call(this,c,!0)}});var Jr=Vn.extend({initialize:function(c,u){Ui(this,u),this._layers={},c&&this.addData(c)},addData:function(c){var p,x,M,u=Rn(c)?c:c.features;if(u){for(p=0,x=u.length;p<x;p++)((M=u[p]).geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var E=this.options;if(E.filter&&!E.filter(c))return this;var V=Na(c,E);return V?(V.feature=Xl(c),V.defaultOptions=V.options,this.resetStyle(V),E.onEachFeature&&E.onEachFeature(c,V),this.addLayer(V)):this},resetStyle:function(c){return void 0===c?this.eachLayer(this.resetStyle,this):(c.options=mi({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(u){this._setLayerStyle(u,c)},this)},_setLayerStyle:function(c,u){c.setStyle&&("function"==typeof u&&(u=u(c.feature)),c.setStyle(u))}});function Na(c,u){var X,W,ut,Ft,p="Feature"===c.type?c.geometry:c,x=p?p.coordinates:null,M=[],E=u&&u.pointToLayer,V=u&&u.coordsToLatLng||to;if(!x&&!p)return null;switch(p.type){case"Point":return sf(E,c,X=V(x),u);case"MultiPoint":for(ut=0,Ft=x.length;ut<Ft;ut++)X=V(x[ut]),M.push(sf(E,c,X,u));return new Vn(M);case"LineString":case"MultiLineString":return W=as(x,"LineString"===p.type?0:1,V),new cn(W,u);case"Polygon":case"MultiPolygon":return W=as(x,"Polygon"===p.type?1:2,V),new qe(W,u);case"GeometryCollection":for(ut=0,Ft=p.geometries.length;ut<Ft;ut++){var ue=Na({geometry:p.geometries[ut],type:"Feature",properties:c.properties},u);ue&&M.push(ue)}return new Vn(M);case"FeatureCollection":for(ut=0,Ft=p.features.length;ut<Ft;ut++){var ee=Na(p.features[ut],u);ee&&M.push(ee)}return new Vn(M);default:throw new Error("Invalid GeoJSON object.")}}function sf(c,u,p,x){return c?c(u,p):new Fa(p,x&&x.markersInheritOptions&&x)}function to(c){return new pi(c[1],c[0],c[2])}function as(c,u,p){for(var V,x=[],M=0,E=c.length;M<E;M++)V=u?as(c[M],u-1,p):(p||to)(c[M]),x.push(V);return x}function Ad(c,u){return void 0!==(c=ti(c)).alt?[pr(c.lng,u),pr(c.lat,u),pr(c.alt,u)]:[pr(c.lng,u),pr(c.lat,u)]}function Zl(c,u,p,x){for(var M=[],E=0,V=c.length;E<V;E++)M.push(u?Zl(c[E],Yr(c[E])?0:u-1,p,x):Ad(c[E],x));return!u&&p&&M.length>0&&M.push(M[0].slice()),M}function ls(c,u){return c.feature?mi({},c.feature,{geometry:u}):Xl(u)}function Xl(c){return"Feature"===c.type||"FeatureCollection"===c.type?c:{type:"Feature",properties:{},geometry:c}}var Id={toGeoJSON:function(c){return ls(this,{type:"Point",coordinates:Ad(this.getLatLng(),c)})}};function Ba(c,u){return new Jr(c,u)}Fa.include(Id),Qr.include(Id),Ed.include(Id),cn.include({toGeoJSON:function(c){var u=!Yr(this._latlngs);return ls(this,{type:(u?"Multi":"")+"LineString",coordinates:Zl(this._latlngs,u?1:0,!1,c)})}}),qe.include({toGeoJSON:function(c){var u=!Yr(this._latlngs),p=u&&!Yr(this._latlngs[0]),x=Zl(this._latlngs,p?2:u?1:0,!0,c);return u||(x=[x]),ls(this,{type:(p?"Multi":"")+"Polygon",coordinates:x})}}),Kr.include({toMultiPoint:function(c){var u=[];return this.eachLayer(function(p){u.push(p.toGeoJSON(c).geometry.coordinates)}),ls(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(c){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===u)return this.toMultiPoint(c);var p="GeometryCollection"===u,x=[];return this.eachLayer(function(M){if(M.toGeoJSON){var E=M.toGeoJSON(c);if(p)x.push(E.geometry);else{var V=Xl(E);"FeatureCollection"===V.type?x.push.apply(x,V.features):x.push(V)}}}),p?ls(this,{geometries:x,type:"GeometryCollection"}):{type:"FeatureCollection",features:x}}});var cg=Ba,Yl=Or.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,u,p){this._url=c,this._bounds=Wt(u),Ui(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Jt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ji(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Ps(this._image),this},bringToBack:function(){return this._map&&Ia(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=Wt(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c="IMG"===this._url.tagName,u=this._image=c?this._url:si("img");Jt(u,"leaflet-image-layer"),this._zoomAnimated&&Jt(u,"leaflet-zoom-animated"),this.options.className&&Jt(u,this.options.className),u.onselectstart=Ai,u.onmousemove=Ai,u.onload=Di(this.fire,this,"load"),u.onerror=Di(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(u.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c?this._url=u.src:(u.src=this._url,u.alt=this.options.alt)},_animateZoom:function(c){var u=this._map.getZoomScale(c.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;rs(this._image,p,u)},_reset:function(){var c=this._image,u=new Wi(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=u.getSize();ln(c,u.min),c.style.width=p.x+"px",c.style.height=p.y+"px"},_updateOpacity:function(){Zn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&null!=this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),af=Yl.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c="VIDEO"===this._url.tagName,u=this._image=c?this._url:si("video");if(Jt(u,"leaflet-image-layer"),this._zoomAnimated&&Jt(u,"leaflet-zoom-animated"),this.options.className&&Jt(u,this.options.className),u.onselectstart=Ai,u.onmousemove=Ai,u.onloadeddata=Di(this.fire,this,"load"),c){for(var p=u.getElementsByTagName("source"),x=[],M=0;M<p.length;M++)x.push(p[M].src);this._url=p.length>0?x:[u.src]}else{Rn(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var E=0;E<this._url.length;E++){var V=si("source");V.src=this._url[E],u.appendChild(V)}}}});var dg=Yl.extend({_initImage:function(){var c=this._image=this._url;Jt(c,"leaflet-image-layer"),this._zoomAnimated&&Jt(c,"leaflet-zoom-animated"),this.options.className&&Jt(c,this.options.className),c.onselectstart=Ai,c.onmousemove=Ai}});var Co=Or.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,u){c&&(c instanceof pi||Rn(c))?(this._latlng=ti(c),Ui(this,u)):(Ui(this,c),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(c){return(c=arguments.length?c:this._source._map).hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&Zn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&Zn(this._container,1),this.bringToFront(),this.options.interactive&&(Jt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(Zn(this._container,0),this._removeTimeout=setTimeout(Di(ji,void 0,this._container),200)):ji(this._container),this.options.interactive&&(Ii(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=ti(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ps(this._container),this},bringToBack:function(){return this._map&&Ia(this._container),this},_prepareOpen:function(c){var u=this._source;if(!u._map)return!1;if(u instanceof Vn){u=null;var p=this._source._layers;for(var x in p)if(p[x]._map){u=p[x];break}if(!u)return!1;this._source=u}if(!c)if(u.getCenter)c=u.getCenter();else if(u.getLatLng)c=u.getLatLng();else{if(!u.getBounds)throw new Error("Unable to get source layer LatLng.");c=u.getBounds().getCenter()}return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,u="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof u)c.innerHTML=u;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),u=Me(this.options.offset),p=this._getAnchor();this._zoomAnimated?ln(this._container,c.add(p)):u=u.add(c).add(p);var x=this._containerBottom=-u.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=x+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});Rt.include({_initOverlay:function(c,u,p,x){var M=u;return M instanceof c||(M=new c(x).setContent(u)),p&&M.setLatLng(p),M}}),Or.include({_initOverlay:function(c,u,p,x){var M=p;return M instanceof c?(Ui(M,x),M._source=this):(M=u&&!x?u:new c(x,this)).setContent(p),M}});var Kl=Co.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return!(c=arguments.length?c:this._source._map).hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Co.prototype.openOn.call(this,c)},onAdd:function(c){Co.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ss||this._source.on("preclick",Os))},onRemove:function(c){Co.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ss||this._source.off("preclick",Os))},getEvents:function(){var c=Co.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",u=this._container=si("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=si("div",c+"-content-wrapper",u);if(this._contentNode=si("div",c+"-content",p),Xr(u),eg(this._contentNode),Lt(u,"contextmenu",Os),this._tipContainer=si("div",c+"-tip-container",u),this._tip=si("div",c+"-tip",this._tipContainer),this.options.closeButton){var x=this._closeButton=si("a",c+"-close-button",u);x.setAttribute("role","button"),x.setAttribute("aria-label","Close popup"),x.href="#close",x.innerHTML='<span aria-hidden="true">&#215;</span>',Lt(x,"click",function(M){Un(M),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,u=c.style;u.width="",u.whiteSpace="nowrap";var p=c.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),u.width=p+1+"px",u.whiteSpace="",u.height="";var M=this.options.maxHeight,E="leaflet-popup-scrolled";M&&c.offsetHeight>M?(u.height=M+"px",Jt(c,E)):Ii(c,E),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),p=this._getAnchor();ln(this._container,u.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning)return void(this._autopanning=!1);var c=this._map,u=parseInt(Ul(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+u,x=this._containerWidth,M=new Ae(this._containerLeft,-p-this._containerBottom);M._add(ei(this._container));var E=c.layerPointToContainerPoint(M),V=Me(this.options.autoPanPadding),X=Me(this.options.autoPanPaddingTopLeft||V),W=Me(this.options.autoPanPaddingBottomRight||V),ut=c.getSize(),Ft=0,ue=0;E.x+x+W.x>ut.x&&(Ft=E.x+x-ut.x+W.x),E.x-Ft-X.x<0&&(Ft=E.x-X.x),E.y+p+W.y>ut.y&&(ue=E.y+p-ut.y+W.y),E.y-ue-X.y<0&&(ue=E.y-X.y),(Ft||ue)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Ft,ue]))}},_getAnchor:function(){return Me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Rt.mergeOptions({closePopupOnClick:!0}),Rt.include({openPopup:function(c,u,p){return this._initOverlay(Kl,c,u,p).openOn(this),this},closePopup:function(c){return(c=arguments.length?c:this._popup)&&c.close(),this}}),Or.include({bindPopup:function(c,u){return this._popup=this._initOverlay(Kl,this._popup,c,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof Vn||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(this._popup&&this._map){Pa(c);var u=c.layer||c.target;if(this._popup._source===u&&!(u instanceof ss))return void(this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng));this._popup._source=u,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){13===c.originalEvent.keyCode&&this._openPopup(c)}});var Rd=Co.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Co.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Co.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Co.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){this._contentNode=this._container=si("div","leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide")),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+ri(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var u,p,x=this._map,M=this._container,E=x.latLngToContainerPoint(x.getCenter()),V=x.layerPointToContainerPoint(c),X=this.options.direction,W=M.offsetWidth,ut=M.offsetHeight,Ft=Me(this.options.offset),ue=this._getAnchor();"top"===X?(u=W/2,p=ut):"bottom"===X?(u=W/2,p=0):"center"===X?(u=W/2,p=ut/2):"right"===X?(u=0,p=ut/2):"left"===X?(u=W,p=ut/2):V.x<E.x?(X="right",u=0,p=ut/2):(X="left",u=W+2*(Ft.x+ue.x),p=ut/2),c=c.subtract(Me(u,p,!0)).add(Ft).add(ue),Ii(M,"leaflet-tooltip-right"),Ii(M,"leaflet-tooltip-left"),Ii(M,"leaflet-tooltip-top"),Ii(M,"leaflet-tooltip-bottom"),Jt(M,"leaflet-tooltip-"+X),ln(M,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&Zn(this._container,c)},_animateZoom:function(c){var u=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(u)},_getAnchor:function(){return Me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Rt.include({openTooltip:function(c,u,p){return this._initOverlay(Rd,c,u,p).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Or.include({bindTooltip:function(c,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Rd,this._tooltip,c,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(c||!this._tooltipHandlersAdded){var u=c?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[u](p),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof Vn||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var u="function"==typeof c.getElement&&c.getElement();u&&(Lt(u,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),Lt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var u="function"==typeof c.getElement&&c.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(this._tooltip&&this._map){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;return void this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(c)})}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var p,x,u=c.latlng;this._tooltip.options.sticky&&c.originalEvent&&(p=this._map.mouseEventToContainerPoint(c.originalEvent),x=this._map.containerPointToLayerPoint(p),u=this._map.layerPointToLatLng(x)),this._tooltip.setLatLng(u)}});var ug=Y.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var u=c&&"DIV"===c.tagName?c:document.createElement("div"),p=this.options;if(p.html instanceof Element?(vd(u),u.appendChild(p.html)):u.innerHTML=!1!==p.html?p.html:"",p.bgPos){var x=Me(p.bgPos);u.style.backgroundPosition=-x.x+"px "+-x.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});Y.Default=wt;var Ql=Or.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){Ui(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),ji(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ps(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ia(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Oh(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof Ae?c:new Ae(c,c)},_updateZIndex:function(){this._container&&null!=this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var E,u=this.getPane().children,p=-c(-1/0,1/0),x=0,M=u.length;x<M;x++)E=u[x].style.zIndex,u[x]!==this._container&&E&&(p=c(p,+E));isFinite(p)&&(this.options.zIndex=p+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Zn(this._container,this.options.opacity);var c=+new Date,u=!1,p=!1;for(var x in this._tiles){var M=this._tiles[x];if(M.current&&M.loaded){var E=Math.min(1,(c-M.loaded)/200);Zn(M.el,E),E<1?u=!0:(M.active?p=!0:this._onOpaqueTile(M),M.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),u&&(kr(this._fadeFrame),this._fadeFrame=kn(this._updateOpacity,this))}},_onOpaqueTile:Ai,_initContainer:function(){this._container||(this._container=si("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,u=this.options.maxZoom;if(void 0!==c){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===c?(this._levels[p].el.style.zIndex=u-Math.abs(c-p),this._onUpdateLevel(p)):(ji(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var x=this._levels[c],M=this._map;return x||((x=this._levels[c]={}).el=si("div","leaflet-tile-container leaflet-zoom-animated",this._container),x.el.style.zIndex=u,x.origin=M.project(M.unproject(M.getPixelOrigin()),c).round(),x.zoom=c,this._setZoomTransform(x,M.getCenter(),M.getZoom()),this._onCreateLevel(x)),this._level=x,x}},_onUpdateLevel:Ai,_onRemoveLevel:Ai,_onCreateLevel:Ai,_pruneTiles:function(){if(this._map){var c,u,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom)return void this._removeAllTiles();for(c in this._tiles)(u=this._tiles[c]).retain=u.current;for(c in this._tiles)if((u=this._tiles[c]).current&&!u.active){var x=u.coords;this._retainParent(x.x,x.y,x.z,x.z-5)||this._retainChildren(x.x,x.y,x.z,x.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var u in this._tiles)this._tiles[u].coords.z===c&&this._removeTile(u)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)ji(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,u,p,x){var M=Math.floor(c/2),E=Math.floor(u/2),V=p-1,X=new Ae(+M,+E);X.z=+V;var W=this._tileCoordsToKey(X),ut=this._tiles[W];return ut&&ut.active?(ut.retain=!0,!0):(ut&&ut.loaded&&(ut.retain=!0),V>x&&this._retainParent(M,E,V,x))},_retainChildren:function(c,u,p,x){for(var M=2*c;M<2*c+2;M++)for(var E=2*u;E<2*u+2;E++){var V=new Ae(M,E);V.z=p+1;var X=this._tileCoordsToKey(V),W=this._tiles[X];W&&W.active?W.retain=!0:(W&&W.loaded&&(W.retain=!0),p+1<x&&this._retainChildren(M,E,p+1,x))}},_resetView:function(c){var u=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var u=this.options;return void 0!==u.minNativeZoom&&c<u.minNativeZoom?u.minNativeZoom:void 0!==u.maxNativeZoom&&u.maxNativeZoom<c?u.maxNativeZoom:c},_setView:function(c,u,p,x){var M=Math.round(u);M=void 0!==this.options.maxZoom&&M>this.options.maxZoom||void 0!==this.options.minZoom&&M<this.options.minZoom?void 0:this._clampZoom(M),(!x||this.options.updateWhenZooming&&M!==this._tileZoom)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==M&&this._update(c),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(c,u)},_setZoomTransforms:function(c,u){for(var p in this._levels)this._setZoomTransform(this._levels[p],c,u)},_setZoomTransform:function(c,u,p){var x=this._map.getZoomScale(p,c.zoom),M=c.origin.multiplyBy(x).subtract(this._map._getNewPixelOrigin(u,p)).round();re.any3d?rs(c.el,M,x):ln(c.el,M)},_resetGrid:function(){var c=this._map,u=c.options.crs,p=this._tileSize=this.getTileSize(),x=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,u.wrapLng[0]],x).x/p.x),Math.ceil(c.project([0,u.wrapLng[1]],x).x/p.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([u.wrapLat[0],0],x).y/p.x),Math.ceil(c.project([u.wrapLat[1],0],x).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var u=this._map,p=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),x=u.getZoomScale(p,this._tileZoom),M=u.project(c,this._tileZoom).floor(),E=u.getSize().divideBy(2*x);return new Wi(M.subtract(E),M.add(E))},_update:function(c){var u=this._map;if(u){var p=this._clampZoom(u.getZoom());if(void 0===c&&(c=u.getCenter()),void 0!==this._tileZoom){var x=this._getTiledPixelBounds(c),M=this._pxBoundsToTileRange(x),E=M.getCenter(),V=[],X=this.options.keepBuffer,W=new Wi(M.getBottomLeft().subtract([X,-X]),M.getTopRight().add([X,-X]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ut in this._tiles){var Ft=this._tiles[ut].coords;(Ft.z!==this._tileZoom||!W.contains(new Ae(Ft.x,Ft.y)))&&(this._tiles[ut].current=!1)}if(Math.abs(p-this._tileZoom)>1)return void this._setView(c,p);for(var ue=M.min.y;ue<=M.max.y;ue++)for(var ee=M.min.x;ee<=M.max.x;ee++){var vn=new Ae(ee,ue);if(vn.z=this._tileZoom,this._isValidTile(vn)){var Zi=this._tiles[this._tileCoordsToKey(vn)];Zi?Zi.current=!0:V.push(vn)}}if(V.sort(function(wn,Ns){return wn.distanceTo(E)-Ns.distanceTo(E)}),0!==V.length){this._loading||(this._loading=!0,this.fire("loading"));var nn=document.createDocumentFragment();for(ee=0;ee<V.length;ee++)this._addTile(V[ee],nn);this._level.el.appendChild(nn)}}}},_isValidTile:function(c){var u=this._map.options.crs;if(!u.infinite){var p=this._globalTileRange;if(!u.wrapLng&&(c.x<p.min.x||c.x>p.max.x)||!u.wrapLat&&(c.y<p.min.y||c.y>p.max.y))return!1}if(!this.options.bounds)return!0;var x=this._tileCoordsToBounds(c);return Wt(this.options.bounds).overlaps(x)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var u=this._map,p=this.getTileSize(),x=c.scaleBy(p),M=x.add(p);return[u.unproject(x,c.z),u.unproject(M,c.z)]},_tileCoordsToBounds:function(c){var u=this._tileCoordsToNwSe(c),p=new nr(u[0],u[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var u=c.split(":"),p=new Ae(+u[0],+u[1]);return p.z=+u[2],p},_removeTile:function(c){var u=this._tiles[c];u&&(ji(u.el),delete this._tiles[c],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Jt(c,"leaflet-tile");var u=this.getTileSize();c.style.width=u.x+"px",c.style.height=u.y+"px",c.onselectstart=Ai,c.onmousemove=Ai,re.ielt9&&this.options.opacity<1&&Zn(c,this.options.opacity)},_addTile:function(c,u){var p=this._getTilePos(c),x=this._tileCoordsToKey(c),M=this.createTile(this._wrapCoords(c),Di(this._tileReady,this,c));this._initTile(M),this.createTile.length<2&&kn(Di(this._tileReady,this,c,null,M)),ln(M,p),this._tiles[x]={el:M,coords:c,current:!0},u.appendChild(M),this.fire("tileloadstart",{tile:M,coords:c})},_tileReady:function(c,u,p){u&&this.fire("tileerror",{error:u,tile:p,coords:c});var x=this._tileCoordsToKey(c);(p=this._tiles[x])&&(p.loaded=+new Date,this._map._fadeAnimated?(Zn(p.el,0),kr(this._fadeFrame),this._fadeFrame=kn(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),u||(Jt(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?kn(this._pruneTiles,this):setTimeout(Di(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var u=new Ae(this._wrapX?Ca(c.x,this._wrapX):c.x,this._wrapY?Ca(c.y,this._wrapY):c.y);return u.z=c.z,u},_pxBoundsToTileRange:function(c){var u=this.getTileSize();return new Wi(c.min.unscaleBy(u).floor(),c.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});var Ua=Ql.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,u){this._url=c,(u=Ui(this,u)).detectRetina&&re.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),"string"==typeof u.subdomains&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,u){return this._url===c&&void 0===u&&(u=!0),this._url=c,u||this.redraw(),this},createTile:function(c,u){var p=document.createElement("img");return Lt(p,"load",Di(this._tileOnLoad,this,u,p)),Lt(p,"error",Di(this._tileOnError,this,u,p)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(p.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"==typeof this.options.referrerPolicy&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(c),p},getTileUrl:function(c){var u={r:re.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-c.y;this.options.tms&&(u.y=p),u["-y"]=p}return hd(this._url,mi(u,this.options))},_tileOnLoad:function(c,u){re.ielt9?setTimeout(Di(c,this,null,u),0):c(null,u)},_tileOnError:function(c,u,p){var x=this.options.errorTileUrl;x&&u.getAttribute("src")!==x&&(u.src=x),c(p,u)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom;return this.options.zoomReverse&&(c=this.options.maxZoom-c),c+this.options.zoomOffset},_getSubdomain:function(c){var u=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var c,u;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&((u=this._tiles[c].el).onload=Ai,u.onerror=Ai,!u.complete)){u.src=fd;var p=this._tiles[c].coords;ji(u),delete this._tiles[c],this.fire("tileabort",{tile:u,coords:p})}},_removeTile:function(c){var u=this._tiles[c];if(u)return u.el.setAttribute("src",fd),Ql.prototype._removeTile.call(this,c)},_tileReady:function(c,u,p){if(this._map&&(!p||p.getAttribute("src")!==fd))return Ql.prototype._tileReady.call(this,c,u,p)}});function Ke(c,u){return new Ua(c,u)}var fg=Ua.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,u){this._url=c;var p=mi({},this.defaultWmsParams);for(var x in u)x in this.options||(p[x]=u[x]);var M=(u=Ui(this,u)).detectRetina&&re.retina?2:1,E=this.getTileSize();p.width=E.x*M,p.height=E.y*M,this.wmsParams=p},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version),this.wmsParams[this._wmsVersion>=1.3?"crs":"srs"]=this._crs.code,Ua.prototype.onAdd.call(this,c)},getTileUrl:function(c){var u=this._tileCoordsToNwSe(c),p=this._crs,x=ir(p.project(u[0]),p.project(u[1])),M=x.min,E=x.max,V=(this._wmsVersion>=1.3&&this._crs===ag?[M.y,M.x,E.y,E.x]:[M.x,M.y,E.x,E.y]).join(","),X=Ua.prototype.getTileUrl.call(this,c);return X+Ip(this.wmsParams,X,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+V},setParams:function(c,u){return mi(this.wmsParams,c),u||this.redraw(),this}});Ua.WMS=fg,Ke.wms=function F0(c,u){return new fg(c,u)};var Ho=Or.extend({options:{padding:.1},initialize:function(c){Ui(this,c),ri(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Jt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,u){var p=this._map.getZoomScale(u,this._zoom),x=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,u),E=x.multiplyBy(-p).add(M).subtract(this._map._getNewPixelOrigin(c,u));re.any3d?rs(this._container,E,p):ln(this._container,E)},_reset:function(){for(var c in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,u=this._map.getSize(),p=this._map.containerPointToLayerPoint(u.multiplyBy(-c)).round();this._bounds=new Wi(p,p.add(u.multiplyBy(1+2*c)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Oe=Ho.extend({options:{tolerance:0},getEvents:function(){var c=Ho.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ho.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");Lt(c,"mousemove",this._onMouseMove,this),Lt(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Lt(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){kr(this._redrawRequest),delete this._ctx,ji(this._container),Fi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var u in this._redrawBounds=null,this._layers)this._layers[u]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ho.prototype._update.call(this);var c=this._bounds,u=this._container,p=c.getSize(),x=re.retina?2:1;ln(u,c.min),u.width=x*p.x,u.height=x*p.y,u.style.width=p.x+"px",u.style.height=p.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Ho.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[ri(c)]=c;var u=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var u=c._order,p=u.next,x=u.prev;p?p.prev=x:this._drawLast=x,x?x.next=p:this._drawFirst=p,delete c._order,delete this._layers[ri(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if("string"==typeof c.options.dashArray){var x,M,u=c.options.dashArray.split(/[, ]+/),p=[];for(M=0;M<u.length;M++){if(x=Number(u[M]),isNaN(x))return;p.push(x)}c.options._dashArray=p}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||kn(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var u=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Wi,this._redrawBounds.extend(c._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(c._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var u=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,u=this._redrawBounds;if(this._ctx.save(),u){var p=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var x=this._drawFirst;x;x=x.next)c=x.layer,(!u||c._pxBounds&&c._pxBounds.intersects(u))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,u){if(this._drawing){var p,x,M,E,V=c._parts,X=V.length,W=this._ctx;if(X){for(W.beginPath(),p=0;p<X;p++){for(x=0,M=V[p].length;x<M;x++)W[x?"lineTo":"moveTo"]((E=V[p][x]).x,E.y);u&&W.closePath()}this._fillStroke(W,c)}}},_updateCircle:function(c){if(this._drawing&&!c._empty()){var u=c._point,p=this._ctx,x=Math.max(Math.round(c._radius),1),M=(Math.max(Math.round(c._radiusY),1)||x)/x;1!==M&&(p.save(),p.scale(1,M)),p.beginPath(),p.arc(u.x,u.y/M,x,0,2*Math.PI,!1),1!==M&&p.restore(),this._fillStroke(p,c)}},_fillStroke:function(c,u){var p=u.options;p.fill&&(c.globalAlpha=p.fillOpacity,c.fillStyle=p.fillColor||p.color,c.fill(p.fillRule||"evenodd")),p.stroke&&0!==p.weight&&(c.setLineDash&&c.setLineDash(u.options&&u.options._dashArray||[]),c.globalAlpha=p.opacity,c.lineWidth=p.weight,c.strokeStyle=p.color,c.lineCap=p.lineCap,c.lineJoin=p.lineJoin,c.stroke())},_onClick:function(c){for(var p,x,u=this._map.mouseEventToLayerPoint(c),M=this._drawFirst;M;M=M.next)(p=M.layer).options.interactive&&p._containsPoint(u)&&("click"!==c.type&&"preclick"!==c.type||!this._map._draggableMoved(p))&&(x=p);this._fireEvent(!!x&&[x],c)},_onMouseMove:function(c){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var u=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,u)}},_handleMouseOut:function(c){var u=this._hoveredLayer;u&&(Ii(this._container,"leaflet-interactive"),this._fireEvent([u],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,u){if(!this._mouseHoverThrottled){for(var p,x,M=this._drawFirst;M;M=M.next)(p=M.layer).options.interactive&&p._containsPoint(u)&&(x=p);x!==this._hoveredLayer&&(this._handleMouseOut(c),x&&(Jt(this._container,"leaflet-interactive"),this._fireEvent([x],c,"mouseover"),this._hoveredLayer=x)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],c),this._mouseHoverThrottled=!0,setTimeout(Di(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,u,p){this._map._fireDOMEvent(u,p||u.type,c)},_bringToFront:function(c){var u=c._order;if(u){var p=u.next,x=u.prev;if(!p)return;p.prev=x,x?x.next=p:p&&(this._drawFirst=p),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(c)}},_bringToBack:function(c){var u=c._order;if(u){var p=u.next,x=u.prev;if(!x)return;x.next=p,p?p.prev=x:x&&(this._drawLast=x),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(c)}}});function mg(c){return re.canvas?new Oe(c):null}var za=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),dt={_initContainer:function(){this._container=si("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ho.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var u=c._container=za("shape");Jt(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",c._path=za("path"),u.appendChild(c._path),this._updateStyle(c),this._layers[ri(c)]=c},_addPath:function(c){var u=c._container;this._container.appendChild(u),c.options.interactive&&c.addInteractiveTarget(u)},_removePath:function(c){var u=c._container;ji(u),c.removeInteractiveTarget(u),delete this._layers[ri(c)]},_updateStyle:function(c){var u=c._stroke,p=c._fill,x=c.options,M=c._container;M.stroked=!!x.stroke,M.filled=!!x.fill,x.stroke?(u||(u=c._stroke=za("stroke")),M.appendChild(u),u.weight=x.weight+"px",u.color=x.color,u.opacity=x.opacity,u.dashStyle=x.dashArray?Rn(x.dashArray)?x.dashArray.join(" "):x.dashArray.replace(/( *, *)/g," "):"",u.endcap=x.lineCap.replace("butt","flat"),u.joinstyle=x.lineJoin):u&&(M.removeChild(u),c._stroke=null),x.fill?(p||(p=c._fill=za("fill")),M.appendChild(p),p.color=x.fillColor||x.color,p.opacity=x.fillOpacity):p&&(M.removeChild(p),c._fill=null)},_updateCircle:function(c){var u=c._point.round(),p=Math.round(c._radius),x=Math.round(c._radiusY||p);this._setPath(c,c._empty()?"M0 0":"AL "+u.x+","+u.y+" "+p+","+x+" 0,23592600")},_setPath:function(c,u){c._path.v=u},_bringToFront:function(c){Ps(c._container)},_bringToBack:function(c){Ia(c._container)}},Pn=re.vml?za:Pp,Ge=Ho.extend({_initContainer:function(){this._container=Pn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ji(this._container),Fi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Ho.prototype._update.call(this);var c=this._bounds,u=c.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,p.setAttribute("width",u.x),p.setAttribute("height",u.y)),ln(p,c.min),p.setAttribute("viewBox",[c.min.x,c.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(c){var u=c._path=Pn("path");c.options.className&&Jt(u,c.options.className),c.options.interactive&&Jt(u,"leaflet-interactive"),this._updateStyle(c),this._layers[ri(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){ji(c._path),c.removeInteractiveTarget(c._path),delete this._layers[ri(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var u=c._path,p=c.options;u&&(p.stroke?(u.setAttribute("stroke",p.color),u.setAttribute("stroke-opacity",p.opacity),u.setAttribute("stroke-width",p.weight),u.setAttribute("stroke-linecap",p.lineCap),u.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?u.setAttribute("stroke-dasharray",p.dashArray):u.removeAttribute("stroke-dasharray"),p.dashOffset?u.setAttribute("stroke-dashoffset",p.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),p.fill?(u.setAttribute("fill",p.fillColor||p.color),u.setAttribute("fill-opacity",p.fillOpacity),u.setAttribute("fill-rule",p.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(c,u){this._setPath(c,Op(c._parts,u))},_updateCircle:function(c){var u=c._point,p=Math.max(Math.round(c._radius),1),M="a"+p+","+(Math.max(Math.round(c._radiusY),1)||p)+" 0 1,0 ",E=c._empty()?"M0 0":"M"+(u.x-p)+","+u.y+M+2*p+",0 "+M+2*-p+",0 ";this._setPath(c,E)},_setPath:function(c,u){c._path.setAttribute("d",u)},_bringToFront:function(c){Ps(c._path)},_bringToBack:function(c){Ia(c._path)}});function xn(c){return re.svg||re.vml?new Ge(c):null}re.vml&&Ge.include(dt),Rt.include({getRenderer:function(c){var u=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(c){if("overlayPane"===c||void 0===c)return!1;var u=this._paneRenderers[c];return void 0===u&&(u=this._createRenderer({pane:c}),this._paneRenderers[c]=u),u},_createRenderer:function(c){return this.options.preferCanvas&&mg(c)||xn(c)}});var Hn=qe.extend({initialize:function(c,u){qe.prototype.initialize.call(this,this._boundsToLatLngs(c),u)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return[(c=Wt(c)).getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});Ge.create=Pn,Ge.pointsToPath=Op,Jr.geometryToLayer=Na,Jr.coordsToLatLng=to,Jr.coordsToLatLngs=as,Jr.latLngToCoords=Ad,Jr.latLngsToCoords=Zl,Jr.getFeature=ls,Jr.asFeature=Xl,Rt.mergeOptions({boxZoom:!0});var sr=Pr.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){Lt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Fi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ji(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||1!==c.which&&1!==c.button)return!1;this._clearDeferredResetState(),this._resetState(),os(),_i(),this._startPoint=this._map.mouseEventToContainerPoint(c),Lt(document,{contextmenu:Pa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=si("div","leaflet-zoom-box",this._container),Jt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var u=new Wi(this._point,this._startPoint),p=u.getSize();ln(this._box,u.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(ji(this._box),Ii(this._container,"leaflet-crosshair")),$i(),ve(),Fi(document,{contextmenu:Pa,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if((1===c.which||1===c.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(Di(this._resetState,this),0);var u=new nr(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(c){27===c.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Rt.addInitHook("addHandler","boxZoom",sr),Rt.mergeOptions({doubleClickZoom:!0});var lf=Pr.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var u=this._map,p=u.getZoom(),x=u.options.zoomDelta,M=c.originalEvent.shiftKey?p-x:p+x;"center"===u.options.doubleClickZoom?u.setZoom(M):u.setZoomAround(c.containerPoint,M)}});Rt.addInitHook("addHandler","doubleClickZoom",lf),Rt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var cf=Pr.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new De(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Jt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ii(this._map._container,"leaflet-grab"),Ii(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=Wt(this._map.options.maxBounds);this._offsetLimit=ir(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var u=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(u),this._prunePositions(u)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,u){return c-(c-u)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var c=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;c.x<u.min.x&&(c.x=this._viscousLimit(c.x,u.min.x)),c.y<u.min.y&&(c.y=this._viscousLimit(c.y,u.min.y)),c.x>u.max.x&&(c.x=this._viscousLimit(c.x,u.max.x)),c.y>u.max.y&&(c.y=this._viscousLimit(c.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,u=Math.round(c/2),p=this._initialWorldOffset,x=this._draggable._newPos.x,M=(x-u+p)%c+u-p,E=(x+u+p)%c-u-p,V=Math.abs(M+p)<Math.abs(E+p)?M:E;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=V},_onDragEnd:function(c){var u=this._map,p=u.options,x=!p.inertia||c.noInertia||this._times.length<2;if(u.fire("dragend",c),x)u.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),V=p.easeLinearity,X=M.multiplyBy(V/((this._lastTime-this._times[0])/1e3)),W=X.distanceTo([0,0]),ut=Math.min(p.inertiaMaxSpeed,W),Ft=X.multiplyBy(ut/W),ue=ut/(p.inertiaDeceleration*V),ee=Ft.multiplyBy(-ue/2).round();ee.x||ee.y?(ee=u._limitOffset(ee,u.options.maxBounds),kn(function(){u.panBy(ee,{duration:ue,easeLinearity:V,noMoveStart:!0,animate:!0})})):u.fire("moveend")}}});Rt.addInitHook("addHandler","dragging",cf),Rt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Jl=Pr.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),Lt(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Fi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,u=document.documentElement,p=c.scrollTop||u.scrollTop,x=c.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(x,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var x,M,u=this._panKeys={},p=this.keyCodes;for(x=0,M=p.left.length;x<M;x++)u[p.left[x]]=[-1*c,0];for(x=0,M=p.right.length;x<M;x++)u[p.right[x]]=[c,0];for(x=0,M=p.down.length;x<M;x++)u[p.down[x]]=[0,c];for(x=0,M=p.up.length;x<M;x++)u[p.up[x]]=[0,-1*c]},_setZoomDelta:function(c){var x,M,u=this._zoomKeys={},p=this.keyCodes;for(x=0,M=p.zoomIn.length;x<M;x++)u[p.zoomIn[x]]=c;for(x=0,M=p.zoomOut.length;x<M;x++)u[p.zoomOut[x]]=-c},_addHooks:function(){Lt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Fi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var x,u=c.keyCode,p=this._map;if(u in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(x=this._panKeys[u],c.shiftKey&&(x=Me(x).multiplyBy(3)),p.options.maxBounds&&(x=p._limitOffset(Me(x),p.options.maxBounds)),p.options.worldCopyJump){var M=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(x)));p.panTo(M)}else p.panBy(x)}else if(u in this._zoomKeys)p.setZoom(p.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[u]);else{if(27!==u||!p._popup||!p._popup.options.closeOnEscapeKey)return;p.closePopup()}Pa(c)}}});Rt.addInitHook("addHandler","keyboard",Jl),Rt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pg=Pr.extend({addHooks:function(){Lt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Fi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var u=x0(c),p=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var x=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(Di(this._performZoom,this),x),Pa(c)},_performZoom:function(){var c=this._map,u=c.getZoom(),p=this._map.options.zoomSnap||0;c._stop();var M=4*Math.log(2/(1+Math.exp(-Math.abs(this._delta/(4*this._map.options.wheelPxPerZoomLevel)))))/Math.LN2,E=p?Math.ceil(M/p)*p:M,V=c._limitZoom(u+(this._delta>0?E:-E))-u;this._delta=0,this._startTime=null,V&&("center"===c.options.scrollWheelZoom?c.setZoom(u+V):c.setZoomAround(this._lastMousePos,u+V))}});Rt.addInitHook("addHandler","scrollWheelZoom",pg);Rt.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var qi=Pr.extend({addHooks:function(){Lt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Fi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),1===c.touches.length){var u=c.touches[0];this._startPos=this._newPos=new Ae(u.clientX,u.clientY),this._holdTimeout=setTimeout(Di(function(){this._cancel(),this._isTapValid()&&(Lt(document,"touchend",Un),Lt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),600),Lt(document,"touchend touchcancel contextmenu",this._cancel,this),Lt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){Fi(document,"touchend",Un),Fi(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),Fi(document,"touchend touchcancel contextmenu",this._cancel,this),Fi(document,"touchmove",this._onMove,this)},_onMove:function(c){var u=c.touches[0];this._newPos=new Ae(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,u){var p=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});p._simulated=!0,u.target.dispatchEvent(p)}});Rt.addInitHook("addHandler","tapHold",qi),Rt.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var Pt=Pr.extend({addHooks:function(){Jt(this._map._container,"leaflet-touch-zoom"),Lt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ii(this._map._container,"leaflet-touch-zoom"),Fi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var u=this._map;if(c.touches&&2===c.touches.length&&!u._animatingZoom&&!this._zooming){var p=u.mouseEventToContainerPoint(c.touches[0]),x=u.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),"center"!==u.options.touchZoom&&(this._pinchStartLatLng=u.containerPointToLatLng(p.add(x)._divideBy(2))),this._startDist=p.distanceTo(x),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),Lt(document,"touchmove",this._onTouchMove,this),Lt(document,"touchend touchcancel",this._onTouchEnd,this),Un(c)}},_onTouchMove:function(c){if(c.touches&&2===c.touches.length&&this._zooming){var u=this._map,p=u.mouseEventToContainerPoint(c.touches[0]),x=u.mouseEventToContainerPoint(c.touches[1]),M=p.distanceTo(x)/this._startDist;if(this._zoom=u.getScaleZoom(M,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&M<1||this._zoom>u.getMaxZoom()&&M>1)&&(this._zoom=u._limitZoom(this._zoom)),"center"===u.options.touchZoom){if(this._center=this._startLatLng,1===M)return}else{var E=p._add(x)._divideBy(2)._subtract(this._centerPoint);if(1===M&&0===E.x&&0===E.y)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(E),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),kr(this._animRequest);var V=Di(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=kn(V,this,!0),Un(c)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,kr(this._animRequest),Fi(document,"touchmove",this._onTouchMove,this),Fi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Rt.addInitHook("addHandler","touchZoom",Pt),Rt.BoxZoom=sr,Rt.DoubleClickZoom=lf,Rt.Drag=cf,Rt.Keyboard=Jl,Rt.ScrollWheelZoom=pg,Rt.TapHold=qi,Rt.TouchZoom=Pt,It.Bounds=Wi,It.Browser=re,It.CRS=gi,It.Canvas=Oe,It.Circle=Qr,It.CircleMarker=Ed,It.Class=Uo,It.Control=Mo,It.DivIcon=ug,It.DivOverlay=Co,It.DomEvent=MD,It.DomUtil=Se,It.Draggable=De,It.Evented=Pl,It.FeatureGroup=Vn,It.GeoJSON=Jr,It.GridLayer=Ql,It.Handler=Pr,It.Icon=Y,It.ImageOverlay=Yl,It.LatLng=pi,It.LatLngBounds=nr,It.Layer=Or,It.LayerGroup=Kr,It.LineUtil=DD,It.Map=Rt,It.Marker=Fa,It.Mixin=rg,It.Path=ss,It.Point=Ae,It.PolyUtil=sg,It.Polygon=qe,It.Polyline=cn,It.Popup=Kl,It.PosAnimation=gr,It.Projection=Cd,It.Rectangle=Hn,It.Renderer=Ho,It.SVG=Ge,It.SVGOverlay=dg,It.TileLayer=Ua,It.Tooltip=Rd,It.Transformation=Ol,It.Util=Fh,It.VideoOverlay=af,It.bind=Di,It.bounds=ir,It.canvas=mg,It.circle=function Td(c,u,p){return new Qr(c,u,p)},It.circleMarker=function I0(c,u){return new Ed(c,u)},It.control=yd,It.divIcon=function hg(c){return new ug(c)},It.extend=mi,It.featureGroup=function(c,u){return new Vn(c,u)},It.geoJSON=Ba,It.geoJson=cg,It.gridLayer=function L0(c){return new Ql(c)},It.icon=function lg(c){return new Y(c)},It.imageOverlay=function(c,u,p){return new Yl(c,u,p)},It.latLng=ti,It.latLngBounds=Wt,It.layerGroup=function(c,u){return new Kr(c,u)},It.map=function SD(c,u){return new Rt(c,u)},It.marker=function ql(c,u){return new Fa(c,u)},It.point=Me,It.polygon=function Dd(c,u){return new qe(c,u)},It.polyline=function So(c,u){return new cn(c,u)},It.popup=function(c,u){return new Kl(c,u)},It.rectangle=function Va(c,u){return new Hn(c,u)},It.setOptions=Ui,It.stamp=ri,It.svg=xn,It.svgOverlay=function eo(c,u,p){return new dg(c,u,p)},It.tileLayer=Ke,It.tooltip=function(c,u){return new Rd(c,u)},It.transformation=Ll,It.version="1.9.4",It.videoOverlay=function k0(c,u,p){return new af(c,u,p)};var Ie=window.L;It.noConflict=function(){return window.L=Ie,this},window.L=It}(Ap)}},Dp=>{Dp(Dp.s=504)}]);